{"code":"!function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=5)}([function(e,t,a){(function(e){function a(e,t){for(var a=0,n=e.length-1;n>=0;n--){var o=e[n];\".\"===o?e.splice(n,1):\"..\"===o?(e.splice(n,1),a++):a&&(e.splice(n,1),a--)}if(t)for(;a--;a)e.unshift(\"..\");return e}function n(e,t){if(e.filter)return e.filter(t);for(var a=[],n=0;n<e.length;n++)t(e[n],n,e)&&a.push(e[n]);return a}t.resolve=function(){for(var t=\"\",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var r=s>=0?arguments[s]:e.cwd();if(\"string\"!=typeof r)throw new TypeError(\"Arguments to path.resolve must be strings\");r&&(t=r+\"/\"+t,o=\"/\"===r.charAt(0))}return(o?\"/\":\"\")+(t=a(n(t.split(\"/\"),(function(e){return!!e})),!o).join(\"/\"))||\".\"},t.normalize=function(e){var s=t.isAbsolute(e),r=\"/\"===o(e,-1);return(e=a(n(e.split(\"/\"),(function(e){return!!e})),!s).join(\"/\"))||s||(e=\".\"),e&&r&&(e+=\"/\"),(s?\"/\":\"\")+e},t.isAbsolute=function(e){return\"/\"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e})).join(\"/\"))},t.relative=function(e,a){function n(e){for(var t=0;t<e.length&&\"\"===e[t];t++);for(var a=e.length-1;a>=0&&\"\"===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var o=n(e.split(\"/\")),s=n(a.split(\"/\")),r=Math.min(o.length,s.length),i=r,l=0;l<r;l++)if(o[l]!==s[l]){i=l;break}var c=[];for(l=i;l<o.length;l++)c.push(\"..\");return(c=c.concat(s.slice(i))).join(\"/\")},t.sep=\"/\",t.delimiter=\":\",t.dirname=function(e){if(\"string\"!=typeof e&&(e+=\"\"),0===e.length)return\".\";for(var t=e.charCodeAt(0),a=47===t,n=-1,o=!0,s=e.length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!o){n=s;break}}else o=!1;return-1===n?a?\"/\":\".\":a&&1===n?\"/\":e.slice(0,n)},t.basename=function(e,t){var a=function(e){\"string\"!=typeof e&&(e+=\"\");var t,a=0,n=-1,o=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!o){a=t+1;break}}else-1===n&&(o=!1,n=t+1);return-1===n?\"\":e.slice(a,n)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){\"string\"!=typeof e&&(e+=\"\");for(var t=-1,a=0,n=-1,o=!0,s=0,r=e.length-1;r>=0;--r){var i=e.charCodeAt(r);if(47!==i)-1===n&&(o=!1,n=r+1),46===i?-1===t?t=r:1!==s&&(s=1):-1!==t&&(s=-1);else if(!o){a=r+1;break}}return-1===t||-1===n||0===s||1===s&&t===n-1&&t===a+1?\"\":e.slice(t,n)};var o=\"b\"===\"ab\".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(2))},function(e,t,a){\"use strict\";t.decode=t.parse=a(3),t.encode=t.stringify=a(4)},function(e,t){var a,n,o=e.exports={};function s(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(a===setTimeout)return setTimeout(e,0);if((a===s||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a=\"function\"==typeof setTimeout?setTimeout:s}catch(e){a=s}try{n=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var l,c=[],d=!1,f=-1;function m(){d&&l&&(d=!1,l.length?c=l.concat(c):f=-1,c.length&&u())}function u(){if(!d){var e=i(m);d=!0;for(var t=c.length;t;){for(l=c,c=[];++f<t;)l&&l[f].run();f=-1,t=c.length}l=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function p(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new h(e,t)),1!==c.length||d||i(u)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title=\"browser\",o.browser=!0,o.env={},o.argv=[],o.version=\"\",o.versions={},o.on=p,o.addListener=p,o.once=p,o.off=p,o.removeListener=p,o.removeAllListeners=p,o.emit=p,o.prependListener=p,o.prependOnceListener=p,o.listeners=function(e){return[]},o.binding=function(e){throw new Error(\"process.binding is not supported\")},o.cwd=function(){return\"/\"},o.chdir=function(e){throw new Error(\"process.chdir is not supported\")},o.umask=function(){return 0}},function(e,t,a){\"use strict\";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,a,s){t=t||\"&\",a=a||\"=\";var r={};if(\"string\"!=typeof e||0===e.length)return r;var i=/\\+/g;e=e.split(t);var l=1e3;s&&\"number\"==typeof s.maxKeys&&(l=s.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var d=0;d<c;++d){var f,m,u,h,p=e[d].replace(i,\"%20\"),g=p.indexOf(a);g>=0?(f=p.substr(0,g),m=p.substr(g+1)):(f=p,m=\"\"),u=decodeURIComponent(f),h=decodeURIComponent(m),n(r,u)?o(r[u])?r[u].push(h):r[u]=[r[u],h]:r[u]=h}return r};var o=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,a){\"use strict\";var n=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e:\"\";default:return\"\"}};e.exports=function(e,t,a,i){return t=t||\"&\",a=a||\"=\",null===e&&(e=void 0),\"object\"==typeof e?s(r(e),(function(r){var i=encodeURIComponent(n(r))+a;return o(e[r])?s(e[r],(function(e){return i+encodeURIComponent(n(e))})).join(t):i+encodeURIComponent(n(e[r]))})).join(t):i?encodeURIComponent(n(i))+a+encodeURIComponent(n(e)):\"\"};var o=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var a=[],n=0;n<e.length;n++)a.push(t(e[n],n));return a}var r=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},function(e,t,a){\"use strict\";a.r(t),a.d(t,\"mainLoop\",(function(){return At})),a.d(t,\"endTutorial\",(function(){return qt}));const n={player:{name:name,gold:100,exp:0,level:1,sp:0,ap:0,sp_investment:{health:0,mana:0,atk:0,def:0,matk:0,mdef:0,speed:0},stats:{health:60,current_health:60,max_sp:100,max_mana:100,current_mana:100,max_stamina:100,current_stamina:100,atk:300,def:30,matk:30,mdef:30,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100}},skills:[\"attack\",\"guard\"],equips:{weapon:void 0,head:void 0,body:void 0,legs:void 0,misc1:void 0,misc2:void 0},pouch:[]},inventory:[],library:[\"attack\",\"guard\"],recipes:[],maps:{floor0:[...Array(46)].map(e=>Array(41).fill(void 0)),floor1:[...Array(46)].map(e=>Array(41).fill(void 0))}},max_floor:1,current_floor:1,first_time:{explore:!0,equip:!0,stats:!0,crafting:!0,game:!0,combat:!0},version:.12,unlocked:{explore:!0,shop:!0,inventory:!0,stats:!0,crafting:!0,settings:!0,ascend:!0},tutorials:[],special:{doingTutorial:!1,clearedTutorialTrue:!1,clearedTutorial:!1},presents:[]},o={messageDelay:.8,battleMessageDelay:.6,scrollStyle:\"input\",toggleShortcut:\"\",scrollLimit:200,mainTextSize:\"17px\",miscTextSize:\"17px\",statsTextSize:\"16px\"},s={1:100,2:400,3:800,4:1100,5:1500,6:2e3,7:3e3,8:3500,9:4e3,10:4500,11:5e3,12:5500,13:6100,14:6700,15:7500,16:8500,17:9600,18:10700,19:12e3,20:14e3,21:16500,22:19e3,23:23e3,24:26e3,25:3e4},r={1:2,2:2,3:3,4:4,5:5,6:6,7:7,8:7,9:8,9:8,10:9,11:9,12:9,13:9,14:10,15:10,16:10,17:11,18:11,19:11,20:12,21:12,22:12,23:13,24:14,25:15},i={damageCap:999,minBuffMod:.1,maxBuffMod:5,minElementMod:-99,maxElementMod:500,pouchMaxStorage:3},l={adventurer:{name:\"adventurer\",requirements:{skills:[],level:1,flags:[]},cost:{gold:0,items:[]},skills:[{name:\"boost\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-0\",unlocked:!1,unlearnable:!0},{name:\"check\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:25,items:[],ap:1},code:\"adventurer-1\",unlocked:!1,unlearnable:!0},{name:\"brutal_swipe\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-2\",unlocked:!1,unlearnable:!0},{name:\"dagger_throw\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-3\",unlocked:!1,unlearnable:!0},{name:\"piercing_dagger_throw\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-4\",unlocked:!1,unlearnable:!0},{name:\"smokescreen\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-5\",unlocked:!1,unlearnable:!0},{name:\"hex\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:25,items:[],ap:1},code:\"adventurer-6\",unlocked:!1,unlearnable:!0}],unlocked:!0,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},mage:{name:\"mage\",desc:\"A magic-based discipline that has access to elemental attacks of the Fire, Water and Earth elements. Using one grants the user an 'elemental charge', which can be consumed using 'Enforce Energy' or 'Imbue Energy' in order to apply certain effects. Charges can be fused by using different elemental attacks while having certain charges already applied. By using skills in certain orders to create special charges, the mage can induce powerful effects and deal high damage.\",requirements:{skills:[],level:4,flags:[]},cost:{gold:100,items:[]},skills:[{name:\"fireball\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-0\",unlocked:!1,unlearnable:!0},{name:\"icebolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-1\",unlocked:!1,unlearnable:!0},{name:\"lesser_quake\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-2\",unlocked:!1,unlearnable:!0},{name:\"imbue_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-3\",unlocked:!1,unlearnable:!0},{name:\"enforce_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-4\",unlocked:!1,unlearnable:!0},{name:\"blood_pact\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-5\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},guardian:{name:\"guardian\",desc:\"A primarily defensive discipline that focuses on lasting and keeping itself alive with by increasing its defence, removing debuffs from themselves and removing buffs from the enemy. When needed, they can use the powerful 'Sentinel Blow'  which deals damage based on the user's defence stat instead of attack to deal high amounts of damage.\",requirements:{skills:[],level:4,flags:[]},cost:{gold:100,items:[]},skills:[{name:\"sentinel_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-0\",unlocked:!1,unlearnable:!0},{name:\"stalwart_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-1\",unlocked:!1,unlearnable:!0},{name:\"debilitate\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-2\",unlocked:!1,unlearnable:!0},{name:\"enduring_fortress\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-3\",unlocked:!1,unlearnable:!0},{name:\"sacred_shield\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-4\",unlocked:!1,unlearnable:!0},{name:\"guard_conversion\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-5\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},ninja:{name:\"ninja\",desc:\"Probably the most complex of the starter disciplines, the ninja uses skills that apply certain buffs and debuffs, which can be 'chained' into other skills while those buffs or debuffs are applied for special effects. When the ninja has applied a sufficient number of buffs or debuffs, they can fuse them into one powerful buff or debuff using the 'Enforce Infliction' and 'Imbue Infliction' skills, so that they can stack them all over again. 'Shadow Strike' serves as a powerful attack that when used right, can grant SP to further extend the user's turn to deal greater damage.\",requirements:{skills:[],level:4,flags:[]},cost:{gold:100,items:[]},skills:[{name:\"swift_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-0\",unlocked:!1,unlearnable:!0},{name:\"shinobi_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-1\",unlocked:!1,unlearnable:!0},{name:\"crippling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-2\",unlocked:!1,unlearnable:!0},{name:\"enfeebling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-3\",unlocked:!1,unlearnable:!0},{name:\"imbue_infliction\",requirements:{skills:[],level:3,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-4\",unlocked:!1,unlearnable:!0},{name:\"enforce_infliction\",requirements:{skills:[],level:4,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-5\",unlocked:!1,unlearnable:!0},{name:\"shadow_strike\",requirements:{skills:[],level:4,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-6\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},lore:{name:\"lore\",requirements:{skills:[],level:1,flags:[]},cost:{gold:0,items:[]},skills:[{name:\"boost\",requirements:{skills:[],level:1,flags:[]},disciple:\"lore\",cost:{gold:0,items:[],ap:1},code:\"lore-0\",unlocked:!1,unlearnable:!0},{name:\"check\",requirements:{skills:[],level:1,flags:[]},disciple:\"lore\",cost:{gold:0,items:[],ap:1},code:\"lore-1\",unlocked:!1,unlearnable:!0},{name:\"forgotten_haste\",requirements:{skills:[],level:1,flags:[]},disciple:\"lore\",cost:{gold:0,items:[],ap:0},code:\"lore-2\",unlocked:!1,unlearnable:!0},{name:\"divine_protection\",requirements:{skills:[],level:1,flags:[\"f0_fought_young_wolf\"]},disciple:\"lore\",cost:{gold:0,items:[],ap:0},code:\"lore-3\",unlocked:!1,unlearnable:!0},{name:\"guard_crush\",requirements:{skills:[],level:1,flags:[\"f0_fought_young_wolf\"]},disciple:\"lore\",cost:{gold:0,items:[],ap:0},code:\"lore-4\",unlocked:!1,unlearnable:!0},{name:\"smite\",requirements:{skills:[],level:1,flags:[\"f0_fought_young_wolf\"]},disciple:\"lore\",cost:{gold:0,items:[],ap:0},code:\"lore-5\",unlocked:!1,unlearnable:!0}],unlocked:!0,visible:!0,complete:!1,conditions:{level:1,discplines:[]}}},c={f0_done_intro:{desc:\"Complete the intro on floor zero.\",complete:!1},f0_fought_slime:{desc:\"Fight the slime on floor zero.\",complete:!1},f0_learnt_prerequisite_skills_1:{desc:\"Learn boost and check on floor zero.\",complete:!1},f0_fought_young_wolf:{desc:\"Fight the young wolf on floor zero.\",complete:!1},f0_learnt_prerequisite_skills_2:{desc:\"Learn the remainders of Lore's skills on floor zero.\",complete:!1},f0_been_taught_crafting:{desc:\"Be told about crafting by Lucia.\",complete:!1},f0_crafted_required_items:{desc:\"Crafted a wooden sword and health potion.\",complete:!1},f0_passed_t4:{desc:\"Show Lucia the health potion and wooden sword you've crafted on floor zero.\",complete:!1},f0_fought_dreadful_wolf:{desc:\"Defeat the dreadful wolf on floor zero\",complete:!1},f0_fought_charon:{desc:\"Defeat the myserious enemy on floor zero.\",complete:!1},f1_spoken_to_tutorial_man:{desc:\"Speak to the tutorial man on floor one.\",complete:!1},beatSlime:{desc:\"Defeat the slime on floor one.\",complete:!1},f1_spoken_to_little_girl:{desc:\"Speak to a little girl on floor one about her slime problem.\",complete:!1},f1_helped_little_girl:{desc:\"Help a little girl on floor one with her slime problem.\",complete:!1},f1_spoken_to_docile_slime:{desc:\"Interact with a docile slime on floor one.\",complete:!1},f1_helped_docile_slime:{desc:\"Help a docile slime on floor one gather their bretheren.\",complete:!1},f1_spoken_to_rude_kid:{desc:\"Speak to a rude kid on floor one.\",complete:!1},f1_kicked_rude_kids_shin:{desc:\"Kick the shin of a rude kid on floor one.\",complete:!1},f1_extended_convo_with_rude_kid:{desc:\"Have an extended conversation with a rude kid on floor one.\",complete:!1},f1_spoken_to_little_boy:{desc:\"Speak to a young boy in the dark forest of floor one.\",complete:!1},f1_helped_little_boy:{desc:\"Help the young boy in the dark forest of floor one.\",complete:!1},f1_spoken_to_wanderer_collector:{desc:\"Speak to the collector of wanderer memorabilia on floor one.\",complete:!1},f1_helped_wanderer_collector:{desc:\"Help out the collector of wanderer memorabilia on floor one.\",complete:!1},f1_met_wanderer_at_statue:{desc:\"Meet a wanderer at the statue of Lucia, the Solace Goddess on floor one.\",complete:!1},f1_spoken_to_lost_teenager:{desc:\"Speak to a lost teenager in the forest on floor one.\",complete:!1},f1_spoken_to_traveller_woman:{desc:\"Speak to a travelling woman with a green backpack on floor one.\",complete:!1},f1_helped_alchemist_lady:{desc:\"Help an alchemist lady on floor one and in return, be taught how to make crafted health potions.\",complete:!1},f1_spoken_to_alchemist_lady:{desc:\"Speak to an alchemist lady on floor one.\",complete:!1},f1_gotten_beginner_recipes:{desc:\"Receive beginner recipes from the craftswomen in the settlement at floor one.\",complete:!1},f1_gotten_advanced_recipes:{desc:\"Received advanced recipes from the artisan in the settlement at floor one.\",complete:!1},f1_spoken_to_hermit:{desc:\"Speak to the travelling hermit on floor one.\",complete:!1},f1_spoken_to_person_looking_for_settlement:{desc:\"Speak to the person looking for the settlement on floor one.\",complete:!1},f1_helped_person_looking_for_settlement:{desc:\"Help the person looking for the settlement on floor one.\",complete:!1},f1_taken_crafted_sword:{desc:\"Successfully taken a crafted sword in the forest on floor one.\",complete:!1},f1_bought_from_teenage_mage:{desc:\"Buy a cheat sheet from a teenage mage on floor one.\",complete:!1},f1_spoken_to_forest_craftsman:{desc:\"Speak to the craftsman in the forest settlement on floor one.\",complete:!1},f1_spoken_to_aina:{desc:\"Speak to Aina in the forest settlement on the floor one\",complete:!1},f1_spoken_to_sora:{desc:\"Speak to Sora in the forest settlement on floor one.\",complete:!1},f1_spoken_to_daryl:{desc:\"Speak to the teenage mage in the forest area on floor one.\",complete:!1},f1_picked_up_hydra_staff:{desc:\"Pick up a hydra staff on floor one.\",complete:!1},f1_picked_up_crown_of_darkness:{desc:\"Pick up a crown of darkness on floor one.\",complete:!1},f1_picked_up_simple_sword:{desc:\"Pick up a simple sword on floor one.\",complete:!1},f1_picked_up_damaged_helm:{desc:\"Pick up a damaged helm on floor one.\",complete:!1},f1_picked_up_metal_stave:{desc:\"Pick up a metal stave on floor one.\",complete:!1},f1_picked_up_silver_axe:{desc:\"Pick up a silver axe on floor one.\",complete:!1},f1_picked_up_silver_dagger:{desc:\"Pick up a silver dagger on floor one.\",complete:!1},f1_picked_up_pickaxe:{desc:\"Pick up a pickaxe on floor one.\",complete:!1},f1_picked_up_feathervine_sword:{desc:\"Pick up a feathervine sword on floor one.\",complete:!1},f1_picked_up_silver_helm:{desc:\"Pick up a silver helm on floor one.\",complete:!1},f1_picked_up_wolfhide_cap:{desc:\"Pick up a wolfhide cap on floor one.\",complete:!1},f1_picked_up_vine_helmet:{desc:\"Pick up a vine helmet on floor one.\",complete:!1},f1_picked_up_ninja_headcloak:{desc:\"Pick up a ninja headcloak on floor one.\",complete:!1},f1_picked_up_makeshift_steel_armour:{desc:\"Pick up a makeshift steel armour on floor one.\",complete:!1},f1_picked_up_vine_armour:{desc:\"Pick up a vine armour on floor one.\",complete:!1},f1_picked_up_vine_pantaloons:{desc:\"Pick up a vine pantaloons on floor one.\",complete:!1},f1_picked_up_silver_legwear:{desc:\"Pick up a silver legwear on floor one.\",complete:!1},f1_picked_up_slime_ball:{desc:\"Pick up a slime ball on floor one.\",complete:!1},f1_picked_up_weak_vine:{desc:\"Pick up a weak vine on floor one.\",complete:!1},f1_picked_up_hempweed_ligament:{desc:\"Pick up a hempweed ligament on floor one.\",complete:!1},f1_picked_up_wood:{desc:\"Pick up a wood on floor one.\",complete:!1},f1_picked_up_steel:{desc:\"Pick up a steel on floor one.\",complete:!1},f1_picked_up_health_potion:{desc:\"Pick up a health potion on floor one.\",complete:!1},f1_picked_up_greater_health_potion:{desc:\"Pick up a greater health potion on floor one.\",complete:!1},f1_picked_up_crafted_health_potion:{desc:\"Pick up a crafted health potion on floor one.\",complete:!1},f1_picked_up_greater_mana_potion:{desc:\"Pick up a crafted mana potion on floor one.\",complete:!1},f1_picked_up_mana_potion:{desc:\"Pick up a mana potion on floor one.\",complete:!1},f1_picked_up_earthen_shield_potion:{desc:\"Pick up an earthen shield potion on floor one.\",complete:!1},f1_picked_up_brown_pelt:{desc:\"Pick up some brown pelt on floor one.\",complete:!1},f1_picked_up_venomous_claw:{desc:\"Pick up a venomous claw on floor one.\",complete:!1},f1_picked_up_crafted_mana_potion:{desc:\"Pick up a crafted mana potion on floor one.\",complete:!1},f1_picked_up_forest_explorer_daggers:{desc:\"Pick up a forest explorer daggers on floor one.\",complete:!1},f1_picked_up_forest_explorer_cap:{desc:\"Pick up a forest explorer cap on floor one.\",complete:!1},f1_picked_up_forest_explorer_armour:{desc:\"Pick up a forest explorer armour on floor one.\",complete:!1},f1_picked_up_forest_explorer_pants:{desc:\"Pick up a forest explorer pants on floor one.\",complete:!1},f1_picked_up_forest_explorer_pendant:{desc:\"Pick up a forest explorer pendant on floor one.\",complete:!1},f1_picked_up_forest_explorer_charm:{desc:\"Pick up a forest explorer charm on floor one.\",complete:!1}},d={mainBox:document.querySelector(\".main\"),main:document.querySelector(\".mainText\"),input:document.querySelector(\".main-input\"),form:document.querySelector(\".form-input\"),mainStats:document.querySelector(\"#mainstats\"),elementalStats:document.querySelector(\"#elemstats\"),playerStats:document.querySelector(\"#playerstats\"),inventory:document.querySelector(\"#inventory\"),minimap:document.querySelector(\"#minimapview\"),miscView:document.querySelector(\"#miscview\")},f=[\"skills\",\"sp\",\"back\"],m=[\"message delay\",\"change shortcut\",\"test message\",\"toggle scroll\",\"save\",\"see music credits\",\"back\"],u=[\"health\",\"mana\",\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"],h={none:\"#FFFFFF\",physical:\"#737373\",fire:\"#FF2D00\",water:\"#000FFF\",earth:\"#7F2C00\",thunder:\"#DAAB00\",dark:\"#2A003D\",light:\"#E8CC3E\",wind:\"#8BF020\"},p=\"<br> --------------------------------<br><br>\",g={slow:.8,medium:.6,fast:.4},y={slow:.8,medium:.6,fast:.4},_={Rshift:\"ShiftRight\",Lshift:\"ShiftLeft\",Lctrl:\"ControlLeft\",Rctrl:\"ControlRight\",Altleft:\"AltLeft\",Altright:\"AltRight\",\"¬\":\"Backquote\"},b={gameIntroPartOne:['<br><b>IMPORTANT!!! THIS GAME IS CURRENTLY UNDERGOING CLOSED TESTING. YOU CAN STILL PLAY, BUT PLEASE JOIN THE DISCORD OR LET \"IUC#1105\" KNOW IF YOU WOULD LIKE TO TEST. I CANNOT GUARANTEE AN ABSENCE OF BUGS OR OTHER ISSUES.</b>',\"<br><b>You may want to make use of <u>Super Commands</u> to enhance your experience. They can do things like resize the text, change the music volume and more. To see how, use the help module by inputting 'help' or 'sc-help'.</b>\",p+\"Welcome to Tower RPG (TRPG!) This is an entirely text-based game focused around combat.\",\"<br>The game is centered around Floors. The goal of the game is to defeat the boss of each floor in order to advance to the next. To do so, you will find yourself exploring, fighting and getting stronger on each floor.\",\"<br>If you enjoy the game or are interested in its progress, please join the discord: <b>https://discord.com/invite/w73Z44z</b>. (see at any time by inputting 'sc-discord') It's where I will post updates regarding the game, ask for help testing it, where you can talk with others about it and do various other things.\",\"<br>Anyways, I hope you enjoy Tower RPG!\"],gameIntroPartTwo:[p+\"There is a tutorial for this game that will teach you the basics.\",\"<br>If you haven't played this game before, it is <b>STRONGLY RECOMMENEDED</b> that you play through the tutorial. It is a short series of events wherein you follow somebody from TRPG history. Gold, EXP, etc. obtained in the tutorial will not carry over to your account, but you will receive a small reward when you complete the tutorial.\",\"<br>Also, because of the nature of the tutorial, it cannot be replayed or played after starting the game without resetting your data. Please take this into consideration.\",\"<br>Would you like to play through the tutorial?\",\"<br> - yes\",\" - no\"],inventory_1:[p+\"Here, you can equip and unequip items. The instructions should explain most things.\",\"<br>While you're here, I'll briefly explain about the pouch.\",\"<br>While exploring, you can use items like health potions and mana potions to keep yourself alive. But your inventory is inaccessible during combat.\",\"<br>To use items during battle, you need to move them from your inventory to your <b>pouch</b>. Items in your pouch can be used in combat (at the cost of an action) by inputting 'p' or 'pouch' during battle.\",\"<br>Your pouch can hold up to 3 different items, and different items have different 'Pouch Limits'. For example, you can have up to 5 Health Potions in your pouch, but no more than 3 Stamina Vials.\",\"<br>Equip the Wooden Sword you should have crafted, then add the Health Potion you should've crafted to your pouch. Then, proceed to the north.\"],stats_1:[p+\"Here, you can equip and unequip skills, and also allocate and reset your SP (stat points, not the SP used in battle!)\",\"<br>When customizing your skills, go to <b>equipped</b> to equip skills, unequip skills, and forget skills. Go to <b>learn</b> to unlock disciplines (which contain skills) and to unlock skills. Skills cost AP to unlock, which is earned through levelling up.\",\"<br>Skills are contained within <b>Disciplines</b>, which also have to be unlocked. You may find new disciplines available as you level up.\",\"<br>You will have just enough AP to unlock <u>Boost</u> and <u>Check</u> which are two helpful staple skills. Learn them, along with <u>Forgotten Haste</u> before continuing with your adventure.\",\"<br>You can also allocate and reset Stat Points which you earn upon levelling up to increase specific stats further. But this is simple enough, so I'll let you figure it out on your own.\",\"<br>If you get confused or lost, just use the Help Module (input 'help' or 'sc-help)\"],crafting_1:[p+\"Welcome to the crafing menu! Here, you can use items you own (along with gold, usually) to craft items.\",\"<br>There isn't much to be said here. Just know that each floor has it's own set of recipes, but you also have \\\"personal recipes\\\", which you can use wherever you are. These have to be unlocked, though, so you won't have any right now.\",\"<br>Once you've crafted the Health Potion and Wooden Sword, navigate to the inventory, where you'll learn how to equip them.\"],battle_1:[p+\"Your first battle! Don't panic, this should be an easy ride. Just remember the following things:\",\"<br><u>You will probably find it very helpful to use Input Shortcut when battling.</u>\",\"<br><b>Skills</b> will display all the skills you have access to and their effects. You will always be able to attack and guard.\",\"<br><b>Status</b> will display all buffs and debuffs applied to your character, and <b>Enemy</b> will do the same for your opponent.\",\"<br><b>Flee</b> will end a fight immediately, but it will be your loss and you will return to the main menu. Don't be a pussy!\",\"<br>Don't worry if there are some things that you don't understand, more will be explained throughout the tutorial. But if you ever do need help, you can open the help module by inputting 'sc-help' or 'help'. Now show this slime who's boss!\"],battle_2:[p+\"OK! You should've gotten the hang of it by now, so I won't keep you for too long.\",'<br>Just note your \"actions\" that will be noted when you start the fight. As you might expect, they are consumed in using items and skills. Once you run out of them, your turn will end.',\"<br>You often will only have one action, but you can gain more using skills - like the 'Boost' skill. For now, you can 'Guard' to gain SP, and then 'Boost' on subsequent turns to deal a burst of high damage!\",\"<br>One more thing-- your 'Speed' stat can help you gain extra actions. If your speed is twice your opponent's or more, you will start the turn with two actions, instead of one.\",\"<br>Use the 'Check' skill to see the opponent's stats. There'll be a lot of info, but for now, just focus on the <b>speed</b> stat of the enemy and any <b>observations</b> you can make. You might be able to find something that will give you a massive advantage in this fight..\"],battle_3:[p+\"It looks like you're in a hurry this time, so I won't keep you for long. There are just a few more things you need to know.\",\"<br>You'll notice the two stats <b>effectiveness</b> and <b>resistance</b> that you have. They're used for resisting and applying debuffs.\",\"<br>When someone tries to apply a debuff on you, the percentage chance of that happening is <u>reduced</u> by your <u>resistance</u>, and <u>increased</u> by their effectiveness. This goes both ways, of course.\",\"<br>So if a debuff has a 50% chance of applying and you have 50 resistance and they have 0 effectiveness, you will always <u>Resist</u> the debuff. But if they have 50 effectiveness and you have 0 resistance, the debuff will always be applied.\",\"<br>100 resistance at this level is enough to easily resist almost all debuffs. Keep that in mind!\",\"<br>Finally, turn your atttention to your <b>Stamina</b>, <b>Mana</b> and <b>SP</b>.\",\"<br>They are all resources for using skills, but all function a little differently:\",\"<br><b>Mana</b> doesn't regenerate at all. <b>Stamina</b> does regenerate (1/10 at the end of each of your turns). <b>SP</b> (Special Points) don't regenerate, and unlike the other two, which refill whenever you're healed, you always start a fight with 0 SP.\",\"<br>I hope you have some pouch items at the ready. Save Lucia no matter what!\"],battle_4:[`<br>${p}We're almost there! I'll just ask you to turn your attention to your <b>Elemental Stats.</b>.`,\"<br>Elemental offence is a percentage applied to damage dealt of that element. Elemental defence is a percentage applied to damage taken of that element.\",\"<br>So if you have 200 fire offence, your fire attacks will deal 2x (200%) damage. If you have 200 fire defence, fire attacks aimed at you will deal 2x (200%) damage. The most straightforward way to alter these is with equippable items.\",\"You've now learned the basics of TRPG. Congratulations, and thanks for playing the tutorial!\",\"<br>What is coming up now is a fight against a fearsome foe. If you'd like to stop here, you will notice that the \\\"ascend\\\" option will be unlocked in the main menu; this is usually used to fight the floor boss, but in this case, it'll just end the demo.\",\"<br>But if you want to prove yourself and see Lore and Lucia's story through to the end, you'll have to beat this boss!\",\"<br>Be aware though, you might not beat it first try. Or second...\",\"<br>I invite you to see what you can do! You can 'ascend' whenever you're ready. Good luck!\"],tutorial_end:[p+\"Congratulations on clearing the tutorial!\",\"<br>There isn't much for me to tell you now. You will find that in your adventures, you will have a lot less guidance. But I believe in you!\",\"<br>One thing you won't have seen in this tutorial is the 'shop' function; in the main menu, you can access a shop selling certain items. The shop is different for each floor.\",\"<br>You will probably find things that will be incredibly useful for your adventures there, so be sure to check it out!\",\"<br>I hope you enjoy tower RPG! I'll give you a little reward for cleaing the demo, and another small reward if you reached the true ending.\",\"<br>This page will now refresh...\"]},k=[\"Main menu theme - Brave Frontier OST - Main Menu\",'Forest theme - \"RPG Maker Music - (FOREST) - On A Quest For Mushrooms\" (https://www.youtube.com/watch?v=Et57WaDFlKk)',\"Battle theme 1 - RPG Maker MV - Battle 1\",'\"Intimidating enemy\" theme - Xenoblade Chronicles Definitive Edition - An Obstacle in Our Path','\"Mechanical Rhythm\" - Xenoblade Chronicles Definitive Edition - Mechanical Rhythm','\"Creator\" - Brave Frontier OST - Creator'],w=(e,t)=>{switch(e){case\"main\":d.main.style.fontSize=t;break;case\"stat\":d.mainStats.style.fontSize=t,d.elementalStats.style.fontSize=t;break;case\"misc\":d.miscView.style.fontSize=t;break;default:console.log(\"invalid input for resizing text\")}},v=e=>{const t=e.stats,a=e.stats.elemental.offence,n=e.stats.elemental.defence,o=`\\n    ${e.name}'s stats <br>\\n    health: ${t.current_health}/${Le.getMaxHealth(e.stats)} <br>\\n    attack: ${t.atk}<br>\\n    defence: ${t.def} <br>\\n    magic attack: ${t.matk}<br>\\n    magic defense: ${t.mdef}<br>\\n    speed: ${t.speed}<br>\\n    critical chance: ${100*t.crit_chance}%<br>\\n    critical damage: ${100*t.crit_damage}%<br>\\n    effectiveness: ${t.effectiveness}%<br>\\n    resistance: ${t.resistance}%<br>\\n    evasion: ${100*t.evasion}%<br>\\n    mana: ${t.current_mana}/${t.max_mana}<br>\\n    stamina: ${t.current_stamina}/${t.max_stamina}<br>\\n    max sp: ${t.max_sp}\\n    `,s=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${a.physical}<br>\\n    fire: ${a.fire}<br>\\n    water: ${a.water}<br>\\n    wind: ${a.wind}<br>\\n    earth: ${a.earth}<br>\\n    thunder: ${a.thunder}<br>\\n    light: ${a.light} <br>\\n    dark: ${a.dark}<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${n.physical}<br>\\n    fire: ${n.fire}<br>\\n    water: ${n.water}<br>\\n    wind: ${n.wind}<br>\\n    earth: ${n.earth}<br>\\n    thunder: ${n.thunder}<br>\\n    light: ${n.light}<br>\\n    dark: ${n.dark}<br>\\n    `;d.mainStats.innerHTML=o,d.elementalStats.innerHTML=s},x=e=>{const t=e.elemental.offence,a=e.elemental.defence,n=Le.calcElementBuffs(e),o=n.offence,s=n.defence,r=Le.calcMod(\"atk\",e),i=Le.calcMod(\"def\",e),l=Le.calcMod(\"matk\",e),c=Le.calcMod(\"mdef\",e),f=Le.calcMod(\"speed\",e),m=Le.calcMod(\"crit_chance\",e),u=Le.calcMod(\"crit_damage\",e),h=Le.calcMod(\"effectiveness\",e),p=Le.calcMod(\"resistance\",e),g=Le.calcMod(\"evasion\",e),y=` \\n    ${e.name}'s stats <br>\\n    health: ${e.health} (${Math.round(e.health/e.max_health*100)}%)<br>\\n    attack: ${Math.round(e.atk*(r+1))} (${Math.round(100+100*r)}%)<br>\\n    defence: ${Math.round(e.def*(i+1))} (${Math.round(100+100*i)}%)<br>\\n    magic attack: ${Math.round(e.matk*(l+1))} (${Math.round(100+100*l)}%)<br>\\n    magic defense: ${Math.round(e.mdef*(c+1))} (${Math.round(100+100*c)}%)<br>\\n    speed: ${Math.round(e.speed*(f+1))} (${Math.round(100+100*f)}%)<br>\\n    critical chance: ${100*(e.crit_chance+m)}% (${m<0?\"\":\"+\"}${Math.round(100*m)}%)<br>\\n    critical damage: ${100*(e.crit_damage+u)}% (${u<0?\"\":\"+\"}${Math.round(100*u)}%)<br>\\n    effectiveness: ${e.effectiveness+h}% (${h<0?\"\":\"+\"}${Math.round(h)}%)<br>\\n    resistance: ${e.resistance+p}% (${p<0?\"\":\"+\"}${Math.round(p)}%)<br>\\n    evasion: ${100*(e.evasion+g)}% (${g<0?\"\":\"+\"}${Math.round(100*g)}%)<br>\\n    mitigation: ${Math.round(100*Le.calcMod(\"mitigation\",e))}%<br>\\n    mana: ${e.mana}/${e.max_mana}<br>\\n    stamina: ${e.stamina}/${e.max_stamina}<br>\\n    sp: ${e.sp}/${e.max_sp}\\n    \\n    `,_=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${t.physical+o.physical} (${o.physical<0?\"\":\"+\"}${o.physical})<br>\\n    fire: ${t.fire+o.fire} (${o.fire<0?\"\":\"+\"}${o.fire})<br>\\n    water: ${t.water+o.water} (${o.water<0?\"\":\"+\"}${o.water})<br>\\n    wind: ${t.wind+o.wind} (${o.wind<0?\"\":\"+\"}${o.wind})<br>\\n    earth: ${t.earth+o.earth} (${o.earth<0?\"\":\"+\"}${o.earth})<br>\\n    thunder: ${t.thunder+o.thunder} (${o.thunder<0?\"\":\"+\"}${o.thunder})<br>\\n    light: ${t.light+o.light} (${o.light<0?\"\":\"+\"}${o.light})<br>\\n    dark: ${t.dark+o.dark} (${o.dark<0?\"\":\"+\"}${o.dark})<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${a.physical+s.physical} (${s.physical<0?\"\":\"+\"}${s.physical})<br>\\n    fire: ${a.fire+s.fire} (${s.fire<0?\"\":\"+\"}${s.fire})<br>\\n    water: ${a.water+s.water} (${s.water<0?\"\":\"+\"}${s.water})<br>\\n    wind: ${a.wind+s.wind} (${s.wind<0?\"\":\"+\"}${s.wind})<br>\\n    earth: ${a.earth+s.earth} (${s.earth<0?\"\":\"+\"}${s.earth})<br>\\n    thunder: ${a.thunder+s.thunder} (${s.thunder<0?\"\":\"+\"}${s.thunder})<br>\\n    light: ${a.light+s.light} (${s.light<0?\"\":\"+\"}${s.light})<br>\\n    dark: ${a.dark+s.dark} (${s.dark<0?\"\":\"+\"}${s.dark})<br>\\n    `;d.mainStats.innerHTML=y,d.elementalStats.innerHTML=_};a(0);const S={charon:()=>{const e=Le.getEnemy();Le.turn%3==0&&0==e.actionsTaken?_t([[\"???: Ahhh. I need energy...\",.2],[\"??? gained 30 SP!\",-.2]],\"outside\",()=>{e.sp+=30,1==qe.boost.cost(e,Le.getPlayerAdd(Le.getPlayer()))?qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Le.turn%4==0&&1==qe.malice.cost(e,Le.getPlayerAdd(Le.getPlayer()))&&0==He(\"enemy\",\"malice\")?qe.malice.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)}):1==qe.boost.cost(e,Le.getPlayerAdd(Le.getPlayer()))?qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Le.turn%4==0&&1==qe.malice.cost(e,Le.getPlayerAdd(Le.getPlayer()))&&0==He(\"enemy\",\"malice\")?qe.malice.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)},dreadful_wolf:()=>{const e=Le.getEnemy();1==Le.turn&&0==e.actionsTaken?qe.monster_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):1==qe.boost.cost(e,Le.getPlayer())?qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Le.turn%3==0&&1==qe.malice.cost(e,Le.getPlayer())&&0==He(\"enemy\",\"malice\")?qe.malice.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)},young_wolf:()=>{const e=Le.getEnemy();1==Le.turn&&0==e.actionsTaken?qe.monster_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):1==qe.boost.cost(e,Le.getPlayer())?qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)},slime:()=>{const e=Le.getEnemy();1==Le.turn&&0==e.actionsTaken?qe.monster_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)},grey_wolf:()=>{const e=Le.getEnemy();1==Le.turn&&0==e.actionsTaken?qe.wolven_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)},brown_bear:()=>{const e=Le.getEnemy();1==Le.turn&&0==e.actionsTaken?qe.monster_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):1==qe.boost.cost(e,Le.getPlayer())?qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Le.turn%3==0&&1==qe.brutal_swipe.cost(e,Le.getPlayer())?qe.brutal_swipe.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)},lesser_treant:()=>{const e=Le.getEnemy(),t=e.modeBattle;if(1==Le.turn&&0==e.actionsTaken)qe.kindred_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"anima bark\"==t)qe.anima_bark.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"heal\"==t){Math.floor(100*Math.random())+1<=75&&1==qe.nature_healing.cost(e,Le.getPlayer())?qe.nature_healing.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)}else Ne(e,e.skills)},treant:()=>{const e=Le.getEnemy(),t=e.modeBattle;if(1==Le.turn&&0==e.actionsTaken)qe.anima_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(1==qe.boost.cost(e,Le.getPlayer()))qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"anima bark\"==t)qe.anima_bark.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"heal\"==t){Math.floor(100*Math.random())+1<=75&&1==qe.lesser_anima_healing.cost(e,Le.getPlayer())?qe.lesser_anima_healing.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)}else Ne(e,e.skills)},lesser_ent:()=>{const e=Le.getEnemy(),t=e.modeBattle;if(console.log(\"MODE IF \"+t),1==Le.turn&&0==e.actionsTaken)qe.anima_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(1==qe.boost.cost(e,Le.getPlayer()))qe.boost.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"anima bark\"==t)qe.anima_bark.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"greater anima bark\"==t)qe.greater_anima_bark.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"threshold-one\"==t)console.log(\"THRESHOLD ONE REACHED\"),e.passedThresholds.push(\"one\"),qe.forest_rupture.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"threshold-three\"==t)e.passedThresholds.push(\"three\"),qe.forest_rupture.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"threshold-two\"==t)e.passedThresholds.push(\"two\"),qe.forest_rupture.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else if(\"heal\"==t){Math.floor(100*Math.random())+1<=75&&1==qe.lesser_anima_healing.cost(e,Le.getPlayer())?qe.lesser_anima_healing.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):1==qe.constrict.cost(e,Le.getPlayer())&&qe.forest_curse.cost(e,1==Le.getPlayer())?Ne(e,e.skills):qe.guard.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\")}else 1==qe.constrict.cost(e,Le.getPlayer())&&qe.forest_curse.cost(e,1==Le.getPlayer())?Ne(e,e.skills):qe.guard.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\")},wayward_traveler:()=>{const e=Le.getEnemy().modeBattle;console.log(\"this was called\"),console.log(e),\"wary\"==e?qe.health_potion.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"desperate\"==e||\"allout\"==e?1==qe.rush_attack.cost(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()))?qe.rush_attack.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.attack.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"preparing\"==e&&(1==qe.guard_break.cost(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()))?qe.guard_break.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.attack.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"))},greater_slime:()=>{const e=Le.getEnemy().modeBattle;if(\"aggressive\"==e){1==Math.round(2*(Math.random()+.1))?qe.splash.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.icebolt.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\")}else if(\"defensive\"==e)qe.guard.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else{const e=Math.round(3*(Math.random()+.1));1==e?qe.guard.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.splash.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\")}},lesser_water_klastera:()=>{const e=Le.getEnemy(),t=e.modeBattle;\"normal\"==t?1==qe.icebolt.cost(e)?qe.icebolt.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.splash.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"heal\"==t?1==qe.channel_health.cost(e)?qe.channel_health.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.splash.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"arcane\"==t&&(1==qe.arcane_shield.cost(e)?qe.arcane_shield.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.splash.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"))},young_water_lizard:()=>{const e=Le.getEnemy(),t=Le.getPlayerAdd(Le.getPlayer());if(\"cautious\"==e.modeBattle&&1==qe.camoflague.cost(e,t)&&0==Le.checkStacks(e.buffs,\"camoflague\"))qe.camoflague.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\");else{1==Math.round(3*Math.random()+1)&&1==qe.rush_attack.cost(e,t)?qe.rush_attack.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.attack.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\")}},red_slime:()=>{const e=Le.getEnemy(),t=Le.getEnemy().modeBattle,a=je(Le.getPlayer().buffs);console.log(\"PLAYERBUFFCOUNT \"+a),\"normal\"==t&&(0==e.actionsTaken&&1==qe.engulf.cost(e)&&a>1?qe.engulf.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):1==qe.fireball.cost(e)?qe.fireball.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):qe.attack.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"))},venomous_wolf:()=>{const e=Le.getEnemy(),t=Le.getPlayer(),a=lt(e.skills);1==Le.checkStacks(t.debuffs,\"bleed\")&&a.splice(a.indexOf(\"rend\"),1),1==Le.checkStacks(t.debuffs,\"viridian toxin\")&&a.splice(a.indexOf(\"poison_claws\"),1),Ne(e,a)},young_venomous_wolf:()=>{const e=Le.getEnemy(),t=Le.getPlayer(),a=lt(e.skills);1==Le.checkStacks(t.debuffs,\"bleed\")&&a.splice(a.indexOf(\"rend\"),1),1==Le.checkStacks(t.debuffs,\"viridian toxin\")&&a.splice(a.indexOf(\"poison_claws\"),1),1==Le.turn&&0==e.actionsTaken?qe.wolven_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,a)},dark_beast:()=>{const e=Le.getEnemy(),t=e.modeBattle;\"dark pact\"==t&&1==qe.dark_pact.cost(e)?qe.dark_pact.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"hex\"==t&&1==qe.hex.cost(e)?qe.hex.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"nox curse\"==t&&1==qe.nox_curse.cost(e)?qe.nox_curse.use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,[\"rend\",\"attack\",\"dark_howl\"])},flame_minotaur:()=>{const e=Le.getEnemy(),t=e.modeBattle;\"normal\"!=t?qe[t].use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,[\"boar_strike\",\"boar_rush\"])},lesser_teravalum:()=>{const e=Le.getEnemy(),t=e.modeBattle;1==Le.turn&&0==e.actionsTaken?qe.kindred_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):\"normal\"!=t&&qe[t].use(Le.getEnemy(),Le.getPlayerAdd(Le.getPlayer()),\"enemy\")},lesser_forest_scourge:()=>{const e=Le.getEnemy(),t=Le.getPlayer(),a=Le.checkStacks(t.debuffs,\"viridian toxin\"),n=Le.checkStacks(t.debuffs,\"constricted\"),o=Le.checkStacks(e.buffs,\"prepared\");Le.checkStacks(t.debuffs,\"forest curse\")>0?qe.killing_blow.use(e,t,\"enemy\"):o>0&&1==I(e,t,\"forest_curse\")?qe.forest_curse.use(e,t,\"enemy\"):n>0&&1==I(e,t,\"deep_envenom\")?qe.deep_envenom.use(e,t,\"enemy\"):a>0&&1==I(e,t,\"constrict\")?qe.constrict.use(e,t,\"enemy\"):1==I(e,t,\"poison_claws\")?qe.poison_claws.use(e,t,\"enemy\"):qe.attack.use(e,t,\"enemy\")},mobile_lesser_ent:()=>{const e=Le.getEnemy();1==Le.turn&&0==e.actionsTaken?qe.kindred_soul.use(e,Le.getPlayerAdd(Le.getPlayer()),\"enemy\"):Ne(e,e.skills)}},I=(e,t,a)=>qe[a].cost(e,t),P={young_wolf:{stats:{base_level:2,max_health:75,atk:30,def:30,matk:30,mdef:30,speed:16,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100}},ai:\"young_wolf\",mode:\"young_wolf\",skills:[\"attack\",\"boost\"],name:\"Young Wolf\",baseLevel:2,exp:150,gold:20,drops:[],desc:\"A wolf that, although is of moderate size, is clearly inexperienced in battle. Appears to boost whenever possible. Given it's speed, it appears that if you were to increase your speed with a skill, you would be able to double this enemy...\"}},dreadful_wolf:{stats:{base_level:3,max_health:100,atk:40,def:30,matk:30,mdef:30,speed:55,crit_chance:.1,crit_damage:1.5,effectiveness:5,resistance:25,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:90,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:150}},ai:\"dreadful_wolf\",mode:\"dreadful_wolf\",skills:[\"attack\"],name:\"Dreadful Wolf\",exp:250,gold:20,drops:[],desc:\"A whose hide seems to have been afflicted with some kind of curse. It's fur is long and dark, with the occasional purple pigment. It writhes as though each individual fibre has a life of its own. You manage to glean the info that this enemy will attempt to use a powerful debuff every 3rd turn, and will boost whenever possible.\"}},charon:{stats:{base_level:5,max_health:200,atk:30,def:30,matk:30,mdef:30,speed:55,crit_chance:.1,crit_damage:1.5,effectiveness:5,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:200,light:100},defence:{none:100,physical:80,fire:50,water:50,earth:50,wind:50,thunder:50,dark:50,light:100}},ai:\"charon\",mode:\"charon\",skills:[\"attack\"],name:\"???\",exp:500,gold:20,drops:[],desc:\"There's no way this thing is actually human. Even though it has the stature and body parts of one, it's skin is charcoal black and littered with bright red patterns. It is 'wearing' brown, raglike clothing that succeeds only in covering his torso and a small amount of his legs. It's eyes are black, with white irises and red 'strain-marks' dirtying the cornea. Somehow, you glean that he will boost whenever available and that his malice peaks every 4th turn.\"}},slime:{stats:{base_level:1,max_health:40,atk:30,def:30,matk:30,mdef:30,speed:16,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:50,wind:50,thunder:150,dark:75,light:75}},ai:\"slime\",mode:\"slime\",skills:[\"splash\",\"boost\"],name:\"Slime\",baseLevel:1,exp:100,gold:10,drops:[[\"slime_ball\",1e3,2,5],[\"slime_ball\",500,2,5]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. They seem sentient, however not very intelligent - as though unlikely to have any particular strategy.\"}},lesser_teravalum:{stats:{base_level:2,max_health:35,atk:0,def:25,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:150,water:50,earth:50,wind:120,thunder:40,dark:100,light:100}},ai:\"lesser_teravalum\",mode:\"lesser_teravalum\",skills:[\"constrict\",\"guard\"],name:\"Lesser Teravalum\",baseLevel:1,exp:150,gold:10,drops:[[\"weak_vine\",1e3,2,5],[\"weak_vine\",500,2,5],[\"hempweed_ligament\",300,1,2],[\"vine_helmet\",200,1,1]],desc:\"A mass of tangled green vines that somehow has sentience. There is no indication of facial features or emotion, although the creature is clearly sentient. It seems suited only for constricting enemies and defending itself.\"}},grey_wolf:{stats:{base_level:3,max_health:45,atk:25,def:30,matk:30,mdef:20,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:80,wind:100,thunder:100,dark:100,light:100}},ai:\"grey_wolf\",mode:\"grey_wolf\",skills:[\"attack\",\"boost\",\"rend\"],name:\"Grey Wolf\",baseLevel:1,exp:200,gold:15,drops:[[\"grey_wolf_pelt\",1e3,2,4],[\"grey_wolf_pelt\",500,3,6],[\"sharp_claw\",300,1,2]],desc:\"A wolf with bristling grey fur. Despite its aggression, the wolf has a sort of rough beauty about it. Seems to attack indiscriminately. It has a desperate fury about it - as though it will grow faster as it becomes weaker.\"}},brown_bear:{stats:{base_level:3,max_health:55,atk:20,def:25,matk:20,mdef:20,speed:17,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:90,earth:75,wind:105,thunder:105,dark:100,light:100}},ai:\"brown_bear\",mode:\"brown_bear\",skills:[\"attack\",\"rend\"],name:\"Brown Bear\",baseLevel:4,exp:250,gold:20,drops:[[\"brown_fur\",1e3,1,7],[\"brown_fur\",500,2,5],[\"sharp_claw\",300,1,2]],desc:\"A simple-looking (or as simple looking as they come) brown bear. It has a somewhat calm demeanour but clearly does not appreciate your presence. Even when on all fours it is taller than you, and when it jumps up to deliver a powerful blow, its stature has an effect comparable to blotting out the sun. It seems to only have the energy to do this occasionally, however. You infer that it does so in regular periods, and also boosts whenever possible.\"}},lesser_treant:{stats:{base_level:7,max_health:230,atk:45,def:45,matk:50,mdef:50,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:25,evasion:0,max_mana:50,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:140,water:70,earth:40,wind:115,thunder:90,dark:100,light:100}},ai:\"lesser_treant\",mode:\"lesser_treant\",skills:[\"attack\",\"constrict\"],name:\"Lesser Treant\",exp:450,gold:50,drops:[[\"wood\",500,2,3],[\"magic_bark\",450,1,2],[\"special_sap\",250,1,2],[\"magic_bark\",1e3,1,2],[\"special_sap\",1e3,1,1]],desc:\"A fairly large tree. It isn't really mobile, but is capable of moving it's branches around like appendages. It has a semblance of a face, with grooves resembling eyes and a mouth that move about arthritically, but no actual facial features. It seems to be of moderate intelligence, but not much useful information can be gleaned from its appearance.\"}},treant:{stats:{base_level:12,max_health:400,atk:65,def:80,matk:65,mdef:80,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:40,evasion:0,max_mana:75,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:75,fire:130,water:60,earth:30,wind:105,thunder:80,dark:90,light:105}},ai:\"treant\",mode:\"treant\",skills:[\"attack\",\"constrict\",\"forest_curse\"],name:\"Treant\",baseLevel:4,exp:700,gold:85,drops:[[\"wood\",500,5,7],[\"magic_bark\",450,3,4],[\"special_sap\",250,3,4],[\"magic_bark\",1e3,3,4],[\"special_sap\",1e3,2,4]],desc:\"A fairly large tree. It isn't really mobile, but is capable of moving it's branches around like appendages. It has a semblance of a face, with grooves resembling eyes and a mouth that move about eloquently, but no actual facial features. It seems to be of moderate intelligence, but not much useful information can be gleaned from its appearance. It radiates an energy that is at once sinister and serene.\"}},lesser_ent:{stats:{base_level:17,max_health:650,atk:80,def:100,matk:80,mdef:120,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:40,resistance:60,evasion:0,max_mana:120,max_stamina:200,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:65,fire:120,water:60,earth:20,wind:100,thunder:70,dark:80,light:105}},ai:\"lesser_ent\",mode:\"lesser_ent\",passedThresholds:[],skills:[\"constrict\",\"forest_curse\"],name:\"Lesser Ent\",baseLevel:4,exp:1e3,gold:120,drops:[[\"wood\",500,10,15],[\"magic_bark\",650,6,8],[\"special_sap\",500,6,9],[\"magic_bark\",1e3,6,8],[\"special_sap\",1e3,4,8]],desc:\"A large tree. Unlike other trees and treants, this tree has a venerate aura about it. It's attacks are almost absentminded, as though it is focusing on something else completely, and yet they are still so dangerous. Its facial features are equally indescriptive as other treefolk, however here they are also faded and more immobile. The almost automatic defences it puts up makes you wonder if it has some pre-prepared responses to certain scenarios or danger levels.\"}},lesser_forest_scourge:{stats:{base_level:10,max_health:240,atk:70,def:70,matk:70,mdef:50,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:0,evasion:0,max_mana:200,max_stamina:200,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:80,wind:110,thunder:100,dark:100,light:100}},ai:\"lesser_forest_scourge\",mode:\"lesser_forest_scourge\",skills:[\"attack\",\"constrict\",\"deep_envenom\",\"forest_curse\",\"killing_blow\"],name:\"Lesser Forest Scourge\",baseLevel:4,exp:320,gold:40,drops:[[\"forest_scourge_scale\",750,3,5],[\"venomous_claw\",500,1,2]],desc:\"It is difficult to see exactly what this creature is due to how quickly it moves, but it seems to be some kind of snake. It's scales are coloured similarly to the grass, with green scales of different hues interlocking seamlessly and shifting silently and the creature sifts around the surroundings. Like an experienced killer, it seems to have some kind of routine technique.\"}},young_venomous_wolf:{stats:{base_level:7,max_health:185,atk:40,def:50,matk:40,mdef:55,speed:50,crit_chance:.3,crit_damage:1.25,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"young_venomous_wolf\",mode:\"young_venomous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Young Venemous Wolf\",exp:300,gold:20,drops:[[\"sharp_claw\",500,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build with a similarly rugged appearence. although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately. Due to its youth, it seems unlikely that it would be possible to glean any of its venom.\"}},mobile_lesser_ent:{stats:{base_level:12,max_health:250,atk:120,def:80,matk:120,mdef:100,speed:15,crit_chance:0,crit_damage:1,effectiveness:0,resistance:20,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:75,fire:130,water:60,earth:30,wind:105,thunder:80,dark:90,light:105}},ai:\"mobile_lesser_ent\",mode:\"mobile_lesser_ent\",skills:[\"forest_rupture\"],name:\"Mobile Lesser Ent\",baseLevel:4,exp:400,gold:85,drops:[[\"wood\",500,5,7],[\"magic_bark\",350,2,3],[\"special_sap\",200,2,3],[\"magic_bark\",800,2,3],[\"special_sap\",800,1,3]],desc:\"A very tall bipedal... tree? It looks more like a treant than an ent, with a less fixed 'face', and a fluidity of motion that surpasses both species. However, it seems notably less intelligent than either.\"}},wayward_traveler:{stats:{max_health:500,base_level:10,atk:65,def:55,matk:50,mdef:60,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:10,resistance:10,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{physical:80,fire:110,water:110,earth:110,wind:110,thunder:110,dark:110,light:110}},ai:\"wayward_traveler\",mode:\"wayward_traveler\",skills:[\"attack\",\"guard_break\",\"rush_attack\",\"healing_potion\"],name:\"Wayward Traveler\",exp:500,gold:50,drops:[[\"damaged_sword\",50,1,1],[\"damaged_armour\",50,1,1],[\"damaged_pantaloons\",50,1,1],[\"damaged_helm\",50,1,1],[\"wanderer_memorabilia\",1e3,2,3]],desc:\"A traveler who seems to have lost their way. From their responsive battle style and analytic glances, you infer that they seem to have some kind of specific strategy in mind.\"}},greater_slime:{stats:{base_level:5,max_health:150,atk:60,def:60,matk:70,mdef:60,speed:22,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:70,fire:0,water:10,earth:50,wind:50,thunder:200,dark:75,light:75}},ai:\"greater_slime\",mode:\"greater_slime\",skills:[\"splash\",\"icebolt\"],name:\"Greater Slime\",exp:300,gold:15,drops:[[\"slime_ball\",1e3,5,8]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions. Seems larger and more experienced(?) than most slimes.\"}},lesser_water_klastera:{stats:{base_level:6,max_health:125,atk:60,def:70,matk:70,mdef:70,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:50,evasion:0,max_mana:200,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:150,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:80,earth:80,wind:80,thunder:150,dark:80,light:80}},ai:\"lesser_water_klastera\",mode:\"lesser_water_klastera\",skills:[\"icebolt\",\"arcane_shield\",\"channel_health\",\"splash\"],name:\"Lesser Water Klastera\",exp:350,gold:15,drops:[[\"aquus_cluster\",500,1,3],[\"manasoul\",10,1,1],[\"water_orb\",1,1,1]],desc:\"A being comprised of only water. It's body seems to be some kind of deep blue semi-solid. It's only facial feature is white, oval eyes that convey no sense of emotion. One might infer from its formulaic structure that the same could be said about its battle style.\"}},young_water_lizard:{stats:{base_level:7,max_health:100,atk:60,def:60,matk:40,mdef:50,speed:50,crit_chance:.3,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:100,wind:120,thunder:120,dark:100,light:100}},ai:\"young_water_lizard\",mode:\"young_water_lizard\",skills:[\"attack\",\"rush_attack\",\"camoflague\"],name:\"Young Water Lizard\",exp:400,gold:20,drops:[[\"weak_membrane\",500,1,3],[\"tiny_lizard_tail\",250,1,1],[\"light_absorbant_eye\",100,1,2]],desc:\"A relatively small reptile. It has clearly rough skin, although the abundant tiny spikes all over its body are clearly conscious designs of nature. Perhaps due to the size difference, it seems wary of any attacks.\"}},red_slime:{stats:{base_level:11,max_health:250,atk:70,def:70,matk:70,mdef:70,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:150,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:150,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:50,earth:70,wind:70,thunder:70,dark:60,light:130}},ai:\"red_slime\",mode:\"red_slime\",skills:[\"fireball\",\"guard\",\"engulf\",\"attack\"],name:\"Red Slime\",exp:500,gold:35,drops:[[\"red_slime_ball\",1e3,5,8]],desc:\"A red slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Seems to be wary of boons you grant yourself.\"}},venomous_wolf:{stats:{base_level:14,max_health:210,atk:80,def:60,matk:70,mdef:55,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:170,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"venemous_wolf\",mode:\"venemous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Venemous Wolf\",exp:550,gold:30,drops:[[\"sharp_claw\",500,1,2],[\"venomous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build, although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately.\"}},dark_beast:{stats:{base_level:18,max_health:300,atk:90,def:70,matk:80,mdef:80,speed:70,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:.1,max_mana:120,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:100,wind:100,thunder:100,dark:120,light:100},defence:{none:100,physical:80,fire:100,water:100,earth:100,wind:100,thunder:100,dark:0,light:150}},ai:\"dark_beast\",mode:\"dark_beast\",skills:[\"attack\",\"rend\",\"rush_attack\",\"nox_curse\",\"dark_howl\",\"hex\"],name:\"Dark Beast\",exp:800,gold:10,drops:[[\"sharp_claw\",500,1,2],[\"venemous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"A creature with a wolf-like structure, but with a larger upper body. It's entire body is shrouded in an oppressive mist that makes you uncomfortable. Little regarding its disposition can be inferred from its movements besides its apparent intelligence compared to its wolf 'bretheren'.\"}},flame_minotaur:{stats:{base_level:30,max_health:5e3,atk:110,def:80,matk:80,mdef:80,speed:65,crit_chance:0,crit_damage:1.5,effectiveness:30,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:120,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:0,water:130,earth:90,wind:120,thunder:80,dark:110,light:90}},ai:\"flame_minotaur\",mode:\"flame_minotaur\",mode2:\"phase one\",skills:[\"boar_strike\",\"boar_rush\",\"flame_impact\",\"ignis_destroyer\",\"boar_haste\",\"engulf\",\"true_cleanse\"],name:\"Flame Minotaur\",exp:5e3,gold:2500,drops:[[\"flamme_kaiser\",1e3,1,1]],desc:\"A tall beast of extremely muscular built. It is difficult to fully appreciate the stature of the minotaur, as it is several times taller than you. However you can feel it's scorching breath, and see it's giant, rune-encrusted axe. Nothing can about it's mannerisms can be inferred from its appearance besides its great power.\"}}},T=S,A={charon:(e,t,a,n)=>{n()},dreadful_wolf:(e,t,a,n)=>{n()},young_wolf:(e,t,a,n)=>{n()},slime:(e,t,a,n)=>{n()},grey_wolf:(e,t,a,n)=>{n()},brown_bear:(e,t,a,n)=>{n()},lesser_treant:(e,t,a,n)=>{console.log(\"mode called\");const o=Le.checkStacks(a.buffs,\"anima bark\");a.health<=.3*a.max_health&&0==o?(a.modeBattle=\"anima bark\",_t([[`<br>${a.name} feels mystical energy welling within..`,1]],\"battle\",n)):a.health<=a.max_health/2?(a.modeBattle=\"heal\",_t([[`<br>${a.name} is wary of their condition..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",n())},treant:(e,t,a,n)=>{console.log(\"mode called\");const o=Le.checkStacks(a.buffs,\"anima bark\");a.health<=.3*a.max_health&&0==o?(a.modeBattle=\"anima bark\",_t([[`<br>${a.name} feels mystical energy welling within..`,1]],\"battle\",n)):a.health<=a.max_health/2?(a.modeBattle=\"heal\",_t([[`<br>${a.name} is wary of their condition..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",n())},lesser_ent:(e,t,a,n)=>{console.log(\"mode called\");const o=Le.checkStacks(a.buffs,\"anima bark\"),s=Le.checkStacks(a.buffs,\"greater anima bark\");console.log(\"INDEX OF \"+a.passedThresholds.indexOf(\"one\")),console.log(a.health),console.log(.8*a.max_health),console.log(a.health<=.8*a.max_health),console.log(-1==a.passedThresholds.indexOf(\"one\")),a.health<=.8*a.max_health&&-1==a.passedThresholds.indexOf(\"one\")?(a.modeBattle=\"threshold-one\",n()):a.health<=.5*a.max_health&&-1==a.passedThresholds.indexOf(\"two\")?(a.modeBattle=\"threshold-two\",n()):a.health<=.2*a.max_health&&-1==a.passedThresholds.indexOf(\"three\")?(a.modeBattle=\"threshold-three\",n()):a.health<=.4*a.max_health&&0==s?(a.modeBattle=\"greater anima bark\",_t([[`<br>${a.name} feels great mystical energy welling within..`,1]],\"battle\",n)):a.health<=.6*a.max_health&&0==o?(a.modeBattle=\"anima bark\",_t([[`<br>${a.name} feels mystical energy welling within..`,1]],\"battle\",n)):a.health<=.6*a.max_health?(a.modeBattle=\"heal\",_t([[`<br>${a.name} is wary of their condition..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",n())},wayward_traveler:(e,t,a,n)=>{const o=a.health,s=Le.checkStacks(t.debuffs,\"guard broken\");console.log(`found ${s} guard broken stacks`),o<a.max_health/2?a.mana>30?(a.modeBattle=\"wary\",_t([[`<br>${a.name} is concerned about their condition..`,1]],\"battle\",n)):(a.modeBattle=\"desperate\",_t([[`<br>${a.name} is employing a last ditch attempt!`,1]],\"battle\",n)):s<3?(a.modeBattle=\"preparing\",_t([[`<br>${a.name} seems to be setting something up..`,1]],\"battle\",n)):(a.modeBattle=\"allout\",_t([[`<br>${a.name} is going all out!`,1]],\"battle\",n))},greater_slime:(e,t,a,n)=>{const o=e[Le.turn-1].player;var s=!0,r=Re(o,\"guard\"),i=Ye(o);console.log(\"logging player damage\"),console.log(i),i.forEach(e=>{e<1&&(s=!1)}),r>0?(a.modeBattle=\"defensive\",_t([[`<br>${a.name} eyes ${t.name} cautiously...`,1]],\"battle\",n)):s?(a.modeBattle=\"aggressive\",_t([[`<br>${a.name} assumes an aggressive stance!`,1]],\"battle\",n)):(a.modeBattle=\"normal\",_t([[`<br>${a.name} assumes a normal stance.`,1]],\"battle\",n))},lesser_water_klastera:(e,t,a,n)=>{var o=Le.checkStacks(a.buffs,\"arcane protection\"),s=0;null!=e[Le.turn-1].enemy&&(s=Re(e[Le.turn-1].enemy,\"channel_health\")),0==o?(a.modeBattle=\"arcane\",_t([[`<br>${a.name} would like to enhance themselves with magic...`,1]],\"battle\",n)):Le.turn%3==0&&0==s?(a.modeBattle=\"heal\",_t([[`<br>${a.name} would like to heal..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",_t([[`<br>${a.name} has no particular desire.`,1]],\"battle\",n))},young_water_lizard:(e,t,a,n)=>{0==Re(e[Le.turn-1].player,\"guard\")?(a.modeBattle=\"cautious\",_t([[`<br>${a.name} feels uncomfortable...`,1]],\"battle\",n)):(a.modeBattle=\"normal\",_t([[`<br>${a.name} seems to be feeling normal.`,1]],\"battle\",n))},red_slime:(e,t,a,n)=>{a.modeBattle=\"normal\",n()},venemous_wolf:(e,t,a,n)=>{n()},young_venomous_wolf:(e,t,a,n)=>{n()},dark_beast:(e,t,a,n)=>{const o=Le.checkStacks(a.buffs,\"ATK up\"),s=Le.checkStacks(a.buffs,\"MATK up\"),r=Le.checkStacks(a.buffs,\"SPEED up\"),i=Le.checkStacks(t.debuffs,\"hexed\"),l=Fe(t.debuffs);o<3&&s<3&&r<3?(a.modeBattle=\"dark pact\",_t([[`<br>${a.name} eyes ${t.name} with a slight glare.`,1]],\"battle\",n)):0==i?(a.modeBattle=\"hex\",_t([[`<br>${a.name} eyes ${t.name} with a malicious glare.`,1]],\"battle\",n)):l-Le.checkStacks(t.debuffs,\"nox curse\")>1?(a.modeBattle=\"nox curse\",_t([[`<br>${a.name} eyes ${t.name} with a malevolent glare.`,1]],\"battle\",n)):(a.modeBattle=\"normal\",_t([[`<br>${a.name} eyes ${t.name} with a dry glare.`,1]],\"battle\",n))},flame_minotaur:(e,t,a,n)=>{const o=Le.turn,s=je(a.debuffs),r=je(t.buffs),i=Le.checkStacks(a.buffs,\"boar haste\");var l=a.mode2,c=5;\"phase two\"==l&&(c=3),a.health<a.max_health/2&&\"phase one\"==l&&(pt('<span style=\"color:red\"><b>The minotaur grows evermore furious..</span></b>'),a.mode2=\"phase two\",l=\"phase two\"),\"phase two\"==l&&0==i?(a.modeBattle=\"boar_haste\",n()):o%c==0?(a.modeBattle=\"ignis_destroyer\",n()):1==qe.flare_impact.cost(a)?(a.modeBattle=\"flare_impact\",n()):s>2?1==qe.true_cleanse.cost(a)?(a.modeBattle=\"true_cleanse\",n()):(a.modeBattle=\"ignis_destroyer\",n()):r>2?1==qe.engulf.cost(a)?(a.modeBattle=\"engulf\",n()):(a.modeBattle=\"ignis_destroyer\",n()):(a.modeBattle=\"normal\",n())},lesser_teravalum:(e,t,a,n)=>{1==qe.constrict.cost(a)?(a.modeBattle=\"constrict\",_t([[`<br>${a.name} is in the mood to constrict..`,1]],\"battle\",n)):(a.modeBattle=\"guard\",_t([[`<br>${a.name} assumes a defensive stance.`,1]],\"battle\",n))},lesser_forest_scourge:(e,t,a,n)=>{n()},mobile_lesser_ent:(e,t,a,n)=>{n()}};a(1);const E=(e,t)=>{B.currentShop=$[e],B.returnFunction=t,B.shopLoop()},M={1:\"f1_shop\"},$=Object.assign({f1_shop:{name:\"Floor one shop\",items:[[\"special_armband\",500],[\"health_potion\",15],[\"greater_health_potion\",35],[\"mana_potion\",15],[\"greater_mana_potion\",35],[\"stamina_vial\",15],[\"wood\",20]]},old_man:{name:\"Old man's teeth\",items:[[\"old_man_yellow_tooth\",6e3],[\"old_man_white_tooth\",1200]]},f1_docile_slime_shop:{name:\"Docile slime's shop\",items:[[\"water_energy\",100]]},f1_old_man:{name:\"Old man's shop\",items:[[\"fishing_rod\",100],[\"fishers_lucky_charm\",250]]},f1_weak_weapons:{name:\"Weapons shop\",items:[[\"simple_sword\",100],[\"silver_axe\",400],[\"metal_stave\",120],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"magisteel_stave\",500],[\"thunder_rod\",500]]},f1_strong_weapons:{name:\"Advanced Weapons shop\",items:[[\"crafted_blade\",1e3],[\"crafted_dagger\",1e3],[\"reinforced_silver_axe\",1200],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"enchanted_magisteel_stave\",1400],[\"conduit_orb\",800],[\"magisteel_runic_dagger\",1200]]},f1_weak_armours:{name:\"Armour shop\",items:[[\"silver_helm\",200],[\"silver_armour\",200],[\"silver_legwear\",200],[\"advanced_silver_helm\",320],[\"advanced_silver_armour\",320],[\"advanced_silver_legwear\",320],[\"wizard_headband\",280],[\"light_wizard_robes\",280],[\"light_wizard_leggings\",280],[\"enchanted_wooden_helm\",350]]},f1_strong_armours:{name:\"Advanced armour shop\",items:[[\"silver_knight_helm\",600],[\"silver_knight_armour\",600],[\"silver_knight_legwear\",600],[\"ninja_wrap\",360],[\"ninja_garb\",360],[\"ninja_legwear\",360],[\"tattered_magus_robes\",600]]},f1_misc:{name:\"Misc shop\",items:[[\"steel\",40],[\"leather\",36],[\"wood\",15],[\"water_rune\",200],[\"vip_card\",400],[\"f1_settlement_teleportation_stone\",20]]},f1_misc_vip:{name:\"VIP Misc shop\",items:[[\"steel\",25],[\"leather\",24],[\"wood\",10]]},f1_forest_cleric_shop:{name:\"Aina's TP stones\",items:[[\"f1_forest_settlement_teleportation_stone\",20]]}}),B={currentItem:void 0,currentShop:void 0,returnFunction:void 0,mode:void 0,price:void 0,menuOptions:void 0,shopLoop:(e=!0)=>{const t=B.currentShop;pt(`${p}Currently shopping at ${t.name}`),pt(\"Wares available:\"),t.items.forEach(e=>{const a=t.items.findIndex(t=>t[0]==e[0]);pt(`${a+1} - ${We[e[0]].name} - ${e[1]}G`)}),pt(\"Type the name/number of an item to buy it, or type 's'/'sell' to enter sell mode.\"),pt(\"<br>Input <b>'b'/'back'</b> to return.\"),wt(B.shopResponse)},shopResponse:()=>{vt(B.shopResponse);const e=B.currentShop,t=kt().toLowerCase();var a=null!=e.items[t-1]?parseInt(t)-1:-1;if(-1==a&&(a=e.items.findIndex(e=>t==We[e[0]].name.toLowerCase())),-1!=a){const t=e.items[a];pt(`${p}${We[t[0]].name} selected.`),Ge(We[t[0]]),pt(\"<br>Type 'b' or 'buy to buy it. Otherwise, type anything else to return.\"),B.currentItem=t,B.mode=\"buy\",Pt([\"buy\"]),wt(B.itemMenu)}else\"sell\"==t||\"s\"==t?(B.mode=\"sell\",pt(p+\"Entering sell mode..\"),B.sellLoop()):\"back\"==t||\"b\"==t?(pt(p+\"Returning...\"),B.returnFunction()):(pt(\"<br>Invalid input.\"),wt(B.shopResponse))},sellLoop:(e=!0)=>{const t=n.player;pt(p+\"Currently in sell mode. Type the name/number of an item in the inventory to see\\n        its details and sell it. Type 'b'/'back' to exit sell mode.\"),pt(\"<br>Inventory:\");var a=[];t.inventory.forEach(e=>{Je(e)?a.push(e):a.includes(e)||a.push(e)}),e&&a.forEach((e,a)=>{var n,o;Je(e)?(n=We[e[0]],o=e[0]):\"nothing\"==e||(n=We[e],o=e),pt(`${a+1} - ${n.name} (x${st(o,t.inventory)}) - ${n.sell_value}${\"unsellable\"==n.sell_value?\"\":\"G\"}`)}),B.menuOptions=a,wt(B.sellResponse)},sellResponse:()=>{vt(B.sellResponse);const e=kt().toLowerCase(),t=B.menuOptions;var a=-1;\"NaN\"!=parseInt(e).toString()?t.length>=parseInt(e)?(pt(`<br>${We[Ke(t[parseInt(e-1)])].name} selected.`),a=e-1):pt(\"<br>Number out of range.\"):(t.forEach((t,n)=>{Je(t)?We[t[0]].name.toLowerCase()==e&&(a=n):We[t].name.toLowerCase()==e&&(a=n)}),-1!=a&&pt(`<br>${We[t[parseInt(a)].name]} selected.`)),-1!=a?(Ge(We[Ke(t[a])]),B.currentItem=t[a],\"unsellable\"!=We[Ke(t[a])].sell_value?(pt(p+\"If you would like to sell this item, type 's'/'sell'. Otherwise, type anything else to return.\"),wt(B.itemMenu)):(pt(\"This item cannot be sold.\"),B.sellLoop())):\"b\"==e||\"back\"==e?(pt(p+\"Returning...\"),B.shopLoop()):(pt(\"<br>Invalid input.\"),wt(B.sellResponse))},itemMenu:()=>{vt(B.itemMenu);B.currentShop;const e=kt().toLowerCase();var t=\"none\";\"b\"==e||\"buy\"==e?t=\"buy\":\"s\"!=e&&\"sell\"!=e||(t=\"sell\"),t==B.mode?(pt(\"buy\"==t?p+\"How many would you like to buy? (Please type a numerical integer value, or type '0' to return)\":p+\"<br>How many would you like to sell? (Please type a numerical integer value, or type '0' to return. If you want to sell the maximum amount of this item input 'a'/'all'.\"),wt(B.itemConfirmation)):(pt(p+\"Returning...\"),\"buy\"==B.mode?B.shopLoop():B.sellLoop())},itemConfirmation:()=>{vt(B.itemConfirmation);const e=n.player,t=(B.currentShop,kt().toLowerCase());var a=!1;if(\"NaN\"!=parseInt(t).toString()||\"a\"==t||\"all\"==t)if(parseInt(t)>0&&\"buy\"==B.mode){const e=parseInt(t),n=e*B.currentItem[1];pt(`${p}buying ${e} ${We[B.currentItem[0]].name}${e>1?\"s\":\"\"} will cost ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),B.price=n,wt(B.itemTransaction),a=!0}else if(parseInt(t)>0||\"a\"==t||\"all\"==t&&\"sell\"==B.mode){var o,s,r=parseInt(t);\"a\"!=t&&\"all\"!=t||(r=Je(B.currentItem)?Ve(B.currentItem[0],e.inventory):Ve(B.currentItem,e.inventory)),Je(B.currentItem)?(s=r*We[B.currentItem[0]].sell_value,o=We[B.currentItem[0]].name):(s=r*We[B.currentItem].sell_value,o=We[B.currentItem].name),pt(`${p}${r} ${o}${r>1?\"s\":\"\"} will sell for\\n                ${s}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),B.price=s,wt(B.itemTransaction),a=!0}else 0==parseInt(t)&&(pt(p+\"Returning..\"),a=!0,\"buy\"==B.mode?B.shopLoop():B.sellLoop());0==a&&(pt(\"<br>Invalid input\"),wt(B.itemConfirmation))},itemTransaction:()=>{vt(B.itemTransaction);B.currentShop;const e=kt().toLowerCase(),t=n.player,a=B.price;if(\"y\"==e||\"yes\"==e)if(\"buy\"==B.mode)if(t.gold>=a){t.gold-=a;const e=a/B.currentItem[1];pt(p+\"Purchasing...\"),ze(B.currentItem[0],e,e),pt(\"Returning...\"),B.shopLoop()}else pt(\"<br><b>Too expensive!</b>\"),B.shopLoop();else{const e=B.currentItem,n=t.inventory;if((Je(e)?st(e[0],n):st(e,n))>=a/We[Ke(B.currentItem)].sell_value){t.gold+=a;const e=a/We[Ke(B.currentItem)].sell_value;Ue(Ke(B.currentItem),e),pt(p+\"Selling..\"),pt(\"<br>Returning...\"),B.sellLoop()}else pt(p+\"Not enough of the item in the inventory!\"),B.sellLoop()}else pt(\"<br>Returning..\"),\"buy\"==B.mode?B.shopLoop():B.sellLoop();ot(n.player)}},L={health_potion:{name:\"Health potion\",item:\"health_potion\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",2]]},mana_potion:{name:\"Mana potion\",item:\"mana_potion\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",2]]},wooden_sword:{name:\"Wooden sword\",item:\"wooden_sword\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",2]]},vine_wrapped_wooden_sword:{name:\"Vine wrapped wooden sword\",item:\"vine_wrapped_wooden_sword\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"wooden_sword\",1],[\"weak_vine\",6]]},wooden_stave:{name:\"Wooden stave\",item:\"wooden_stave\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",2]]},vine_wrapped_wooden_stave:{name:\"Vine wrapped wooden stave\",item:\"vine_wrapped_wooden_stave\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"wooden_stave\",1],[\"weak_vine\",6]]},vine_armour:{name:\"Vine armour\",item:\"vine_armour\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",12]]},strong_vine_chestplate:{name:\"Strong vine chestplate\",item:\"strong_vine_chestplate\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"vine_armour\",1],[\"weak_vine\",3],[\"hempweed_ligament\",3]]},vine_pantaloons:{name:\"Vine pantaloons\",item:\"vine_pantaloons\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",8]]},feathervine_sword:{name:\"Feathervine sword\",item:\"feathervine_sword\",description:\"Allows for the crafting of an item.\",gold:25,items:[[\"wood\",3],[\"grey_wolf_pelt\",10],[\"weak_vine\",7]]},wolf_hermit_staff:{name:\"Wolf hermit staff\",item:\"wolf_hermit_staff\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"wooden_stave\",1],[\"grey_wolf_pelt\",10],[\"sharp_claw\",2]]},wooden_armour:{name:\"Wooden armour\",item:\"wooden_armour\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",4]]},wooden_trousers:{name:\"Wooden trousers\",item:\"wooden_trousers\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",3]]},vine_membrane_bracers:{name:\"Vine membrane bracers\",item:\"vine_membrane_bracers\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"hempweed_ligament\",4],[\"weak_vine\",10]]},blue_vine_charm:{name:\"Blue vine charm\",item:\"blue_vine_charm\",description:\"Allows for the crafting of an item.\",gold:35,items:[[\"slime_ball\",10],[\"hempweed_ligament\",4],[\"weak_vine\",8]]},leather_pants:{name:\"Leather pants\",item:\"leather_pants\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"leather\",2]]},leather_cap:{name:\"Leather cap\",item:\"leather_cap\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"leather\",1]]},leather_armour:{name:\"Leather armour\",item:\"leather_armour\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"leather\",3]]},wolfhide_armour:{name:\"Wolfhide armour\",item:\"wolfhide_armour\",description:\"Allows for the crafting of an item.\",gold:40,items:[[\"grey_wolf_pelt\",8],[\"leather\",1]]},wolfhide_cap:{name:\"Wolfhide cap\",item:\"wolfhide_cap\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",5],[\"leather\",1]]},wolfhide_leggings:{name:\"Wolfhide leggings\",item:\"wolfhide_leggings\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",6],[\"leather\",1]]},slime_bracers:{name:\"Slime bracers\",item:\"slime_bracers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"slime_ball\",10],[\"steel\",1]]},slime_reinforced_sword:{name:\"Slime reinforced sword\",item:\"slime_reinforced_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",10],[\"simple_sword\",1]]},wolfhide_charm:{name:\"Wolfhide charm\",item:\"wolfhide_charm\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"sharp_claw\",2],[\"grey_wolf_pelt\",8]]},lizard_bracelet:{name:\"Lizard bracelet\",item:\"lizard_bracelet\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"tiny_lizard_tail\",2],[\"leather\",3]]},aquus_orb:{name:\"Aquus orb\",item:\"aquus_orb\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5]]},water_infused_armour:{name:\"Water infused armour\",item:\"water_infused_armour\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5],[\"advanced_silver_armour\",1]]},water_infused_helm:{name:\"Water infused helm\",item:\"water_infused_helm\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",3],[\"advanced_silver_helm\",1]]},water_infused_legwear:{name:\"Water infused legwear\",item:\"water_infused_legwear\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",4],[\"advanced_silver_helm\",1]]},luminant_charm:{name:\"Luminant charm\",item:\"luminant_charm\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"steel\",2],[\"leather\",2],[\"light_absorbant_eye\",1]]},wolfhide_dagger:{name:\"Wolfhide dagger\",item:\"wolfhide_dagger\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"simple_dagger\",1],[\"grey_wolf_pelt\",8]]},pickaxe:{name:\"Pickaxe\",item:\"pickaxe\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"wood\",1]]},makeshift_steel_armour:{name:\"Makeshift steel armour\",item:\"makeshift_steel_armour\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_steel_helm:{name:\"Makeshift steel helm\",item:\"makeshift_steel_helm\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",2]]},makeshift_steel_legwear:{name:\"Makeshift steel legwear\",item:\"makeshift_steel_legwear\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_sword:{name:\"Makeshift sword\",item:\"makeshift_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"leather\",1]]},wolven_reavers:{name:\"Wolven reavers\",item:\"wolven_reavers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"leather\",1],[\"sharp_claw\",3],[\"grey_wolf_pelt\",3]]},bladed_armour:{name:\"Bladed armour\",item:\"bladed_armour\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"makeshift_steel_armour\",1],[\"sharp_claw\",4]]},friendly_greater_slime:{name:\"Friendly greater slime\",item:\"friendly_greater_slime\",description:\"Strengthen your slime buddy!\",gold:0,items:[[\"friendly_slime\",1],[\"water_rune\",1],[\"water_energy\",1],[\"slime_bracers\",1]]},crafted_health_potion:{name:\"Crafted health potion\",item:\"crafted_health_potion\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"greater_health_potion\",1],[\"health_potion\",1],[\"slime_ball\",3]]},tear_of_lucia:{name:\"Tear of Lucia\",item:\"tear_of_lucia\",description:\"Allows for the crafting of an item.\",gold:500,items:[[\"steel\",4],[\"conduit_orb\",1],[\"manasoul\",1]]},shadow_cloak:{name:\"Shadow cloak\",item:\"shadow_cloak\",description:\"Allows for the crafting of an item.\",gold:400,items:[[\"leather\",3],[\"shadow_pelt\",8],[\"shadow_corona\",1],[\"grey_wolf_pelt\",15]]},earthen_sword:{name:\"Earthen sword\",item:\"earthen_sword\",description:\"Allows for the crafting of an item.\",gold:220,items:[[\"sharpened_sword\",1],[\"venomous_claw\",4],[\"sharp_claw\",3],[\"steel\",3]]},red_slime_bracers:{name:\"Red slime bracers\",item:\"red_slime_bracers\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"red_slime_ball\",10],[\"steel\",2]]},shinobi_armour:{name:\"Shinobi armour\",item:\"shinobi_armour\",description:\"Allows for the crafting of an item.\",gold:300,items:[[\"ninja_garb\",1],[\"grey_wolf_pelt\",10],[\"shadow_pelt\",5]]},shinobi_headcloak:{name:\"Shinobi headcloak\",item:\"shinobi_headcloak\",description:\"Allows for the crafting of an item.\",gold:250,items:[[\"ninja_wrap\",1],[\"grey_wolf_pelt\",7],[\"shadow_pelt\",3]]},shinobi_leggings:{name:\"Shinobi leggings\",item:\"shinobi_leggings\",description:\"Allows for the crafting of an item.\",gold:280,items:[[\"ninja_legwear\",1],[\"grey_wolf_pelt\",8],[\"shadow_pelt\",4]]},water_orb_necklace:{name:\"Water orb necklace\",item:\"water_orb_necklace\",description:\"Allows for the crafting of an item.\",gold:200,items:[[\"water_orb\",1],[\"steel\",5],[\"aquus_cluster\",12]]},vinewarding_charm:{name:\"Vinewarding charm\",item:\"vinewarding_charm\",description:\"Allows for the crafting of an item.\",gold:25,items:[[\"weak_vine\",3],[\"hempweed_ligament\",2]]},bearkiller_charm:{name:\"Bearkiller charm\",item:\"bearkiller_charm\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"sharp_claw\",2],[\"brown_fur\",5]]},canine_charm:{name:\"Canine charm\",item:\"canine_charm\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"grey_wolf_pelt\",6],[\"sharp_claw\",3]]},earthen_shield_potion:{name:\"Earthen shield potion\",item:\"earthen_shield_potion\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",3],[\"hempweed_ligament\",1]]},weak_slingshot:{name:\"Weak slingshot\",item:\"weak_slingshot\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",3],[\"sharp_claw\",1],[\"leather\",1]]},leather:{name:\"Leather\",item:\"leather\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"brown_fur\",2]]},invigorating_flower:{name:\"Invigorating flower\",item:\"invigorating_flower\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"brown_fur\",4],[\"slime_ball\",2]]},desperate_flower:{name:\"Desperate flower\",item:\"desperate_flower\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"grey_wolf_pelt\",4],[\"sharp_claw\",2]]},monster_essence:{name:\"Monster essence\",item:\"monster_essence\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"brown_fur\",3],[\"slime_ball\",3],[\"hempweed_ligament\",2],[\"sharp_claw\",2],[\"grey_wolf_pelt\",3],[\"special_sap\",3]]},kindred_essence:{name:\"Kindred essence\",item:\"kindred_essence\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"monster_essence\",1],[\"special_sap\",3],[\"magic_bark\",3]]}},C={0:[\"wooden_sword\",\"health_potion\"],1:[\"wooden_sword\",\"wooden_stave\",\"wooden_armour\",\"wooden_trousers\",\"leather_cap\",\"leather_armour\",\"leather_pants\",\"wolven_reavers\",\"leather\",\"pickaxe\",\"blue_vine_charm\",\"vinewarding_charm\",\"bearkiller_charm\",\"canine_charm\",\"vine_armour\"]},O=(e,t)=>{q.returnFunction=e,q.recipesAvailable=t;0==n.tutorials.includes(\"crafting_1\")?(n.tutorials.push(\"crafting_1\"),yt(b.crafting_1,q.recipesLoop)):q.recipesLoop()},q={recipesAvailable:void 0,currentRecipe:void 0,recipesArray:void 0,returnFunction:void 0,craftingFromNpc:void 0,recipesLoop:(e=!0)=>{null==q.recipesAvailable?(pt(p+\"Currently in the recipes menu. Input 'f'/'floor' to use the recipes allocated to your floor. If you have any personal recipes, input 'p'/'personal' in order to access them.\"),pt(\"Input <b>'b'</b> or <b>back</b> to return.\"),wt(q.recipesLoopResponse),Pt([\"floor\",\"personal\",\"back\"]),q.craftingFromNpc=!1):(pt(\"Currently crafting using recipes you do not own...\"),q.craftingFromNpc=!0,q.recipesLoop2())},recipesLoopResponse(){vt(q.recipesLoopResponse);const e=kt().toLowerCase();if(\"f\"==e||\"floor\"==e)pt(\"<br>Using floor recipes..\"),q.recipesAvailable=C[n.current_floor],q.recipesLoop2();else if(\"p\"==e||\"personal\"==e){0==n.player.recipes.length?(pt(\"<br>You don't have any personal recipes!\"),q.recipesLoop()):q.recipesLoop2()}else\"b\"==e||\"back\"==e?(pt(\"<br>Returning...\"),q.recipesAvailable=void 0,q.currentRecipe=void 0,q.recipesArray=void 0,q.craftingFromNpc=void 0,q.returnFunction(),q.returnFunction=void 0):(pt(\"<br>Invalid input.\"),wt(q.recipesLoopResponse))},recipesLoop2:(e=!0)=>{ot(n.player,\"normal\"),e&&(pt(p+\"Input 'a' to see them all in alphabetical order, or input 'r' to see first all recipes that can be crafted.\"),pt(\"<br>Input <b>'b'/'back'</b> to return.\")),Pt([\"alphabetical\",\"ready\",\"back\"]),wt(q.displayRecipes)},displayRecipes:()=>{const e=kt().toLowerCase();vt(q.displayRecipes);const t=n.player;var a;a=null==q.recipesAvailable?t.recipes.map(e=>L[e]):q.recipesAvailable.map(e=>L[e]);const o=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"];var s=!1;switch(e){case\"alphabetical\":case\"a\":s=!0;for(var r=0;r<a.length;r++)for(var i=1;i<a.length;i++)for(var l=!1,c=0;0==l;){const e=o.indexOf(a[i].name[c].toLowerCase()),t=o.indexOf(a[i-1].name[c].toLowerCase());if(e<t){const e=a[i];a[i]=a[i-1],a[i-1]=e,l=!0}else e>t||c+1>=a[i].name.length||c+1>=a[i-1].name.length?l=!0:c++}break;case\"ready\":case\"r\":s=!0;var d=0;for(r=1;r<a.length;r++)if(q.checkReady(a[r],inventory)){const e={...a[r]};delete a[r],a.unshift(e),r++,++d==a.length&&(r=a.length)}a=a.filter((function(e){return void 0!==e}));break;case\"back\":case\"b\":pt(\"<br>Returning...\"),1==q.craftingFromNpc?(q.recipesAvailable=void 0,q.currentRecipe=void 0,q.recipesArray=void 0,q.craftingFromNpc=void 0,q.returnFunction(),q.returnFunction=void 0):(q.recipesAvailable=void 0,q.recipesLoop());break;default:pt(\"<br>Invalid input.\"),q.recipesLoop2(!1)}if(s){q.recipesArray=a,pt(p+\"Showing recipes...\"),a.forEach(e=>{const t=1==q.checkReady(e,inventory)?\"[X]\":\"[ ]\";pt(`${a.indexOf(e)+1} - ${e.name} (${t})`)}),pt(p+\"Say the name or number of a recipe to access it. From there you can see the items and gold required, and craft the recipe if you desire as well.\"),pt(\"Input <b>'b'</b> or <b>'back'</b> to return.\");a.map(e=>e.name);wt(q.recipesMenu)}},recipesMenu:()=>{vt(q.recipesMenu);const e=kt().toLowerCase(),t=q.recipesArray,a=parseInt(e);var n=!1;\"NaN\"!=a.toString()&&t.length>a-1&&(n=!0);var o,s=!1;switch(t.forEach(t=>{t.name.toLowerCase()==e&&(s=!0,o=t)}),!0){case n:t[a-1];q.currentRecipe=t[a-1],q.recipeLoop();break;case s:q.currentRecipe=o,q.recipeLoop();break;case\"b\"==e:case\"back\"==e:pt(p+\"Returning..\"),q.recipesLoop2();break;default:pt(p+\"Invalid input.\"),wt(q.recipesMenu)}},recipeLoop:()=>{q.recipesArr;const e=q.currentRecipe,t=n.player.inventory;pt(`${p}Currently viewing ${e.name} recipe.`),pt(\"The following is required:\"),pt(`${e.gold} gold (You have ${n.player.gold})`),e.items.forEach(e=>{pt(`${e[1]} ${We[e[0]].name}${e[1]>1?\"s\":\"\"} (You have ${Ve(e[0],t)})`)}),pt(\"<br>The recipe will craft the following item:\"),Ge(We[e.item],!0,!0,!0,!1,!0);q.checkReady(e,t)&&pt(\"<br>This item can be crafted.\"),pt(\"<br> - c/craft (to craft it, if possible).\"),pt(\"<br> - z (to scroll up; looking through more recipes)\"),pt(\"<br> - x (to scroll down; looking through more recipes)\"),pt(\"<br> - l (reprint list of recipes, and your position)\"),pt(\"<br> - b/back (to return)\"),Pt([\"up\",\"down\",\"list\",\"craft\",\"back\"]),wt(q.recipeMenu)},recipeMenu:()=>{vt(q.recipeMenu);const e=kt().toLowerCase(),t=q.recipesArray,a=q.currentRecipe,o=n.player.inventory;var s=t.findIndex(e=>a.name==e.name);switch(e){case\"up\":case\"z\":pt(p+\"Scrolling back..\"),0==s?s=t.length-1:s--,q.currentRecipe=t[s],q.recipeLoop();break;case\"down\":case\"x\":pt(p+\"Scrolling forward..\"),s==t.length-1?s=0:s++,q.currentRecipe=t[s],q.recipeLoop();break;case\"list\":case\"l\":var r;pt(p+\"Displaying recipes...\"),t.forEach(e=>{r=e.name==q.currentRecipe.name?\"<b>\":\"\",pt(`${r}${e.name}${\"<b>\"==r?\"</b>\":\"\"}`)}),pt(\"<br>You are still in the recipe menu. See above options.\"),wt(q.recipeMenu);break;case\"c\":q.checkReady(q.currentRecipe,o)?(pt(p+\"How many of this item would you like to craft? Please input the  number you would like to craft, or input '0' if you would like to return.\"),wt(q.inputQuantity)):(pt(\"<br>This item cannot be crafted.\"),wt(q.recipeMenu));break;case\"back\":case\"b\":pt(\"<br>Returning...\"),q.recipesLoop();break;default:pt(\"<br>Invalid input.\"),wt(q.recipeMenu)}},inputQuantity:()=>{const e=kt().toLowerCase();vt(q.inputQuantity);const t=n.player.inventory;if(\"NaN\"==parseInt(e).toString())pt(\"<br>Invalid input.\"),wt(q.inputQuantity);else if(0==parseInt(e))pt(\"<br>Returning...\"),q.recipeLoop();else{const a=parseInt(e),n=JSON.parse(JSON.stringify(q.currentRecipe));n.items.forEach(e=>{e[1]=e[1]*a}),n.gold=n.gold*a;const o=q.checkReady(n,t);pt(`${p}In order to craft ${e} ${We[q.currentRecipe.item].name}`+(a>1?\"s\":\"\")+\", You will need the following items:\"),n.items.forEach(e=>{const a=e[0],n=e[1],o=Ve(a,t);pt(`${n} ${We[a].name} (You have ${o})`)}),pt(n.gold+\" gold\"),o?(pt(\"<br>Are you sure you would like to craft \"+a+` ${We[q.currentRecipe.item].name}? Input 'y'/'yes' to confirm, or enter anything else to return.`),q.craftAmount=a,wt(q.craftConfirmation)):_t([[\"<br>You cannot craft this much of that item!\",2]],\"outside\",()=>{q.recipeLoop()})}},craftConfirmation:()=>{vt(q.craftConfirmation);const e=kt().toLowerCase();vt(q.craftConfirmation);const t=n.player;if(\"y\"==e||\"yes\"==e){const e=q.currentRecipe,n=q.craftAmount;for(var a=0;a<n;a++)t.gold-=e.gold,e.items.forEach(e=>{Ue(e[0],e[1])});ze(e.item,n,n),ot(t,\"normal\"),_t([[p+\"Returning to recipe menu...\",2]],\"outside\",()=>{q.recipeLoop()})}else pt(\"<br>Returning...\"),q.recipeLoop()},checkReady:(e,t)=>{const a=n.player.inventory,o=e.items;var s=!0;return o.forEach(e=>{Ve(e[0],a)>=e[1]==0&&(s=!1)}),n.player.gold<e.gold&&(s=!1),s}},D=(e,t=!0)=>{1==e[0].length&&(e=[e]),e.forEach(e=>{null!=L[e]&&-1==n.player.recipes.indexOf(e)&&(n.player.recipes.push(e),t&&pt(`<br>Unlocked recipe [${L[e].name}]`))})},R={currentlyPlaying:\"none\",currentAudio:void 0,basePath:\"../music/\",forest:\"../music/forest.ogg\",find:\"../music/find.ogg\",lobby:\"../music/lobby.ogg\",creator:\"../music/creator.ogg\",uniqueBuffers:{battle:.1,intimidating_enemy:1.5,mechanical_rhythm:.1},volume:.5,volumeFX:.5,playMusic:e=>{if(e!=R.currentlyPlaying)if(null!=R.currentAudio&&document.body.removeChild(R.currentAudio),\"$\"==e[e.length-1]){R.currentlyPlaying=e;var t=new Audio;const a=R.basePath+e.replace(\"$\",\"\")+\"start.ogg\";t.setAttribute(\"src\",a),t.setAttribute(\"hidden\",\"true\"),t.volume=R.volume,document.body.appendChild(t),R.currentAudio=t,t.addEventListener(\"timeupdate\",(function(){var t=R.uniqueBuffers[e.replace(\"$\",\"\")];if(this.currentTime>this.duration-t){const t=R.currentAudio;var a=new Audio;const n=R.basePath+e.replace(\"$\",\"\")+\"full.ogg\";a.setAttribute(\"src\",n),a.addEventListener(\"timeupdate\",(function(){this.currentTime>this.duration-.2&&(this.currentTime=0,this.play())})),a.setAttribute(\"hidden\",\"true\"),a.volume=R.volume,document.body.appendChild(a),R.currentAudio=a,a.play(),document.body.removeChild(t)}})),t.play()}else{R.currentlyPlaying=e,(t=new Audio).setAttribute(\"src\",R[e]),t.setAttribute(\"loop\",\"true\"),t.setAttribute(\"hidden\",\"true\"),t.volume=R.volume,document.body.appendChild(t),R.currentAudio=t,t.play()}else R.currentAudio.play()},pauseMusic:()=>{null!=R.currentAudio&&R.currentAudio.pause()},stopMusic:()=>{null!=R.currentAudio&&(document.body.removeChild(R.currentAudio),R.currentAudio=void 0,R.currentlyPlaying=\"none\")},changeVolume:(e,t)=>!(e>1||e<0)&&((\"volume\"==t||\"volumeFX\"==t)&&(null!=R.currentAudio&&\"volume\"==t&&(R.currentAudio.volume=e),R[t]=e,!0)),playFX:e=>{var t=new Audio;t.setAttribute(\"src\",R[e]),t.setAttribute(\"hidden\",\"true\"),t.volume=R.volumeFX,document.body.appendChild(t),t.addEventListener(\"ended\",e=>{document.body.removeChild(e.path[0])}),t.play()}},Y=e=>{j.returnFunction=e,j.mainLoop()},j={returnFunction:void 0,mainLoop:()=>{pt(p+\"Currently in settings. You can do the following things:\"),pt(\"<br> - Change the message delay for battle and outside of battle (input 'md')\"),pt(\"<br> - Change the input shortcut key ('ci')\"),pt(\"<br> - Test your current message delay settings ('tc')\"),pt(`<br> - Toggle between \"wait for input\" and \"auto\" text scrolling ('tsc', currently ${o.scrollStyle})`),pt(\"<br> - To save or reset your data, type 'save'.\"),pt(\"<br> - Change the scroll limit ('sl')\"),pt(\"<br> - See the music credits ('smc')\"),pt(\"<br>Input <b>'b'/'back'</b> to return.\"),Pt(m),wt(j.mainLoopResponse)},mainLoopResponse:()=>{vt(j.mainLoopResponse);switch(kt().toLowerCase()){case\"message delay\":case\"md\":j.messageDelayLoop();break;case\"change shortcut\":case\"ci\":j.changeShortcutLoop();break;case\"test message\":case\"tc\":j.testMessageLoop();break;case\"sa\":case\"save\":j.saveLoop();break;case\"tsc\":case\"toggle scroll\":\"auto\"==o.scrollStyle?o.scrollStyle=\"input\":o.scrollStyle=\"auto\",pt(`<br><b>Scrolling style changed to ${o.scrollStyle}.`),j.mainLoop();break;case\"smc\":case\"see music credits\":pt(\"<br><b>Displaying music credits...</b>\"),k.forEach(e=>{pt(e)}),j.mainLoop();break;case\"sl\":case\"scroll limit\":j.scrollLimitLoop();break;case\"b\":case\"back\":pt(p+\"Returning...\"),j.returnFunction();break;default:pt(p+\"Invalid input.\"),Pt(m),wt(j.mainLoopResponse)}},scrollLimitLoop:()=>{pt(`<br> --------------------------------<br><br>Currently in the scroll limit menu. Type any integer between 50 and 500 to change the scroll limit to that number. Scroll limit refers to the number of lines that can be stored in the main box before the oldest ones are deleted. <b>Scroll limit is currently ${o.scrollLimit}</b>`),wt(j.scrollLimitResponse)},scrollLimitResponse:()=>{vt(j.scrollLimitResponse);const e=kt().toLowerCase();var t=!1;\"NaN\"!=parseInt(e).toString()?parseInt(e)>=50&&parseInt(e)<=500?(o.scrollLimit=parseInt(e),pt(\"Scroll limit changed to \"+parseInt(e)),pt(\"You are still in the scroll limit menu. Input 'b'/'back' to return.\")):pt(\"<br>Input out of range.\"):\"b\"==e||\"back\"==e?(pt(\"<br>Returning...\"),t=!0):pt(\"<br>Invalid input.\"),t?j.mainLoop():wt(j.scrollLimitResponse)},saveLoop:()=>{pt(p+\"Entering the save menu. Data saved can be loaded if you refresh the page, but not if you clear the cache or restart your device. Saving will overwrite previously saved data. Type 's'/'save' to save, and 'r'/'reset' to reset your data.\"),Pt([\"save\",\"load\",\"back\"]),wt(j.saveLoopResponse)},saveLoopResponse:()=>{vt(j.saveLoopResponse);switch(kt().toLowerCase()){case\"s\":case\"save\":pt(p+\"Saved data. Returning...\"),F(\"save1\",n),H(\"save1\",o),W(\"save1\",c),N(\"save1\",l),j.mainLoop();break;case\"r\":case\"reset\":pt(p+\"Data reset. Refresh the page to restart.\"),localStorage.clear(),j.mainLoop();break;case\"b\":case\"back\":pt(p+\"Returning...\"),j.mainLoop();break;default:pt(\"<br>Invalid input.\"),wt(j.saveLoopResponse);case!0:ot(n.player)}},testMessageLoop:()=>{pt(p+\"Four messages of different length will play in order to show you approximately\\n        the speed of the text in the settings you have selected. Please choose whether you would like to test your battle\\n        display speed or your display speed outside of battle.\"),pt(\"<br>Please type 'ba'/'battle' to see text speed in battle and 'ou'/'outside' to see text speed outside of battle.\"),pt(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),pt(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),Pt([\"battle\",\"outside\",\"back\"]),wt(j.testMessage)},testMessage:()=>{vt(j.testMessage);var e=!1,t=\"outside\";switch(kt().toLowerCase()){case\"ba\":case\"battle\":e=!0,t=\"battle\";break;case\"ou\":case\"outside\":e=!0,t=\"outside\";break;case\"b\":case\"back\":e=!1,pt(p+\"Returning...\"),j.mainLoop();break;default:pt(\"<br>Invalid input.\"),wt(j.testMessage)}if(e){_t([[\"This is a short message. Hi!\",0],[\"This message is a little bit longer... Hello there. Lovely weather today.\",0],[\"This message is pretty long. Longer than the previous, and the one before it. Lorem ipsum dolor sit amet, consectetur\",0],[\"This is the longest message in this test. I hope you enjoy reading this one. Um. Have you seen Vinland Saga? It's a pretty good anime. I'd watch it if I were you. Or don't, I don't really care.\",0]],t,j.postTestMessage)}},postTestMessage:()=>{pt(p+\"Message testing has concluded. Returning...\"),j.mainLoop()},changeShortcutLoop:()=>{pt(p+\"Currently changing the input shortcut toggle key. Because most of the keyboard is required for gameplay, there are a limited number of keys that can be used. Input the name of a key as seen to change input shortcut to that key:\"),pt(\"<br>\"),Object.keys(_).forEach(e=>{pt(\" - \"+e)}),pt(\"<br>Your current key is \"+_[o.toggleShortcut]),Pt([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"AltLeft\",\"AltRight\",\"¬\",\"back\"]),wt(j.changeShortcutResponse)},changeShortcutResponse:()=>{vt(j.changeShortcutResponse);var e=kt();e.length>0&&(e=at(e.toLowerCase()));-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(pt(`${p}Input shortcut toggle changed to <b>${e}</b>.`),pt(\"<br>You are still in the change Input Shortcut menu. Input 'b' or 'back to return.\"),o.toggleShortcut=e,Pt([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),wt(j.changeShortcutResponse)):\"Back\"==e||\"B\"==e?(pt(p+\"Returning...\"),j.mainLoop()):(pt(\"<br>Invalid input\"),Pt([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),wt(j.changeShortcutResponse))},messageDelayLoop:()=>{pt(p+\"There are two types of message delay you can change. Would you like to change the message delay in battle or outside of battle?\"),pt(\"<br>Type 'ba'/'battle' to change the message delay in battle and 'ou'/'outside' to change the message delay outside of battle.\"),pt(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),pt(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),Pt([\"battle\",\"outside\",\"back\"]),wt(j.messageDelayResponse)},messageDelayResponse:()=>{vt(j.messageDelayResponse);switch(kt().toLowerCase()){case\"ba\":case\"battle\":j.battleMessageDelayLoop();break;case\"ou\":case\"outside\":j.outsideMessageDelayLoop();break;case\"b\":case\"back\":pt(p+\"Returning...\"),j.mainLoop();break;default:pt(\"<br>Invalid input.\"),Pt([\"battle\",\"outside\",\"back\"]),wt(j.messageDelayResponse)}},battleMessageDelayLoop:()=>{const e=g;pt(`<br> --------------------------------<br><br>Currently changing battle message delay loop. You can type any number from 0-3, including 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of the premade settings: 's'/'slow' (${e.slow}s), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),wt(j.battleMessageDelayResponse)},battleMessageDelayResponse:()=>{vt(j.battleMessageDelayResponse);const e=kt().toLowerCase(),t=g;switch(!0){case\"s\"==e||\"slow\"==e:{const e=t.slow;o.battleMessageDelay=e,pt(`${p}Changed battle message delay to ${e} seconds.`),wt(j.battleMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=t.medium;o.battleMessageDelay=e,pt(`${p}Changed battle message delay to ${e} seconds.`),wt(j.battleMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=t.fast;o.battleMessageDelay=e,pt(`${p}Changed battle message delay to ${e} seconds.`),wt(j.battleMessageDelayResponse);break}case\"NaN\"!=parseFloat(e).toString():{const t=parseFloat(e);t<=3&&t>=0?(o.battleMessageDelay=t.toFixed(2),pt(`${p}Changed battle message delay to ${t.toFixed(2)} seconds.`)):pt(\"<br>That number is out of range!\"),wt(j.battleMessageDelayResponse);break}case\"b\"==e||\"back\"==e:pt(p+\"Returning...\"),j.messageDelayLoop();break;default:pt(\"<br>Invalid input.\"),wt(j.battleMessageDelayResponse)}},outsideMessageDelayLoop:()=>{const e=y;pt(`<br> --------------------------------<br><br>Currently changing outside message delay. You can type any number from 0-3, including 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),wt(j.outsideMessageDelayResponse)},outsideMessageDelayResponse:()=>{vt(j.outsideMessageDelayResponse);const e=kt().toLowerCase(),t=y;switch(!0){case\"s\"==e||\"slow\"==e:{const e=t.slow;o.messageDelay=e,pt(`${p}Changed message delay to ${e} seconds.`),wt(j.outsideMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=t.medium;o.messageDelay=e,pt(`${p}Changed message delay to ${e} seconds.`),wt(j.outsideMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=t.fast;o.messageDelay=e,pt(`${p}Changed message delay to ${e} seconds.`),wt(j.outsideMessageDelayResponse);break}case\"NaN\"!=parseFloat(e).toString():{const t=parseFloat(e);t<=3&&t>=0?(o.messageDelay=t.toFixed(2),pt(`${p}Changed message delay to ${t.toFixed(2)} seconds.`)):pt(\"<br>That number is out of range!\"),wt(j.outsideMessageDelayResponse);break}case\"b\"==e||\"back\"==e:pt(p+\"Returning...\"),j.messageDelayLoop();break;default:pt(\"<br>Invalid input.\"),wt(j.outsideMessageDelayResponse)}}},F=(e,t)=>{localStorage.setItem(e+\"Player\",JSON.stringify(t))},H=(e,t)=>{localStorage.setItem(e+\"Settings\",JSON.stringify(t))},N=(e,t)=>{localStorage.setItem(e+\"Disciplines\",JSON.stringify(t))},W=(e,t)=>{localStorage.setItem(e+\"Flags\",JSON.stringify(t))},z=(e,t=\"localStorage\")=>{const a=n;var o;o=\"localStorage\"==t?JSON.parse(localStorage.getItem(e+\"Player\")):e,J(a,o)},U=(e,t=\"localStorage\")=>{const a=l;var n;n=\"localStorage\"==t?JSON.parse(localStorage.getItem(e+\"Disciplines\")):e,V(a,n)},G=(e,t=\"localStorage\")=>{const a=c;var n;n=\"localStorage\"==t?JSON.parse(localStorage.getItem(e+\"Flags\")):e,K(a,n)},J=(e,t,a=[])=>{Object.keys(e).forEach(n=>{var o;null!=t[n]&&(!it(e[n])||Array.isArray(e[n])?0==a.includes(n)&&(e[n]=t[n]):(\"stats\"==n&&(o=[\"atk\",\"def\",\"health\",\"max_sp\",\"max_mana\",\"max_stamina\",\"current_mana\",\"current_stamina\",\"mdef\",\"matk\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\",\"evasion\",\"current_health\"]),J(e[n],t[n],o)))})},K=(e,t,a=[])=>{Object.keys(e).forEach(n=>{null!=t[n]&&(!it(e[n])||Array.isArray(e[n])?0==a.includes(n)&&(e[n]=t[n]):K(e[n],t[n]))})},V=(e,t)=>{Object.keys(e).forEach(a=>{null!=t[a]&&(\"unlocked\"==a||\"visible\"==a||\"complete\"==a?e[a]=t[a]:it(e[a])&&V(e[a],t[a]))})},X={autoSave:!0},Z=()=>{F(\"save1\",n),H(\"save1\",o),W(\"save1\",c),N(\"save1\",l),pt('<span style=\"color: gold\">Data saved</span>',!1)};setInterval(()=>{X.autoSave&&(F(\"save1\",n),H(\"save1\",o),W(\"save1\",c),N(\"save1\",l),pt('<span style=\"color: gold\">Data saved</span>',!1))},3e4);const Q=e=>{ee.returnFunction=e,0==n.tutorials.includes(\"stats_1\")?(n.tutorials.push(\"stats_1\"),yt(b.stats_1,ee.statLoop)):ee.statLoop()},ee={returnFunction:void 0,statLoop:()=>{pt(\"<br>Entering the stats menu.<br> Say 'sk'/'skills' to enter the skill menu, or 'sp' to enter the sp menu.\"),pt(\"<br>Input <b>'b'/'back'</b> to return.\"),Pt(f),wt(ee.statLoopResponse),ot(n.player,\"normal\")},statLoopResponse:()=>{vt(ee.statLoopResponse);n.player;switch(kt().toLowerCase()){case\"sk\":case\"skills\":pt(p+\"Entering skills menu. To change skills equipped, say 'e'/equipped', or say 'l'/'learn' to learn new skills.\"),Pt([\"equipped\",\"learn\",\"back\"]),wt(re);break;case\"sp\":pt(p+\"Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.\"),pt(\"<br>Current SP investments:\"),ae(),Pt([\"allocate\",\"reset\",\"back\"]),wt(te);break;case\"b\":case\"back\":pt(p+\"Returning to main menu...\"),ee.returnFunction();break;default:pt(\"<br>Invalid input\"),Pt(f),wt(ee.statLoopResponse)}}},te=()=>{vt(te);const e=kt(),t=n.player;switch(e.toLowerCase()){case\"a\":case\"allocate\":pt(p+\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),pt(`You have ${n.player.sp} SP.`),pt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${r[t.level]}.`),Pt(u),wt(oe);break;case\"r\":case\"reset\":var a=0;Object.keys(t.sp_investment).forEach(e=>{a+=t.sp_investment[e]}),pt(`${p}Are you sure you want to reset your SP? It will cost ${20*a} gold. Type 'y' or 'yes' to confirm. To go back, enter anything else.`),wt(ne);break;case\"b\":case\"back\":pt(p+\"Returning to status menu..\"),ee.statLoop();break;default:pt(\"<br>Invalid input\"),pt(p+\"Current SP investments:\"),ae(),wt(te)}},ae=()=>{const e=n.player;Object.keys(e.sp_investment).map(t=>`${t}: ${e.sp_investment[t]}`).forEach(e=>pt(e))},ne=()=>{vt(ne);const e=kt().toLowerCase(),t=n.player;var a=0;Object.keys(t.sp_investment).forEach(e=>{a+=t.sp_investment[e]});const o=20*a;if(\"yes\"==e||\"y\"==e){if(t.gold>=o){pt(p+\"SP has been reset.\"),Object.keys(t.sp_investment).forEach(e=>{t.sp+=t.sp_investment[e],t.sp_investment[e]=0}),t.gold-=o;const e=Le.getMaxHealth(t.stats);t.stats.current_health>e&&(t.stats.current_health=e)}else pt(p+\"You don't have enough gold!\");pt(`${p}You now have ${t.sp} SP.`)}pt(p+\"Returning to SP menu..\"),pt(p+\"Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.\"),pt(\"<br>Current SP investments:\"),ae(),wt(te),Pt([\"allocate\",\"reset\"]),ot(n.player,\"normal\")},oe=()=>{vt(oe);const e=kt().toLowerCase(),t=n.player;var a=!0;t.sp_investment.hasOwnProperty(e)?t.sp>0?(pt(`How many SP points would you like to allocate to ${e}?`),wt(se(e)),a=!1):pt(\"You don't have any SP!\"):\"back\"==e||\"b\"==e?(a=!1,pt(\"Returning to SP menu...\"),pt(\"Entering SP menu. Say 'a/allocate' to allocate SP, 'r/reset' to reset allocation.\"),pt(\"Current SP investments:\"),ae(),Pt([\"allocate\",\"reset\"]),wt(te)):pt(\"Invalid input.\"),a&&(pt(`<br>You currently have ${t.sp} SP.`),wt(oe)),ot(n.player,\"normal\")},se=e=>{vt(se);const t=()=>{vt(t,!1);const a=kt();if(\"NaN\"!=parseInt(a).toString()){const t=n.player;parseInt(a)<=t.sp?parseInt(a)+t.sp_investment[e]<=r[t.level]?(t.sp-=parseInt(a),t.sp_investment[e]+=parseInt(a),\"health\"==e&&(t.stats.current_health+=20*parseInt(a)),pt(`${a} SP allocated to ${e}. Returning to allocate mode..<br>`),pt(\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),pt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${r[t.level]}.`),pt(`You have ${n.player.sp} SP.`),Pt(u),wt(oe),ot(t,\"normal\")):(pt(\"This amount of SP would exceed your single stat allocation limit! Returning to allocate mode..<br>\"),pt(\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),pt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${r[t.level]}.`),pt(`You have ${n.player.sp} SP.`),Pt(u),wt(oe)):(pt(\"You don't have enough SP! Returning to allocate mode..<br>\"),pt(\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),pt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${r[t.level]}.`),pt(`You have ${n.player.sp} SP.`),Pt(u),wt(oe))}else pt(\"Invalid input.\"),wt(se(e))};return t},re=()=>{vt(re);const e=kt().toLowerCase();n.player;switch(e){case\"e\":case\"equipped\":le.disciplinesMenuLoop();break;case\"l\":case\"learn\":ie.disciplinesMenuLoop();break;case\"b\":case\"back\":pt(p+\"Returning...\"),ee.statLoop();break;default:pt(\"<br>Invalid input.\"),wt(re)}},ie={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){pt(p+\"Showing all available disciplines. Say the name of a discipline to view the skills it contains if it is unlocked, or to unlock it if it is not unlocked.\");const e=l;console.log(\"e \"+n.special.doingTutorial),1!=n.special.doingTutorial&&Object.keys(e).forEach(t=>{e[t].requirements.level<=n.player.level&&(e[t].visible=!0)});const t=Object.keys(e);t.sort((t,a)=>1==e[t].unlocked&&1==e[a].unlocked||0==e[t].unlocked&&0==e[a].unlocked?t>a?1:-1:1==e[t].unlocked?-1:1),t.forEach(t=>{const a=e[t];1==a.unlocked?pt(` - ${at(a.name)} -- UNLOCKED`):1==a.visible&&pt(` - ${at(a.name)} -- LOCKED`)}),ce.showAllDisciplines(e),wt(ie.disciplinesMenu)},disciplineMenuLoop(e){const t=ie.currentDiscipline;n.player;if(1==e){pt(`${p}Showing all skills in the ${t.name.toUpperCase()} discipline. Say the name of a skill to view its description and unlock it if you haven't done so already.`);var a=0,o=0;t.skills.forEach(e=>{1==e.unlocked&&(a+=1),o+=1}),pt(`Skills known in this discipline: ${a}/${o}<br>`),t.skills.forEach(e=>{const t=e.name,a=1==e.unlocked?\"X\":\" \";pt(`${qe[t].name} - [${a}]`)})}ce.skillsInDiscipline(t),wt(ie.disciplineMenu)},disciplineMenu(){vt(ie.disciplineMenu);const e=kt().toLowerCase(),t=n.player,a=ie.currentDiscipline,o=a.skills.findIndex(t=>qe[t.name].name==e);if(-1!=o){const n=qe[a.skills[o].name].description,r=a.skills[o];if(pt(`${p}${at(e)} - ${n}`),1==r.unlocked)pt(p+\"This skill is already unlocked.\"),ce.skillsInDiscipline(a),ie.disciplineMenuLoop(!1);else{pt(p+\"This skill is not learned. In order to unlock it, the following requirements must be met:\");if(0==ie.checkRequirements(r))_t([[\"<br>You do not meet the requirements to unlock this skill!\",2]],\"outside\",()=>{ie.disciplineMenuLoop(!0)});else{var s=ie.checkCost(r);pt(`Unlocking this skill requires ${r.cost.ap} AP.`),t.ap<r.cost.ap&&(s=!1),0==s?_t([[\"<br>You do not have enough items/gold/ap to unlock this skill!\",2]],\"outside\",()=>{ie.disciplineMenuLoop(!0)}):(pt(\"Would you like to learn this skill? Say 'y' or 'yes' to learn it, otherwise enter anything else.\"),ie.currentSkill=r,wt(ie.unlockSkill))}}}else\"back\"==e||\"b\"==e?ie.disciplinesMenuLoop():(pt(\"<br>Invalid input\"),ce.skillsInDiscipline(a),ie.disciplineMenuLoop(!1))},unlockSkill(){vt(ie.unlockSkill);const e=kt().toLowerCase(),t=n.player,a=ie.currentSkill;\"y\"==e||\"yes\"==e?(a.unlocked=!0,a.cost.items.forEach(e=>{const a=t.inventory.findIndex(t=>{try{return t.name==e[0]}catch{}}),n=t.inventory[a];n[1]-=e[1],0==n[1]&&delete t.inventory[a]}),t.gold-=a.cost.gold,t.ap-=a.cost.ap,pt(\"Skill unlocked!\"),pt(\"If you would like to use this skill in battle, remember to <u>equip</u> it first.\"),ce.unlockedDisciplines(),ie.disciplineMenuLoop(!0)):(pt(p+\"Returning to discipline menu...\"),ce.unlockedDisciplines(),ie.disciplineMenuLoop(!0)),ot(t,\"normal\")},disciplinesMenu(){vt(ie.disciplinesMenu);const e=kt().toLowerCase(),t=(n.player,l);if(t.hasOwnProperty(e)){if(1==t[e].unlocked)ie.currentDiscipline=t[e],ie.disciplineMenuLoop(!0);else if(0==t[e].unlocked||1==t[e].visible){this.currentDiscipline=t[e];const a=this.currentDiscipline;pt(`<b>${at(a.name)}</b> - ${a.desc}`),pt(p+\"This discipline is not unlocked. To unlock it, the following requirements must be met:\");n.player;if(0==ie.checkRequirements(a))_t([[\"You do not meet the requirements to unlock this discipline!\",2]],\"outside\",ie.disciplinesMenuLoop);else{0==ie.checkCost(a)?_t([[\"You do not have enough items/gold to unlock this discipline!\",2]],\"outside\",ie.disciplinesMenuLoop):(pt(\"<br>Would you like to unlock this discipline? If so, type 'y' or 'yes'. This action cannot be undone.\"),wt(ie.unlockDiscipline))}}}else\"back\"==e||\"b\"==e?(pt(p+\"Returning...\"),pt(p+\"Entering skills menu. To change skills equipped, say 'e'/'equipped', or say 'l'/'learn' to learn new skills.\"),Pt([\"equipped\",\"learn\",\"back\"]),wt(re)):(pt(\"<br>Invalid input<br>\"),wt(ie.disciplinesMenu));ot(n.player,\"normal\")},unlockDiscipline(){vt(ie.unlockDiscipline);const e=n.player,t=kt().toLowerCase();\"y\"==t||\"yes\"==t?(this.currentDiscipline.unlocked=!0,this.currentDiscipline.cost.items.forEach(t=>{const a=e.inventory.findIndex(e=>{try{return e[0]==t[0]}catch{}}),n=e.inventory[a];n[1]-=t[1],0==n[1]&&delete e.inventory[a]}),e.gold-=this.currentDiscipline.cost.gold,pt(p+\"Discipline unlocked!\"),this.currentDiscipline=null,ie.disciplinesMenuLoop()):(pt(p+\"Returning to disciplines menu..\"),ie.disciplinesMenuLoop()),ot(n.player,\"normal\")},checkRequirements(e,t=!0){const a=n.player;var o=!0,s=!1;return a.level>=e.requirements.level?s=!0:o=!1,t&&pt(`Be at level ${e.requirements.level} or higher - [${1==s?\"X\":\" \"}]`),e.requirements.skills.forEach(e=>{-1!=a.library.indexOf(e)?s=!0:(s=!1,o=!1),t&&pt(`Unlock skill ${e} - [${1==s?\"X\":\" \"}]`)}),e.requirements.flags.forEach(e=>{1==c[e].complete?s=!0:(s=!1,o=!1),t&&pt(`${c[e].desc} - [${1==s?\"X\":\" \"}]`)}),o},checkCost(e){const t=n.player;var a=!0;return pt(`<br>You will need to pay: ${e.cost.gold} gold.`),e.cost.items.length>0&&(pt(\"You will also need the following items:\"),e.cost.items.forEach(e=>{const n=t.inventory.findIndex(t=>{try{return t[0]==e[0]}catch{}});var o=0;o=-1==n?0:t.inventory[n][1],pt(`${e[1]} ${e[0]} (${o}/${e[1]})`),e[1]>o&&(a=!1)})),e.cost.gold>t.gold&&(a=!1),a}},le={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){pt(p+\"Showing all available disciplines. Say the name of a discipline to view the skills it contains. <b>Or, say 'e' or 'equipped' to view your currently equipped skills.</b>\");const e=l;console.log(\"e \"+n.special.doingTutorial),1!=n.special.doingTutorial&&Object.keys(e).forEach(t=>{e[t].requirements.level<=n.player.level&&(e[t].visible=!0)}),Object.keys(e).forEach(t=>{const a=e[t];1==a.unlocked&&pt(\" - \"+at(a.name))});var t=[\"equipped\"];Object.keys(e).forEach(a=>{const n=e[a];1==n.unlocked&&t.push(n.name)}),t.push(\"back\"),Pt(t),wt(le.disciplinesMenu)},disciplinesMenu(){vt(le.disciplinesMenu);const e=kt().toLowerCase(),t=n.player,a=l;if(a.hasOwnProperty(e)){if(1==a[e].unlocked){le.currentDiscipline=a[e];var o=[\"equipped\"];Object.keys(a).forEach(e=>{const t=a[e];1==t.unlocked&&o.push(t.name)}),o.push(\"back\"),Pt(o),le.disciplineMenuLoop(!0)}}else if(\"back\"==e||\"b\"==e)pt(p+\"Returning...\"),pt(p+\"Entering skills menu. To change skills equipped, say 'e'/'equipped', or say 'l'/'learn' to learn new skills.\"),Pt([\"equipped\",\"learn\",\"back\"]),wt(re);else if(\"e\"==e||\"equipped\"==e)_t([[p+\"Showing equipped skills. Say the name of an equipped skill to unequip it.\",.3,!0,{},\"flatsec\"]],\"outside\",()=>{dt(t.stats.skills).forEach(e=>{const t=qe[e].description;pt(`<br>${qe[e].name} - ${t}`)}),le.initShortcuts(),wt(le.unequipSkill)});else{pt(\"<br>Invalid input<br>\"),wt(le.disciplinesMenu);o=[\"equipped\"];Object.keys(a).forEach(e=>{const t=a[e];1==t.unlocked&&o.push(t.name)}),o.push(\"back\"),Pt(o)}ot(n.player,\"normal\")},unequipSkill(){const e=kt().toLowerCase(),t=n.player;vt(le.unequipSkill);var a=dt(t.stats.skills);-1!=a.indexOf(e.replace(/\\s/g,\"_\"))?t.stats.skills.length>1?(\"attack\"!=e&&\"guard\"!=e?(t.stats.skills.splice([a.indexOf(e.replace(/\\s/g,\"_\"))],1),pt(e+\" unequipped.\")):pt(\"<br>That skill can't be unequipped!\"),le.initShortcuts(),wt(le.unequipSkill)):(pt(\"You can't have 0 skills!\"),le.initShortcuts(),wt(le.unequipSkill)):\"back\"==e||\"b\"==e?(pt(p+\"Returning to disciplines menu...\"),le.disciplinesMenuLoop()):(pt(\"<br>Invalid input.\"),le.initShortcuts(),wt(le.unequipSkill))},disciplineMenuLoop(e=!1){const t=le.currentDiscipline;n.player;1==e&&(pt(`${p}Showing all known skills in the ${t.name.toUpperCase()} discipline. Say the name of a skill to view its description.`),t.skills.forEach(e=>{const t=e.name;\"X\"==(1==e.unlocked?\"X\":\" \")&&pt(\" - \"+qe[t].name)}));var a=[];t.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&1==e.unlocked&&a.push(qe[e.name].name)}),a.push(\"back\"),Pt(a),wt(le.disciplineMenu)},disciplineMenu(){vt(le.disciplineMenu);const e=kt().toLowerCase(),t=n.player,a=le.currentDiscipline;if(-1!=a.skills.map(e=>{if(1==e.unlocked)return qe[e.name].name}).indexOf(e)){const n=qe[e.replace(/\\s/g,\"_\")].description,o=de(a,e.replace(/\\s/g,\"_\"));le.currentSkill=o,pt(`<br>${at(e)} - ${n}`),console.log(\"SKILL BY CODE NAME \"+fe(e.replace(/\\s/g,\"_\"),a)),-1!=t.stats.skills.indexOf(fe(e.replace(/\\s/g,\"_\"),a))?(pt(\"This skill is already equipped.\"),pt(\"<br>You are still in the skills menu. Input b/back to return\"),le.disciplineMenuLoop(!1)):(pt(\"<br>This skill is not equipped. Say 'e' or 'equip' to equip this skill. You can also say 'f' or 'forget' to unlearn this skill. Input anything else to return.\"),wt(le.skillMenu))}else\"back\"==e||\"b\"==e?le.disciplinesMenuLoop():(pt(\"<br>Invalid input\"),ce.skillsInDiscipline(a),wt(le.disciplineMenu))},skillMenu(){const e=kt().toLowerCase(),t=n.player;vt(le.skillMenu);const a=le.currentSkill;le.currentDiscipline;\"e\"==e||\"equip\"==e?t.stats.skills.length<12?-1==t.stats.skills.indexOf(a.code)?(t.stats.skills.push(le.currentSkill.code),pt(p+\"Skill equipped.\"),le.disciplineMenuLoop(!0)):(pt(p+\"You already have this skill equipped!\"),le.disciplineMenuLoop(!0)):(pt(p+\"You have too many skills equipped!\"),le.disciplineMenuLoop(!0)):\"f\"==e||\"forget\"==e?(pt(p+\"Would you like to unlearn this skill? You will get the AP back, but you the reagents and gold will be lost.\"),pt(\"<br>Input 'y'/'yes' to forget the skill, otherwise input 'b'/'back' to return to the discipline menu.\"),Pt([\"yes\",\"back\"]),wt(le.unlearnSkillResponse)):(pt(p+\"Returning to discipline menu...\"),le.disciplineMenuLoop(!0))},unlearnSkillResponse(){vt(le.unlearnSkillResponse);switch(kt().toLowerCase()){case\"y\":case\"yes\":{const e=le.currentSkill;le.currentDiscipline;-1==n.player.stats.skills.indexOf(e.code)?1==e.unlearnable?le.unlearnSkill():(pt(\"<br>This skill cannot be unlearned!\"),le.disciplineMenuLoop(!0)):(pt(\"<br>You cannot unlearn an equipped skill!\"),le.disciplineMenuLoop(!0));break}case\"b\":case\"back\":pt(p+\"Returning...\"),le.disciplineMenuLoop(!0);break;default:pt(\"Invalid input.\"),wt(le.unlearnSkillResponse)}},unlearnSkill(){const e=le.currentSkill;le.currentDiscipline;e.unlocked=!1,n.player.ap+=e.cost.ap,pt(`${p}Skill unlearned! Gained ${e.cost.ap} AP.`),ot(n.player,\"normal\"),pt(p+\"Returning...\"),le.disciplineMenuLoop(!0)},getSkills:()=>n.player.stats.skills.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var t=e.split(\"-\"),a=t[0],n=t[1];return l[a].skills[n].name}return e}),initShortcuts(){const e=le.getSkills();e.push(\"back\"),Pt(e)}},ce={unlockedDisciplines:()=>{const e=l;var t=[\"equipped\"];Object.keys(e).forEach(a=>{const n=e[a];1==n.unlocked&&t.push(n.name)}),t.push(\"back\"),Pt(t)},skillsInDiscipline:e=>{var t=[];e.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&t.push(qe[e.name].name)}),t.push(\"back\"),Pt(t)},showAllDisciplines:e=>{var t=[];Object.keys(e).forEach(a=>{const n=e[a];1==n.visible&&t.push(n.name)}),t.push(\"back\"),Pt(t)}},de=(e,t)=>{var a=-1;return e.skills.forEach(e=>{e.name==t&&(a=e)}),a},fe=(e,t)=>{const a=t.skills;for(var n=0;n<a.length;n++)if(a[n].name==e)return a[n].code;return-1},me={currentItem:null,currentIndex:-1,returnFunction:null,menuLoop(){me.currentIndex=-1,ot(n.player,\"normal\"),pt(p+\"Entering inventory. Say the name of an item to view its details and equip it. Say the name of a slot to unequip the item in that slot. Say 'p'/'pouch' to enter the pouch menu, which will allow you to remove items from your pouch (to add items, first navigate to the item in your inventory)\"),pt(\"<br>Input <b>'b'/'back'</b> to return.\"),wt(me.inventoryMenu)},inventoryMenu(){vt(me.inventoryMenu);const e=n.player,t=kt().toLowerCase(),a=e.inventory.length>0?e.inventory.findIndex(e=>1==e[1].length?We[e].name.toLowerCase()==t.toLowerCase():We[e[0]].name.toLowerCase()==t.toLowerCase()):-1;if(e.stats.equips.hasOwnProperty(t))null!=e.stats.equips[t]&&me.unequipItem(t),wt(me.inventoryMenu);else if(-1!=a){const t=e.inventory[a];We[t];me.currentItem=t,me.itemLoop()}else\"back\"==t||\"b\"==t?(pt(\"<br>Returning...\"),me.currentIndex=-1,me.returnFunction()):\"p\"==t||\"pouch\"==t?(pt(\"Entering the pouch menu...\"),me.pouchMenuLoop()):(pt(\"<br>Invalid input\"),wt(me.inventoryMenu))},pouchMenuLoop(){const e=n.player;0==e.stats.pouch.length?(pt(\"Your pouch is empty!\"),me.menuLoop()):(pt(\"Currently in the pouch menu. Options:\"),pt(\"<br> - Type the name of an item to remove it from the pouch.\"),pt(\" - b/back (to return)\"),pt(\"<br>Items currently in pouch:<br>\"),e.stats.pouch.forEach(e=>{pt(`${e[1]} ${We[e[0]].name}`)}),wt(me.pouchMenuResponse))},pouchMenuResponse(){vt(me.pouchMenuResponse);const e=kt().toLowerCase(),t=n.player;if(-1!=t.stats.pouch.findIndex(t=>Xe(e)==t[0])){const a=t.stats.pouch.findIndex(t=>Xe(e)==t[0]),n=t.stats.pouch[a][0],o=t.stats.pouch[a][1],s=We[n].name;pt(`Removed ${o} ${s}`),ze(n,o,o),t.stats.pouch.splice(a,1),me.pouchMenuLoop()}else\"b\"==e||\"back\"==e?(pt(\"Returning..\"),me.menuLoop()):(pt(\"Invalid input\"),wt(me.pouchMenuResponse))},itemLoop(){const e=n.player,t=me.currentItem,a=Je(t)?We[t[0]]:We[t];me.currentIndex=e.inventory.findIndex(e=>Je(e)?e[0]==me.currentItem[0]:e==me.currentItem);const o=JSON.parse(JSON.stringify(a));o.hasOwnProperty(\"elemental\")&&(JSON.parse(JSON.stringify(o.elemental)),delete o.elemental),pt(`<br>${a.name} selected.`),Ge(a),pt(\"<br>say 'e'/'equip' to equip this item, and 'u'/'use to consume it.  Otherwise, enter 'b' to return. The item's position in your inventory is marked in <b>bold</b>. Input 'z' to scroll up or 'x' to scroll down.\"),pt(\"<br>Options:\"),pt(\"<br> - e/equip (to equip it)\"),pt(\"<br> - u/use (to consume it)\"),pt(\"<br> - p/pouch (to add the item to your pouch - or remove it if it already added)\"),pt(\"<br> - z to scroll up in inventory\"),pt(\"<br> - x to scroll down in inventory\"),pt(\"<br> - b/back to return\"),me.currentItem=t,ot(n.player,\"normal\"),wt(me.itemMenu)},itemMenu(){vt(me.itemMenu);const e=n.player,t=kt().toLowerCase(),a=me.currentItem,o=Je(a)?We[a[0]]:We[a];if(\"e\"==t||\"equip\"==t)if(\"reagent\"==o.type)pt(\"<br>You cannot equip reagents.\"),wt(me.itemMenu);else{const t=e.inventory.findIndex(e=>e==a.toLowerCase());\"misc\"!=o.type?(null==e.stats.equips[o.type]||me.unequipItem(o.type),me.equipItem(t)):(null!=e.stats.equips.misc1&&null!=e.stats.equips.misc2&&me.unequipItem(\"misc1\"),me.equipItem(t)),me.menuLoop()}else if(\"u\"==t||\"use\"==t)if(1!=o.hasOwnProperty(\"use\"))pt(\"This item cannot be used.\"),wt(me.itemMenu);else if(\"all\"!=o.use.case&&\"outside\"!=o.use.case)pt(\"This item cannot be used here!\"),wt(me.itemMenu);else{const t=o.use.effect;var s=!0;t.forEach(t=>{switch(t[1]){case\"health\":\"flat\"==t[2]?a=t[3]:\"percentile\"==t[2]&&(a=Le.getMaxHealth(e.stats)*(t[3]/100)),e.stats.current_health+a<0?(pt(\"Your health is too low to use that item!\"),s=!1):(e.stats.current_health+=a,e.stats.current_health>Le.getMaxHealth(e.stats)&&(e.stats.current_health=Le.getMaxHealth(e.stats)),pt(`Recovered ${a} HP!`),ot(e,\"normal\"));break;case\"mana\":\"flat\"==t[2]?a=t[3]:\"percentile\"==t[2]&&(a=Le.getPlayerAdd(e.stats).max_mana*(t[3]/100)),e.stats.current_mana+a<0?(pt(\"Your mana is too low to use that item!\"),s=!1):(e.stats.current_mana+=a,e.stats.current_mana>Le.getPlayerAdd(e.stats).max_mana&&(e.stats.current_mana=Le.getPlayerAdd(e.stats).max_mana),pt(`Recovered ${a} MP!`));break;case\"stamina\":var a;\"flat\"==t[2]?a=t[3]:\"percentile\"==t[2]&&(a=Le.getPlayerAdd(e.stats).max_stamina*(t[3]/100)),e.stats.current_mana+a<0?(pt(\"Your stamina is too low to use that item!\"),s=!1):(e.stats.current_stamina+=a,e.stats.current_stamina>Le.getPlayerAdd(e.stats).max_stamina&&(e.stats.current_stamina=Le.getPlayerAdd(e.stats).max_stamina),pt(`Recovered ${a} stamina!`));break;case\"teleport\":{const e=ve();null==e?(pt('<br>This item cannot be used right now!\"'),s=!1):e.name!=t[2]?(pt(\"<br>You can't use this item right now! You're in the wrong zone!\"),s=!1):xe(t[3]);break}default:pt(\"Error occurred: Effect invalid\"),s=!1,wt(me.itemMenu)}var r=!1;s&&(Ue(Xe(o.name),1),0==Ve(Xe(o.name),n.player.inventory)&&(r=!0)),r?me.menuLoop():wt(me.itemMenu),ot(e,\"normal\")})}else if(\"p\"==t||\"pouch\"==t){const t=Xe(o.name);if(-1!=e.stats.pouch.findIndex(e=>e[0]==t)){const a=e.stats.pouch.findIndex(e=>e[0]==t),n=e.stats.pouch[a][1];ze(t,n,n),e.stats.pouch.splice(a,1),pt(`Removed ${n} ${o.name} from the pouch.`),me.itemLoop()}else o.hasOwnProperty(\"use\")&&o.use.hasOwnProperty(\"battleEffect\")?e.stats.pouch.length<i.pouchMaxStorage?(pt(`How many ${o.name} would you like to add to your pouch? Input anything invalid to return.`),pt(`Do note that you cannot add more than ${o.use.pouchMax} of this item.`),wt(me.addPouchResponse)):(pt(\"<b>Your pouch is full!</b>\"),me.itemLoop()):_t([[\"This item cannot be added to your pouch!\",2]],\"outside\",me.itemLoop)}else if(\"z\"==t||\"x\"==t){me.currentItem;const a=me.currentIndex;var r;if(\"z\"==t)pt(p+\"Scrolling up..\"),(r=a-1)<0&&(r=e.inventory.length-1),Je(e.inventory[r])?e.inventory[r][0]:e.inventory[r],me.currentItem=e.inventory[r],me.itemLoop();else pt(p+\"Scrolling down..\"),(r=a+1)==e.inventory.length&&(r=0),Je(e.inventory[r])?e.inventory[r][0]:e.inventory[r],me.currentItem=e.inventory[r],me.itemLoop()}else\"b\"==t||\"back\"==t?(pt(p+\"Returning...\"),me.menuLoop()):(pt(\"<br>Invalid input.\"),wt(me.itemMenu))},addPouchResponse(){vt(me.addPouchResponse);const e=n.player,t=kt().toLowerCase(),a=me.currentItem,o=Je(a)?We[a[0]]:We[a],s=Xe(o.name),r=e.inventory.findIndex(e=>e[0]==s);if(\"NaN\"!=parseInt(t).toString){const a=parseInt(t);var i=!1;a>0&&a<=o.use.pouchMax?a<=e.inventory[r][1]?(a==e.inventory[r][1]&&(i=!0),Ue(s,a),e.stats.pouch.push([s,a]),pt(`Added ${a} ${o.name} to pouch.`),pt(\"When you want to remove this item from your pouch, if you have none of it left in your inventory, you can remove it via the pouch menu accessible by inputting p/pouch instead of an item name at the inventory menu.\")):pt(\"You don't have enough of this item!\"):pt(\"That amount is either beyond the pouch limit or below out of range!\")}else pt(\"Invald input\"),me.itemLoop();_t([[\"Returning..\",2]],\"outside\",i?me.menuLoop:me.itemLoop)},unequipItem(e){const t=n.player,a=t.stats.equips[e],o=We[a];t.stats.equips[e]=void 0,t.inventory.push(a),pt(`${p}${o.name} unequipped.`),ot(t,\"normal\")},equipItem(e){const t=n.player,a=t.inventory[e],o={...We[a]};if(\"misc\"==o.type&&(null==t.stats.equips.misc1?o.type=\"misc1\":null==t.stats.equips.misc2?o.type=\"misc2\":o.type=\"misc1\"),null==t.stats.equips[o.type]){const a=t.inventory[e];delete t.inventory[e],t.stats.equips[o.type]=a,pt(`${p}${o.name} equipped.`)}else pt(\"There is already an item equipped in that slot.\");for(var s=0;s<t.inventory.length;s++)null==t.inventory[s]&&t.inventory.splice(s,1);ot(t,\"normal\")}},ue=e=>{me.returnFunction=e;0==n.tutorials.includes(\"inventory_1\")?(n.tutorials.push(\"inventory_1\"),yt(b.inventory_1,me.menuLoop)):me.menuLoop()},he=()=>({currentZone:Se.currentZone,currentRoom:Se.currentRoom,coordinates:Se.coordinates,justEnteredRoom:Se.justEnteredRoom,ambushed:Se.ambushed}),pe={explores:[],encounters:[[]],finds:[[]],ambushes:[[]],interacts:[],onEnter:[]},ge={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"slime\",25,{levelCap:5}],[\"lesser_teravalum\",25,{levelCap:6}],[\"brown_bear\",25,{levelCap:7}],[\"grey_wolf\",25,{levelCap:7}]],finds:[[\"wood\",17,1,3],[\"slime_ball\",14,1,3],[\"brown_fur\",14,1,3],[\"weak_vine\",14,1,3],[\"grey_wolf_pelt\",14,1,3],[\"hempweed_ligament\",11,1,2],[\"sharp_claw\",11,1,2],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[[\"slime\",5,{levelCap:5}],[\"lesser_teravalum\",5,{levelCap:6}],[\"brown_bear\",5,{levelCap:7}],[\"grey_wolf\",5,{levelCap:7}]],interacts:[],onEnter:[[]]},ye={explores:[[\"encounter\",65],[\"find\",35]],encounters:[[\"young_venomous_wolf\",35,{levelCap:16}],[\"lesser_forest_scourge\",30,{levelCap:18}],[\"mobile_lesser_ent\",25,{levelCap:20}]],finds:[[\"forest_scourge_scale\",27,1,3],[\"sharp_claw\",27,2,3],[\"venomous_claw\",17,1,3],[\"grey_wolf_pelt\",17,2,5],[\"magic_bark\",10,1,3],[\"sharpened_sword\",2,1,1]],ambushes:[[\"grey_wolf\",25,{changeLevel:8,levelCap:15}],[\"brown_bear\",25,{changeLevel:10,levelCap:6}],[\"young_venomous_wolf\",25,{levelCap:16}],[\"lesser_forest_scourge\",25,{levelCap:18}]],interacts:[],onEnter:[[]]},_e={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"greater_slime\",40,!0,!1,!1],[\"lesser_water_klastera\",30,!0,!1,!1],[\"young_water_lizard\",30,!0,!1,!1]],finds:[[\"slime_ball\",40,2,5],[\"weak_membrane\",20,1,2],[\"tiny_lizard_tail\",20,1,1],[\"aquus_cluster\",17,1,2],[\"water_orb\",3,1,1]],ambushes:[],interacts:[],onEnter:[[]]},be={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"red_slime\",35,!0,!1,!1],[\"venomous_wolf\",30,!0,!1,!1],[\"grey_wolf\",25,16,!1,!1],[\"dark_beast\",10,!0,!1,!1]],finds:[[\"red_slime_ball\",40,3,4],[\"grey_wolf_pelt\",30,2,4],[\"sharp_claw\",20,1,1],[\"shadow_pelt\",10,2,3]],ambushes:[],interacts:[],onEnter:[[]]},ke={explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]],interacts:[],onEnter:[[]]},we={0:\"floor0\",1:\"floor1\"},ve=()=>Se.currentZone,xe=e=>{var t;if(null==Se.currentZone)return!1;{if(\"string\"==typeof e){const o=Se.currentZone.zone;for(var a=0;a<o.length;a++)for(var n=0;n<o[a].length;n++)if(o[a][n]==e){t=[a,n];break}}else t=e;const o=Se.currentZone.zone;pt(\"Teleporting to \"+[t[1],o.length-t[0]]),Se.ambushed=!0,Se.coordinates=t,Se.ambushed=!0,Se.justEnteredRoom=!0}},Se={currentZone:void 0,currentRoom:void 0,coordinates:void 0,justEnteredRoom:!0,ambushed:!1,roomLoop:()=>{const e=Se.currentZone,t=Se.coordinates,a=e.zone[t[0]][t[1]],o=JSON.parse(JSON.stringify(e[a[0]]));if(a.length>1){const e=o.specialRooms[a.slice(1)];Object.keys(e).forEach(t=>{o[t]=e[t]})}delete o.specialRooms,Se.currentRoom=o;const s=Se.currentRoom,r=n.player.maps[e.name];\"discovered\"!=r[t[1]][t[0]]&&(r[t[1]][t[0]]=\"discovered\",\"discovered\"!=r[t[1]+1][t[0]]&&(r[t[1]+1][t[0]]=\"seen\"),\"discovered\"!=r[t[1]-1][t[0]]&&(r[t[1]-1][t[0]]=\"seen\"),\"discovered\"!=r[t[1]][t[0]+1]&&(r[t[1]][t[0]+1]=\"seen\"),\"discovered\"!=r[t[1]][t[0]-1]&&(r[t[1]][t[0]-1]=\"seen\")),ot(n.player);var i=!1;if(0==Se.ambushed){Se.ambushed=!0;const e=s.ambushes,t=Math.floor(100*Math.random())+1;var l=0,c=0;for(l in e){if(t>c&&t<=e[l][1]+c){i=!0,pt(p+\"AMBUSH!!\");const t=P[e[l][0]],a=e[l][2];Le.battleProcessing(n.player,t,Se.roomLoop,a);break}c+=e[l][1]}}var d=!1;if(Se.justEnteredRoom&&!i){var f=[];const e=Se.currentRoom.onEnter;if(e.length>0){e.forEach(e=>{1==ct(e[1])&&f.push(e[0])});const t=e=>{var a=e;Be(a[0],()=>{a.shift(),a.length>0?t(a):(Se.justEnteredRoom=!1,Se.roomLoop())})};f.length>0&&(d=!0,t(f))}}i||d||(Se.roomLoop2(Se.justEnteredRoom),wt(Se.roomResponse))},roomLoop2:(e=!1)=>{ot(n.player);const t=Se.coordinates,a=Se.currentZone.zone,o=(a[t[0]][t[1]],Se.currentRoom);R.playMusic(o.music),e&&pt(`${p}${o.entrance}`);const s=[t[1],a.length-t[0]];pt(`<b>Coordinates: [${s}]</b>`),Pe().forEach(e=>{pt(e)});var r=1;o.extraOptions.forEach(e=>{var t=!0;e.length>1&&(t=ct(e[1])),t&&(pt(` - ${r}: ${e[0]}`),r+=1)}),Se.justEnteredRoom=!1,wt(Se.roomResponse)},roomResponse:()=>{vt(Se.roomResponse);const e=kt().toLowerCase(),t=Se.currentZone,a=Se.coordinates,o=(Se.currentZone.zone[a[0]][a[1]],Se.currentRoom);ot(n.player);const s=n.unlocked;switch(!0){case\"ex\"==e:case\"explore\"==e:{const e=o.explores;if(e.length>0){const t=Math.floor(100*Math.random())+1;var r=0;for(r in e){const a=0==r?0:e[r-1][1];if(t>a&&t<=e[r][1]+a)if(\"encounter\"==e[r][0]){r=0;const e=o.encounters,t=Math.floor(100*Math.random())+1;var i=0;for(r in e){if(t>(i+=0==r?0:e[r-1][1])&&t<=e[r][1]+i){pt(\"<br>You survey the area....\"),pt(\"<br>An enemy approaches!\");const t=P[e[r][0]],a=e[r][2];Le.battleProcessing(n.player,t,Se.roomLoop,a);break}}}else if(\"find\"==e[r][0]){r=0;const e=o.finds,t=Math.floor(100*Math.random())+1;i=0;for(r in e){if(t>(i+=0==r?0:e[r-1][1])&&t<=e[r][1]+i){R.playFX(\"find\"),pt(\"<br>You survey the area....\"),pt(\"<br>You find something while looking around!\"),null!=e[r][3]?ze(e[r][0],e[r][2],e[r][3]):ze(e[r][0]);break}}wt(Se.roomResponse)}}}else pt(\"<br><b>There is nothing to be found.</b>\"),ot(n.player),Se.roomLoop();break}case\"i\"==e&&s.inventory:case\"inventory\"==e&&s.inventory:ue(Se.roomLoop);break;case\"st\"==e&&s.stats:case\"stats\"==e&&s.stats:Q(Se.roomLoop);break;case\"set\"==e:case\"settings\"==e:Y(Se.roomLoop);break;case\"c\"==e&&s.crafting:case\"crafting\"==e&&s.crafting:O(Se.roomLoop);break;case null!=o.interacts[parseInt(e-1)]:for(var l=[],c=0;c<o.interacts.length;c++){var d=!0;o.interacts[c].length>1&&(d=ct(o.interacts[c][1])),d&&l.push(o.interacts[c])}null!=l[parseInt(e-1)]?Be(l[parseInt(e-1)][0],Se.roomLoop):(pt(\"Invalid input\"),wt(Se.roomResponse));break;case\"leave\"==e:pt(\"<br>Leaving area...\"),Se.currentZone=void 0,Se.coordinates=void 0,Se.justEnteredRoom=!0,At();break;case\"s\"==e:case\"south\"==e:{var f=void 0;const e=[a[0]+1,a[1]];null!=o.south?f=Se.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?_t([[\"<br>You travel to the south...\",.4,!0,{},\"flatsec\"]],\"outside\",()=>{Se.coordinates=f,Se.justEnteredRoom=!0,Se.ambushed=!1,Se.roomLoop()}):(pt(\"<b>You can't travel in that direction!</b>\"),Se.roomLoop());break}case\"n\"==e:case\"north\"==e:{f=void 0;const e=[a[0]-1,a[1]];null!=o.south?f=Se.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?_t([[\"<br>You travel to the north...\",.4,!0,{},\"flatsec\"]],\"outside\",()=>{Se.coordinates=f,Se.justEnteredRoom=!0,Se.ambushed=!1,Se.roomLoop()}):(pt(\"<b>You can't travel in that direction!</b>\"),Se.roomLoop());break}case\"w\"==e:case\"west\"==e:{f=void 0;const e=[a[0],a[1]-1];null!=o.south?f=Se.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?_t([[\"<br>You travel to the west...\",.4,!0,{},\"flatsec\"]],\"outside\",()=>{Se.coordinates=f,Se.justEnteredRoom=!0,Se.ambushed=!1,Se.roomLoop()}):(pt(\"<b>You can't travel in that direction!</b>\"),Se.roomLoop());break}case\"e\"==e:case\"east\"==e:{f=void 0;const e=[a[0],a[1]+1];null!=o.south?f=Se.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?_t([[\"<br>You travel to the east...\",.4,!0,{},\"flatsec\"]],\"outside\",()=>{Se.coordinates=f,Se.justEnteredRoom=!0,Se.ambushed=!1,Se.roomLoop()}):(pt(\"<b>You can't travel in that direction!</b>\"),Se.roomLoop());break}case\"m\"==e:case\"map\"==e:{const e=t.zone,n=Te(e,t,a);pt(n),Se.roomLoop();break}case\"sm\"==e:case\"show minimap\"==e:\"minimap\"==nt.mode?nt.mode=\"normal\":nt.mode=\"minimap\",ot(n.player),Se.roomLoop();break;case\"rep\"==e:case\"reprint\"==e:pt(\"Reprinting options..\"),ot(n.player),Se.roomLoop();break;default:pt(\"Invalid input\"),wt(Se.roomResponse)}}},Ie={floor0:{name:\"floor0\",zone:[[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"z2\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"z1\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"p\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"p\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"p\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"p\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"t4\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"t3\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"t2\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"t1\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"t\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"s\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"]],s:{entrance:\"The area is a small clearing; a somewhat square area enclosed with a thick barrier of trees in all directions except north. It is clearly very light but the overhead covering of leaves allows only a small amount of the intense sunlight to stream through. To the north is a tall tunnel of green foliage for which no end can be seen.\",colour:\"#0b6d00\",extraOptions:[],music:\"forest\",explores:pe.explores,encounters:pe.encounters,finds:pe.finds,ambushes:[],interacts:[],onEnter:[[\"f0_intro\",[\"flag: -f0_done_intro\"]]]},f:{entrance:\"This area is part of the clearing. It's hard to understand how you got here. There's no entrance, only a more dimly-lit tunnel formed with trees and their multitudinous branches overhead.\",colour:\"#0b6d00\",extraOptions:[],music:\"forest\",explores:pe.explores,encounters:pe.encounters,finds:pe.finds,ambushes:pe.ambushes,interacts:pe.interacts,onEnter:pe.onEnter},t:{entrance:\"To the south, you can see the clearing; it's comparative brightness beckoning you. But you know you must continue towards the north, through the grassy cavern that has no end in sight.\",colour:\"#0b6d00\",extraOptions:[],music:\"forest\",explores:pe.explores,encounters:pe.encounters,finds:pe.finds,ambushes:pe.ambushes,interacts:pe.interacts,onEnter:pe.onEnter,specialRooms:{1:{onEnter:[[\"f0_slime_fight\",[\"flag: -f0_fought_slime\"]]]},2:{onEnter:[[\"f0_young_wolf_fight\",[\"flag: -f0_fought_young_wolf\"]]]},3:{onEnter:[[\"f0_teaching_crafting\",[\"flag: -f0_been_taught_crafting\"]]]},4:{onEnter:[[\"f0_f4_checkpoint\",[\"flag: -f0_passed_t4\"]]]}}},z:{entrance:\"To the south, you can see the clearing; it's comparative brightness beckoning you. But you know you must continue towards the north, through the grassy cavern that has no end in sight.\",colour:\"#ff0000\",extraOptions:[],music:\"none\",explores:pe.explores,encounters:pe.encounters,finds:pe.finds,ambushes:pe.ambushes,interacts:pe.interacts,onEnter:pe.onEnter,specialRooms:{1:{onEnter:[[\"f0_dreadful_wolf_fight\",[\"flag: -f0_fought_dreadful_wolf\"]]]},2:{onEnter:[[\"f0_charon_fight\",[\"flag: -f0_fought_charon\"]]]}}},p:{entrance:\"To the south, you can see the clearing; it's comparative brightness beckoning you. But you know you must continue towards the north, through the grassy cavern that has no end in sight. You feel like you could be attacked at any moment in this area...\",colour:\"#00ccff\",extraOptions:[],music:\"forest\",explores:[[\"find\",50],[\"encounter\",50]],encounters:[[\"slime\",100,{levelCap:1,modifyEnemy:{exp:0}}]],finds:[[\"slime_ball\",100,2,4]],ambushes:[[\"slime\",15,{levelCap:1,modifyEnemy:{exp:0}}]],interacts:pe.interacts,onEnter:pe.onEnter}},floor1:{name:\"floor1\",zone:[[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"z\",\"z\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"z\",\"z\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"f\",\"d\",\"d\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f#31\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f7#\",\"f\",\"f\",\"f#40\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f11#\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"f29#\",\"f\",\"f\",\"f\",\"f\",\"n\",\"f\",\"n\",\"f#10\",\"n\",\"f\",\"f\",\"f44#\",\"f\",\"f\",\"f45#\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"f\",\"n\",\"n\",\"n\",\"f8#\",\"n\",\"f#9\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f12#\",\"n\",\"d\",\"d\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"n\",\"f13#\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"n\",\"f4#\",\"n\",\"n\",\"f45#\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f46#\",\"n\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"f#39\",\"n\",\"n\",\"f\",\"n\",\"f27#\",\"f\",\"f\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f41#\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f99#\",\"f98#\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f14#\",\"f\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f28#\",\"f\",\"f\",\"f6#\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f1#\",\"n\",\"f97#\",\"f96#\",\"n\",\"n\",\"n\",\"f43#\",\"n\",\"n\",\"f\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"s\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f15#\",\"n\",\"f\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f45#\",\"n\",\"f5#\",\"f\",\"f\",\"f#26\",\"n\",\"f2#\",\"n\",\"f\",\"f3#\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f46#\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"d\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f26#\",\"f\",\"f\",\"f\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f16#\",\"f\",\"f45#\",\"f\",\"f25\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f46#\",\"n\",\"n\",\"n\",\"f30#\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f#35\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f25#\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"f\",\"f\",\"n\",\"f38#\",\"n\",\"n\",\"n\",\"n\",\"f23#\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f17#\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"f24#\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f42#\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f45#\",\"f\",\"f\",\"f20#\",\"n\",\"f\",\"n\",\"f18#\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"f33#\",\"f\",\"f\",\"n\",\"f22#\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f#37\",\"f\",\"f#32\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f21#\",\"n\",\"f\",\"f47#\",\"n\",\"n\",\"f19#\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f#34\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"q\",\"q\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"]],s:{entrance:\"Green grass unfolds like a blanket in all directions. As far as can be seen, the view is fairly unchanging - vibrant leafage darkened by a lack of light caused by the sheltering of arborous towers above. Medum-sized bushes and thickets prevent a clear view in any particular direction, however to the north-east, some very faint echoes of water splashing can be heard.\",colour:\"#0b6d00\",extraOptions:[[\"Approach person being attacked by slime\",[\"flag: -f1_spoken_to_tutorial_man\"]]],music:\"forest\",explores:ge.explores,encounters:ge.encounters,finds:ge.finds,ambushes:[],interacts:[[\"f1_tutorial_man\",[\"flag: -f1_spoken_to_tutorial_man\"]]],onEnter:[]},f:{entrance:\"The forest remains unchanging for a large distance. It is easy to travel if one avoids the occasional bushy path.\",colour:\"#0b6d00\",extraOptions:[],music:\"forest\",explores:ge.explores,encounters:ge.encounters,finds:ge.finds,ambushes:ge.ambushes,interacts:ge.interacts,onEnter:ge.onEnter,specialRooms:{1:{extraOptions:[[\"Speak to little girl\",[]]],interacts:[[\"f1_little_girl\",[]]]},2:{extraOptions:[[\"Speak to rude-looking kid\",[\"flag: -f1_spoken_to_rude_kid\"]]],interacts:[[\"f1_rude_kid\",[\"flag: -f1_spoken_to_rude_kid\"]]]},3:{extraOptions:[[\"Speak to lost looking teenager\",[\"flag: -f1_spoken_to_lost_teenager\"]]],interacts:[[\"f1_lost_teenager\",[\"flag: -f1_spoken_to_lost_teenager\"]]]},4:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_simple_sword\"]]],interacts:[[\"f1_simple_sword_on_floor\",[\"flag: -f1_picked_up_simple_sword\"]]]},5:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_damaged_helm\"]]],interacts:[[\"f1_damaged_helm_on_floor\",[\"flag: -f1_picked_up_damaged_helm\"]]]},6:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_metal_stave\"]]],interacts:[[\"f1_metal_stave_on_floor\",[\"flag: -f1_picked_up_metal_stave\"]]]},7:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_silver_axe\"]]],interacts:[[\"f1_silver_axe_on_floor\",[\"flag: -f1_picked_up_silver_axe\"]]]},8:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_simple_dagger\"]]],interacts:[[\"f1_simple_dagger_on_floor\",[\"flag: -f1_picked_up_simple_dagger\"]]]},9:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_pickaxe\"]]],interacts:[[\"f1_pickaxe_on_floor\",[\"flag: -f1_picked_up_pickaxe\"]]]},10:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_brown_pelt\"]]],interacts:[[\"f1_brown_pelt_on_floor\",[\"flag: -f1_picked_up_brown_pelt\"]]]},11:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_silver_helm\"]]],interacts:[[\"f1_silver_helm_on_floor\",[\"flag: -f1_picked_up_silver_helm\"]]]},12:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_venomous_claw\"]]],interacts:[[\"f1_venomous_claw_on_floor\",[\"flag: -f1_picked_up_venomous_claw\"]]]},13:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_vine_helmet\"]]],interacts:[[\"f1_vine_helmet_on_floor\",[\"flag: -f1_picked_up_vine_helmet\"]]]},14:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_ninja_headcloak\"]]],interacts:[[\"f1_ninja_headcloak_on_floor\",[\"flag: -f1_picked_up_ninja_headcloak\"]]]},15:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_makeshift_steel_armour\"]]],interacts:[[\"f1_makeshift_steel_armour_on_floor\",[\"flag: -f1_picked_up_makeshift_steel_armour\"]]]},16:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_earthen_shield_potion\"]]],interacts:[[\"f1_earthen_shield_potion_on_floor\",[\"flag: -f1_picked_up_earthen_shield_potion\"]]]},17:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_vine_pantaloons\"]]],interacts:[[\"f1_vine_pantaloons_on_floor\",[\"flag: -f1_picked_up_vine_pantaloons\"]]]},18:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_silver_legwear\"]]],interacts:[[\"f1_silver_legwear_on_floor\",[\"flag: -f1_picked_up_silver_legwear\"]]]},19:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_slime_ball\"]]],interacts:[[\"f1_slime_ball_on_floor\",[\"flag: -f1_picked_up_slime_ball\"]]]},20:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_weak_vine\"]]],interacts:[[\"f1_weak_vine_on_floor\",[\"flag: -f1_picked_up_weak_vine\"]]]},21:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_hempweed_ligament\"]]],interacts:[[\"f1_hempweed_ligament_on_floor\",[\"flag: -f1_picked_up_hempweed_ligament\"]]]},22:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_wood\"]]],interacts:[[\"f1_wood_on_floor\",[\"flag: -f1_picked_up_wood\"]]]},23:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_steel\"]]],interacts:[[\"f1_steel_on_floor\",[\"flag: -f1_picked_up_steel\"]]]},24:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_health_potion\"]]],interacts:[[\"f1_health_potion_on_floor\",[\"flag: -f1_picked_up_health_potion\"]]]},25:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_greater_health_potion\"]]],interacts:[[\"f1_greater_health_potion_on_floor\",[\"flag: -f1_picked_up_greater_health_potion\"]]]},26:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_mana_potion\"]]],interacts:[[\"f1_mana_potion_on_floor\",[\"flag: -f1_picked_up_mana_potion\"]]]},27:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_greater_mana_potion\"]]],interacts:[[\"f1_greater_mana_potion_on_floor\",[\"flag: -f1_picked_up_greater_mana_potion\"]]]},28:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_crafted_health_potion\"]]],interacts:[[\"f1_crafted_health_potion_on_floor\",[\"flag: -f1_picked_up_crafted_health_potion\"]]]},29:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_daggers\"]]],interacts:[[\"f1_forest_explorer_daggers_on_floor\",[\"flag: -f1_picked_up_forest_explorer_daggers\"]]]},30:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_cap\"]]],interacts:[[\"f1_forest_explorer_cap_on_floor\",[\"flag: -f1_picked_up_forest_explorer_cap\"]]]},31:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_armour\"]]],interacts:[[\"f1_forest_explorer_armour_on_floor\",[\"flag: -f1_picked_up_forest_explorer_armour\"]]]},32:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_pants\"]]],interacts:[[\"f1_forest_explorer_pants_on_floor\",[\"flag: -f1_picked_up_forest_explorer_pants\"]]]},33:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_pendant\"]]],interacts:[[\"f1_forest_explorer_pendant_on_floor\",[\"flag: -f1_picked_up_forest_explorer_pendant\"]]]},34:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_charm\"]]],interacts:[[\"f1_forest_explorer_charm_on_floor\",[\"flag: -f1_picked_up_forest_explorer_charm\"]]]},35:{extraOptions:[[\"Speak to travelling hermit\",[\"flag: -f1_spoken_to_hermit\"]]],interacts:[[\"f1_travelling_hermit\",[\"flag: -f1_spoken_to_hermit\"]]]},36:{extraOptions:[[\"Speak to lost-looking person\",[\"flag: -f1_spoken_to_person_looking_for_settlement\"]]],interacts:[[\"f1_person_looking_for_settlement\",[\"flag: -f1_spoken_to_person_looking_for_settlement\"]]]},37:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_taken_crafted_sword\"]]],interacts:[[\"f1_owned_crafted_sword\",[\"flag: -f1_taken_crafted_sword\"]]]},38:{extraOptions:[[\"Speak to explorer woman\",[]]],interacts:[[\"f1_explorer_woman\",[]]]},40:{extraOptions:[[\"Check out person in the distance\",[]]],interacts:[[\"f1_person_on_toilet\",[]]]},41:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_east\",[]]]},42:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_north\",[]]]},43:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_west\",[]]]},44:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_south\",[]]]},45:{extraOptions:[[\"Check out peculiar tree\",[]]],interacts:[[\"f1_lesser_treant\",[]]]},46:{extraOptions:[[\"Check out peculiar tree\",[]]],interacts:[[\"f1_treant\",[]]]},47:{extraOptions:[[\"Check out peculiar tree\",[]]],interacts:[[\"f1_lesser_ent\",[]]]},99:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to alchemist lady\",[]]],interacts:[[\"f1_alchemist_woman\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]},98:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to craftsman\",[]]],interacts:[[\"f1_forest_craftsman\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]},97:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to teenage cleric\",[]]],interacts:[[\"f1_forest_cleric\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]},96:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to ninja\",[]]],interacts:[[\"f1_ninja_trainer\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]}}},d:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous.\",colour:\"#003300\",extraOptions:[],music:\"forest\",explores:ye.explores,encounters:ye.encounters,finds:ye.finds,ambushes:ye.ambushes,interacts:ye.interacts,onEnter:ye.onEnter},r:{entrance:\"A thin river runs with numerous tributaries flowing out in all directions, such that no matter where you go, the river seems to follow. The grass is very short compared to the forest and it is much easier to see where you're going.\",colour:\"#0018a8\",extraOptions:[],explores:_e.explores,encounters:_e.encounters,finds:_e.finds,ambushes:_e.ambushes,interacts:_e.interacts,onEnter:_e.onEnter},q:{entrance:\"The trees are taller and brimming with leaves, although their black-purple hue makes them seem as though they are dead and rotton. The grass beneath your feet is crusty and uncomfortable to walk on. There is a dead silence that makes even taking a step an uncomfortable endeavour as the leafage crinkles below your feet.\",colour:\"#b10000\",extraOptions:[],explores:be.explores,encounters:be.encounters,finds:be.finds,ambushes:be.ambushes,interacts:be.interacts,onEnter:be.onEnter},z:{entrance:\"AREA INCOMPLETE\",colour:\"#b2009c\",extraOptions:[[]],explores:ke.explores,encounters:ke.encounters,finds:ke.finds,ambushes:ke.ambushes,onEnter:ke.onEnter,interacts:[[]]}}},Pe=function(){const e=n.unlocked,t=[p+\" - ex/Explore\",\" - w/west\",\" - e/east\",\" - n/north\",\" - s/south\"];return e.inventory&&t.push(\" - i/inventory\"),e.stats&&t.push(\" - st/stats\"),e.crafing&&t.push(\" - c/crafting\"),t.push(\" - m/map\",\" - sm/show minimap\",\" - set/settings\",\" - Leave\"),t},Te=(e,t,a)=>{const o=n.player.maps[t.name];for(var s=\"\",r=0;r<e.length;r++){for(var i=0;i<e[r].length;i++)if(a[0]==r&&a[1]==i)s+=\" \\t▣\";else if(\"discovered\"==o[i][r]){s+=`<span style=\"color:${t[t.zone[r][i][0]].colour}\">  ▣</span>`}else\"seen\"==o[i][r]?\"n\"==e[r][i]?s+=\"  ▩\":s+=\"\\t▢\":s+=\"\\t▥\";s+=\"<br>\"}return s},Ae={f0_intro:{name:\"Lucia\",say:[[\"...\",0],[\"...\",0],[\"...it's dark.\",0],[\"You can't remember what you were doing, or where you are.\",0],['\"-e?\"',0],[\"Slowly, your sense of touch returns to you. You can feel grass crushed under your body - a large portion of it. You're lying down. But still, darkness.\",0],['\"-re?\"',0],[\"In the grassy abyss you find yourself in, you clench your fist to see if it's still working. Your hand grasps a cluster of grass. Once swaying tentatively around your hand, it now is trapped in your grip, unmoving.\",0],['\"-ore!\"',0],[\"..?\",0],['\"-Lore! Lore!\"',0],[\"You open your eyes.\",0],[\"Even though it isn't that bright objectively speaking, the light of the clearing is blinding compared to the abyss of your mind. It takes a few blinks before a blurry myriad of colours merges into a concrete image.\",0],[\"Still lying down, you gently wrench your head in different directions to observe your surroundings.\",0],[\"You are already accustomed to the verdurous canopy, so your attention is turned to the trees that surround you-- which act as the walls to a foresty dome.\",0],[\"The ground, lush with perfect grass (save for where you have ruined it) is unchanging and uninteresting--\",0],[\"???: Lore? Are you alright?\",0],[\"There is something besides forest permeating your view. As you focus on it, your vision converges upon a female face, attached to a standing body, staring at you.\",0],[\"Her hair is bright blue and long, stretching down to her mid-thigh in shimmering straight lines.\",0],[\"Something about her hair harmonizes well with her face, which has a soft and delicate quality to it.\",0],[\"Her eyes are the same colour as her hair, however it and her lips are fixed in a look of worry and concern - although she is clearly beautiful, something about the fact that <i>she</i> is frowning invokes an unpleasant feeling - as though her gentle eyes were clasping your heart like a demon's horrific scowl.\",0],[\"You don't want to look at her face anymore, so, while standing up, you turn your attention to her clothes.\",0],[\"Her garments remind you of an elaborate, white and translucent nightgown - except there are no sleeves and the whole thing is a little more elaborate than something you would wear to bed.\",0],[\"That-- and, well, for the most part, it isn't translucent. Unfortunately.\",0],[\"???: ..Lore?\",0],[\"A gentle sound forces you from your musings.\",0],[\"???: Um, do you remember me? My name's Lucia.\",0],[\"Lucia: Loo-See-Ah. Can you say it?\",0],[\"Her repeated enunciation feels a little patronising.\",0],[\"Anyways, you should probably respond.\",0]],options:{\"Loo-See-Ah\":{say:[[\"Lucia smiles and claps happily. She looks a lot nicer with that expression.\",0],[\"[name]: Great! Great job!\",0],[\"[name]: Uhm...\",0],[\"[name]: OK!\",0]],action:[\"waypoint\",\"partTwo\"]},\"Loo-Sea\":{say:[[\"Lucia pouts angrily at you. But you get the feeling that even if she were erupting with fury, it wouldn't be the least bit intimidating.\",0],[\"[name]: Th-that's not how you say it!\",0],[\"[name]: Loo-See-Ah! Loo-See-Ah! Understand?\",0],[\"You wonder if she can tell that you're messing with her.\",0],[\"[name]: <i>*sigh*</i>\",0]],action:[\"waypoint\",\"partTwo\"]}},partTwo:{say:[[\"[name]: We should get going. Follow me, okay? And don't lag behind!\",0],[\"Lucia turns around and begins running (at a fairly pitiful pace) in the north direction, the only exit.\",0,!0,{unskippable:!0}],[\"You should probably follow her...\",0]],say2:[[\"<b>NOTE: You will probably want to enable your minimap. Input 'sm'/'show minimap' or use the supercommand 'sc-minimap' to toggle it. Otherwise, you won't know where you're going!</b>\",0,!0,{unskippable:!0}],[\"<b>Squares that are blank white are squares you have seen (been adjacent to). Coloured squares are places you have been to (different colour denotes a different 'type' of area). Squares with vertical lines are unseen, and squares with two sets of diagonal lines are walls.\",0,!0,{unskippable:!0}]],action2:[\"flag\",\"f0_done_intro\",\"true\"],action:[\"end\"]},end:[[\"\",0]]},f0_slime_fight:{name:\"Lucia\",say:[[\"It only takes a brisk walk in order to catch up with Lucia.\",0],[\"But as you near her, you hear a slow, shifting movement in a group of bushes to the right just in front of her.\",0],[\"You grab her shoulder, and she stops moving.\",0],[\"[name]: ..?\",0],[\"The quiverings in the small thicket grow stronger and stronger, until--\",0]],action:[\"music\",\"battle$\"],say2:[[\"Without warning, a relatively small, somewhat amorphous blue creature bursts from the leaves!\",0],[\"You charge at it without hesistation--\",-.5],[\"[name]: Lore--\",-.2]],action2:[\"battle\",[[\"slime\",{overlayMusic:!0}],[\"waypoint\",\"postBattle\"]]],postBattle:{action:[\"music\",\"forest\"],say:[[\"Lucia sighs.\",0],[\"[name]: I could've handled that myself, Lore.. but thanks--\",0],[\"You feel a slight headache, as though something is bubbling to the top of your mind. You clasp your head in a futile attempt to grant your mind some reprieve.\",0],[\"[name]: Are you ok..? Are you remembering something?\",0],[\"Despite her concern, there is a hint of hope in her voice..\",0],[\"[name]: Just stay here and rest for a bit, okay? We can keep going when you feel better.\",0],[\"<b>It looks like the battle against the slime jogged Lore's memory a bit, and he can remember some of the skills he used to use.</b>\",0,!0,{unskippable:!0}],[\"<b>Navigate the newly-unlocked <u>Stats</u> menu to learn the skills <u>Boost</u>, <u>Check</u> and <u>Forgotten Haste</u>. Then, continue moving north.</b>\",0,!0,{unskippable:!0}]],action5:[\"heal\"],action3:[\"flag\",\"f0_fought_slime\",\"true\"],action2:[\"custom\",()=>{n.unlocked.stats=!0,Z()}],action4:[\"end\"]},end:[[\"\",0]]},f0_young_wolf_fight:{name:\"Lucia\",action:[\"custom\",()=>{const e=n.player.stats.skills;e.includes(\"lore-0\")&&e.includes(\"lore-1\")&&e.includes(\"lore-2\")&&(c.f0_learnt_prerequisite_skills_1.complete=!0)}],conditional:{\"flag: f0_learnt_prerequisite_skills_1\":{action4:[\"save\"],action3:[\"heal\"],say:[[\"[name]: Ah-- wait up!\",0],[\"As you continue ahead of Lucia, there is a further rustle in a cluster of leaves again. To the left, this time--\",0]],action:[\"music\",\"battle$\"],say2:[[\"The leaves quickly part to make way for a moderately-sized wolf, whose low growls appear almost in sync with the bristling of it's grey fur.\"],[\"Lucia appears to stay back intentionally this time, watching you intently.\"],[\"It would appear that there is nothing to do except fight--\"]],action2:[\"battle\",[[\"young_wolf\",{overlayMusic:!0}],[\"waypoint\",\"postBattle\"]]]},\"level: 0\":{say:[[\"<b>You need to learn and equip the prerequisite skills before proceeding.</b>\",0]],action:[\"teleport\",\"t1\"],action2:[\"end\"]}},postBattle:{action:[\"music\",\"forest\"],say:[[\"Lucia stares at your for a few seconds before speaking up.\",0],[\"[name]: Um-- Lore, do you remember anything?\",0],[\"You feel a little stronger, but you can't remember much--\",0],[\"Another headache. Stronger this time, and it spreads throughout your entire body. It feels as though something foreign is flowing into your body. It's only a very tiny amount, but it sears you as though molten iron was being injected into your veins.\",0],[\"[name]: L-Lore!\",0],[\"[name]: Rest here again for a bit.. we're in no rush. Just try and calm down for a little, okay?\",0],[\"Lucia's voice puts you at ease. You sit down and try to empty your mind.\",0],[\"<b>A tiny fraction of Lore's power is returning to him. You should now be able to unlock the remainder of his skills. Do so, then equip them and proceed.</b>\",0]],action2:[\"flag\",\"f0_fought_young_wolf\",\"true\"],action3:[\"save\"],action5:[\"heal\"],action4:[\"end\"]},end:[[\"\",0]]},f0_teaching_crafting:{name:\"Lucia\",action:[\"custom\",()=>{const e=n.player.stats.skills;e.includes(\"lore-3\")&&e.includes(\"lore-4\")&&e.includes(\"lore-5\")&&(c.f0_learnt_prerequisite_skills_2.complete=!0)}],conditional:{\"flag: f0_learnt_prerequisite_skills_2\":{say:[[\"You begin to continue walking. Lucia follows to your right, keeping pace.\",0],[\"You may imagining this, but is there a slight spring in her step?\",0],[\"[name]: Alright! *<i>She taps your shoulder twice before slowing down.*</i>\",0],[\"[name]: Lore? I'm going to try and teach you something else now..\",0]],options:{\"Stop walking\":{say:[[\"You stop walking and listen.\",0],[\"[name]: Wait here for a second!\",0],[\"She runs to the south.\",0],[\"A few seconds later she returns, holding a few clusters of fairly stiff blue slime in one hand, and some pieces of wood in another.\",0],[\"[name]: Um.. you used to be quite good at crafting, so try and make something with these, Okay?\",0],[\"[name]: It's okay if you don't get it right the first time, but I think you might remember more if you give this a try!\",0],[\"She forces the items into your chest and you take hold of them. Then she stands there expectantly, waiting for you to do something.\",0]],action:[\"waypoint\",\"postChoice\"]},\"Ignore her\":{say:[[\"You ignore her and keep walking, leaving her behind in the process. You can tell without looking back that she is both hurt and irritated.\",0],[\"[name]: Lore!! Stop ignoring me--\",0]],action:[\"music\",\"battle$\"],say2:[[\"[name]: AAH--!\",0],[\"A scream?! You quickly ready yourself and whip your head around--\"]],action2:[\"music\",\"forest\"],say3:[[\"[name]: Just kidding!\",0],[\"[name]: That'll teach you to mess with me!\",0],[\"Lucia laughs at you for a bit. Then, just as you notice she has her hands behind her back, she reproduces from behind her some pieces of wood and some balls of slime.\",0],[\"[name]: Try and craft something with these, okay? It might help you remember something.\",0]],action3:[\"waypoint\",\"postChoice\"]}}},\"level: 0\":{say:[[\"<b>You need to learn and equip the prerequisite skills before proceeding.</b>\",0],[\"<b>Learn and equip the remainder of Lore's skills before continuing.</b>\",0]],action:[\"teleport\",\"t2\"],action2:[\"end\"]},postChoice:{say:[[\"<b>Lucia's given you some items to practice crafting with. After this, you'll see that you've unlocked the crafting menu. Craft a <u>Wooden Sword</u> and then equip it via the <u>inventory</u>. Then, craft a <u>Health Potion</u> and add it to your pouch, also via the inventory. Then, continue north.\",0,!0,{unskippable:!0}],[\"<b>Also, don't worry if you mess up! The game won't save until you progress beyond this point, so just refresh the page if you accidentally consume the health potion.\",0,!0,{unskippable:!0}]],action:[\"items\",\"wood\",2],action2:[\"items\",\"slime_ball\",2],action3:[\"flag\",\"f0_been_taught_crafting\",\"true\"],action4:[\"custom\",()=>{n.unlocked.crafting=!0,n.unlocked.inventory=!0,Z()}],action5:[\"end\"]}},end:[[\"\",0]]},f0_f4_checkpoint:{name:\"Lucia\",action:[\"custom\",()=>{const e=n.player.stats.equips,t=n.player.stats.pouch;\"wooden_sword\"==e.weapon&&-1!=t.findIndex(e=>\"health_potion\"==e[0])&&(c.f0_crafted_required_items.complete=!0)}],conditional:{\"flag: f0_crafted_required_items\":{say:[[\"Lucia is looking at you expectantly.\",0],[\"[name]: Well? Remember anything?\",0],[\"...\",0],[\"She takes your silence to mean 'no'. She sighs and her face adorns a downcast expression.\",0],[\"[name]: Well.. let's just keep going.. watch your step because it looks like there are monsters about.\",0],[\"Lucia starts north once again. It feels like you've been here a while, but there is still no end in sight.\",0],[\"<b>Keep following Lucia north. As she said, watch out for monsters ambushing you as you walk. If you come across some slimes, you might be able to use their drops to make more health potions.\",0,!0,{unskippable:!0}],[\"<b>In the tiles to come, you may be able to find some things if you <u>Explore</u>, as well. You will either find items or encounter an enemy, so be on your toes!.\",0,!0,{unskippable:!0}]],action:[\"flag\",\"f0_passed_t4\",\"true\"],action4:[\"recipe\",\"mana_potion\"],say2:[[\"<b>You'll find that you've unlocked a personal recipe for crafting mana potions.</b>\",0,!0,{unskippable:!0}],[\"<b>You might need it in the future, so keep it in mind!</b>\",0,!0,{unskippable:!0}]],action3:[\"save\"],action2:[\"end\"]},\"level: 0\":{say:[[\"<b>You need to craft and equip the wooden sword, and craft the health potion and add it to your pouch.</b>\"],[\"<b>Do these two things, then proceed to the north.</b>\"]],action:[\"teleport\",\"t3\"],action2:[\"end\"]}},end:[[\"\",0]]},f0_dreadful_wolf_fight:{name:\"Lucia\",action2:[\"save\"],action:[\"heal\"],say:[[\"You and Lucia have been walking for a while now, in complete silence.\",0],[\"It's difficult to tell how she feels about the situation, and your reluctance to speak. But because of your previous headaches and pains, hearing only low whisp of leaves overhead is quite a soothing experience.\",0],[\"[name]: Umm... Lore.\",0],[\"Lucia chooses to break the silence.\",0],[\"[name]: I'm sorry, I've been pushing you around a lot since you woke up.\",0],[\"[name]: Do you have any questions? You know, about the situation, or what happened...\",0],[\"It looks like this would be a good chance to get some info. You gathered a bit from things she's said but you're still very much in the dark. Really, you don't even know who she is. So, you decide to ask about..\",0]],options:{\"Ask about who Lucia is\":{say:[[\"You ask Lucia about who she is.\",0],[\"[name]: Me? Um..\"],[\"She thinks for a bit.\",0],[\"[name]: Well, my name's Lucia. I'm 17 years old!\",0],[\"This isn't really what you meant, but you don't say anything.\",0],[\"[name]: I'm a type of magic user called a Nexus, which means I draw magic from beings I've contracted with while adventuring. I'm quite accomplished in my field, actually!\",0],[\"She smacks her chest in a motion of pride.\",0],[\"[name]: I can also do lots of other things like use normal magic, ritual magic, internal and external summoning, some spiritual arts..\",0],[\"Lucia checks herself.\",0],[\"[name]: Um-- anyways, I met you a few years ago and we went on some adventures... then...\",0],[\"[name]: ..well, that's everything about me.\"],[\"Lucia stops talking and looks forwards again. You continue in silence for a while.\",0]],action:[\"waypoint\",\"postChoice\"]},\"Ask about who you are\":{say:[[\"You ask Lucia about who you are.\",0],[\"To be honest, you can remember quite a bit about yourself.\",0],[\"You're 17, and you come from a rural town named Arlam.\",0],[\"You're good with a sword and often called kind, alhough reticent. You had a younger sister.\",0],[\"Despite all this knowledge, you feel like there's something missing.. lost in your thoughts for a short while, you miss some of what Lucia was saying.\",0],[\"[name]: --And your dad is a great cook-- hey, are you listening?\",0],[\"You affirm to her your attention. She looks suspiciously at you then turns forward and continues speaking\",0],[\"[name]: Anyways, we met a few years ago. I think your village has a lot of ex-adventurers and mercenaries, so by the time we met, you were already good at fighting.\",0],[\"[name]: We went on some adventures, finding rare things and learning lots of secrets.\",0],[\"Lucia looks at you with a sad smile.\",0],[\"[name]: Anyways, it looks like you don't remember much of that stuff.. I won't get into it here.\",0],[\"Lucia stops talking and looks forwards again. You continue in silence for a while.\",0]],action:[\"waypoint\",\"postChoice\"]},\"Ask about what happened\":{say:[[\"You ask Lucia about what happened.\",0],[\"As she listens to your question, she starts to look a bit uncomfortable. You can't tell if it's because you're bringing up something she doesn't want you to know, or if it's because you're bringing up something she doesn't want to recall.\",0],[\"[name]: ..Um..\",0],[\"[name]: Well, we were adventuring partners for a while... but one day..\",0],[\"[name]: We were battling an enemy, and they.. did something to you..\",0],[\"[name]: And you became like this.\",0],[\"[name]: I had to get away with you, but it was hard, and I got hurt a little..\",0],[\"Lucia runs her right hand over her left arm. If you squint, you can see very faded cuts and bruises. It looks like they were healed with some kind of magic.\",0],[\"[name]: But it's okay now! Really... I think you're slowly returning to normal..\",0],[\"Lucia smiles sadly.\",0]],action:[\"waypoint\",\"postChoice\"]},\"Ask about your relationship with Lucia\":{say:[[\"It's a bit weird how you awoke with Lucia alone, with nothing or nobody in sight.\",0],[\"So, you decide to ask about your relationship with Lucia\",0],[\"[name]: ..Huh?\",0],[\"Lucia seems a little startled at your question.\",0],[\"[name]: Is now really the time to be asking something like that? *<i>She says quietly.</i>*\"],[\"[name]: A-Anyways, we were good friends. We've known each other for a while.\",0],[\"She doesn't elaborate.\",0]],action:[\"waypoint\",\"postChoice\"]},\"Don't ask anything\":{say:[[\"You look at her as though to elucidate that you have nothing to say. She looks back at you, and then turns her head forwards again.\",0],[\"[name]: Hm.. Okay.\",0]],action:[\"waypoint\",\"postChoice\"]}},postChoice:{say:[[\"It's been a while. Just as you had started to get into the flow of silently following the repetitive path, Lucia stops walking and grabs your arm.\",0]],action:[\"music\",\"stop\"],say2:[[\"[name]: There's something nearby...\",0],[\"You sense it isn't as great as what Lucia feels, but a feeling of alarm creeps down your spine and throughout your body.\",0],[\"A rustling sensation crops up in the foliage surrounding the tunnel. It comes and goes, in different places each time.\",0],[\"At first it is distant. You wonder if Lucia heard it from so far away. But it grows closer and closer..\",0],[\"[name]: LORE! Look out!--\",0]],action3:[\"music\",\"intimidating_enemy$\"],say3:[[\"A dark grey blur bursts from the right and cuts straight through you!--\",0],[\"Or it would've, you realised, had Lucia not pushed you out of the way.\",0],[\"The movement was so instantaneous that you barely recognised that you had just evaded instant death.\",0],[\"You get up and turn your head to Lucia--\",0],[\"A deep sigh.\",0],[\"She's clearly alive, but the <i>thing</i> grazed her arm. It's bleeding, and underneath her skin, you can see something blackish-purple pulsating balefully.\",0],[\"[name]: Grrk--\",0],[\"You get up to help her, but something stands in your path.\",0],[\"It isn't until now that you acknowledge the thing that attacked you.\",0],[\"It's some kind of wolf, but it's hairs are not only standing on end, but writhing and threshing as though they're trying to escape the skin of the creature.\",0],[\"It has irises of purple, the pigment of which leak into a pair of deep black sclera.\",0],[\"[name]: Lor-e. . Ru-n...\",0],[\"Lucia looks as though she's on the verge of collapsing. But really, you don't notice.\",0],[\"Your attention is absorbed by the thing before you, and the fighting instinct that it's awakening in you.\",0],[\"The thing whose growls sound like how it would feel to drown in a sea of spiders, that is pouncing at you this very moment--\",-1]],action2:[\"battle\",[[\"dreadful_wolf\",{overlayMusic:!0}],[\"waypoint\",\"postBattle\"]]]},postBattle:{action:[\"music\",\"none\"],say:[[\"With the creature vanquished, your raging mind settles and you turn your focus to Lucia.\",0],[\"[name]: LORE!!\"],[\"In the brief moments before she hugs you, you note that her wounds are quickly fading. It looks like she used some kind of healing magic in the time your spent fighting.\",0],[\"She quickly lets go of you.\",0],[\"[name]: W-We don't have time. We need to hurry!\",0],[\"And with that, she runs onwards, explaining nothing. She doesn't turn her back once, likely trusting that you will follow close behind.\",0],[\"<b>Up ahead is the last encounter of this tutorial. Make sure you're prepared, it may not be an easy fight. It is recommended you have full health and mana going into the battle.</b>\",0,!0,{unskippable:!0}],[\"<b>If need be, you can go back and fight some slimes for more pouch items.</b>\",0,!0,{unskippable:!0}],[\"<b>The game won't autosave in the demo, so if you have some items you would like to preserve, you can save the game in settings just before you attempt the final battle.\",0,!0,{unskippable:!0}]],action2:[\"flag\",\"f0_fought_dreadful_wolf\",\"true\"],action3:[\"save\"],action4:[\"end\"]},end:[[\"\",0]]},f0_charon_fight:{name:\"Lucia\",action7:[\"save\"],action6:[\"heal\"],say:[[\"It feels like you've been running non-stop for ages.\",0],[\"Even though it doesn't look like it, you can feel the end getting nearer.\",0],[\"[name]: Just... <i>*pant*</i> a lit.. <i>*pant</i>* ..tle more... <i>*pant*</i>...\",0],[\"For the first time since you started running, Lucia turns back to you.\",0],[\"[name]: Lore! I can see the end--\",0],[\"...\",0],[\"???: Hey.\",0],[\"You look at Lucia. She is unable to move, yet at the same time quivering intensely. You imagine that at this moment, it is taking conscious effort for her to keep her heart beating.\",0],[\"[name]: Y.. how...\",0],[\"???: How? More like, how did you escape? Amirite?\",0],[\"You haven't turned around to face it, so you don't know what it looks like. But from its voice you feel like it were an inescapable chasm, leading to a void that contained every disease;\",0],[\"Every pain, every kind of suffering possible.\",0],[\"Slowly, you wrench your head 180 degrees to face what can only be descriped as impending despair.\",0]],action:[\"music\",\"intimidating_enemy$\"],say2:[[\"It has the clothes of a malnourished peasant.\",0],[\"Deep black skin embroidered with bright red patterns wearing a single dark brown cloth- that covers its torso and a small amount of its legs.\",0],[\"Through it's black eyes encased in a white-and-red cornea, you wonder if it sees the same world you do.\",0],[\"It's horrible voice drags you out of your thoughts.\",0],[\"???: Horribly convenient, isn't it? For something like <i>teleporation</i> to work while I was around..\",0],[\"???: I'm pretty sure you had better ways of getting away but you panicked, didn't you? But luckily for me, you panicked.\",0],[\"???: You see, I'm a bit of a genius... so I just re-routed your teleportation to come here. I knew that if I surprised you here, you'd be so scared and surprised you wouldn't be able to do anything.\",0],[\"[name]: W-Wh...\",1],[\"???: Aah, whatever. I don't know if I can beat you, but this kid should be easy. You're next, I guess.\",0],[\"You don't know exactly what's going on or what Lucia knows about this thing, but you don't feel the same paralysing trepidation she does.\",0],[\"You assume a battle-ready stance and face it. In all likelihood, this is your only chance. You have to beat it here, or Lucia--\",0]],action2:[\"music\",\"mechanical_rhythm$\"],say3:[[\"???: You want to fight back?\",0],[\"It shrugs.\",0],[\"???: Well, alright. I'll toy with you a bit.. I've been pretty bored lately.\",0],[\"You narrow your eyes and prepare yourself. He approaches slowly at first...\",0],[\"Before dashing towards you at breakneck speed!--\",-1]],action4:[\"custom\",()=>{n.unlocked.ascend=!0}],action5:[\"save\"],action3:[\"battle\",[[\"charon\",{overlayMusic:!0}],[\"waypoint\",\"postBattle\"]]],postBattle:{action:[\"music\",\"intimindating_enemy$\"],say:[[\"???: Wow! You're alive.\",0],[\"There is no mockery or disrespect in his voice. He seems genuinely surprised and impressed.\",0],[\"??? But of course, you're no match for me. Get out of my sight.\",0],[\"And with that, he sweeps his arm at your torso.\",0],[\"You're convinced there must be some kind of special technique he's using; some kind of magic enhancement of his strength - there's no time to react to his somewhat frail atramentous arm as it strikes you from the side.\",0],[\"Midway through considering this, all thought is lost as the appendage actually makes contact-- you can feel several bones in your body snap as you're flung into a tree in the distance.\",0],[\"[name]: LORE!!\",0],[\"Lucia is shouting, but you can barely hear her. Your consciousness mimics your blood and drains from your body rapidly.\",0],[\"The last thing you see as your vision fades quickly from red, to black, into nothing, is the jet black figure steadily approaching Lucia, and the last thing you hear, her cries--\",0],[\"[name]: LORE!! GET UP!!\",0],[\"It's no use. Her pleas can't reach you.\",0]],say2:[[\"...\",0],[\"...\",0],[\"...\",0],[\"You're dead.\",0],[\"If you're dead, then where are you?\",0],[\"You can't tell.\",0],[\"Worse yet, you can't even tell that you can't tell, nor can you tell light from dark, night from day. You're dead, after all.\",0],[\"But still, you feel there is something in you, clinging to life. If 'death' is a murky black sea; Styx; a flowing stream of tar from which nothing can escape, then you are hanging on a crag just above--\",0],[\"You hand clapsing the edge of the cliff is not a physical one, but rather a metaphorical one; 'hope', 'willpower', call it what you will.\",0],[\"Ultimately, it matters not. Just as the strength faded from your dying body, strength too will fade from your dying soul.\",0],['\"..orun..! ..seech! ..heed... ..ll!\"',0],[\"...\",0],[\"Was that... sound from the land of the living?\",0],[\"Just as your grip was fading, and Styx, the Reaper, Hades, all concepts of death seemed so inviting..\",0],[\"You started to feel light..\",0],[\"Lighter, and lighter still. Your weight kept decreasing...\",0],[\"Until eventually, you were lighter than air. And you began to float.\",0],[\"Out of this land of impending death, out from the depths of your soul, back through the cage of your mind and into the land of the living--\",0]],action2:[\"music\",\"creator\"],say3:[[\"Your vision is recovering slowly, but at the moment, you can only see splotches; people or things, you presume, in a misty green backdrop.\",0],[\"One of the blotches has blue hair, you infer. And one is almost pitch black.\",0],[\"And...\",0],[\"???: Lucia, you have summoned me. Do you understand what this means?\",0],[\"It looks like your hearing has returned as well. You don't hear Lucia respond-- you can't tell if that's because she didn't or because you didn't hear it.\",0],[\"It hurts to look at the third blur. It's body emits a blazing light, but you don't think that's the reason you are unable to stare at it.\",0],[\"It's a different pain from having searing light injected into one's ears. Different from the mind-numbing sensastion of having your bones splinter and scrape at your insides.\",0],[\"Instead, whenever your eyes attempt to focus on it, there's this insurmountable feeling of dread.. like you're unworthy of existing in it's presence.\",0],[\"Focusing on its image in your peripheral vision, you manage to observe it turning from Lucia (who you can now see more clearly) to the thing that nearly killed-- no, that <i>did</i> kill you.\",0],[\"???: Charon. I did not create you, but all acts of creation must be powered or preceded by some prior act of creation. Everything has a source.\",0],[\"???: I am not your creator. However, if you follow the flow of 'power of creation' that resulted in your conception upstream..\",0],[\"???: Eventually, you will find myself.\",0],[\"???: I do not know what, if anything, supersedes my authority. However, although I am not your direct creator...\",0],[\"???: In this case, I will exert my existential seniority over you and reclaim that which originally came from me.\",0],[\"Charon: --Wh-\",0],[\"You assume Charon is the name of the black-and-red, bipedal thing that is recoiling in shock.\",0],[\"You are healed enough to speak, however an unknown force has sealed your mouth shut.\",0],[\"Somehow, Charon forces the wind in his lungs against the oppressive force that must be assialing him..\",0],[\"Charon: ...who.. ar...e...\",0],[\"???: I will only do what is necessary, and I will as such grant you a 'death' as beings of your Tier see it.\",0],[\"???: Your physical life will cease, however your abstract life; the memories that others have on you and the impact you have had on this world, will remain.\",0],[\"???: Regardless, you will have no use for my name.\",0],[\"???: Now, I will make a gesture that those of your Tier see befitting of the action I will undertake...\",0],[\"You are still unable to look directly at the thing which never even acknowledged you. But you are able to tell that it is moving one of it's hands, which was originally held loosely at its side, and raising it to point at Charon.\",0],[\"???: I cast... ᛞᛖᚨᛏᚺ.\",0],[\"As he casts his 'spell', you can feel the earth beneath you begin to quiver, then quake, and begin to crumble--\",0],[\"The light radiating from the unknown entity increases rapidly in intensity, until you have to seal your eyes shut completely to avoid becoming blind. But somehow, you know that the measly cover from the flaps of flesh that are you eyelids will be insufficient.\",0],[\"The blackness you percieve from the cover of your eyelids turns red, and then white...\",0]],action4:[\"music\",\"none\"],action3:[\"custom\",()=>{n.special.clearedTutorialTrue=!0,Z(),qt()}]}}},Ee={lily:{name:\"Lily\",say:[[\"<i>You approach the child. As you near her, she backs away slightly.\",0]],conditional:{\"level: 0\":{say:[[\"[name]: H-Hello [player]... can you help me?\"]],action:[\"gold\",0],action3:[\"exp\",0],action2:[\"end\"]},\"item: 1212 slime_ball\":{say:[[\"[name]: Icky! Slime!\"]],action:[\"items\",\"slime_ball\",0],action2:[\"end\"]},\"flag: -beatSlime\":{say:[[\"[name]: You haven't beat the slime? Weakling.\"]],action:[\"recipe\",\"slam_sword\"],action2:[\"end\"]},\"level: 121\":{say:[[\"[name]: I don't have anything interesting to say to you\",0]],action:[\"end\"]}},end:[[\"[name]: Goodbye.\",0]]},f1_little_girl:{name:\"Little girl\",conditional:{f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",0]],conditional:{\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",0],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",0],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",0]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",0],[\"<i>She takes the slime balls off you without waiting or asking for permission--</i>\",0],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",0]],action:[\"gold\",0],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",0],[\"<i>The girl looks disappointed. Like she might cry..\",0],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",0]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl seems preoccupied playing with slimes. Best leave her alone..\",0]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",0]]},\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",0],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",0],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",0]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",0],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",0]],action:[\"gold\",0],action5:[\"exp\",0],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",0],[\"<i>The girl looks disappointed. Like she might cry..\",0],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",0]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",0]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",0]]},f1_docile_slime:{name:\"Docile slime\",say:[[\"<i>You approach the slime.</i>\",0]],conditional:{\"flag: f1_helped_docile_slime\":{say:[[\"<i>The slime looks happy to see you. It wants to show you something.\",0]],action:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},\"flag: -f1_spoken_to_docile_slime\":{say:[[\"<i>Slimes can't speak, obviously. But it seems to want something from you.</i>\",0],[\"<i>Somehow you gather that it is trying to gesture to the remnants of slime on the ground.. as though it wants some slime for itself.</i>\",0],[\"<i>100 Slime balls might be enough to appease the slime. It seems to have nothing more to say to you.\",0]],action:[\"flag\",\"f1_spoken_to_docile_slime\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_docile_slime\":{conditional:{\"item: 100 slime_ball\":{say:[[\"<i>The slime looks pleased with you, and hopeful. Will you give the sime what it wants?\",0]],options:{yes:{exp:[\"exp\",0],say:[[\"<i>You give the slime 100 slime balls. It has way of showing emotion, but you can tell that it's very happy.\",0],[\"<i>It seems to want to show you something..\",0]],action3:[\"items\",\"slime_ball\",-100],action:[\"flag\",\"f1_helped_docile_slime\",\"true\"],action4:[\"items\",\"friendly_slime\",0],action5:[\"recipe\",\"friendly_greater_slime\"],action2:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},no:{say:[[\"<i>The slime looks disappointed. It doesn't want to speak to you anymore.\",0]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>You don't seem to have what the slime wants. It ignores you.</i>\",0]],action:[\"end\"]}}}},end:[[\"[name]: ...\",0]]},f1_wanderer_statue:{name:\"Unnamed Wanderer\",say:[[\"<i>You approach the statue.</i>\",0],[\"<i>It is well looked after, despite showing clear signs of wear. It seems to be of some kind of goddess, who adorns a benevolent smile with her arms outstreched, as though enveloping many in her embrace.\",2],[\"<i>Below the statue is a tall rectangular stone container. It is filled up about halfway with various items.\",0]],conditional:{\"item: 1 wanderer_memorabilia\":{say:[[\"Some of the items remind you of the wanderer memorabilia that you found off somebody else. Will you add some to the container?\",0]],options:{yes:{say:[[\"<i>You place a piece of wanderer memorabilia into the rectangle. Nothing happens for a short while, but a person eventually emerges. They have ragged clothes and a few weapons and other useful items holstered at their waste. Despite their decrepit appearance there is an aura of experience and knowledge that you interpret from their demeanour.\",0],[\"[name]: Who are you? You don't look like a wanderer.\",0]],action:[\"items\",\"wanderer_memorabilia\",-1],options:{\"wanderer?\":{say:[[\"[name]: You must have happened on somebody else's memorabilia...\",0],[\"<i>The person thinks to themselves for a little.</i>\",0],[\"[name]: Many people have gone on adventures in the past in search for some purpose, or in pursuit of some kind of treasure or reward.\",0],[\"[name]: Regardless of whether they find what they are looking for, at the end of their quest, they almost always find that there is nothing more they want to achieve... these people are called wanderers.\",0],[\"[name]: Not all wanderers believe in the Wandering Goddess Lucia, but she is somewhat of an icon for wanderers... hence the statue.\",0],[\"[name]: Wanderers place their memorabilia here in honour of her and other wanderers. if two wanderers meet here, they will often battle to remember their days of adventure and learn of the experiences of others.\",0],[\"[name]: You aren't a wanderer, but you still seem like somebody who can fight. If you would like, we can battle here, right now.\",0]],action:[\"flag\",\"f1_met_wanderer_at_statue\",\"true\"],options:{yes:{action:[\"waypoint\",\"let's fight!\"]},no:{say:[[\"[name]: Alright. Well, now you know the purpose of this area. If you come here again, it's unlikely you will meet the same person. Keep safe, young one.\",0],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",0]],action:[\"end\"]}}},\"let's fight!\":{say:[[\"[name]: Very well then. Prepare yourself!\",0]],action:[\"battle\",[[\"wayward_traveler\",{changeLevel:!1,levelCap:!1,addLevels:!1}],[\"waypoint\",\"after_battle\"]]]}}},no:{say:[[\"<i>You decide to leave the statue alone.\",0]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>There doesn't seem to be much to do here. Nothing you own reminds you of the items that are in your possession. You decide to leave the statue alone.\",0]],action:[\"end\"]}},end:[[\"\",0]],after_battle:{say:[[\"[name]: It was a good fight. I am glad to have met you. Perhaps we will meet again someday...\",0],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",0]],action:[\"end\"]}},f1_rude_kid:{name:\"Kid\",conditional:{\"flag: -f1_spoken_to_rude_kid\":{say:[[\"<i>You approach the kid. He has an uninviting look on his face. As you near him, he spits on the floor.\",0],[\"[name]: Pfft. Whaddya want? Loser.\",0]],options:{\"<i>kick his shin</i>\":{say:[[\"<i>You kick the kid's shin.</i>\",0],[\"[name]: OW! What the hell, dude?!\",0],[\"<i>The kid's eyes tear up and he runs away.\",0],[\"<i>You notice he left some gold on floor. Hopefully you don't see that kid again.</i>\",0]],action:[\"gold\",0],action5:[\"exp\",0],action2:[\"flag\",\"f1_kicked_rude_kids_shin\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]},\"why are you so rude?\":{say:[[\"[name]: Rude? I'm just battle hardened, y'see. Check this out.\",0],[\"<i>The kid holds up a small patch of grey wolf fur.</i>\",0],[\"[name]: Runt attacked me and my li'l sis. We got separated, and I fought off the wolf with my own bare hands. Not a pretty sight for pansy folk like yourself.\",0],[\"[name]: You know what? Keep this pelt. As a reminder of the horrors of war.\",0],[\"<i>He throws the pelt at your feet.</i>\",0],[\"[name]: Not everyone has to go through what I did...\",0],[\"<i>The kid walks away, hands in his pockets. Hopefully you don't see that kid again.\",0]],action:[\"items\",\"grey_wolf_pelt\",0],action5:[\"exp\",0],action2:[\"flag\",\"f1_extended_convo_with_rude_kid\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]}}},\"flag: f1_spoken_to_rude_kid\":{say:[[\"<i>You look for the rude kid, but he isn't there anymore.\",0]],action:[\"end\"]}},end:[[\"\",0]]},f1_wolf_man:{name:\"Lucas\",say:[[\"<i>You approach the man. As you do so, he stands up. He smells a little.\",0],[\"[name]: Hi. My name's Lucas. I live in the forest, nearby this area.\",0],[\"[name]: I thought it would be a good idea to let you know that there more wolves in this spot than normal. If you need some wolf pelts, it might be worth hanging around here.\",0],[\"<i>The man closes his eyes. It doesn't seem like he wants to say much else..</i>\",0]],action:[\"end\"],end:[[\"\",0]]},f1_old_man:{name:\"Old Man\",say:[[\"<i>You start to move towards the old man, but before you can approach, he quickly notices you and beckons you over rather enthusiastically.</i>\",0],[\"[name]: Helloe there! Not many people come 'round these parts no more.\",0],[\"[name]: It's such a beautifool place.. but a little dangerous for most people, even though it's a little less dangerous than the ruins and forest a li'l far off.\",0],[\"[name]: Must the be rumours of some massive sea serpent, 'though I've never seen nothing like that in my time..\",0],[\"[name]: Thanks for listenin' to me ramblin' off about nothing. I have some stuff that could be of use to you, if you're interested...\",0]],options:{yes:{say:[[\"[name]: Ok, then - have yourself a look..\"]],action:[\"shop\",\"f1_old_man\",[\"end\"]]},no:{say:[[\"[name]: Alrighty then - I'll be seeyin' ye around, I suppose.\"]],action:[\"end\"]}},end:[[\"<i>You say goodbye to the old man.</i>\",0]]},f1_little_boy:{name:\"Little boy\",say:[[\"<i>As you begin to approach the kid, you notice his distinctive eyes, a hue of dull red. The dark clothes that he's wearing make him difficult to say, and coalesce with his facial aesthetic into a somewhat edgy demeanour.\",0]],conditional:{\"flag: f1_helped_little_girl\":{conditional:{\"flag: -f1_spoken_to_little_boy\":{say:[[\"[name]: ...\",0],[\"[name]: I don't wanna speak to a weakling like you. Bring me the Crimson Regalia if you're realling worth my time..\",0],[\"<i>The kid seems reluctant to speak. Perhaps if you bring him 30 or so red slime balls..\",0]],action:[\"flag\",\"f1_spoken_to_little_boy\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_boy\":{conditional:{\"flag: -f1_helped_little_boy\":{conditional:{\"item: 30 red_slime_ball\":{say:[[\"[name]: Is that.. Crimson Reglia?!\",0],[\"<i>The child hesitates a little. It doesn't seem like he thought you'd actually bring him the slime balls.\",0],[\"[name]: I-I bet you stole them from someone. How pathetic--\",0],[\"[player]: What the hell man? What's your problem?\",0],[\"[name]: You can speak?! Crapdude calm down I was just messing around I--\",0],[\"[player]: Kids like you are so annoying.. I'll show you--\",0],[\"[name]: Brocalm down! OK, I found this thing in this forest and I thought it was really cool and since putting it on I haven't been attacked here just leave me alone!!\",0],[\"<i>The kid hands you a pendant and runs off. By the time you've processed what has happened the kid is out of earshot. Oh well. There was some money on the floor as well... your lucky day.\",0]],action:[\"gold\",0],action6:[\"exp\",0],action2:[\"items\",\"red_slime_ball\",-30],action5:[\"items\",\"shadowwarding_pendant\",0],action3:[\"flag\",\"f1_helped_little_boy\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: I don't see the crimson regalia.. get out of my sight.\",0]],action:[\"end\"]}}},\"flag: f1_helped_little_boy\":{say:[[\"<i>...Is what you would've seen, but the kid is noowhere to be found.\",0]],action:[\"end\"]}}}}},\"level: 0\":{say:[[\"[name]: You aren't worthy.. I can feel it.\",0],[\"<i>The boy refuses to say anything more. It looks like you need to help someone else before him.</i>\",0]],action:[\"end\"]}},end:[[\"\",0]]},f1_lost_person:{name:\"Lost person\",say:[[\"[name]: Hi... I'm lost. Do you know where I am?\",0]],options:{yes:{say:[[\"[name]: Sweet! Can you tell me where I am then?\",0]],options:{\"Sorry I was lying, I don't know.\":{say:[[\"[name]: ...\",0],[\"[name]: Godammit.\",0]],action:[\"end\"]},\"The dark forest\":{say:[[\"[name]: Thanks! That's not helpful at all!\",0],[\"[name]: Asshole.\",0]],action:[\"end\"]},\"The twisted trees\":{say:[[\"[name]: I'm pretty sure that's not even a place.\",0]],action:[\"end\"]},Hell:{say:[[\"[name]: Figures. I've raided one too many village I guess..\",0],[\"[name]: But the women were worth it.\",0],[\"[name]: You were joking? UM..\",0]],action:[\"end\"]}}},no:{say:[[\"[name]: Fair enough. Not like I can talk...\",0],[\"[name]: I know a bit about the general area we're in. The Driftwood area has four main sections.\",0],[\"[name]: In the center sort of is the foresty area. To the north-west is a small settlement. I don't know...\",0],[\"...much about the rest but I guess there's one area other than this one..\",0],[\"[name]: This place is kind of well-known because it has a bunch of interesting stuff in such a small area.\",0],[\"[name]: Apparently there's a hydra in a nearby sea, and some evil creature lurking in the forest.. gives me the creeps!\",0],[\"[name]: If you ever find out where this place is, please let me know! I don't wanna stay here any longer...\",0]],action:[\"end\"]}},end:[[\"\",0]]},f1_weapons_shop:{name:\"Reiner\",say:[[\"<i>You approach the weapons merchant. He is quite large and muscular, with brown hair and brown facial hair. He flashes a friendly smile your way.</i>\",0],[\"[name]: Hey there, runt! You interested in some weapons?\",0]],options:{\"weapons shop\":{action:[\"shop\",\"f1_weak_weapons\",[\"end\"]]},\"advanced weapons shop\":{action:[\"shop\",\"f1_strong_weapons\",[\"end\"]]},nope:{say:[[\"[name]: No problem! Seeya around!\",0]],action:[\"end\"]}},end:[[\"[name]: See you later, runt! Come again soon!\",0]]},f1_armour_shop:{name:\"Sora\",say:[[\"<i>You approach the armour merchant. They look a little out of place. As you approach him, he scratches his head and watches you as you near.</i>\",0],[\"[name]: Umm... hi. Would you like some armour?\",0]],options:{\"armour shop\":{action:[\"shop\",\"f1_weak_armours\",[\"end\"]]},\"advanced armour shop\":{action:[\"shop\",\"f1_strong_armours\",[\"end\"]]},nope:{say:[[\"[name]: Alright. Um..\",0]],action:[\"end\"]}},end:[[\"[name]: Ok, uh.. see you later, I guess...\",0]]},f1_misc_shop:{name:\"Amy\",say:[[\"<i>You approach the miscellaneous merchant. She has blond hair and an intelligent glare. She watches you silently as you approach, however she has a friendly aura.\",0],[\"[name]: Hello. I have some stuff for sale. Would you like anything?\"]],options:{\"misc shop\":{action:[\"shop\",\"f1_misc\",[\"end\"]]},\"VIP misc shop\":{conditional:{\"item: 1 vip_card\":{action:[\"shop\",\"f1_misc_vip\",[\"end\"]]},\"level: 0\":{say:[[\"[name]: Sorry, you need a VIP card to access the VIP shop.\",0]],action:[\"waypoint\",\"nope\"]}}},nope:{say:[[\"[name]: Ok. Thanks for coming.\",0]],action:[\"end\"]}},end:[[\"[name]: Ok, see you later.\",0]]},f1_man_a:{name:\"Male settler\",say:[[\"<i>You approach the man. He, similar to most other men in the settlement, has a somewhat muscular build.\",0],[\"He had no facial hair and messy black hair, complimenting his plain, dark brown eyes. His attire was...\",0],[\"...Comparable to most others in the settlement, plain fabric of a dull hue.\",0],[\"[name]: Hey. What's up?\",0]],options:{talk:{say:[[\"[name]: This settlement has existed for a few centuies, I think.. I moved in a few years ago.\",0],[\"[name]: It's fairly dangerous around here, so a lot of the people who stay here are fairly strong.\",0],[\"[name]: But there are tons of animals here, and some of them can be hunted for good reagents, so it's a great place for adventurers to stay.\",0]],conditional:{\"level: 0\":{options:{\"How long are you going to stay here?\":{say:[[\"[name]: Ehh... I don't know. Maybe a few more years.\",0],[\"[name]: Maybe once I've made some more money. There are some safer places nearby.\",0],[\"[name]: I could settle down, get a more stable job and a house.. it's pretty appealing.\",0],[\"[name]: But I don't really know right now. It's pretty nice here right now. Gets you in the mood for an adventure..\",0]],action:[\"waypoint\",\"level: 0\"]},\"Do you have a family?\":{say:[[\"[name]: Parents? Yeah. But no wife or kids.\",0],[\"[name]: Women who just want to settle down don't really stay here, it's not a great place unless you wanna adventure. So most of the girls here are single and uninterested.\",0],[\"[name]: It's a real shame. I wish Amy would take some interest in me..\",0]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}}}},bye:{action:[\"end\"]}},end:[[\"[name]: Mk, see you later.\",0]]},f1_hyssha:{name:\"Hyssha\",say:[[\"<i>You approach the woman. She seems stronger than most of the residents. Wavy auburn hair cascades down her spine.</i>\",0],[\"<i>She has a somewhat tough face, and her blue eyes grant her a piercing gaze. She's wearing brownish hunter garb, accentuated by the intricate wooden bow holstered at her back.\",0],[\"[name]: Hello. I take it you are an adventuerer. My name is Hyssha.\",0]],conditional:{\"level: 0\":{options:{\"What are you doing here?\":{say:[[\"[name]: I have been staying here for some time. I am searching for a legendary beast..\",0],[\"[name]: I am trying to hunt powerful beasts. I use each one I slay to improve my adventuring gear.\",0]],options:{\"How many beasts have you slain?\":{say:[[\"[name]: Three. Rokusha, an earth anima, whose magical scales I used to enhance my bow.\",0],[\"[name]: Ignia, a fire wyvern. It's wings and scales I used to enhance my armour. With it's heart, I enhanced my bow.\",0],[\"[name]: The final was a beast in this area.. I don't know it's name, but it escaped before I could slay it. From a poison-tipped claw it had I enhanced many of my arrows.\",0],[\"[name]: I cannnot simply slay all beasts I come across. I must consider the consequences.\",0],[\"[name]: Otherwise, I would have slain many more creatures..\",0]],action:[\"waypoint\",\"level: 0\"]},\"Where's the legendary beast that you're hunting?\":{say:[[\"[name]: I don't know. It is a type of water beast, however to this point is has eluded me.\",0],[\"[name]: Perhaps it is absent, or must be summoned.. I must do more research.\",0],[\"(BOSS NOT ADDED YET)\"]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}},bye:{say:[[\"<i>You say goodbye to Hyssha.\",0]],action:[\"end\"]}}}},end:[[\"[name]: Until next, adventurer.\",0]]},f1_worried_woman:{name:\"Worried woman\",say:[[\"<i>You approach the worried woman. She has short hair and a friendly face, although right now it is warped into a worried expression.\",0],[\"[name]: Hello.. have you seen my kids?\",0],[\"[name]: They both seem to like slimes a lot.. but they ran off into the forest and I haven't seem them since!\",0],[\"[name]: I can't go out to find them on my own.. I wouldn't be able to fend for myself.\",0]],action:[\"end\"],end:[[\"[name]: I hope they're ok... if they were hurt, I..\",0]]},f1_tutorial_man:{name:\"Pel\",say:[[\"<i>You approach the person being attacked by a slime. Despite his body cowering in fear, his facial expression shows no signs of trepidation.\",0],[\"[name]: aah a slime please help me aah noo please\",0],[\"<i>He doesn't sound like he's in danger. Regardless, probably a good idea to help him out;\",0]],action:[\"battle\",[[\"slime\",{}],[\"waypoint\",\"afterBattle\"]]],afterBattle:{action3:[\"music\",\"forest\"],say:[[\"<i>The man dusts himself off briefly and smiles at you.</i>\",0],[\"[name]: Whew!\",0],[\"[name]: That was a close one. Thanks for saving me, stranger!\",0],[\"[name]: As thanks, I'll give you a little tip:\",0],[\"[name]: You might've seen that slime boost just now. Slimes can't do it consistently because they're pretty stupid!\",0],[\"[name]: I'd recommend you learn how to <b>Boost</b>, I think most people who train to become <b>Adventurers</b> can use this skill.\",0],[\"[name]: Many enemies can do things like that too, so I'd recommend you be wary of their resources and options.\",0],[\"[name]: Oh! And <b>Check</b> as well, if you're struggling to beat an enemy. You might be able to glean some information.\"],[\"[name]: Anyways, you seem to have found yourself in a pretty unforgiving place...\",0],[\"[name]: I'd recommend you look for the small forest camp in the area. You'll find some people there to speak to.\",0],[\"[name]: I think it's... somewhere to the north-east?\",0],[\"[name]: Anyways, I'll see you around, probably. Bye!\",0],[\"[name]: Oh-- one more thing. <i>The man stops walking and turns around.</i>\",0],[\"[name]: Don't wander too far out in any direction. The outskirts of the forest are a little dangerous..\",0],[\"<i>And with that, the man disappears into the distance.\",0],[\"<i>It seems like he was recommending you learn a skill called <b>Boost</b>. Maybe check it out..\",0],[\"<i>Skills can learned via the <b>Stats</b> menu. Input <b>st/stats</b> while in the main menu or while exploring.\",0]],action:[\"flag\",\"f1_spoken_to_tutorial_man\",\"true\"],action2:[\"end\"]},end:[[\"\",0]]},f1_wanderer_collector:{name:\"Man who enjoys collecting\",say:[[\"<i>You approach a rather friendly-looking person. He is male and of average build. He has simple black hair and no facial hair, along with simple villager clothes.\",0]],conditional:{\"flag: f1_helped_wanderer_collector\":{say:[[\"Hato: Yo. I haven't got much for you RN, sorry.\",0]],action:[\"end\"]},\"flag: f1_spoken_to_wanderer_collector\":{say:[[\"[name]: Hi there. Do you have the memorabilia?\",0]],conditional:{\"item: 100 wanderer_memorabilia\":{say:[[\"[name]: Cool! Now, just give it here...\",0]],options:{\"give him the memorabilia\":{action:[\"items\",\"wanderer_memorabilia\",-100],say:[[\"[name]: Thank you for your patronage! As promised, I will reward you for your troubles..\",0],[\"Hato: My name's Hato, by the way. Maybe I'll see you again later. Seeya for now!\",0]],action2:[\"items\",\"barren_sword\",0],action3:[\"gold\",0],action4:[\"exp\",0],action6:[\"flag\",\"f1_helped_wanderer_collector\",\"true\"],action5:[\"end\"]},\"don't give him the memorabilia\":{say:[[\"[name]: Man. Ok. Whatever.\",0]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Doesn't look like it. Come back another time.\",0]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Hello! Do you know what wanderers are?\"]],options:{yes:{conditional:{\"flag: f1_met_wanderer_at_statue\":{say:[[\"[name]: Alright! Cool. I collect wanderer memorabilia. Interpreting the adventures and pasts of various adventurers... it's really interesting to me. Therefore!\",0],[\"[name]: If you can get me some, let's say, <i>100</i>, I'll take it off your hands and ensure you're rewarded handsomely. What do you say?\",0],[\"[name]: Well, I won't listen anyways. Come back if you have them and want me to take them off your hands.\",0],[\"<i>The man doesn't look like he'll say any more. Best to come back if you have what he wants.\",0]],action:[\"flag\",\"f1_spoken_to_wanderer_collector\",\"true\"],action2:[\"end\"]},\"level: 0\":{say:[[\"[name]: Really? What are they then?\",0],[\"[player]: Uhh...\",0],[\"<i>The man frowns disappointedly.</i>\",0],[\"[name]: Not cool, dude.. come back when you know a little more.\",0]],action:[\"end\"]}}},no:{say:[[\"[name]: Ah, ok. Nevermind - I'll see you around.\"]],action:[\"end\"]}}}},end:[[\"\",0]]},f1_lost_teenager:{name:\"Lost teenager\",conditional:{\"flag: -f1_spoken_to_lost_teenager\":{say:[[\"<i>You approach the lost teenager. They don't look particularly worried as you approach. In fact, they don't look like they're feeling anything at all.\",0],[\"[name]: Hi. I've been here for a while now, I'm not really sure what's going on.\",0],[\"[name]: One thing's for sure, I'm probably not getting out of this forest. I've been wandering for ages.\",0],[\"[name]: You can have these potions. I'm not gonna need them where I'm going...\",0]],action:[\"items\",\"health_potion\",0],action2:[\"items\",\"greater_health_potion\",0],action3:[\"flag\",\"f1_spoken_to_lost_teenager\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"<i>You look for the lost teenager, but they aren't there anymore.\",0]],action:[\"end\"]}},end:[[\"\",0]]},f1_traveller_woman:{name:\"Traveller woman\",say:[[\"<i>You approach the traveler woman. Once distinctive feature you notice is her kale-green backpack, something people seem to not have around here.\",0]],conditional:{\"flag: -f1_spoken_to_traveller_woman\":{say:[[\"[name]: Hey.. as you might be able to tell, I'm not from 'round here.\",0],[\"[name]: I enjoy seeing what's up about different places. This place is sorta dangerous, there's only one tiny settlement in the forest that I've found!\",0],[\"[name]: It's hard to stock up on supplies. I know there are some places outside this main forest, but I can't get to the end of them without turning back... I wonder if there's something there.\",0],[\"[name]: Oh well! I guess I'll never know. This looks like a nice place to take a nap..\",0],[\"<i>The woman looks sleepy. You don't want to bother her, so you say goodbye.</i>\",0],[\"[name]: Oh! I was attacked by some monster as well. I don't need this stuff, so you can have it.\",0],[\"<i>The woman hands you some items. You decide to leave afterwards.</i>\",0]],action:[\"items\",\"weak_vines\",0],action2:[\"items\",\"hempweed_ligament\",0],action3:[\"items\",\"sharp_claw\",0],action4:[\"items\",\"venomous_claw\",0],action5:[\"flag\",\"f1_spoken_to_traveller_woman\",\"true\"],action6:[\"end\"]},\"level: 0\":{say:[[\"<i>She's currently asleep. Looks like she can fend for herself - probably shouldn't bother her.\",0]],action:[\"end\"]}},end:[[\"\",0]]},f1_alchemist_woman:{name:\"Alchemist woman\",say:[[\"<i>You approach the alchemist.</i>\",0]],conditional:{\"flag: f1_helped_alchemist_lady\":{say:[[\"Skyla: Hey, [player]! Is there something you need? I owe you after all..\",0]],options:{\"help me craft reagents\":{say:[[\"Skyla: Alright. If you've gathered things from this area, I can help you make some useful items with them - have a look..\",0]],action:[\"crafting\",[\"earthen_shield_potion\",\"weak_slingshot\",\"invigorating_flower\",\"desperate_flower\",\"monster_essence\",\"kindred_essence\"],[\"waypoint\",\"goodbye\"]]},\"can you use magic?\":{say:[[\"Skyla: Well, I'm a mage not an alchemist; but it is helpful to know some magic..\",0],[\"Skyla: I can use some enchantment and trance spells, which are very helpful. Although a tad immoral!\",0],[\"Skyla: That said, I would never use them to do bad things.. sometimes I just really need help, you know?\",0]],action:[\"waypoint\",\"flag: f1_helped_alchemist_lady\"]},nope:{say:[[\"Skyla: Aw, that's a shame..\",0]],action:[\"waypoint\",\"goodbye\"]}}},\"flag: f1_spoken_to_alchemist_lady\":{say:[[\"[name]: Hi, adventurer! Have you got the items?\",1.25]],options:{\"give her the items\":{conditional:{\"item: 10 grey_wolf_pelt\":{conditional:{\"item: 1 special_sap\":{say:[[\"[name]: You got the items!\",0],[\"<i>She smiles brightly at you. Something about her joyous face makes you feel very pleased.\",0],[\"[name]: As promised, I'll give you something in return. Come a little closer..\",0],[\"<i>You approach her, slowly..</i>\",0],[\"<i>She hands you a piece of paper. It has some writing about potions on it.</i>\",0],[\"[name]: It's a crafting recipe for good health potions. It should help you on your adventures..\",2.25],[\"[name]: Was it what you expected? Hehe.\",0],[\"[name]: You can have some gold as well. My name's Skyla, by the way. I'll remember the help you gave me today. Come back if you need anything!\",0],[\"<i>She smiles again and waves goodbye.</i>\",0]],action:[\"recipe\",\"crafted_health_potion\"],action2:[\"gold\",0],action3:[\"flag\",\"f1_helped_alchemist_lady\",\"true\"],action5:[\"items\",\"grey_wolf_pelt\",-10],action6:[\"items\",\"special_sap\",-1],action4:[\"end\"]},\"level: 0\":{say:[[\"<i>You don't have all the items you need. You have no choice but to inform her, a little remorsefully, you notice.\",0]],action:[\"waypoint\",\"tell her you don't have the items\"]}}},\"level: 0\":{say:[[\"<i>You don't have all the items you need. You have no choice but to inform her, a little remorsefully, you notice.\",0]],action:[\"waypoint\",\"tell her you don't have the items\"]}}},\"tell her you don't have the items\":{say:[[\"<i>Oh, alright.. just come back when you do, okay? I'll be waiting..\",0],[\"<i>She seems a little sad but smiles and waves goodbye.</i>\",0]],action:[\"end\"]},\"ask where to find the items\":{say:[[\"[name]: You should be able to get pelt from wolves in the forest.\",0],[\"[name]: You can find special sap from lesser treants in the forest.\",0],[\"[name]: Just make sure you're strong enough to catch their attention and defeat them - but I'm sure for you it won't be a problem! There should be one around the coordinates <b>13, 29</b>.\",0],[\"[name]: Good luck, [player]! I'll be waiting..\",0]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>She has a large dark blue witch hat which should look silly, but she seems to make it work. It compliments her brown hair nicely, which is medium length and somewhat messy.</i>\",0],[\"<i>Her clothes seem to be a modified version of plainish blue robes on top, and on the bottom, robe bottoms fashioned into a skirt to aid movement. Her attire in general seems to be a modified wizard's robe to enable efficient movement and accentuate her female features.\",0],[\"<i>As you approach, she greets you with an inviting smile.</i>\",0],[\"[name]: Oh, an adventurer? Just my luck, I needed some help.\",0],[\"[name]: What's your name, adventurer?\",0],[\"<i>You have a sudden, uncontrollable urge to answer her question.</i>\",0],[\"[player]:  [player].\",0],[\"[name]: [player]? That's a nice name...\",0],[\"[name]: Hey, [player].. I need some items for some alchemy I'm doing, but I can't really be bothered to get them myself..\",0],[\"[name]: Could you help me? All I need is 10 grey wolf pelts and 1 special sap, nothing that hard to get..\",0],[\"[name]: Of course, I'll make it worth your while..\",1.25]],options:{yes:{say:[[\"<i>The woman smiles at you. Having her smile at you makes you feel really good for some reason.\",0],[\"[name]: Thank you!\",0],[\"[name]: In case you didn't know, you can find special sap from lesser treants in the forest.\",0],[\"[name]: Just make sure you're strong enough to catch their attention and defeat them - but I'm sure for you it won't be a problem! There should be one around the coordinates <b>13, 29</b>...\",0],[\"[name]: Just bring the things back to me whenever you're ready. I'll be waiting..\",0]],action:[\"flag\",\"f1_spoken_to_alchemist_lady\",\"true\"],action2:[\"end\"]},no:{say:[[\"<i>The woman frowns slightly, in a disappointed, not angry manner.</i>\",0],[\"[name]: Just think about it, please? If you get the items and want to give them to me, just come over. I'll be waiting.\",0]],action:[\"flag\",\"f1_spoken_to_alchemist_lady\",\"true\"],action2:[\"end\"]}}}},end:[[\"\",0]],\"tell her you don't have the items\":{say:[[\"[name]: Oh, alright.. just come back when you do, okay? I'll be waiting..\",0],[\"<i>She seems a little sad but smiles and waves goodbye.\",0]],action:[\"end\"]},goodbye:{say:[[\"Skyla: Come back later, okay?\",0]],action:[\"end\"]}},f1_forest_craftsman:{name:\"Lucas\",say:[[\"<i>You approach the craftsman, who is currently sitting behind a table that has some kind of schematics on it.</i>\",0]],conditional:{\"flag: f1_spoken_to_forest_craftsman\":{action:[\"waypoint\",\"loop\"]},\"level: 0\":{say:[[\"<i>They're wearing a brown apron and have a somewhat bored expression, which does not help the dull impression given by his brown bowl-shaped hair and matching dreary brown eyes.\",0],[\"<i>His clothes, too, are plain, but considering the various stains and small patches rips it has sustained, it can be assumed that this is a 'work pair' not to be valued greatly.\",0],[\"[name]: Man, nothing ever happens here...\",0],[\"<i>He looks up and notices you.\",0],[\"[name]: Oh.\",0]],action:[\"flag\",\"f1_spoken_to_forest_craftsman\",\"true\"],action2:[\"waypoint\",\"loop\"]}},loop:{say:[[\"[name]: What's up?\",0]],options:{\"help me craft some items\":{say:[[\"[name]: Sure, if you've got the gold.\",0]],action:[\"crafting\",[\"vine_wrapped_wooden_sword\",\"vine_wrapped_wooden_stave\",\"strong_vine_chestplate\",\"wolfhide_armour\",\"wolfhide_cap\",\"wolfhide_leggings\",\"bladed_armour\",\"feathervine_sword\",\"wolf_hermit_staff\"],[\"end\"]]},bored:{say:[[\"[name]: Yeah. This settlement is a useful place to stay if you need to go into the forest often..\",0],[\"[name]: But nothing ever happens in this area. People say it can be dangerous but if you have any adventuring experience you'll be completely fine for the most part.\",0],[\"[name]: I settled here so that I could craft simple items for new adventurers and make an easy living, but it's gotten old way too fast. I might start adventuring again myself..\",0]],action:[\"waypoint\",\"loop\"]},cya:{action:[\"end\"]}}},end:[[\"[name]: Cya around.\",0]]},f1_forest_cleric:{name:\"Aina\",say:[[\"<i>You approach the cleric.\",0]],conditional:{\"flag: f1_spoken_to_aina\":{action:[\"waypoint\",\"loop\"]},\"level: 0\":{say:[[\"<i>They seem fairly young, likely in their mid-late teens.</i>\",0],[\"<i>Her purple attentive eyes match well with her straight black hair that  seems to have been cut short just at her shoulders. Her outfit is a mostly dark one, with black bermuda shorts and a grey belt. Holstered at her side is a small curved dagger and a few knives.</i>\",0],[\"<i>Her shirt is similarly dark; what looks a bit like a military fatigues t-shirt of various grey hues is under a basic black military vest that has several unique potions and other items holstered across it.</i>\",0],[\"<i>Were it not for her cleric's tome (easily identifiable due to the large cross on the cover), it would probably be impossible to infer her role.</i>\",0],[\"<i>She smiles frendily at you as you approach her.</i>\",0]],action:[\"flag\",\"f1_spoken_to_aina\",\"true\"],action2:[\"waypoint\",\"loop\"]}},loop:{say:[[\"[name]: Hi, what's up?\",0]],options:{\"can you heal me?\":{say:[[\"[name]: Sure! No problem. Just gimme a second...\",0],[\"<i>She must be a fairly competent healer, because she doesn't even remove the tome from where it is holstered at her waist. You feel your wounds disappear..\",0]],action:[\"heal\"],action2:[\"waypoint\",\"loop\"]},\"ask about her outfit\":{say:[[\"[name]: Yeah, not very healer-like is it? Haha..\",0],[\"[name]: I wanted to wear something a little more pure-looking, but my brother told me that it would just get dirty in the forest, and he said I should wear something a little more practical..\",0],[\"[name]: But to be honest, this is nice too. It's comfortable and looks kinda cool!\",0],[\"<i>She removes the dagger from the holseter at her waist and twirls it around dangerously before seamlessly putting it back\",0]],action:[\"waypoint\",\"loop\"]},\"ask what she's doing here\":{say:[[\"[name]: You probably know this already, but I'm a cleric in practice-\",0],[\"<i>She slaps the cleric tome at her hip.</i>\",0],[\"[name]: My brother was helping me get some practice with support - since he's a mage, he would do most of the fighting and I would help out, as well as fight a little bit.\",0],[\"[name]: He's out right now, though... in the north of the forest I think. I've gone out on my own a bit but I don't want to go too far... so I'm here waiting for him.\",0]],action:[\"waypoint\",\"loop\"]},\"ask about teleprotation stones\":{say:[[\"[name]: Yeah! There's one that goes straight here.\",0],[\"[name]: It'll cost you a little, but it's really helpful to be able to come back whenever.\",0],[\"[name]: I've got a few, if you want some:\",0]],action:[\"shop\",\"f1_forest_cleric_shop\",[\"end\"]]},\"say goodbye\":{action:[\"end\"]}}},end:[[\"[name]: Alright, bye!\",0]]},f1_ninja_trainer:{name:\"Sora\",say:[[\"<i>You approach the ninja. He is sat down leaning against a tree with one knee bent.\",0]],conditional:{\"flag: f1_spoken_to_sora\":{action:[\"waypoint\",\"loop\"]},\"level: 0\":{say:[[\"<i>You can't see his facial expression to the cloth covering most of his face, but his eyes look a little tired.</i>\",0],[\"<i>His clothes are at once conspicuous and innocuous; plain black trousers and a plain black shirt. The fabric looks silky and the clothes light and loose, given how easily they sway in the wind.\",0],[\"<i>He has a physique which looks at once agile and muscular; lean yet strong. He tilts his head in your direction as you near him.\",0]],action:[\"flag\",\"f1_spoken_to_sora\",\"true\"],action2:[\"waypoint\",\"loop\"]}},loop:{say:[[\"[name]: ..?\",0]],options:{\"ask about his outfit\":{say:[[\"[name]: ..Oh, this..? It's standard ninja, uhm.. attire.\",0],[\"[name]: It lets you move around quickly and silently, which is really helpful. You don't really need the headscarf thing unless you're doing something shady and to be honest it's a little inconvenient. But I wear it since I think it looks cool.\",0],[\"[name]: I have to take it off during missions, though.. it's just too inconvenient.\",0]],action:[\"waypoint\",\"loop\"]},\"ask about being a ninja\":{say:[[\"[name]: Being a ninja doesn't really mean much. It's just a battle style.\",0],[\"[name]: It's nice to have the ability to be stealthy because it means you can avoid fights.\",0],[\"[name]: I went out with a mage recently to do some hunting and it was just constant battling.. I don't have the stamina for that sort of stuff.\",0]],options:{\"ask for advice\":{say:[[\"[name]: Well, if you're a ninja, usually you use techniques that sorta combo into eachother - that way you can get the best out of your actions.\",0],[\"[name]: If you've learned a lot of techniques it can get kind of confusing, so it might be worth writing down on paper what techniques you have combo into what other techniques - so you know what to do to achieve certain effects.\",0],[\"[name]: I'd show you the ropes by sparring, but I'm just not in the mood right now.. maybe another time.\",0]],action:[\"waypoint\",\"loop\"]},\"...\":{action:[\"waypoint\",\"loop\"]}}},\"say goodbye\":{action:[\"end\"]}}},end:[[\"<i>Sora waves at you before tilting his head back to its original position.\",0]]},f1_forest_settlement_sign_north:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",0],[\"<i>It reads: Small forest settlement to the NORTH.\",0],[\"<i>Nothing else to see here...</i>\",0]]},f1_forest_settlement_sign_east:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",0],[\"<i>It reads: Small forest settlement to the EAST.\",0],[\"<i>Nothing else to see here...</i>\",0]]},f1_forest_settlement_sign_west:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",0],[\"<i>It reads: Small forest settlement to the WEST.\",0],[\"<i>Nothing else to see here...</i>\",0]]},f1_forest_settlement_sign_south:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",0],[\"<i>It reads: Small forest settlement to the SOUTH.\",0],[\"<i>Nothing else to see here...</i>\",0]]},f1_lesser_treant:{name:\"Lesser treant\",say:[[\"<i>You notice that there one of the trees in the area seems to have some kind of.. facial expression?</i>\",0],[\"<i>Besides that, it looks just like the other trees.</i>\",0]],options:{\"attack it\":{conditional:{\"level: 5\":{say:[[\"<i>You strike the tree.</i>\",0],[\"<i>Very slowly, it begins to move - it's 'face' points in the same direction but you can tell that it can see all around itself.</i>\",0],[\"<i>The ground trembles slightly as what looks like roots emerge from the ground..\",0],[\"<i>And fly in your direction!</i>\",0]],action:[\"battle\",[[\"lesser_treant\",{changeLevel:7,levelCap:!1,addLevels:!1}],[\"waypoint\",\"afterBattle\"]]]},\"level: 0\":{say:[[\"<i>You strike the tree.</i>\",0],[\"<i>...the tree seems completely unfazed. Maybe if you were stronger..</i>\",0]],action:[\"end\"]}}},\"leave it alone\":{say:[[\"<i>You decide to leave the tree alone.</i>\",0]],action:[\"end\"]}},afterBattle:{say:[[\"<i>The tree, clearly quite damaged, becomes still again. Perhaps it is repairing itself..\",0],[\"<i>Regardless, it no longer responds to your attacks. Best to leave it alone.</i>\",0]],action:[\"end\"]},end:[[\"\",0]]},f1_treant:{name:\"Treant\",say:[[\"<i>You notice that there one of the trees in the area seems to have some kind of.. facial expression?</i>\",0],[\"<i>Besides that, it looks similar to the other trees - you notice that it has a greater girth and a greater abundance of leaves.</i>\",0]],options:{\"attack it\":{conditional:{\"level: 10\":{say:[[\"<i>You strike the tree.</i>\",0],[\"<i>Very slowly, it begins to move - it's 'face' points in the same direction but you can tell that it can see all around itself.</i>\",0],[\"<i>The ground trembles as what looks like roots emerge from the ground..\",0],[\"<i>And fly in your direction!</i>\",0]],action:[\"battle\",[[\"treant\",{changeLevel:12,levelCap:!1,addLevels:!1}],[\"waypoint\",\"afterBattle\"]]]},\"level: 0\":{say:[[\"<i>You strike the tree.</i>\",0],[\"<i>...the tree seems completely unfazed. Maybe if you were stronger..</i>\",0]],action:[\"end\"]}}},\"leave it alone\":{say:[[\"<i>You decide to leave the tree alone.</i>\",0]],action:[\"end\"]}},afterBattle:{say:[[\"<i>The tree, clearly quite damaged, becomes still again. Perhaps it is repairing itself..\",0],[\"<i>Regardless, it no longer responds to your attacks. Best to leave it alone.</i>\",0]],action:[\"end\"]},end:[[\"\",0]]},f1_lesser_ent:{name:\"Lesser ent\",say:[[\"<i>You notice that there one of the trees in the area seems to have some kind of.. facial expression?</i>\",0],[\"<i>Besides that, it looks similar to the other trees - you notice that it has a greater girth and a greater abundance of leaves. Furthermore, it radiates some kind of aura that demands both awe and veneration..</i>\",0],[\"<i>You notice that creatures in the forest tend to steer clear of this tree somewhat. It's branches sway as though the have lives of their own.\",0]],options:{\"attack it\":{conditional:{\"level: 17\":{say:[[\"<i>You strike the tree.</i>\",0],[\"<i>Very slowly, it begins to move - it's 'face' points in the same direction but you can tell that it can see all around itself.</i>\",0],[\"<i>The ground quakes as what looks like roots emerge from the ground..\",0],[\"<i>And fly in your direction!</i>\",0]],action:[\"battle\",[[\"lesser_ent\",{changeLevel:17,levelCap:!1,addLevels:!1}],[\"waypoint\",\"afterBattle\"]]]},\"level: 0\":{say:[[\"<i>You strike the tree.</i>\",0],[\"<i>...the tree seems completely unfazed. Maybe if you were stronger..</i>\",0]],action:[\"end\"]}}},\"leave it alone\":{say:[[\"<i>You decide to leave the tree alone.</i>\",0]],action:[\"end\"]}},afterBattle:{say:[[\"<i>The tree, clearly quite damaged, becomes still again. Perhaps it is repairing itself..\",0],[\"<i>Regardless, it no longer responds to your attacks. Best to leave it alone.</i>\",0]],action:[\"end\"]},end:[[\"\",0]]},f1_travelling_hermit:{name:\"Old traveller\",say:[[\"<i>You approach the old traveller.</i>\",0],[\"<i>One would assume he is in his seventies or eighties, given his fairly shrivelled skin and hunched back. He uses a walking stick that is a little lighter than the trees surrounding the steady himself as he walks.\",0],[\"<i>His clothes are very plain; a grey top that seems a little large for his shrunken self, and plan brown trousers that fit the same criteria. He doesn't react as you near him, but he emanates a friendly aura.\",0],[\"[name]: Hello there.\",0]],options:{\"What are you doing?\":{say:[[\"[name]: I'm looking for a statue. I think it is somewhere around the outskirts of this forest...\",0],[\"[name]: It is a statue of Lucia, the wandering Goddess. I am not a wanderer myself, but the statues are a centerpiece of their lifestyle. Somewhat of a spectacle to behold, in my opinion.\",0]],options:{\"wanderer?\":{say:[[\"[name]: Yes, wanderer. Maybe if you can meet a wanderer at the statue they will tell you a bit more. I'm no expert, unfortunately.\",0],[\"[name]: Anyways, I should be on my way. I'll never find the statue at this rate!\",0],[\"<i>The old man begins to walk away. You notice that he moves very quickly for someone who needs a walking stick. Very quickly, his image fades in between the trees.\",0]],action:[\"flag\",\"f1_spoken_to_hermit\",\"true\"],action2:[\"end\"]},\"oh, ok. Bye\":{say:[[\"[name]: I think I'll rest around here for a little while, so perhaps I will see you around. Until then, traveller!\",0]],action:[\"end\"]}}},bye:{say:[[\"<i>The old man looks a little confused by your sudden approach and retreat.</i>\",0],[\"[name]: Ah, okay then.. I'm going to rest here for a little bit, so perhaps I will see you around. Until then, traveller!\",0]],action:[\"end\"]}},end:[[\"\",0]]},f1_person_looking_for_settlement:{name:\"Lost person\",say:[[\"<i>You approach the random person. They seem a little lost.</i>\",1.25],[\"[name]: Hello!! I know there is a settlement around here.. do you know where it is??\",0],[\"[name]: Please!!! I'm running out of resources and I'm too scared to go without direction! Can you tell me??\",0]],options:{\"north-east\":{say:[[\"North east?? Got it!\",0],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",0]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"north-west\":{say:[[\"North west?? Got it!\",0],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",0]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action3:[\"flag\",\"f1_helped_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"straight south\":{say:[[\"Straight south?? Got it!\",0],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",0]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"south-east\":{say:[[\"South east?? Got it!\",0],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",0]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]}},end:[[\"[name]: Thank you!! Bye!\",0],[\"<i>The person runs off into the distance. Hopefully you told them the right direction..\",0]]},f1_owned_crafted_sword:{name:\"Wolves\",say:[[\"<i>You notice something interesting on the floor.\",0],[\"<i>It's a sword; it looks quite elegantly-made and surprisingly pristine for something left on the floor.</i>\",0],[\"<i>Will you take it?</i>\",0]],options:{yes:{say:[[\"<i>You reach for the sword and pick it up.\",0],[\"<i>As you move to walk away, you can hear growling from all directions..\",0],[\"<i>Suddenly, a group of grey wolves emerge! Their hides are bristling with fury, their eyes fixated on the sword. They emerge from thickets in all directions, blocking off any escape.\",0],[\"<i>Before you can absorb the situation, they start to attack--\",0]],action:[\"battle\",[[\"grey_wolf\",{changeLevel:10,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleOne\"]]]},no:{say:[[\"You decide to leave the sword alone.\",0]],action:[\"end\"]}},postBattleOne:{say:[[\"Another wolf attacks!\",0]],action:[\"battle\",[[\"grey_wolf\",{changeLevel:12,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleTwo\"]]]},postBattleTwo:{say:[[\"Most of the wolves back down after seeing you defeat two in a row.\",0],[\"However, a few remain. A wolf whose claws are dripping with a dangerous-looking substance approaches..\",0]],action:[\"battle\",[[\"young_venomous_wolf\",{changeLevel:13,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleThree\"]]]},postBattleThree:{say:[[\"By this point, all of the wolves have left. You take the sword and leave, feeling a little startled.\",0]],action:[\"flag\",\"f1_taken_crafted_sword\",\"true\"],action2:[\"gold\",0],action3:[\"exp\",0],action4:[\"items\",\"crafted_blade\",0],action5:[\"end\"]},end:[[\"\",0]]},f1_explorer_woman:{name:\"Explorer woman\",say:[[\"<i>You approach the woman. She has a friendly smile, along with black hair and blue eyes.\",0],[\"<i>Her clothes are clearly geared for exploration - a jacket, trousers and (somewhat long) boots various hues of brown.\",0],[\"<i>Two pouches holstered at her waist allow for easy storage without the compromise of maneouvrability that comes with a large backpack.\",0],[\"[name]: Hey! I'm currently exploring this area, looking for rare things.\",0],[\"[name]: Sometimes brazen creatures attack me as I travel, but I think there are some creatures that won't ambush you and that you'll only find if you go exploring looking for them. Usually, those are the rare ones!\",0],[\"[name]: Did you know that? It shocked me when I found out!\",0]],options:{yes:{say:[[\"[name]: Oh.. you did? I feel a little silly now, haha!\",0]],action:[\"end\"]},no:{say:[[\"[name]: There you go then! Hopefully my infomration was helpful!!\",0]],action:[\"end\"]}},end:[[\"[name]: I'm going to stay here for a while. I've been running around exploring for so long, I need a break! Seeya around!\",0]]},f1_person_on_toilet:{name:\"Person 'using the toilet'\",say:[[\"<i>You can see someone in the distance, covered by an outburst of leaves.</i>\",0],[\"<i>It's difficult to see what they're doing. You move some leaves to get a closer look..</i>\",0],[\"[name]: HEY!! What the hell are you doing?! Go away!!\",0],[\"<i>The person throws some leaves in your direction, obviously to no avail. You decide it's best to leave them alone.</i>\",0]],action:[\"end\"],end:[[\"\",0]]},f1_mage_trainer:{name:\"Teenage mage\",say:[[\"<i>You approach the mage. Physically, he isn't very powerful-looking, but perhaps that can be expected from his profession.</i>\",0]],conditional:{\"flag: f1_spoken_to_daryl\":{say:[[\"[name]: Uh, hi. Do you need something?\",0]],action:[\"waypoint\",\"opts\"]},\"level: 0\":{say:[[\"<i>His clothes seem to be classic mage attire somewhat crudely cut and shaped to be suited to quick movement and close combat. His robes, a dark blue has been fashioned into an open jacket that shows the light grey shirt underneath, over which a strap carrying various potions is observed.</i>\",0],[\"<i>His pants are simple adventurer's wear; slightly baggy brown trousers with fairly long black boots.</i>\",0],[\"<i>The mage's hood, the same design as his jacket, is the giveaway of his discipline. He looks quite tired, and seems to be resting while leaning against a tree.\",0],[\"[name]: Uh, hi. Do you need something?\",0]],action:[\"flag\",\"f1_spoken_to_daryl\",\"true\"],action2:[\"waypoint\",\"opts\"]}},opts:{options:{\"ask for advice about being a mage\":{say:[[\"[name]: Uhm, well..\",0],[\"<i>The mage thinks for a little.\",0],[\"[name]: Learning to cast spells is hard part. Everything else isn't too hard.\",0],[\"[name]: I guess sometimes you can combine spells for new effects, but that's more of a creativity thing..\",0],[\"[name]: Tell you what - I have this sheet of some magic combinations I found out. If you give me 500 gold, I'll give it to you; I've got them memorised anyways, and I need some gold to buy more potions.\",0]],options:{\"'yes'\":{conditional:{\"gold: 500\":{say:[[\"Alright! Here you go:\",0]],action:[\"gold\",-500],action2:[\"items\",\"mage_cheat_sheet\",0],action3:[\"waypoint\",\"afterSale\"],action4:[\"flag\",\"f1_bought_from_teenage_mage\",\"true\"],afterSale:{say:[[\"[name]: I guess now I can head back to the settlement. I won't get Aina mad after I tell her I lost all our gold... <i>He mumbles to himself.</i>\",0],[\"<i>The mage walks off.</i>\",0]],action:[\"end\"]}},\"level: 0\":{say:[[\"<i>You try to get the gold out but you don't have enough. You tell him that you can't pay.\",0],[\"[name]: Wh-\",0],[\"[name]: *sigh*\",0],[\"[name]: It's fine, just come back when you can pay.\",0],[\"<i>The mage remains where he is. Maybe come back later.</i>\"]],action:[\"end\"]}}},\"'no'\":{say:[[\"[name]: Alright, that's fine. Come see me if you change your mind.\",0]],action:[\"end\"]}}},nope:{say:[[\"[name]: Um.. Ok.\",0],[\"<i>The mage stops looking at you. Maybe come and see him again another time.</i>\",0]],action:[\"end\"]}}},end:[[\"\",0]]},gold_test:{say:[[\"hey\",1]],action:[\"gold\",1e3],end:[[\"bye\",1]]},f1_hydra_staff_on_floor:{interesting_item:[\"f1_picked_up_hydra_staff\",[\"hydra_staff\",1]],end:[[\"\",0]]},f1_crown_of_darkness_on_floor:{interesting_item:[\"f1_picked_up_crown_of_darkness\",[\"crown_of_darkness\",1]],end:[[\"\",0]]},f1_simple_sword_on_floor:{interesting_item:[\"f1_picked_up_simple_sword\",[\"simple_sword\",1]],end:[[\"\",0]]},f1_damaged_helm_on_floor:{interesting_item:[\"f1_picked_up_damaged_helm\",[\"damaged_helm\",1]],end:[[\"\",0]]},f1_metal_stave_on_floor:{interesting_item:[\"f1_picked_up_metal_stave\",[\"metal_stave\",1]],end:[[\"\",0]]},f1_silver_axe_on_floor:{interesting_item:[\"f1_picked_up_silver_axe\",[\"silver_axe\",1]],end:[[\"\",0]]},f1_silver_dagger_on_floor:{interesting_item:[\"f1_picked_up_silver_dagger\",[\"silver_dagger\",1]],end:[[\"\",0]]},f1_pickaxe_on_floor:{interesting_item:[\"f1_picked_up_pickaxe\",[\"pickaxe\",1]],end:[[\"\",0]]},f1_feathervine_sword_on_floor:{interesting_item:[\"f1_picked_up_feathervine_sword\",[\"feathervine_sword\",1]],end:[[\"\",0]]},f1_silver_helm_on_floor:{interesting_item:[\"f1_picked_up_silver_helm\",[\"silver_helm\",1]],end:[[\"\",0]]},f1_wolfhide_cap_on_floor:{interesting_item:[\"f1_picked_up_wolfhide_cap\",[\"wolfhide_cap\",1]],end:[[\"\",0]]},f1_vine_helmet_on_floor:{interesting_item:[\"f1_picked_up_vine_helmet\",[\"vine_helmet\",1]],end:[[\"\",0]]},f1_ninja_headcloak_on_floor:{interesting_item:[\"f1_picked_up_ninja_headcloak\",[\"ninja_headcloak\",1]],end:[[\"\",0]]},f1_makeshift_steel_armour_on_floor:{interesting_item:[\"f1_picked_up_makeshift_steel_armour\",[\"makeshift_steel_armour\",1]],end:[[\"\",0]]},f1_greater_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_greater_mana_potion\",[\"greater_mana_potion\",1]],end:[[\"\",0]]},f1_vine_armour_on_floor:{interesting_item:[\"f1_picked_up_vine_armour\",[\"vine_armour\",1]],end:[[\"\",0]]},f1_vine_pantaloons_on_floor:{interesting_item:[\"f1_picked_up_vine_pantaloons\",[\"vine_pantaloons\",1]],end:[[\"\",0]]},f1_silver_legwear_on_floor:{interesting_item:[\"f1_picked_up_silver_legwear\",[\"silver_legwear\",1]],end:[[\"\",0]]},f1_slime_ball_on_floor:{interesting_item:[\"f1_picked_up_slime_ball\",[\"slime_ball\",8]],end:[[\"\",0]]},f1_weak_vine_on_floor:{interesting_item:[\"f1_picked_up_weak_vine\",[\"weak_vine\",6]],end:[[\"\",0]]},f1_hempweed_ligament_on_floor:{interesting_item:[\"f1_picked_up_hempweed_ligament\",[\"hempweed_ligament\",2]],end:[[\"\",0]]},f1_wood_on_floor:{interesting_item:[\"f1_picked_up_wood\",[\"wood\",4]],end:[[\"\",0]]},f1_steel_on_floor:{interesting_item:[\"f1_picked_up_steel\",[\"steel\",4]],end:[[\"\",0]]},f1_brown_pelt_on_floor:{interesting_item:[\"f1_picked_up_brown_pelt\",[\"brown_pelt\",6]],end:[[\"\",0]]},f1_venomous_claw_on_floor:{interesting_item:[\"f1_picked_up_venomous_claw\",[\"venomous_claw\",1]],end:[[\"\",0]]},f1_earthen_shield_potion_on_floor:{interesting_item:[\"f1_picked_up_earthen_shield_potion\",[\"earthen_shield_potion\",2]],end:[[\"\",0]]},f1_health_potion_on_floor:{interesting_item:[\"f1_picked_up_health_potion\",[\"health_potion\",4]],end:[[\"\",0]]},f1_greater_health_potion_on_floor:{interesting_item:[\"f1_picked_up_greater_health_potion\",[\"greater_health_potion\",2]],end:[[\"\",0]]},f1_crafted_health_potion_on_floor:{interesting_item:[\"f1_picked_up_crafted_health_potion\",[\"crafted_health_potion\",1]],end:[[\"\",0]]},f1_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_mana_potion\",[\"mana_potion\",4]],end:[[\"\",0]]},f1_crafted_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_crafted_mana_potion\",[\"crafted_mana_potion\",2]],end:[[\"\",0]]},f1_forest_explorer_daggers_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_daggers\",[\"forest_explorer_daggers\",1]],end:[[\"\",0]]},f1_forest_explorer_cap_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_cap\",[\"forest_explorer_cap\",1]],end:[[\"\",0]]},f1_forest_explorer_armour_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_armour\",[\"forest_explorer_armour\",1]],end:[[\"\",0]]},f1_forest_explorer_pants_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_pants\",[\"forest_explorer_pants\",1]],end:[[\"\",0]]},f1_forest_explorer_pendant_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_pendant\",[\"forest_explorer_pendant\",1]],end:[[\"\",0]]},f1_forest_explorer_charm_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_charm\",[\"forest_explorer_charm\",1]],end:[[\"\",0]]}},Me=Object.assign(Ee,Ae),$e={currentNpc:void 0,currentBranch:void 0,returnFunction:void 0,music:void 0,initNpc(e,t){this.currentNpc=lt(Me[e]),this.currentBranch=this.currentNpc,this.returnFunction=t,this.runBranch(Object.keys(this.currentBranch))},runBranch(e){const t=this.currentBranch;var a,s=!1;e.forEach((t,a)=>{null==t&&e.splice(a,1)});for(var r=0;r<Object.keys(t).length;r++){const f=e[r];switch(f){case\"say3\":case\"say2\":case\"say\":if(!s){s=!0;const a=$e.parseDialogue(lt(t[f])),n=()=>{var t=e;delete t[t.indexOf(f)],this.runBranch(t)};\"auto\"==o.scrollStyle?_t(a,\"outside\",n):yt(a,n,!0);break}case\"action7\":case\"action6\":case\"action5\":case\"action4\":case\"action3\":case\"action2\":case\"action\":if(!s){const t=$e.currentBranch;$e.currentNpc;switch(t[f][0]){case\"save\":Z();break;case\"end\":$e.runBranch([\"end\"]);break;case\"waypoint\":{const e=t[f][1],a=rt($e.currentNpc,e);$e.currentBranch=a,$e.runBranch(Object.keys(a));break}case\"shop\":{const e=t[f][1];var i=t[f][2];switch(i[0]){case\"end\":i=()=>{const e={action:[\"end\"]};$e.currentBranch=e,$e.runBranch(Object.keys(e))};break;case\"waypoint\":i=()=>{const e={action:t[f][2]};$e.currentBranch=e,$e.runBranch(Object.keys(e))}}E(e,i);break}case\"battle\":{const e=t[f][1][0],o=t[f][1][1];Le.battleProcessing(n.player,(a=t[f][1][0][0],P[a]),()=>{const e={action:o};$e.currentBranch=e,$e.runBranch(Object.keys(e))},e[1]);break}case\"gold\":{s=!0;const a=t[f][1];_t([[`<br>${a>0?\"Obtained\":\"Lost\"} ${Math.abs(a)} gold!`,1]],\"oustide\",()=>{n.player.gold+=a,ot(n.player);var t=[...e];delete t[t.indexOf(f)],this.runBranch(t)});break}case\"exp\":{s=!0;const a=t[f][1];_t([[`<br>Obtained ${a} EXP!`,1]],\"oustide\",()=>{n.player.exp+=a,ot(n.player),Ce();var t=[...e];delete t[t.indexOf(f)],this.runBranch(t)});break}case\"items\":{s=!0;const a=t[f][1],r=t[f][2];r>0?ze(a,r,r):Ue(a,-1*r),ot(n.player),setTimeout(()=>{var t=[...e];delete t[t.indexOf(f)],this.runBranch(t)},1e3*o.messageDelay);break}case\"flag\":{const e=t[f][1],a=t[f][2];c[e].complete=\"true\"==a;break}case\"recipe\":{const e=t[f][1];D(e);break}case\"music\":if(\"stop\"!=t[f][1]){const e=t[f][1];$e.music=e,R.playMusic(e)}else R.music=void 0,R.stopMusic();break;case\"crafting\":{t[f];const e=t[f][2];O(()=>{const t={action:e};$e.currentBranch=t,$e.runBranch(Object.keys(t))},t[f][1]);break}case\"heal\":Le.heal(n.player.stats),ot(n.player);break;case\"custom\":(0,t[f][1])();break;case\"teleport\":{const e=t[f][1];xe(e);break}}delete t[f],e.splice(e.indexOf(f),1),r--}break;case\"end\":if(!s&&\"end\"==e[0]){$e.currentBranch;const e=$e.currentNpc,t=$e.returnFunction,a=$e.parseDialogue(lt(e.end)),n=()=>{$e.music=void 0,t()};\"auto\"==o.scrollStyle?\"<br>\"==a[0][0]?(pt(\"\"),n()):_t(a,\"outside\",n):\"<br>\"==a[0][0]?(pt(\"\"),n()):yt(a,n,!0)}break;case\"options\":s||(pt(\"\"),Object.keys(t.options).forEach((e,t)=>{pt(`${t+1} - ${e}`)}),wt(this.branchResponse));break;case\"conditional\":if(!s){const e=$e.currentBranch.conditional;var l=void 0,d=!1;n.player;Object.keys(e).forEach(t=>{d||1==ct([t])&&(d=!0,l=e[t])}),d&&($e.currentBranch=l,$e.runBranch(Object.keys(l)))}break;case\"interesting_item\":_t([[\"<br>You notice something interesting on the floor. You decide to pick it up and take it with you.\",2]],\"outisde\",()=>{const e={action:[\"items\",t[f][1][0],t[f][1][1]],action3:[\"flag\",t[f][0],\"true\"],action2:[\"end\"]};$e.currentBranch=e,$e.runBranch(Object.keys(e))})}}},branchResponse(){vt($e.branchResponse);const e=kt().toLowerCase(),t=$e.currentBranch,a=Object.keys(t.options);if(\"Nan\"!=parseInt(e).toString()&&\"\"!=e)if(null!=a[e-1]){const n=a[e-1];$e.currentBranch=t.options[n],$e.runBranch(Object.keys($e.currentBranch))}else pt(\"<br>Input out of range\"),wt($e.branchResponse);else pt(\"<br>Invalid input.\"),wt($e.branchResponse)},parseDialogue:e=>(e.forEach(e=>{e[0]=e[0].replace(/\\[name\\]/gi,\"\"+$e.currentNpc.name),e[0]=e[0].replace(/\\[player\\]/gi,\"\"+n.player.name),e[0]=\"<br>\"+e[0]}),e),end(){$e.runBranch([\"end\"])}},Be=(e,t)=>{$e.initNpc(e,t)},Le={battleProcessing(e,t,a,o={changeLevel:!0,levelCap:!1,addLevels:!1}){pt(\"<br>---------------------------------------\"),pt(`<br>Battle between ${e.name} and ${t.stats.name} has begun!`);const s=JSON.parse(JSON.stringify(e));this.playerFighter=this.addCombatStats(s.stats,s.name,\"player\",o);const r=JSON.parse(JSON.stringify(t));this.enemy=this.addCombatStats(r.stats,r.stats.name,\"enemy\",o),this.turn=0,this.state=[],this.endFunction=a,x(Le.getPlayerAdd(Le.playerFighter));var i=\"battle$\";null!=o.battleMusic&&(i=o.battleMusic),null!=($e.currentNpc,$e.currentBranch,$e.returnFunction,$e.music)&&1==o.overlayMusic||R.playMusic(i);const l=n.tutorials;0==l.includes(\"battle_1\")&&1==n.special.doingTutorial?(n.tutorials.push(\"battle_1\"),Z(),yt(b.battle_1,Le.combatLoop)):0==l.includes(\"battle_2\")&&\"Young Wolf\"==t.stats.name&&1==n.special.doingTutorial?(n.tutorials.push(\"battle_2\"),Z(),yt(b.battle_2,Le.combatLoop)):0==l.includes(\"battle_3\")&&\"Dreadful Wolf\"==t.stats.name&&1==n.special.doingTutorial?(n.tutorials.push(\"battle_3\"),Z(),yt(b.battle_3,Le.combatLoop)):0==l.includes(\"battle_4\")&&\"???\"==t.stats.name&&1==n.special.doingTutorial?(n.tutorials.push(\"battle_4\"),Z(),yt(b.battle_4,Le.combatLoop)):this.combatLoop()},addCombatStats(e,t,a,o={changeLevel:!0,levelCap:!1,addLevels:!1}){if(e.name=t,e.health_mod=0,e.atk_mod=0,e.def_mod=0,e.matk_mod=0,e.mdef_mod=0,e.crit_chance_mod=0,e.crit_damage_mod=0,e.effectiveness_mod=0,e.resistance_mod=0,e.evasion_mod=0,e.speed_mod=0,e.actions=0,e.buffs=[],e.debuffs=[],e.mitigation=0,\"player\"==a)e.mana=e.current_mana,e.sp=0,e.stamina=e.current_stamina,e.max_health=this.getMaxHealth(e),e.health=e.current_health,e.actionsTaken=0,e.skillsList=e.skills.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var t=e.split(\"-\"),a=t[0],n=t[1];return l[a].skills[n].name}return e}),e.type=\"player\";else{if(e.modeBattle=\"normal\",e.mana=e.max_mana,e.stamina=e.max_stamina,e.health=e.max_health,e.sp=0,e.level=e.base_level,e.actionsTaken=0,e.type=\"enemy\",o.hasOwnProperty(\"modifyEnemy\")){const t=Object.keys(o.modifyEnemy);for(var s=0;s<t.length;s++){const a=t[s];e[a]=o.modifyEnemy[a]}}const t=e.base_level,a=n.player.level;var r;const i=null==o.changeLevel||o.changeLevel,l=null!=o.levelCap&&o.levelCap,c=null!=o.addLevels&&o.addLevels;if(r=0==i?t:1==i?a:i,0!=c&&r<a+c&&(r=a+c),0!=l&&r>l&&(r=l),r>t){const a=r-t;e.level=e.level+a,e.health=e.health+10*a,e.max_health=e.health,e.atk=e.atk+3*a,e.def=e.def+3*a,e.matk=e.matk+3*a,e.mdef=e.mdef+3*a,e.speed=e.speed+3*a,e.exp=e.exp+10*a}delete e.base_level}return e},getEquips(e){const t={atk:0,def:0,matk:0,mdef:0,crit_chance:0,crit_damage:0,effectiveness:0,resistance:0,evasion:0,speed:0,mitigation:0,max_mana:0,max_sp:0,max_stamina:0};return Object.keys(e.equips).forEach(a=>{null!=e.equips[a]&&Object.keys(We[e.equips[a]]).forEach(n=>{t.hasOwnProperty(n)&&(t[n]+=We[e.equips[a]][n])})}),t},getEquipStat(e,t){var a=0;return Object.keys(e.equips).forEach(n=>{null!=e.equips[n]&&Object.keys(We[e.equips[n]]).forEach(o=>{o==t&&(a+=We[e.equips[n]][t])})}),a},getMaxHealth(e){const t={health:0};return t.health+=this.getEquipStat(n.player.stats,\"health\"),t.health+=20*n.player.sp_investment.health,t.health+=20*(n.player.level-1),e.health+t.health},getEquipsElements(e){const t={offence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}},a=e.equips;return Object.keys(a).forEach(e=>{if(null!=a[e]){const n=We[a[e]];Object.keys(n.elemental.offence).forEach(e=>{if(\"all\"!=e)t.offence[e]+=n.elemental.offence[e];else for(var a in t.offence)t.offence[a]+=n.elemental.offence[e];t.offence[e]=tt(t.offence[e],i.minElementMod,i.maxElementMod)}),Object.keys(n.elemental.defence).forEach(e=>{if(\"all\"!=e)t.defence[e]+=n.elemental.defence[e];else for(var a in t.defence)t.defence[a]+=n.elemental.defence[e];t.defence[e]=tt(t.defence[e],i.minElementMod,i.maxElementMod)})}}),t},healthCheck:()=>Le.playerFighter.health<=0?(x(Le.getPlayerAdd(Le.playerFighter)),\"enemy\"):Le.enemy.health<=0&&(x(Le.getPlayerAdd(Le.playerFighter)),\"player\"),uploadChanges(e,t){Le.playerFighter.health=e.health,Le.enemy.health=t.health,Le.playerFighter.mana=e.mana,Le.playerFighter.sp=e.sp,Le.playerFighter.stamina=e.stamina},calcBuffs(e,t){var a=0;const n=t.buffs;return n.length>0&&Object.keys(n).forEach(t=>{n[t].hasOwnProperty(e)&&(a+=n[t][e]*n[t].stacks)}),a},calcDebuffs(e,t){var a=0;const n=t.debuffs;return Object.keys(n).forEach(t=>{n[t].hasOwnProperty(e)&&(a+=n[t][e]*n[t].stacks)}),a},calcMod(e,t){const a=i;var n=0;return n+=Le.calcBuffs(e,t),n+=Le.calcDebuffs(e,t),[\"resistance\",\"effectiveness\"].includes(e)||(n=tt(n,a.minBuffMod-1,a.maxBuffMod)),n},calcElementBuffs(e){const t={offence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}};e.buffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(a=>{if(\"all\"!=a)t.offence[a]+=e.elemental.offence[a]*e.stacks;else for(var n in t.offence)t.offence[n]+=e.elemental.offence[a]*e.stacks;t.offence[a]=tt(t.offence[a],i.minElementMod,i.maxElementMod)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(a=>{if(\"all\"!=a)t.defence[a]+=e.elemental.defence[a]*e.stacks;else for(var n in t.defence)t.defence[n]+=e.elemental.defence[a]*e.stacks;t.defence[a]=tt(t.defence[a],i.minElementMod,i.maxElementMod)}))});return e.debuffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(a=>{if(\"all\"!=a)t.offence[a]+=e.elemental.offence[a]*e.stacks;else for(var n in t.offence)t.offence[n]+=e.elemental.offence[a]*e.stacks;t.offence[a]=tt(t.offence[a],i.minElementMod,i.maxElementMod)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(a=>{if(\"all\"!=a)t.defence[a]+=e.elemental.defence[a]*e.stacks;else for(var n in t.defence)t.defence[n]+=e.elemental.defence[a]*e.stacks;t.defence[a]=tt(t.defence[a],i.minElementMod,i.maxElementMod)}))}),t},applyBuff(e,t,a,n,o,s={}){var r,i,l=!1;if(null!=s.ignoreRes&&(l=s.ignoreRes),n==a||\"buffs\"==o)r=0,i=0;else{var c=a,d=n;\"player\"==a.type&&(c=Le.getPlayerAdd(a)),\"player\"==n.type&&(d=Le.getPlayerAdd(n)),r=tt(c.effectiveness+Le.calcBuffs(\"effectiveness\",c)+Le.calcDebuffs(\"effectiveness\",c),0,999),i=tt(d.resistance+Le.calcBuffs(\"resistance\",d)+Le.calcDebuffs(\"resistance\",d),0,999)}1==l&&(i=0),t=tt(t+r,0,100);const f=Math.round(100*Math.random())+1;if(f<=t-i)if(e.hasOwnProperty(\"stacks\")||(e.stacks=1),0==Le.checkStacks(n[o],e.name))pt(`${n.name}${e.apply_text}`),\"buffs\"==o?n.buffs.push({...e}):n.debuffs.push({...e}),x(Le.getPlayerAdd(Le.playerFighter));else{const t=Le.getBuff(n,e.name);pt(`${n.name}${e.apply_text}`),t.stacks+=e.stacks,t.stacks>t.max_stacks&&(t.stacks=t.max_stacks),t.duration<e.duration&&(t.duration=e.duration)}else pt(f<=t?'<span style=\"color:#9500D6\">Effect resisted!</span>':\"Effect not applied.\")},getBuff(e,t){const a=[e.buffs,e.debuffs];for(var n in a){const e=a[n];for(var o=0;o<e.length;o++)if(e[o].name==t)return e[o]}},stripBuff(e,t){for(var a=!1,n=0;n<e.length;n++){const o=e[n];if(o.name==t){if(o.hasOwnProperty(\"unstrippable\"))return!1;e.splice(n,1),a=!0,pt(o.name+\" removed.\"),n--}}return a},buffCheck(e,t){const a=e.buffs.concat(e.debuffs);for(var n=a.length-1;n>=0;n--){const t=a[n];if(t.hasOwnProperty(\"damage\")){const a=t.damage;var o;\"percentile\"==a[0]&&(o=Math.round(e.max_health*(a[1]/100))*t.stacks),\"flat\"==a[0]&&(o=a[1]*t.stacks);const n=`<br>(${t.name}) ${e.name} ${o>0?\"lost\":\"gained \"} health! <span style=\"color:${h[a[2]]}\">[${Math.abs(o)}, ${a[0]}]</span>`;qe.pushMessagesToState([n],!0,\"push\"),qe.dealDamage(e.type,o,\"self\",!1,!1,Le.getPlayer(),Le.getEnemy())}if(t.hasOwnProperty(\"heal\"),t.hasOwnProperty(\"onTick\"))for(var s=0;s<t.stacks;s++)t.onTick(e.type,e,Le.getPlayer(),Le.getEnemy())}for(n=e.buffs.length-1;n>=0;n--){const t=e.buffs[n];0!=t.fade&&(t.duration-=1),t.duration<=0&&(qe.pushMessagesToState([`<br>${t.name} faded. (${e.name})`],!0,\"push\"),e.buffs.splice(n,1))}for(n=e.debuffs.length-1;n>=0;n--){const t=e.debuffs[n];0!=t.fade&&(t.duration-=1),t.duration<=0&&(qe.pushMessagesToState([`<br>${t.name} faded. (${e.name})`],!0,\"push\"),e.debuffs.splice(n,1))}qe.skillStack.stack.push([\"continue\",t,!0]),qe.runSkillStack()},turnReset(e){e.actions-=1,e==Le.playerFighter&&x(Le.getPlayerAdd(Le.playerFighter))},combatLoop(){x(Le.getPlayer());var e=Le.healthCheck();Le.turn+=1,Le.state.push({player:[],enemy:[]}),pt(\"<br>TURN \"+Le.turn),0==e?(Le.playerFighter.actions=Le.calcActions(Le.getPlayerAdd(Le.playerFighter),Le.getEnemy()),x(Le.getPlayerAdd(Le.playerFighter)),Le.initShortcuts(),Le.combatMessage().forEach(e=>{pt(e)}),wt(Le.selectAttack)):Le.endBattle(Le.healthCheck())},combatMessage:()=>[`<br>Health: ${Le.playerFighter.health}/${Le.playerFighter.max_health}`,`${Le.getEnemy().name} (LV${Le.getEnemy().level}) Health: ${Le.enemy.health}/${Le.enemy.max_health}`,\"Actions: \"+Le.playerFighter.actions,\"Please select an action\"],endTurn(e){const t=\"player\"==e?Le.playerFighter:Le.enemy;\"player\"==e?Le.enemy:Le.playerFighter;if(0==this.healthCheck())if(x(Le.getPlayerAdd(Le.playerFighter)),t.actions>1)t.actions-=1,\"player\"==e?(t.actionsTaken+=1,Le.combatMessage().forEach(e=>{pt(e)}),Le.initShortcuts(),wt(this.selectAttack)):(t.actionsTaken+=1,A[Le.enemy.mode].call(void 0,Le.state,Le.getPlayerAdd(Le.playerFighter),Le.enemy,()=>{T[Le.enemy.ai].call()}));else if(\"player\"==e){t.actionsTaken=0;var a=Math.round(Le.getPlayerAdd(Le.playerFighter).max_stamina/10);Le.playerFighter.stamina+=a,Le.playerFighter.stamina=tt(Le.playerFighter.stamina,0,Le.playerFighter.max_stamina),pt(`<br>Regenned ${a} stamina!`),pt(\"<br>Player turn end\"),Le.turnReset(Le.playerFighter),pt(\"<br>---------------------------------------\"),Le.enemy.actions=Le.calcActions(Le.getEnemy(),Le.getPlayerAdd(Le.playerFighter)),Le.buffCheck(Le.enemy,()=>{A[Le.enemy.mode].call(void 0,Le.state,Le.getPlayerAdd(Le.playerFighter),Le.enemy,()=>{T[Le.enemy.ai].call()})})}else{pt(\"<br>Enemy turn end\"),t.actionsTaken=0;a=Math.round(Le.enemy.max_stamina/10);Le.enemy.stamina+=a,Le.enemy.stamina=tt(Le.enemy.stamina,0,Le.enemy.max_stamina),pt(`<br>${Le.enemy.name} regenned ${a} stamina!`),Le.turnReset(Le.enemy),pt(\"<br>---------------------------------------\"),Le.buffCheck(Le.playerFighter,()=>{this.combatLoop()})}else this.endBattle(this.healthCheck())},displayStatus(e){const t=(e,t)=>e.name>t.name?1:e.name<t.name?-1:0;if(e.buffs.sort(t),e.debuffs.sort(t),pt(p+\"Displaying status...\"),pt(`HP: ${e.health}/${e.max_health}`),pt(`Mana: ${e.mana}/${e.max_mana}`),pt(`Stamina: ${e.stamina}/${e.max_stamina}`),pt(`SP: ${e.sp}/${e.max_sp}`),\"enemy\"==e.type){pt(\"<br><b>Total Stat Modifiers</b>\");var a=!1;[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"effectiveness\",\"resistance\",\"evasion\",\"mitigation\"].forEach(t=>{const n=Le.calcMod(t,e);0!=n&&(a=!0,pt(` - ${t}: ${[\"effectiveness\",\"resistance\"].includes(t)?n:100*n}%`))}),a||pt(\"--\")}pt(\"<br><b>BUFFS</b>\");0==e.buffs.length&&pt(\"<br>None\"),Le.displayBuffs(e.buffs),pt(\"<br><b>DEBUFFS</b>\"),0==e.debuffs.length&&pt(\"<br>None\"),Le.displayBuffs(e.debuffs),pt(p+\"Please select an action\")},displayBuffs(e){const t=[];e.forEach(a=>{var n={...a},o=n.name;delete n.types,delete n.apply_text;const s=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${h[n.element]}\">${n.element}</span>`;delete n.element;const i=Le.checkStacks(e,n.name),l=`<br>${i} stack${i>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;var c;delete n.max_stacks,n.hasOwnProperty(\"desc\")?(c=\"<br> - \"+n.desc,delete n.desc):c=\"\";var d=\"\";if(n.hasOwnProperty(\"damage\")&&(\"percentile\"==n.damage[0]?d=`<br> ➢ ${Math.abs(n.damage[1])}% ${n.damage[1]>0?\"DoT\":\"HoT\"}`:\"flat\"==n.damage[0]&&(d=`<br> ➢ ${Math.abs(n.damage[1])}DMG ${n.damage[1]>0?\"DoT\":\"HoT\"}`)),n.hasOwnProperty(\"elemental\"))var f=Object.keys(n.elemental.offence).map(e=>{const t=n.elemental.offence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} attack`}),m=Object.keys(n.elemental.defence).map(e=>{const t=n.elemental.defence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} defence`});else f=[],m=[];delete n.elemental;var u,p=Object.keys(n).map(e=>{const t=n[e];if(![\"name\",\"damage\",\"onTick\"].includes(e)){if([\"resistance\",\"effectiveness\"].includes(e))return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e}`;if(\"fade\"==e){if(0==n.fade)return\"<br> ➢ Does not fade with time\"}else{if(\"unstrippable\"!=e)return`<br> ➢ ${t>0?\"+\":\"\"}${100*t}% ${e}`;if(1==n.unstrippable)return\"<br> ➢ Unstrippable\"}}});u=t.includes(n.name)?\"FURTHER STACK: \"+s:`<br>${o.toUpperCase()}${r}${l}${s}${p.join(\"\")}\\n                ${f.join(\"\")}${m.join(\"\")}${c}${d}`,pt(u),t.push(n.name)})},displayStats(e){const t={atk:\"attack\",def:\"defence\",matk:\"magic attack\",mdef:\"magic defence\",speed:\"speed\",crit_chance:\"critical chance\",crit_damage:\"critical damage\",effectiveness:\"effectiveness\",resistance:\"resistance\"};var a=\"\";[\"atk\",\"matk\",\"def\",\"matk\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\"].forEach(n=>{var o=e[n];\"crit_chance\"!=n&&\"crit_damage\"!=n||(o=(100*o).toString()+\"%\"),a+=`<br> - ${t[n]}: ${o}`}),Object.keys(e.elemental.offence).forEach(t=>{a+=`<br> - ${e.elemental.offence[t]} ${t} attack`}),Object.keys(e.elemental.defence).forEach(t=>{a+=`<br> - ${e.elemental.defence[t]} ${t} defence`}),a+=\"<br><br><b>Observations: </b>\"+e.desc,pt(a)},initShortcuts(){n.player;const e=Le.getPlayer().skillsList,t=[\"skills\",\"status\",\"enemy\",\"pouch\",\"flee\"];e.forEach(e=>{t.push(qe[e].name)}),Pt(t,{combat:!0})},selectAttack(){const e=Le.playerFighter,t=Le.enemy;vt(Le.selectAttack);const a=kt();if(Le.getEquips(e),\"skills\"==a)pt(\"<br> \"+Le.getPlayer().skillsList.map(e=>`${qe[e].name}: ${qe[e].description}`).join(\"<br><br>\")),Le.initShortcuts(),wt(Le.selectAttack);else if(\"status\"==a)Le.displayStatus(e),Le.initShortcuts(),wt(Le.selectAttack);else if(\"enemy\"==a)Le.displayStatus(t),Le.initShortcuts(),wt(Le.selectAttack);else if(\"flee\"==a)Le.getPlayer().health=0,Le.endBattle(Le.healthCheck());else if(-1!==e.skillsList.findIndex(e=>e.replace(/_/g,\" \")==a))1==qe.getSkill(a).cost(e,t)?qe.getSkill(a).use(Le.getPlayerAdd(e),t,\"player\"):(pt(\"<br> \"+qe.getSkill(a).cost(e,t)),Le.initShortcuts(),wt(Le.selectAttack));else if(\"p\"==a||\"pouch\"==a){0==n.player.stats.pouch.length?(pt(\"Your pouch is empty!\"),wt(Le.selectAttack),Le.initShortcuts()):Le.pouchMenuLoop()}else pt(\"<br>Invalid Input\"),wt(Le.selectAttack),Le.initShortcuts()},pouchMenuLoop(){const e=n.player;pt(\"Currently in the pouch menu. Options:\"),pt(\"<br> - Type the name of an item to use it.\"),pt(\" - b/back (to return)\"),pt(\"<br>Items currently in pouch:<br>\"),e.stats.pouch.forEach(e=>{pt(`${e[1]} ${We[e[0]].name} - ${We[e[0]].desc}`)}),wt(Le.pouchMenuResponse)},pouchMenuResponse(){vt(Le.pouchMenuResponse);const e=kt().toLowerCase(),t=n.player;if(-1!=t.stats.pouch.findIndex(t=>Xe(e)==t[0])){const a=t.stats.pouch.findIndex(t=>Xe(e)==t[0]),n=t.stats.pouch[a][0],o=(We[n].name,We[n].use.battleEffect);t.stats.pouch[a][1]-=1,0==t.stats.pouch[a][1]&&t.stats.pouch.splice(a,1),o()}else\"b\"==e||\"back\"==e?(pt(\"Returning..\"),Le.combatMessage().forEach(e=>{pt(e)}),wt(Le.selectAttack),Le.initShortcuts()):(pt(\"Invalid input\"),wt(Le.pouchMenuResponse))},getEnemy:()=>Le.enemy,getPlayerAdd(e){const t=Le.getEquips(n.player.stats),a=Le.getEquipsElements(n.player.stats),o=a.offence,s=a.defence,r=JSON.parse(JSON.stringify(e));Object.keys(n.player.sp_investment).forEach(e=>{\"health\"!=e&&\"mana\"!=e&&(t[e]+=2*n.player.sp_investment[e]),\"mana\"==e&&(t.max_mana+=15*n.player.sp_investment[e])}),Object.keys(r).forEach(e=>{t.hasOwnProperty(e)&&(r[e]+=t[e])});const i=n.player.level-1;return r.atk+=2*i,r.def+=2*i,r.matk+=2*i,r.mdef+=2*i,r.speed+=2*i,Object.keys(o).forEach(e=>{r.elemental.offence[e]+=o[e]}),Object.keys(s).forEach(e=>{r.elemental.defence[e]+=s[e]}),r},getPlayer:()=>Le.playerFighter,checkStacks(e,t){var a,n=0;for(a in e)e[a].name==t&&n++;return n},calcActions:(e,t)=>e.speed*(1+Le.calcMod(\"speed\",e))>t.speed*(2+Le.calcMod(\"speed\",t))?(pt(\"<br>The superior speed of the caster grants them an extra action!\"),2):(e.speed,Le.calcMod(\"speed\",e),t.speed,Le.calcMod(\"speed\",t),1),endBattle(e){if(ot(n.player),\"enemy\"==e){pt(Le.playerFighter.name+\" has been defeated!\");const e=[[\"The defeat in battle leaves you disoriented...<br>\",1],[\"Fortuately, you awake in familiar surroundings...\",1]];n.player.stats.current_health=n.player.max_health,n.player.stats.current_mana=n.player.stats.max_mana,n.player.stats.current_stamina=n.player.stats.max_stamina,_t(e,\"battle\",At)}else{pt(`<br>${Le.playerFighter.name} emerged victorious!`),n.player.stats.current_health=Le.getPlayer().health,n.player.stats.current_mana=Le.getPlayer().mana,n.player.stats.current_stamina=Le.getPlayer().stamina,n.player.gold+=this.enemy.gold,n.player.exp+=this.enemy.exp,pt(`<br>Gained ${this.enemy.gold} gold!`),pt(`<br>Gained ${this.enemy.exp} exp!`);const e=this.enemy.drops;var t=0;for(t in e){const a=Math.round(1e3*Math.random()),n=e[t];n[1]>=a&&(null!=n[3]?ze(n[0],n[2],n[3]):ze(n[0]))}Ce(),this.endFunction.call()}ot(n.player)},heal(e){e.current_health=Le.getMaxHealth(e),e.current_mana=Le.getPlayerAdd(e).max_mana,e.current_stamina=Le.getPlayerAdd(e).max_stamina}},Ce=()=>{if(n.player.level<25&&n.player.exp>=s[n.player.level]){const e=\"<b><br>You can feel yourself becoming stronger...</b><br>Levelled up to level \"+(n.player.level+1)+\"<br>+2 SP!<br>+2 AP!<br>+20 health!<br>+2 all stats!<br>\";pt(e),Oe()}},Oe=()=>{const e=n.player;e.stats;e.exp-=s[e.level],e.level+=1,e.sp+=2,e.ap+=2,ot(e),Ce()},qe={calcDamage(e,t,a,n,o,s,r,i,l,c={canEvade:!0,canCrit:!0}){\"weapon\"==o&&(o=qe.getWeaponElement(e)),\"weapon\"==s&&(s=qe.getWeaponElement(e));const d=Le.calcElementBuffs(e),f=Le.calcElementBuffs(t),m=e.elemental.offence[o]+d.offence[o],u=t.elemental.defence[s]+f.defence[s],h=e[a]*(1+Le.calcMod(a,e)),p=t[n]*(1+Le.calcMod(n,t));var g=Math.random()<e.crit_chance+e.crit_chance_mod?e.crit_damage+e.crit_damage_mod:1,y=Math.random()<t.evasion+Le.calcMod(\"evasion\",t)?0:1,_=1-tt(Le.calcMod(\"mitigation\",t),0,.8);0==(null==c.canEvade||c.canEvade)&&(y=1),0==(null==c.canCrit||c.canCrit)&&(g=1);var b=(Math.pow(h,2)*r+250)/(p*i+100)*(m/100)*(u/100)*g*y*_*l;return{damage:tt(b=Math.round(b*(.1*Math.random()+.9)),0,99999999),crit:1!==g,eva:0==y,element:o,offElement:m,defElement:u,mitigation:_,type:\"atk\"==a?\"physical\":\"magical\"}},prepareAttackMessage(e,t,a,n,o=\"unshift\",s=!1){const r=`${n.crit?\"<b>\":\"\"}<span style=\"color:${h[n.element]}\">${n.damage} damage! (${Math.round(n.defElement*n.offElement*n.mitigation)/100}% ${n.type}) [${n.element}]</span>${n.crit?\"</b>\":\"\"}`,i=`${s?\"[]\":\"\"}${a}${n.crit?\"[]CRITICAL HIT!!\":\"\"}${n.eva?`[]${t} evaded the attack!`:\"\"}[]${r}`.split(\"[]\");qe.pushMessagesToState(i,!0,o)},pushMessagesToState(e,t=!0,a=\"unshift\"){const n=t?\"preAtkMsg\":\"msg\";\"unshift\"==a?e.slice().reverse().forEach(e=>{qe.skillStack.stack.unshift([n,()=>{pt(e)},!0])}):e.slice().forEach(e=>{qe.skillStack.stack.push([n,()=>{pt(e)},!0])})},pushBeforeCombatMessage(e){qe.skillStack.stack},pushEffect(e,t=!1){const a=qe.skillStack.stack;a.push(e),0!=t&&(qe.skillStack.finalAdded=!0,a.push(t),qe.runSkillStack())},pushToState(e,t,a){Le.state[Le.state.length-1][a].push({skill:e,damage:t,user:a})},getSkill(e){var t=-1;return Object.keys(qe).forEach(a=>{qe[a].hasOwnProperty(\"name\")&&qe[a].name.toLowerCase()==e&&(t=qe[a])}),t},finish(e,t,a){qe.pushToState(e,t,a)},getWeaponElement(e){var t=\"physical\";return e.hasOwnProperty(\"equips\")&&null!=e.equips.weapon&&(t=We[e.equips.weapon].element),t},gainActions(e,t,a=\"self\",n=!1,o=!1,s,r,i=!0){var l=\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy(),c=()=>{};i&&(c=t>0?()=>{pt(`Gained ${t} actions! (${l.name})`)}:()=>{pt(`Lost ${Math.abs(t)} actions! (${l.name})`)});var d=!1;if(0!=n||1==o)d=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const f=[\"effect\",()=>{l.actions+=t,c()},i];0!=d&&(d=[\"finish\",d,!0]),qe.pushEffect(f,d)},gainHealth(e,t,a=\"self\",n=!1,o=!1,s,r,i=!0){var l=\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy(),c=()=>{};i&&(c=t>0?()=>{pt(`Gained ${t} HP! (${l.name})`)}:()=>{pt(`Lost ${Math.abs(t)} HP! (${l.name})`)});var d=!1;if(0!=n||1==o)d=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const f=[\"effect\",()=>{l.health+=t,l.health>l.max_health&&(l.health=l.max_health),c()},i];0!=d&&(d=[\"finish\",d,!0]),qe.pushEffect(f,d)},dealDamage(e,t,a=\"self\",n=!1,o=!1,s,r){var i=\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy(),l=!1;if(0!=n||1==o)l=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const c=[\"effect\",()=>{i.health-=t,i.health>i.max_health&&(i.health=i.max_health)},!1];0!=l&&(l=[\"finish\",l,!0]),qe.pushEffect(c,l)},gainMana(e,t,a=\"self\",n=!1,o=!1,s,r,i=!0){var l=\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy(),c=()=>{};i&&(c=t>0?()=>{pt(`Gained ${t} MP! (${l.name})`)}:()=>{pt(`Lost ${Math.abs(t)} MP! (${l.name})`)});var d=!1;if(0!=n||1==o)d=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const f=[\"effect\",()=>{l.mana+=t,l.mana>l.max_mana&&(l.mana=l.max_mana),c()},i];0!=d&&(d=[\"finish\",d,!0]),qe.pushEffect(f,d)},gainSP(e,t,a=\"self\",n=!1,o=!1,s,r,i=!0){var l=\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy(),c=()=>{};i&&(c=t>0?()=>{pt(`Gained ${t} SP! (${l.name})`)}:()=>{pt(`Lost ${Math.abs(t)} SP! (${l.name})`)});var d=!1;if(0!=n||1==o)d=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const f=[\"effect\",()=>{l.sp+=t,l.sp>l.max_sp&&(l.sp=l.max_sp),c()},i];0!=d&&(d=[\"finish\",d,!0]),qe.pushEffect(f,d)},gainStamina(e,t,a=\"self\",n=!1,o=!1,s,r,i=!0){var l=\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy(),c=()=>{};i&&(c=t>0?()=>{pt(`Gained ${t} stamina! (${l.name})`)}:()=>{pt(`Lost ${Math.abs(t)} stamina! (${l.name})`)});var d=!1;if(0!=n||1==o)d=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const f=[\"effect\",()=>{l.stamina+=t,l.stamina>l.max_stamina&&(l.stamina=l.max_stamina),c()},i];0!=d&&(d=[\"finish\",d,!0]),qe.pushEffect(f,d)},pushCustomFunc(e,t,a=\"self\",n=!1,o=!1,s,r,i=!1){var l=t,c=!1;if(0!=n||1==o)c=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const d=[\"effect\",()=>{l()},i];0!=c&&(c=[\"finish\",c,!0]),qe.pushEffect(d,c)},pushWaitForInput(e,t,a){var n=!1;if(0!=t||1==a)n=()=>{0!=t&&qe.finish(t[0],t[1],t[2]),1==a&&Le.endTurn(e)};0!=n&&(n=[\"finish\",n,!0]),qe.pushEffect(\"waitForInput\",n)},applyBuff(e,t,a=\"self\",n=!1,o=!1,s,r){\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy();var i=!1;if(0!=n||1==o)i=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const l=[\"effect\",t,!0];0!=i&&(i=[\"finish\",i,!0]),qe.pushEffect(l,i)},stripBuff(e,t,a=\"self\",n=!1,o=!1,s,r){\"player\"==qe.getTarget(e,a)?Le.getPlayer():Le.getEnemy();var i=!1;if(0!=n||1==o)i=()=>{0!=n&&qe.finish(n[0],n[1],n[2]),1==o&&Le.endTurn(e)};const l=[\"effect\",t,!0];0!=i&&(i=[\"finish\",i,!0]),qe.pushEffect(l,i)},getTarget(e,t=\"self\"){var a=e;return\"self\"!=t&&(a=\"player\"==a?\"enemy\":\"player\"),a},skillStack:{stack:[],playing:!1,finalAdded:!1},runSkillStack(){const e=qe.skillStack;e.playing=!0;Le.getPlayer(),Le.getEnemy();const t=()=>{if(!(e.stack.length>0&&1==e.playing))return e.playing=!1,0==e.stack.length&&(e.finalAdded=!1),!0;e.stack;if(\"waitForInput\"==e.stack[0]){pt(\"<br><i>Press enter to continue...</i>\"),e.playing=!1;const a=()=>{vt(a),e.playing=!0,t()};e.stack.splice(0,1),wt(a)}else{const n=o.battleMessageDelay,s=lt(e.stack[0]);if(e.stack.splice(0,1),e.stack.length>0){var a=1e3;0==e.stack[0][2]&&(a=0),setTimeout(t,n*a)}else e.playing=!1,e.finalAdded=!1;s[1](),x(Le.getPlayerAdd(Le.getPlayer()))}};t()},pushBeforeFinish(e){const t=qe.skillStack;1==t.finalAdded?t.stack.splice(-2,0,e):t.stack.push(e)},attack:{name:\"attack\",description:\"Strike the enemy, dealing moderate physical damage. Attack element is based on the element of the equipped weapon.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{const n=qe.attack,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy! [Attack]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:o,type:[\"attack\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>!0},guard:{name:\"guard\",description:\"Take a defensive stance, applying <u>Guard</u> [50% migiation, unstrippable] to the user, along with granting them 10 SP. This  can only be used as the first action of a turn, and will consume up to two actions when used.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={name:\"guard\",mitigation:.5,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is guarding..\",unstrippable:!0,max_stacks:1},o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[\"guard\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];qe.gainActions(a,-1,\"self\",!1,!1,o,s,!1),qe.gainSP(a,10,\"self\",!1,!1,o,s),qe.applyBuff(a,()=>{Le.applyBuff(n,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>!(e.actionsTaken>0)||\"Cannot be used this turn!\"},forgotten_haste:{name:\"forgotten haste\",description:\"<b>Cost: 20 Mana</b> - The user calls upon powerful magic to recover a fraction of their lost power. Applies <u>Forgotten Haste</u> [+50% SPD, +25% ATK, 6T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.forgotten_haste,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainMana(a,-20,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a],i={name:\"forgotten haste\",speed:.5,atk:.25,duration:6,element:\"light\",types:[\"buff\"],apply_text:\" has unlocked a portion of their lost power!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>e.mana>=20||\"Insufficient Mana!\"},divine_protection:{name:\"divine protection\",description:\"<b>Cost: 20 Mana</b> - The user calls upon divine magic to protect them from curses. Applies <u>Divine Protection</u> [+100 Resistance, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.divine_protection,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainMana(a,-20,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a],i={name:\"divine protection\",resistance:100,duration:3,element:\"light\",types:[\"buff\"],apply_text:\" is being protected by divine magic!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>e.mana>=20||\"Insufficient Mana!\"},guard_crush:{name:\"guard crush\",description:\"<b>Cost: 10 SP</b> - The user strikes the enemy targeting their defenses rather than their life. Deals fair physical damage and applies <u>Guard Crushed</u> [-50% DEF/MDEF, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:.9,def_mod:1,dmg_mod:.95,use:(e,t,a)=>{const n=qe.guard_crush,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} crushes the enemy's defenses! [Guard Crush]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainSP(a,-10,\"self\",!1,!1,s,r,!1);const i={name:\"guard crushed\",duration:3,def:-.5,mdef:-.5,element:\"physical\",types:[\"debuff\"],apply_text:\"'s guard has been crushed!\",max_stacks:1};if(0==o.eva){const t=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",!1,!1,s,r)}const l={damage:o,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,l,a],!0,s,r)},cost:(e,t)=>e.sp>=10||\"Insufficient SP!\"},smite:{name:\"smite\",description:\"<b>Cost: 50 Stamina</b> - The user imbues their weapon with holy power and strikes their enemy. Deals high physical light damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"light\",def_element:\"light\",off_mod:1.2,def_mod:.9,dmg_mod:1.34,use:(e,t,a)=>{const n=qe.smite,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} strikes with holy force! [Smite]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-50,\"self\",!1,!1,s,r,!1);const i={damage:o,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>e.stamina>=50||\"Insufficient Stamina!\"},check:{name:\"check\",description:\"Reveals the stats of an enemy upon use.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,s=[\"check\",{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a];qe.pushMessagesToState([\"Analysing...\"]),qe.pushCustomFunc(a,()=>{Le.displayStats(t)},t,!1,!1,n,o),qe.pushWaitForInput(a,s,!0)},cost:(e,t)=>!0},boost:{name:\"boost\",description:\"<b>Cost: 10 SP</b> - The user focuses their energy into granting them an extra spurt of power. Grants two additional actions. Cannot be used more than twice in one turn.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{qe.boost;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;qe.gainSP(a,-10,\"self\",!1,!1,n,o,!1),qe.pushMessagesToState([`<br>${e.name} is boosting!`],!0,\"unshift\");const s=[\"boost\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];qe.gainActions(a,2,\"self\",s,!0,n,o,!0)},cost:(e,t)=>{const a=e.hasOwnProperty(\"pouch\")?\"player\":\"enemy\";return He(a,\"boost\")<2?e.sp>=10||\"Insufficient SP!\":\"This skill has already been used twice this turn!\"}},hex:{name:\"hex\",description:\"<b>Cost: 7 mana</b> - The user curses the enemy, applying <u>Hexed</u> [-30% Resistance, 3T duration] to them. This skill ignores resistance.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.hex,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainMana(a,-7,\"self\",!1,!1,o,s,!1),qe.pushMessagesToState([e.name+\" attempts to curse their enemy! [Hex]\"],!0,\"push\");const r=[n.name,{damage:0,type:[\"debuff\"],target:\"opponent\"},a],i={name:\"hexed\",duration:3,resistance:-30,element:\"dark\",types:[\"debuff\"],apply_text:\" is hexed!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\",{ignoreRes:!0})},\"opponent\",r,!0,o,s)},cost:(e,t)=>e.mana>=7||\"insufficient mana!\"},dagger_throw:{name:\"dagger throw\",description:\"<b>Cost: 5 SP</b> - The user quickly throws a dagger at their enemy, dealing low physical damage and granting themselves an extra action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1.2,dmg_mod:.59,use:(e,t,a)=>{const n=qe.dagger_throw,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainSP(a,-5,\"self\",!1,!1,s,r,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} throws a dagger at their enemy! [Dagger Throw]`,o);const i={damage:o,type:[\"attack\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",!1,!1,s,r),qe.gainActions(a,1,\"self\",[n.name,i,a],!0,s,r,!0)},cost:(e,t)=>e.sp>=5||\"Insufficient SP!\"},smokescreen:{name:\"smokescreen\",description:\"<b>Cost: 10 mana</b> - The user throws up a smokescreen, making it hard to both hit and be hit by the enemy. Applies <u>Smokescreen</u> [+30% evasion, unstrippable, 2T duration] to both the user and their opponent.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.smokescreen,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainMana(a,-10,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,type:[\"buff\"],target:\"all\"},a],i={name:\"smokescreen\",duration:2,evasion:.3,element:\"physical\",types:[\"buff\"],apply_text:\" is shrouded by smoke!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"buffs\")},\"opponent\",!1,!1,o,s);qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():Le.getEnemy(),\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},piercing_dagger_throw:{name:\"piercing dagger throw\",description:\"<b>Cost: 20 Stamina</b> - The user throws a particularly sharp dagger at their opponent. Deals low physical damage that ignores the enemy's defence.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:.75,def_mod:0,dmg_mod:.54,use:(e,t,a)=>{const n=qe.piercing_dagger_throw,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} throws a piercing dagger at their enemy! [Piercing Dagger Throw]`,o),qe.gainStamina(a,-20,\"self\",!1,!1,s,r,!1);const i={damage:o,type:[\"attack\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>e.stamina>=20||\"Insufficient Stamina!\"},brutal_swipe:{name:\"brutal swipe\",description:\"<b>Cost: 30 Stamina</b> - The user enhances their strength temporarily and attacks, dealing high weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:.9,dmg_mod:1.54,use:(e,t,a)=>{const n=qe.brutal_swipe,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-30,\"self\",!1,!1,s,r,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} swiped at the enemy brutally! [Brutal Swipe]`,o);const i={damage:o,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>e.stamina>=30||\"Insufficient Stamina!\"},fireball:{name:\"fireball\",description:\"<b>Cost: 10 MP</b> - The user fires a fireball at the enemy, dealing below average magical fire damage. Applies  <u>Fire Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,s=qe.fireball,r=qe.calcDamage(e,t,s.off_stat,s.def_stat,s.off_element,s.def_element,s.off_mod,s.def_mod,s.dmg_mod);qe.gainMana(a,-10,\"self\",!1,!1,n,o,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} shot a fireball at the enemy! [Fireball]`,r);const i=Le.checkStacks(n.buffs,\"earth charge\"),l=Le.checkStacks(n.buffs,\"ice charge\"),c=Le.checkStacks(n.buffs,\"water charge\");switch(1){case i:{qe.pushMessagesToState([\"The earth charge and fire charge coalesced into a magma charge!\"]);const t={name:\"magma charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with magma energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"earth charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case l:{qe.pushMessagesToState([\"The ice charge and fire charge coalesced into a water charge!\"]);const t={name:\"water charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with water energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"ice charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case c:{qe.pushMessagesToState([\"The water charge and fire charge coalesced into a steam charge!\"]);const t={name:\"steam charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with steam energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"water charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}default:{const t={name:\"fire charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with fire energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o)}}const d={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};qe.dealDamage(a,r.damage,\"opponent\",[s.name,d,a],!0,n,o)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},icebolt:{name:\"icebolt\",description:\"<b>Cost: 10 MP</b> - The user fires a bolt of ice at the enemy, dealing below average magical water damage. Applies  <u>Ice Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,s=qe.icebolt,r=qe.calcDamage(e,t,s.off_stat,s.def_stat,s.off_element,s.def_element,s.off_mod,s.def_mod,s.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} Fired a bolt of ice at the enemy! [Icebolt]`,r),qe.gainMana(a,-10,\"self\",!1,!1,n,o,!1);const i=Le.checkStacks(n.buffs,\"fire charge\"),l=Le.checkStacks(n.buffs,\"earth charge\"),c=Le.checkStacks(n.buffs,\"magma charge\");switch(1){case i:{qe.pushMessagesToState([\"The ice charge and fire charge coalesced into a water charge!\"]);const t={name:\"water charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with water energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"fire charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case l:{qe.pushMessagesToState([\"The ice charge and earth charge coalesced into a frozen earth charge!\"]);const t={name:\"frozen earth charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with frozen earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"earth charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case c:{qe.pushMessagesToState([\"The ice charge and magma charge coalesced into an obsidian charge!\"]);const t={name:\"obsidian charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with obsidian energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"magma charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}default:{const t={name:\"ice charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with ice energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o)}}const d={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};qe.dealDamage(a,r.damage,\"opponent\",[s.name,d,a],!0,n,o)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},lesser_quake:{name:\"lesser quake\",description:\"<b>Cost: 10 MP</b> - The user causes the earth at the enemy to quake, dealing below average magical earth damage. Applies  <u>Earth Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,s=qe.lesser_quake,r=qe.calcDamage(e,t,s.off_stat,s.def_stat,s.off_element,s.def_element,s.off_mod,s.def_mod,s.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} caused the earth to quake! [Lesser Quake]`,r),qe.gainMana(a,-10,\"self\",!1,!1,n,o,!1);const i=Le.checkStacks(n.buffs,\"fire charge\"),l=Le.checkStacks(n.buffs,\"ice charge\"),c=Le.checkStacks(n.buffs,\"magma charge\"),d=Le.checkStacks(n.buffs,\"water charge\");switch(1){case i:{qe.pushMessagesToState([\"The earth charge and fire charge coalesced into a magma charge!\"]);const t={name:\"magma charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with magma energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"fire charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case l:{qe.pushMessagesToState([\"The ice charge and earth charge coalesced into a frozen earth charge!\"]);const t={name:\"frozen earth charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with frozen earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"ice charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case c:{qe.pushMessagesToState([\"The earth charge and magma charge coalesced into a volcano charge!\"]);const t={name:\"volcano charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with volcano energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"magma charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}case d:{qe.pushMessagesToState([\"The water charge and earth charge coalesced into a soil charge!\"]);const t={name:\"soil charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with soil energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o);const r=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"water charge\")};qe.stripBuff(a,r,\"self\",!1,!1,n,o);break}default:{const t={name:\"earth charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},s=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,s,\"self\",!1,!1,n,o)}}const f={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};qe.dealDamage(a,r.damage,\"opponent\",[s.name,f,a],!0,n,o)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},imbue_energy:{name:\"imbue energy\",description:\"<b>Cost: 20 stamina</b>. The user absorbs nearby energy into themselves fully. Consumes all elemental charges applied to the user and causes a positive effect (for the user) for each one. Also grants 5 SP for each charge absorbed. If at least one charge is absorbed, the user gains an extra action.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;qe.gainStamina(a,-20,\"self\",!1,!1,n,o,!1);qe.imbue_energy;qe.pushMessagesToState([`<br>${e.name} reabsorbed energy into themselves! [Imbue Energy]`],!0,\"push\");var s=!1;const r=Le.checkStacks(n.buffs,\"fire charge\"),i=Le.checkStacks(n.buffs,\"ice charge\"),l=Le.checkStacks(n.buffs,\"earth charge\"),c=Le.checkStacks(n.buffs,\"volcano charge\"),d=Le.checkStacks(n.buffs,\"soil charge\"),f=Le.checkStacks(n.buffs,\"obsidian charge\"),m=Le.checkStacks(n.buffs,\"magma charge\"),u=Le.checkStacks(n.buffs,\"water charge\"),h=Le.checkStacks(n.buffs,\"frozen earth charge\"),p=Le.checkStacks(n.buffs,\"steam charge\");if(1==r){qe.pushMessagesToState([\"Fire charge absorbed!\"],!1);const t={name:\"fire imbued\",atk:.2,matk:.2,elemental:{offence:{fire:20},defence:{}},duration:3,element:\"fire\",types:[\"buff\"],apply_text:\" has fire energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"fire charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==i){qe.pushMessagesToState([\"Ice charge absorbed!\"],!1);const t={name:\"ice imbued\",def:.25,mdef:.52,duration:3,element:\"water\",types:[\"buff\"],apply_text:\" has ice energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"ice charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==l){qe.pushMessagesToState([\"earth charge absorbed!\"],!1);const t={name:\"earth imbued\",mitigation:.5,duration:3,element:\"earth\",types:[\"buff\"],apply_text:\" has earth energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"earth charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainActions(a,-1,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==c){qe.pushMessagesToState([\"Volcano charge absorbed!\"],!1);const t={name:\"volcano imbued\",atk:.35,matk:.35,duration:2,element:\"fire\",types:[\"buff\"],apply_text:\" has volcano energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"volcano charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainActions(a,1,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==d){qe.pushMessagesToState([\"Soil charge absorbed!\"],!1);const t={name:\"soil imbued\",def:.15,def:.15,eva:.2,duration:3,element:\"earth\",types:[\"buff\"],apply_text:\" has soil energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"soil charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==f){qe.pushMessagesToState([\"Obsidian charge absorbed!\"],!1);const t={name:\"obsidian imbued\",mitigation:.8,duration:1,element:\"earth\",types:[\"buff\"],apply_text:\" has obsidian energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"obsidian charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainSP(a,15,\"self\",!1,!1,n,o),qe.gainActions(a,-999,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==m){qe.pushMessagesToState([\"Magma charge absorbed!\"],!1);const t={name:\"magma imbued\",atk:.2,matk:.2,elemental:{offence:{fire:15,earth:15},defence:{}},duration:4,element:\"earth\",types:[\"buff\"],apply_text:\" has magma energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"magma charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==u){qe.pushMessagesToState([\"Water charge absorbed!\"],!1);const t=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"water charge\")};qe.stripBuff(a,t,\"self\",!1,!1,n,o);const r=qe.calcDamage(e,e,\"mdef\",\"mdef\",\"none\",\"none\",.45,0,1.3,{canEvade:!1,canCrit:!1});qe.gainHealth(a,r.damage,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==h){qe.pushMessagesToState([\"Frozen earth charge absorbed!\"],!1);const t={name:\"frozen earth imbued\",mitigation:.2,def:.1,mdef:.1,duration:3,element:\"water\",types:[\"buff\"],apply_text:\" has frozen earth energy within!\",max_stacks:1},r=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"frozen earth charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o),qe.applyBuff(a,r,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}if(1==p){qe.pushMessagesToState([\"Steam charge absorbed!\"],!1);const e=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"steam charge\")};qe.stripBuff(a,e,\"self\",!1,!1,n,o),qe.gainActions(a,2,\"self\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),s=!0}s&&qe.gainActions(a,1,\"self\",!1,!1,n,o);const g=[\"imbue energy\",{damage:0,additionalInfo:{type:[\"buff\",\"debuff\",\"attack\"],target:\"self\"}},a];qe.pushCustomFunc(a,()=>{},\"self\",g,!0,n,o)},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina\"},enforce_energy:{name:\"enforce energy\",description:\"<b>Cost: 20 stamina</b>. The user uses nearby elemental energy to strike the opponent. Consumes all elemental charges and applies a negative effect to and/or damages the enemy for each one. Also grants 5 SP for each charge consumed. If at least one charge is consumed, also grants an extra action to the user.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;qe.gainStamina(a,-20,\"self\",!1,!1,n,o,!1);const s=qe.enforce_energy;qe.pushMessagesToState([`<br>${e.name} fired elemental energy at the enemy! [Enforce Energy]`],!0,\"push\");var r=!1;const i=Le.checkStacks(n.buffs,\"fire charge\"),l=Le.checkStacks(n.buffs,\"ice charge\"),c=Le.checkStacks(n.buffs,\"earth charge\"),d=Le.checkStacks(n.buffs,\"volcano charge\"),f=Le.checkStacks(n.buffs,\"soil charge\"),m=Le.checkStacks(n.buffs,\"obsidian charge\"),u=Le.checkStacks(n.buffs,\"magma charge\"),h=Le.checkStacks(n.buffs,\"water charge\"),p=Le.checkStacks(n.buffs,\"frozen earth charge\"),g=Le.checkStacks(n.buffs,\"steam charge\");if(1==i){qe.pushMessagesToState([\"Fire energy enforced!\"],!1,\"push\");const i={name:\"fire enforced\",elemental:{offence:{},defence:{fire:20}},duration:3,element:\"fire\",types:[\"debuff\"],apply_text:\" has had fire energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"fire charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"fire\",\"fire\",.95,1.05,.7,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==l){qe.pushMessagesToState([\"Ice energy enforced!\"],!1,\"push\");const i={name:\"ice enforced\",speed:-.2,duration:3,element:\"water\",types:[\"debuff\"],apply_text:\" has had ice energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"ice charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"water\",\"water\",.95,1.05,.7,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==c){qe.pushMessagesToState([\"Earth energy enforced!\"],!1,\"push\");const i={name:\"earth enforced\",atk:-.2,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had earth energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"earth charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"earth\",\"earth\",.95,1.05,.7,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==u){qe.pushMessagesToState([\"Magma energy enforced!\"],!1,\"push\");const i={name:\"magma enforced\",elemental:{offence:{},defence:{fire:15,earth:15}},damage:[\"flat\",qe.calcDamage(e,t,s.off_stat,s.def_stat,\"earth\",\"earth\",.95,1.05,.25,!0).damage],duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had magma energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"magma charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"earth\",\"earth\",.95,1.05,.5,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\");const f=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"fire\",\"fire\",.95,1.05,.5,!0);qe.dealDamage(a,f.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",f,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==h){qe.pushMessagesToState([\"Water energy enforced!\"],!1,\"push\");const i={name:\"water enforced\",elemental:{offence:{},defence:{water:20}},duration:3,element:\"water\",types:[\"debuff\"],apply_text:\" has had water energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"water charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"water\",\"water\",.95,1.05,.7,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\");const f=qe.calcDamage(e,t,\"mdef\",\"mdef\",\"none\",\"none\",1,0,.5,{canCrit:!1,canEvade:!1});qe.gainHealth(a,f.damage,\"self\",!1,!1,n,o),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==p){qe.pushMessagesToState([\"Frozen earth energy enforced!\"],!1,\"push\");const i={name:\"frozen earth enforced\",speed:-.15,atk:-.15,def:-.15,resistance:-10,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had frozen earth energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"frozen earth charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"earth\",\"earth\",.95,1.05,.6,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\");const f=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"water\",\"water\",.95,1.05,.6,!0);qe.dealDamage(a,f.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",f,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==d){qe.pushMessagesToState([\"Volcano energy enforced!\"],!1,\"push\");const i={name:\"volcano enforced\",def:-.25,mdef:-.25,damage:[\"flat\",qe.calcDamage(e,t,s.off_stat,s.def_stat,\"fire\",\"fire\",.95,1.05,.9,!0).damage],duration:2,element:\"fire\",types:[\"debuff\"],apply_text:\" has had volcano energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"volcano charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"earth\",\"earth\",.95,1.05,.8,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\");const f=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"fire\",\"fire\",.95,1.05,.5,!0);qe.dealDamage(a,f.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",f,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==f){qe.pushMessagesToState([\"Soil energy enforced!\"],!1,\"push\");const i={name:\"soil enforced\",speed:-.4,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had soil energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"soil charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"physical\",\"physical\",.95,1.05,.7,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==m){qe.pushMessagesToState([\"Obsidian energy enforced!\"],!1,\"push\");const i={name:\"obsidian enforced\",speed:-.3,atk:-.3,def:-.3,mitigation:.1,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had obsidian energy forced upon them!\",max_stacks:1},l=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},c=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"obsidian charge\")};qe.stripBuff(a,c,\"self\",!1,!1,n,o);const d=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"earth\",\"earth\",.95,1.05,.7,!0);qe.dealDamage(a,d.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",d,\"push\"),qe.applyBuff(a,l,\"opponent\",!1,!1,n,o),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}if(1==g){qe.pushMessagesToState([\"Steam energy enforced!\"],!1,\"push\");const i=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"steam charge\")};qe.stripBuff(a,i,\"self\",!1,!1,n,o);const l=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"water\",\"water\",1.1,1.05,1.15,!0);qe.dealDamage(a,l.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",l,\"push\");const c=qe.calcDamage(e,t,s.off_stat,s.def_stat,\"fire\",\"fire\",1.1,1.05,1.15,!0);qe.dealDamage(a,c.damage,\"opponent\",!1,!1,n,o),qe.prepareAttackMessage(e,t,\"\",c,\"push\"),qe.gainSP(a,5,\"self\",!1,!1,n,o),r=!0}r&&qe.gainActions(a,1,\"self\",!1,!1,n,o);const y=[\"enforce energy\",{damage:0,additionalInfo:{type:[\"buff\",\"debuff\",\"attack\"],target:\"opponent\"}},a];qe.pushCustomFunc(a,()=>{},\"self\",y,!0,n,o)},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina\"},blood_pact:{name:\"blood pact\",description:\"<b>Cost: 20 SP, 15% max health</b> - The user uses converts special energy and their own blood into mana, gaining 20% of their mana in exchange for 20 SP and 15% of their max health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.blood_pact,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.pushMessagesToState([e.name+\" formed a blood pact! [Blood Pact]\"]),qe.gainSP(a,-20,\"self\",!1,!1,o,s,!1),qe.gainHealth(a,-.15*e.max_health,\"self\",!1,!1,o,s,!0);qe.gainMana(a,.2*e.max_mana,\"self\",[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a],!0,o,s,!0)},cost:(e,t)=>e.sp>=20?e.health>.15*e.max_health||\"Insufficient HP!\":\"Insufficient SP!\"},stalwart_strike:{name:\"stalwart strike\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy while bolstering their defences. Deals low physical weapon element damage and applies <u>Stalwart</u> [+20% DEF/MDEF, 3T duration]. Also removes one debuff at random from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.65,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,s=qe.stalwart_strike,r=qe.calcDamage(e,t,s.off_stat,s.def_stat,s.off_element,s.def_element,s.off_mod,s.def_mod,s.dmg_mod);qe.gainStamina(a,-35,\"self\",!1,!1,n,o,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy! [Stalwart Strike]`,r);const i=JSON.parse(JSON.stringify(e.debuffs));for(var l=!1;i.length>0&&0==l;){var c=Math.round(Math.random()*i.length-1);if(c<0&&(c=0),i[c].hasOwnProperty(\"unstrippable\"))i.splice(c,1);else{l=!0;const e=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().debuffs:Le.getEnemy().debuffs,i[c].name)};qe.stripBuff(a,e,\"self\",!1,!1,n,o)}}const d={name:\"stalwart\",duration:3,def:.2,mdef:.2,element:\"physical\",types:[\"buff\"],apply_text:\" is stalwart!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(d,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,n,o);const f={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};qe.dealDamage(a,r.damage,\"opponent\",[s.name,f,a],!0,n,o)},cost:(e,t)=>e.stamina>=35||\"Insufficient stamina!\"},debilitate:{name:\"debilitate\",description:\"<b>Cost: 25 SP</b> - The user strikes the enemy in a way that removes a portion of their power, dealing low physical weapon element damage and removing one random buff from the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,s=qe.debilitate,r=qe.calcDamage(e,t,s.off_stat,s.def_stat,s.off_element,s.def_element,s.off_mod,s.def_mod,s.dmg_mod);if(qe.gainSP(a,-25,\"self\",!1,!1,n,o,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy! [Debilitate]`,r),0==r.eva){const e=JSON.parse(JSON.stringify(t.buffs));for(var i=!1;e.length>0&&0==i;){var l=Math.round(Math.random()*e.length-1);if(e[l].hasOwnProperty(\"unstrippable\"))e.splice(l,1);else{i=!0;const t=()=>{Le.stripBuff(\"player\"==a?Le.getEnemy().buffs:Le.getPlayer().buffs,e[l].name)};qe.stripBuff(a,t,\"self\",!1,!1,n,o)}}}const c={damage:r,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,r.damage,\"opponent\",[s.name,c,a],!0,n,o)},cost:(e,t)=>e.sp>=25||\"Insufficient SP!\"},enduring_fortress:{name:\"enduring fortress\",description:\"<b>Cost: 5 stamina</b> - The user grants a physical form to their endurance, applying the buff <u>Fortress</u> [+5% DEF/MDEF, 999T duration, stacks to 100], and granting the user an extra acition.This skill can only be used once per turn.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.enduring_fortress,o={name:\"fortress\",def:.05,mdef:.05,duration:999,element:\"physical\",types:[\"buff\"],apply_text:\"strengthens their resolve!\",max_stacks:100},s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-5,\"self\",!1,!1,s,r,!1);const i=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];qe.applyBuff(a,()=>{Le.applyBuff(o,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,r),qe.gainActions(a,1,\"self\",i,!0,s,r,!0)},cost:(e,t)=>{const a=e.hasOwnProperty(\"pouch\")?\"player\":\"enemy\";Le.state;return 0==He(a,\"enduring fortress\")?e.stamina>=5||\"Insufficient stamina!\":\"This skill has been used this turn!\"}},guard_conversion:{name:\"guard conversion\",description:'<b>Cost: 10 stamina</b> - The user converts all defensive energy into pure energy. Removes all buffs\" +\\n        \" that increase DEF or MDEF from the user. For each one removed, the user gains SP equal to the DEF/MDEF (higher\" +\\n        \" one is taken) percentage increase. Then, grants an additional action if at least one buff was removed',off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.guard_conversion,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainStamina(a,-10,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];var i=0,l=!1;const c=lt(e.buffs);for(;c.length>0;){var d=Math.round(Math.random()*c.length-1);if(d<0&&(d=0),c[d].hasOwnProperty(\"unstrippable\"))c.splice(d,1);else if(c[d].hasOwnProperty(\"def\")||c[d].hasOwnProperty(\"mdef\")){if(c[d].def>0||c[d.mdef>0]){var f=null!=c[d].def?100*c[d].def:0,m=null!=c[d].mdef?100*c[d].def:0;m>f&&(f=m),i+=f;const e=c[d].name,t=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,e)};qe.stripBuff(a,t,\"self\",!1,!1,o,s),c.splice(d,1),l=!0}}else c.splice(d,1)}l?(qe.gainSP(a,i,\"self\",!1,!1,o,s,!0),qe.gainActions(a,1,\"self\",r,!0,o,s,!0)):qe.pushCustomFunc(a,()=>{},\"self\",r,!0,o,s)},cost:(e,t)=>e.stamina>=10||\"Insufficient stamina!\"},sacred_shield:{name:\"sacred shield\",description:\"<b>Cost: 10 SP</b> - The user condenses special energy such that it takes physical form and uses it as a shield. Consumes 999 actions (ending user turn) after applying <u>Sacred Shield</u> [+75% DEF/MDEF, 2T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.sacred_shield,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainSP(a,-10,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a],i={name:\"sacred shield\",def:.75,mdef:.75,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is protected by sacred energy!\",max_stacks:1};qe.gainActions(a,-999,\"self\",!1,!1,o,s,!0),qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>e.sp>=10||\"Insufficient SP!\"},sentinel_blow:{name:\"sentinel blow\",description:\"<b>Cost: 25 stamina</b> - The user strikes in a way that utilises their defensive prowess. Deals considerable weapon element physical damage. Damage is based on the user's DEF stat.\",off_stat:\"def\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:.9,def_mod:1,dmg_mod:1.25,use:(e,t,a)=>{const n=qe.sentinel_blow,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-25,\"self\",!1,!1,s,r,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy like a sentinel! [Sentinel Blow]`,o);const i={damage:o,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>e.stamina>=25||\"Insufficient stamina!\"},swift_strike:{name:\"swift strike\",description:\"<b>Cost: 25 stamina</b> - The user strikes the enemy quickly, dealing below average weapon element physical damage. Applies <u>Swift</u> [+20% SPD, 4T duration] to the user. Also, if <u>Feeble</u> is applied to the enemy, consumes it and grants the user mana (5% max mana), and 5 SP. If <u>Stealth</u> is applied to the user and they have at least 10 SP, consumes both <u>Stealth</u> and 10 SP in exchange for 2 extra actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1.01,def_mod:.99,dmg_mod:.78,use:(e,t,a)=>{const n=qe.swift_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy quickly! [Swift Strike]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-25,\"self\",!1,!1,s,r,!1);const i=Le.checkStacks(t.debuffs,\"feeble\"),l=Le.checkStacks(e.buffs,\"stealth\");if(1==i){const t=()=>{Le.stripBuff(\"player\"==a?Le.getEnemy().debuffs:Le.getPlayer().debuffs,\"feeble\")};qe.stripBuff(a,t,\"opponent\",!1,!1,s,r),qe.gainSP(a,5,\"self\",!1,!1,s,r,!0),qe.gainMana(a,.05*e.max_mana,\"self\",!1,!1,s,r)}if(1==l&&e.sp>=10){const e=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"stealth\")};qe.stripBuff(a,e,\"self\",!1,!1,s,r),qe.gainSP(a,-10,\"self\",!1,!1,s,r,!0),qe.gainActions(a,2,\"self\",!1,!1,s,r,!0)}const c={name:\"swift\",duration:4,speed:.2,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is swift!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(c,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,r);const d={damage:o,additionalInfo:{type:[\"attack\",\"buff\",\"mana_gain\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,d,a],!0,s,r)},cost:(e,t)=>e.stamina>=25||\"Insufficient stamina!\"},shinobi_strike:{name:\"shinobi strike\",description:\"<b>Cost: 10 mana</b> - The user strikes the enemy before immediately blending into the shadows. Deals low weapon element physical damage and applies <u>Stealth</u> [+10% SPD, +10% crit rate, 4T duration] to the user. If <u>Weakened</u> is applied to the enemy, consumes it and grants the user stamina (5% max stamina), and 5 SP. If <u>Swift</u> is applied to the user and they have at least 10 SP, consumes both <u>Swift</u> and 10 SP to grant the player 2 additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.55,use:(e,t,a)=>{const n=qe.swift_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy before blending into the shadows... [Shinobi Strike]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainMana(a,-10,\"self\",!1,!1,s,r,!1);const i=Le.checkStacks(t.debuffs,\"weakened\"),l=Le.checkStacks(e.buffs,\"swift\");if(1==i){const t=()=>{Le.stripBuff(\"player\"==a?Le.getEnemy().debuffs:Le.getPlayer().debuffs,\"weakened\")};qe.stripBuff(a,t,\"opponent\",!1,!1,s,r),qe.gainSP(a,5,\"self\",!1,!1,s,r,!0),qe.gainStamina(a,.05*e.max_stamina,\"self\",!1,!1,s,r)}if(1==l&&e.sp>=10){const e=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"swift\")};qe.stripBuff(a,e,\"self\",!1,!1,s,r),qe.gainSP(a,-10,\"self\",!1,!1,s,r,!0),qe.gainActions(a,2,\"self\",!1,!1,s,r,!0)}const c={name:\"stealth\",duration:4,speed:.1,crit_chance:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has blended into the shadows!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(c,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,r);const d={damage:o,additionalInfo:{type:[\"attack\",\"buff\",\"stamina_gain\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,d,a],!0,s,r)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},crippling_blow:{name:\"crippling blow\",description:\"<b>Cost: 15 mana</b> - The user strikes the enemy with a special technique that cripples them somewhat. Deals moderate physical weapon element damage and applies <u>Weakened</u> [-20% DEF/MDEF, 4T duration] to the enemy. If <u>Stealth</u> is applied to the user, consumes it and applies <u>Footwork</u> [+10% evasion chance, 4T duration] to the user, and grant them 5 SP. If <u>Feeble</u> is applied to the enemy, consumes it and applies <u>Dull Soul</u> [-20 resistance, 4T duraton] to the enemy, and grants the user 5 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.95,use:(e,t,a)=>{const n=qe.swift_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} strikes the enemy with a special technique! [Crippling Blow]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainMana(a,-15,\"self\",!1,!1,s,r,!1);const i=Le.checkStacks(t.debuffs,\"feeble\"),l=Le.checkStacks(e.buffs,\"stealth\");if(1==i){const e=()=>{Le.stripBuff(\"player\"==a?Le.getEnemy().debuffs:Le.getPlayer().debuffs,\"feeble\")};qe.stripBuff(a,e,\"opponent\",!1,!1,s,r);const t={name:\"dull soul\",duration:4,element:\"physical\",resistance:-20,types:[\"buff\",\"ninja\"],apply_text:\"'s soul has been dulled!\",max_stacks:1},n=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():Le.getEnemy(),\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.gainSP(a,5,\"self\",!1,!1,s,r,!0),qe.applyBuff(a,n,\"opponent\",!1,!1,s,r)}if(1==l){const t=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"stealth\")};qe.stripBuff(a,t,\"self\",!1,!1,s,r);const n={name:\"footwork\",duration:4,evasion:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has enhanced footwork!\",max_stacks:1},o=()=>{Le.applyBuff(n,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.gainSP(a,5,\"self\",!1,!1,s,r,!0),qe.applyBuff(a,o,\"self\",!1,!1,s,r)}const c={name:\"weakened\",def:-.2,mdef:-.2,duration:4,element:\"physical\",types:[\"debuff\",\"ninja\"],apply_text:\" is weakened!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(c,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},\"opponent\",!1,!1,s,r);const d={damage:o,additionalInfo:{type:[\"attack\",\"buff\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,d,a],!0,s,r)},cost:(e,t)=>e.mana>=15||\"Insufficient mana!\"},enfeebling_blow:{name:\"enfeebling blow\",description:\"<b>Cost: 25 stamina</b> - The user strikes with a special technique that worsens the target's offensive capabilities. Deals moderate physical damage and applies <u>Feeble</u> [-20% ATK/MATK] to the enemy. If <u>Swift</u> is applied to the user, consumes it and applies <u>Sharp Mind</u> [+10% crit chance] to the user, and grants them 5 SP If <u>Weakened</u> is applied to the enemy, consumes it and applies <u>Dull Mind</u> [-10% crit chance] to the enemy, and grants the user 5 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.95,use:(e,t,a)=>{const n=qe.swift_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} strikes the enemy with a special technique! [Enfeebling Blow]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-25,\"self\",!1,!1,s,r,!1);const i=Le.checkStacks(t.debuffs,\"weakened\"),l=Le.checkStacks(e.buffs,\"swift\");if(1==i){const e=()=>{Le.stripBuff(\"player\"==a?Le.getEnemy().debuffs:Le.getPlayer().debuffs,\"weakened\")};qe.stripBuff(a,e,\"opponent\",!1,!1,s,r);const t={name:\"dull mind\",duration:4,element:\"physical\",crit_chance:-.1,types:[\"buff\",\"ninja\"],apply_text:\"'s mind has been dulled!\",max_stacks:1},n=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():Le.getEnemy(),\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.gainSP(a,5,\"self\",!1,!1,s,r,!0),qe.applyBuff(a,n,\"opponent\",!1,!1,s,r)}if(1==l){const t=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,\"swift\")};qe.stripBuff(a,t,\"self\",!1,!1,s,r);const n={name:\"sharp mind\",duration:4,crit_chance:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\"'s mind is sharp!\",max_stacks:1},o=()=>{Le.applyBuff(n,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.gainSP(a,5,\"self\",!1,!1,s,r,!0),qe.applyBuff(a,o,\"self\",!1,!1,s,r)}const c={name:\"feeble\",atk:-.2,matk:-.2,duration:4,element:\"physical\",types:[\"debuff\",\"ninja\"],apply_text:\" is feeble!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(c,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")},\"opponent\",!1,!1,s,r);const d={damage:o,additionalInfo:{type:[\"attack\",\"buff\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,d,a],!0,s,r)},cost:(e,t)=>e.stamina>=25||\"Insufficient stamina!\"},imbue_infliction:{name:\"imbue infliction\",description:\"<b>Cost: 20 SP</b>- The user focuses all their strength into one point, fusing all buffs from the <b><u>NINJA</b></u> discipline into one buff (this will not interfere with the stacking limits of these buffs from their origin skills). Up to three of these fusion buffs can be applied at one time. If this occurs, also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{qe.imbue_infliction;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;qe.gainSP(a,-20,\"self\",!1,!1,n,o,!1),qe.pushMessagesToState([e.name+\" is focusing their energy.. [Imbue Infliction]\"]);var s=!1;const r=JSON.parse(JSON.stringify(e.buffs));const i={name:0==Le.checkStacks(r,\"imbued infliction I\")?\"imbued infliction I\":0==Le.checkStacks(r,\"imbued infliction II\")?\"imbued infliction II\":\"imbued infliction III\",element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has focused their energy!\",max_stacks:1,duration:0},l=[\"atk\",\"matk\",\"def\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"resistance\",\"effectiveness\",\"evasion\"];for(var c=0;c<r.length;c++)if(-1!=r[c].types.indexOf(\"ninja\")){s=!0;const e=r[c];e.duration>i.duration&&(i.duration=e.duration),Object.keys(r[c]).forEach(t=>{-1!=l.indexOf(t)&&(i.hasOwnProperty(t)?i[t]+=e[t]:i[t]=e[t])})}const d=[\"imbue infliction\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];if(s){const t=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.gainActions(a,1,\"self\",!1,!1,n,o,!0),qe.applyBuff(a,t,\"self\",d,!0,n,o)}else qe.pushMessagesToState([\"No buffs to fuse!\"],!1,\"push\"),qe.pushCustomFunc(a,()=>{},\"self\",d,!0,n,o)},cost:(e,t)=>e.sp>=20?0==Le.checkStacks(e.buffs,\"imbued infliction I\")||0==Le.checkStacks(e.buffs,\"imbued infliction II\")||0==Le.checkStacks(e.buffs,\"imbued infliction III\")||\"Imbue limit reached!\":\"Insufficient SP!\"},enforce_infliction:{name:\"enforce infliction\",description:\"<b>Cost: 20 SP</b>- The user focuses all of the enemie's ailments into one point, fusing all debuffs from the <b><u>NINJA</b></u> discipline into one buff (this will not interfere with the stacking limits of these debuffs from their origin skills). Up to three of these fusion debuffs can be applied at one time. If this occurs, also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{qe.enforce_infliction;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;qe.gainSP(a,-20,\"self\",!1,!1,n,o,!1),qe.pushMessagesToState([e.name+\" is focusing inflictions applied to the enemy! [Enforce Infliction]\"]);const s=JSON.parse(JSON.stringify(t.debuffs));const r={name:0==Le.checkStacks(s,\"enforced infliction I\")?\"enforced infliction I\":0==Le.checkStacks(s,\"enforced infliction II\")?\"enforced infliction II\":\"enforced infliction III\",element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has been afflicted with 'Enforced infliction!'\",max_stacks:1,duration:0},i=[\"atk\",\"matk\",\"def\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"resistance\",\"effectiveness\",\"evasion\"];for(var l=0;l<s.length;l++)if(-1!=s[l].types.indexOf(\"ninja\")){imbued=!0;const e=s[l];e.duration>r.duration&&(r.duration=e.duration),Object.keys(s[l]).forEach(t=>{-1!=i.indexOf(t)&&(r.hasOwnProperty(t)?r[t]+=e[t]:r[t]=e[t])})}const c=[\"enforce infliction\",{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a];qe.pushMessagesToState([\"No debuffs to fuse!\"],!1,\"push\"),qe.pushCustomFunc(a,()=>{},\"self\",c,!0,n,o)},cost:(e,t)=>e.sp>=20?0==Le.checkStacks(t.debuffs,\"enforced infliction I\")||0==Le.checkStacks(t.debuffs,\"enforced infliction II\")||0==Le.checkStacks(t.debuffs,\"enforced infliction III\")||\"Enforce limit reached!\":\"Insufficient SP!\"},shadow_strike:{name:\"shadow strike\",description:\"<b>Cost: 50 stamina</b> - The user strikes the enemy from an indetectable angle, dealing high weapon element physical damage and causing the following effects:<br>If <u>Swift</u> is applied to the user, grants the user some mana (10% max mana), 10 SP and an additional action.<br>If <u>Stealth</u> is applied to the user, grants the user some stamina (10% max stamina), 10 SP and an additional action<br>If <u>Feeble</u> is applied to the enemy, applies <u>Emboldened</u> [+25% DEF/MDEF, 4T duration] to the user, then grants 10 SP and an additional action.<br>If <u>Weakened</u> is applied to the enemy, applies <u>Strengthened</u> [+25% ATK/MATK, 4T duration] to the user, then grants 10 SP and an additional action.<br>Otherwise, grants the user two additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1.1,def_mod:.9,dmg_mod:1.6,use:(e,t,a)=>{const n=qe.shadow_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-50,\"self\",!1,!1,s,r,!1),qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} emerged from shadows and struck the enemy! [Shadow Strike]`,o);var i=!1;const l=Le.checkStacks(e.buffs,\"swift\"),c=Le.checkStacks(e.buffs,\"stealth\"),d=Le.checkStacks(t.debuffs,\"feeble\"),f=Le.checkStacks(t.debuffs,\"weakened\");if(1==l&&(i=!0,qe.gainMana(a,e.max_mana/10,\"self\",!1,!1,s,r,!0),qe.gainSP(a,10,\"self\",!1,!1,s,r,!0),qe.gainActions(a,1,\"self\",!1,!1,s,r,!0)),1==c&&(i=!0,qe.gainStamina(a,e.max_stamina/10,\"self\",!1,!1,s,r,!0),qe.gainSP(a,10,\"self\",!1,!1,s,r,!0),qe.gainActions(a,1,\"self\",!1,!1,s,r,!0)),1==d){i=!0;const t={name:\"emboldened\",def:.25,mdef:.25,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is emboldened!\",max_stacks:1},n=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,n,\"self\",!1,!1,s,r),qe.gainSP(a,10,\"self\",!1,!1,s,r,!0),qe.gainActions(a,1,\"self\",!1,!1,s,r,!0)}if(1==f){i=!0;const t={name:\"strengthened\",atk:.25,matk:.25,duration:4,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is strengthened!\",max_stacks:1},n=()=>{Le.applyBuff(t,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")};qe.applyBuff(a,n,\"self\",!1,!1,s,r),qe.gainSP(a,10,\"self\",!1,!1,s,r,!0),qe.gainActions(a,1,\"self\",!1,!1,s,r,!0)}i||qe.gainActions(a,2,\"self\",!1,!1,s,r,!0);const m={damage:o,additionalInfo:{type:[\"attack\",\"buff\",\"stamina_gain\",\"mana_gain\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,m,a],!0,s,r)},cost:(e,t)=>e.stamina>=50||\"Insufficient mana!\"},splash:{name:\"splash\",description:\"The user splashes at the enemy with high-pressure liquid, dealing low physical water damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=qe.splash,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} splashed the enemy! [Splash]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:o,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>!0},monster_soul:{name:\"monster soul\",description:\"The user's monster soul allows them to constantly regenerate special energy. Applies <u>Monster Soul</u>, an unstrippable 5 SP regen buff that does not fade with time. Also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.monster_soul,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"monster soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{qe.pushMessagesToState([\"<br>The afflicted's monster soul radiates energy!\"],!0,\"push\"),qe.gainSP(e,5,\"self\",!1,!1,a,n,!0)},apply_text:\"'s monster soul radiates energy!\",max_stacks:1,desc:\"The soul of a monster resides within this creature. Grants continuous SP regen.\"};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,s),qe.gainActions(a,1,\"self\",r,!0,o,s,!0)},cost:(e,t)=>!0},wolven_soul:{name:\"wolven soul\",description:\"The user's monster soul allows them to constantly regenerate special energy. Applies <u>Wolven Soul</u>, an unstrippable 5 SP regen buff that does not fade with time, and grants actions to the afflicted depending on how low their health is. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.wolven_soul,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"wolven soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{qe.pushMessagesToState([\"<br>The afflicted's wolven soul radiates energy!\"],!0,\"push\"),qe.gainSP(e,5,\"self\",!1,!1,a,n,!0),t.health/t.max_health<.2?qe.gainActions(e,2,\"self\",!1,!1,a,n,!0):t.health/t.max_health<.5&&qe.gainActions(e,1,\"self\",!1,!1,a,n,!0)},apply_text:\"'s wolven soul radiates energy!\",max_stacks:1,desc:\"The soul of a wolf resides within this creature. Grants continuous SP regen, and strengthens the creature as their situation grows dire.\"};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,s),qe.gainActions(a,1,\"self\",r,!0,o,s,!0)},cost:(e,t)=>!0},kindred_soul:{name:\"kindred soul\",description:\"The user's kindred soul allows them to constantly regenerate health. Applies <u>Kindred Soul</u>, an unstrippable 3% HP regen buff that does not fade with time. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.kindred_soul,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"kindred soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(t,a,n,o)=>{qe.pushMessagesToState([\"<br>The afflicted's kindred soul radiates energy!\"],!0,\"push\"),qe.gainHealth(t,Math.round(.03*e.max_health),\"self\",!1,!1,n,o,!0)},apply_text:\"'s kindred soul radiates energy!\",max_stacks:1,desc:\"A kindred soul resides within this creature. Grants continuous HP regen.\"};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,s),qe.gainActions(a,1,\"self\",r,!0,o,s,!0)},cost:(e,t)=>!0},anima_soul:{name:\"anima soul\",description:\"The user's kindred soul allows them to constantly regenerate health and energy. Applies <u>Anima Soul</u>, an unstrippable 5% HP regen/5 SP regen buff that does not fade with time. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.anima_soul,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"anima soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(t,a,n,o)=>{qe.pushMessagesToState([\"<br>The afflicted's anima soul radiates energy!\"],!0,\"push\"),qe.gainHealth(t,Math.round(.05*e.max_health),\"self\",!1,!1,n,o,!0),qe.gainSP(t,5,\"self\",!1,!1,n,o,!0)},apply_text:\"'s anima soul radiates energy!\",max_stacks:1,desc:\"An anima soul resides within this creature. Grants continuous HP and SP regen.\"};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,s),qe.gainActions(a,1,\"self\",r,!0,o,s,!0)},cost:(e,t)=>!0},rend:{name:\"rend\",description:\"<b>Cost: 20 stamina</b> -  The user slashes at the enemy viciously, dealing moderate physical damage and possibly (50%) applying <u>Bleed</u> [-10% ATK, 10% HP DOT, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=qe.swift_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} claws at the enemy viciously! [Rend]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-20,\"self\",!1,!1,s,r,!1);const i={name:\"bleed\",atk:-.1,duration:3,element:\"physical\",types:[\"debuff\"],apply_text:\" is bleeding!\",max_stacks:1,damage:[\"percentile\",10]};if(0==o.eva){const t=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",!1,!1,s,r)}const l={damage:o,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,l,a],!0,s,r)},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina!\"},constrict:{name:\"contstrict\",description:\"<b>Cost: 40 stamina</b> - The user uses vines to constrict the opponent. Deals moderate physical earth damage and applies <u>Constricted</u> [-10% SPD/ATK/MATK, 4T duration, 5% HP DOT, stacks to 3] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:1.12,use:(e,t,a)=>{const n=qe.constrict,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} attempts to constrict the enemy with vines! [Constrict]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-40,\"self\",!1,!1,s,r,!1);const i={name:\"constricted\",duration:4,matk:-.1,atk:-.1,speed:-.1,element:\"earth\",types:[\"debuff\"],damage:[\"percentile\",5],apply_text:\" is constricted!\",max_stacks:3};if(0==o.eva){const t=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",!1,!1,s,r)}const l={damage:o,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,l,a],!0,s,r)},cost:(e,t)=>e.stamina>=40||\"Insufficient stamina!\"},nature_healing:{name:\"nature healing\",description:\"<b>Cost: 25 MP</b> - The user employs simple healing magic to recover from damage. Heals the user slightly based on their MDEF.\",off_stat:\"mdef\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:.7,def_mod:0,dmg_mod:1.2,use:(e,t,a)=>{const n=qe.nature_healing,o=qe.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canCrit:!1,canEvade:!1}),s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.pushMessagesToState([e.name+\" enveloped themselves in healing magic! [Nature Healing]\"],!0,\"unshift\"),qe.gainMana(a,-25,\"self\",!1,!1,s,r,!1);const i=[n.name,{damage:o,additionalInfo:{type:[\"heal\"],target:\"self\"}},a];qe.gainHealth(a,o.damage,\"self\",i,!0,s,r,!0)},cost:(e,t)=>e.mana>=25||\"Insufficient Mana!\"},lesser_anima_healing:{name:\"lesser anima healing\",description:\"<b>Cost: 15 MP</b> - The user employs fairly powerful healing magic to recover from damage. Heals the user slightly based on their MDEF, and applies <u>Lower Anima</u> [+20% ATK/DEF/MATK/MDEF, stacks to 3, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:.62,def_mod:0,dmg_mod:1,use:(e,t,a)=>{const n=qe.lesser_anima_healing,o=qe.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canCrit:!1,canEvade:!1});qe.pushMessagesToState([e.name+\" enveloped themselves in healing magic! [Lesser Anima Healing]\"],!0,\"unshift\");const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={name:\"lower anima\",duration:3,def:.2,mdef:.2,matk:.2,mdef:.2,element:\"earth\",types:[\"buff\"],apply_text:\" is blessed by healing magic!\",max_stacks:2};qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,r);const l=[n.name,{damage:o,additionalInfo:{type:[\"heal\"],target:\"self\"}},a];qe.gainHealth(a,o.damage,\"self\",l,!0,s,r,!0)},cost:(e,t)=>!0},forest_curse:{name:\"forest curse\",description:\"<b>Cost: 40 Stamina</b> - The user turns the mystic energy of the forest against their enemy and uses it to strike them while afflicting them with several curses. Deals moderate magical dark damage and attemps to apply <u>Forest Curse</u> [-10% ATK/MATK/DEF/MDEF/SPD, stacks to 10, 5T duration] five times at a 25% chance each attempt. This skill cannot miss.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1.093,def_mod:1.02,dmg_mod:.98,use:(e,t,a)=>{const n=qe.forest_curse,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canEvade:!1});qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} afflicts the enemy with the curse of the forest! [Forest Curse]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={name:\"forest curse\",duration:5,matk:-.1,atk:-.1,speed:-.1,def:-.1,mdef:-.1,element:\"dark\",types:[\"debuff\"],apply_text:\" has been cursed by the forest!\",max_stacks:10};if(0==o.eva)for(var l=0;l<5;l++){const t=()=>{Le.applyBuff(i,25,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",!1,!1,s,r)}const c={damage:o,type:[\"attack\",\"debuff\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",[n.name,c,a],!0,s,r)},cost:(e,t)=>!0},anima_bark:{name:\"anima bark\",description:\"The user enforces their body with mystical energy, applying <u>Anima Bark</u> [+30% DEF/MDEF, -10 all elemental defences, unstrippable and does not fade with time, 999T duraton] to themselves. Also grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.anima_bark,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{target:\"self\",type:[\"buff\"]}},a],i={name:\"anima bark\",def:.3,mdef:.3,duration:999,fade:!1,unstrippable:!0,element:\"earth\",elemental:{offence:{},defence:{fire:-10,earth:-10,water:-10,wind:-10,tunder:-10,light:-10,dark:-10,physical:-10}},types:[\"buff\"],apply_text:\"'s bark is reinforced mystically!'\",max_stacks:1};qe.gainActions(a,1,\"self\",!1,!1,o,s,!0),qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>!0},greater_anima_bark:{name:\"greater anima bark\",description:\"The user enforces their body with mystical energy, applying <u>Greater Anima Bark</u> [+65% DEF/MDEF, -15 all elemental defences, unstrippable and does not fade with time, 999T duraton] to themselves. Also grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.greater_anima_bark,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{target:\"self\",type:[\"buff\"]}},a],i={name:\"greater anima bark\",def:.65,mdef:.65,duration:999,fade:!1,unstrippable:!0,element:\"earth\",elemental:{offence:{},defence:{fire:-15,earth:-15,water:-15,wind:-15,tunder:-15,light:-15,dark:-15,physical:-15}},types:[\"buff\"],apply_text:\"'s bark is reinforced mystically!'\",max_stacks:1};qe.gainActions(a,1,\"self\",!1,!1,o,s,!0),qe.applyBuff(a,()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",r,!0,o,s)},cost:(e,t)=>!0},absolute_purge:{name:\"absolute purge\",description:\"<b>Cost: 10 mana</b> - The user attempts to purge all power from the enemy, removing all strippable buffs from them.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.absolute_purge,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainMana(a,-10,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a],i=JSON.parse(JSON.stringify(t.buffs));for(;i.length>0;){var l=Math.round(Math.random()*i.length)-1;if(l<0&&(l=0),i[l].hasOwnProperty(\"unstrippable\"))i.splice(l,1);else{const e=()=>{Le.stripBuff(\"player\"==a?Le.getEnemy().buffs:Le.getPlayer().buffs,i[l].name)};qe.stripBuff(a,e,\"self\",!1,!1,o,s),i.splice(l,1)}}qe.pushCustomFunc(a,()=>{},\"self\",r,!0,o,s)},cost:(e,t)=>e.mana>=10},absolute_cleanse:{name:\"absolute cleanse\",description:\"<b>Cost: 10 mana</b> - The user attempts to purge all weaknesses from themselves, removing from themselves all strippable debuffs.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=qe.absolute_cleanse,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainMana(a,-10,\"self\",!1,!1,o,s,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a],i=JSON.parse(JSON.stringify(e.debuffs));for(;i.length>0;){var l=Math.round(Math.random()*i.length)-1;if(l<0&&(l=0),i[l].hasOwnProperty(\"unstrippable\"))i.splice(l,1);else{const e=()=>{Le.stripBuff(\"player\"==a?Le.getPlayer().debuffs:Le.getEnemy().debuffs,i[l].name)};qe.stripBuff(a,e,\"self\",!1,!1,o,s),i.splice(l,1)}}qe.pushCustomFunc(a,()=>{},\"self\",r,!0,o,s)},cost:(e,t)=>e.mana>=10},forest_rupture:{name:\"forest rupture\",description:\"The user calls upon the forest to destroy the enemy, dealing very high physical earth damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"earth\",def_element:\"earth\",off_mod:1.12,def_mod:.87,dmg_mod:1.9,use:(e,t,a)=>{const n=qe.forest_rupture,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} called upon the forest to destroy their enemy! [Forest Rupture]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:o,type:[\"attack\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>!0},poison_claws:{name:\"poison claws\",description:\"<b>Cost: 12 mana</b> - The user creates a wound with sharp poisonous claws. The poison seeps into the enemy, applying <u>Viridian Toxin</u> [-15% SPD, 10% HP DOT, 3T duration, stacks to 3]\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=qe.poison_claws,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} lashes out with poisonous claws! [Poison Claws]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:o,type:[\"attack\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",!1,!1,!0,s,r);const l={name:\"viridian toxin\",speed:-.15,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" is envenomed!\",max_stacks:3,damage:[\"percentile\",10]};if(0==o.eva){const t=()=>{Le.applyBuff(l,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",[n.name,i,a],!0,s,r)}},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},deep_envenom:{name:\"deep_envenom\",description:\"<b>Cost: 7 mana</b> - The user uses a special liquid to enhance the potency of venoms in the body of the target. Deals moderate physical damage and applies an additional stack of any DOT debuffs the enemy has applied (where possible) and extends their duration by 3 turns (buff copy application has base 999% apply chance). Also applies <u>Prepared</u> [+25% ATK, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.7,use:(e,t,a)=>{const n=qe.deep_envenom,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} attempts to deeply envenom their enemy! [Deep Envenom]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:o,type:[\"attack\",\"debuff\"],target:\"opponent\"};if(qe.dealDamage(a,o.damage,\"opponent\",!1,!1,!0,s,r),0==o.eva){t.debuffs.forEach(t=>{if(t.hasOwnProperty(\"damage\")&&t.damage[1]>0){const n=()=>{t.duration+=3};qe.pushMessagesToState([`Debuff ${t.name} extended by 3 turns!`],!1,\"push\"),qe.pushCustomFunc(a,n,\"opponent\",!1,!1,s,r,!1);const o=lt(t),i=()=>{Le.applyBuff(o,999,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,i,\"opponent\",!1,!1,s,r)}})}const l={name:\"prepared\",duration:3,atk:.25,element:\"physical\",types:[\"buff\"],apply_text:\" is prepared!\",max_stacks:1};qe.applyBuff(a,()=>{Le.applyBuff(l,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,r),qe.pushCustomFunc(a,()=>{},\"self\",[n.name,i,a],!0,s,r,!1)},cost:(e,t)=>e.mana>=7||\"Insufficient mana!\"},killing_blow:{name:\"killing blow\",description:\"Having completed preparations, the user strikes to finish their target. Deals very high physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1.01,def_mod:.83,dmg_mod:2.56,use:(e,t,a)=>{const n=qe.killing_blow,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} attempts to finish off their enemy! [Killing Blow]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:o,type:[\"attack\"],target:\"opponent\"};qe.dealDamage(a,o.damage,\"opponent\",[n.name,i,a],!0,s,r)},cost:(e,t)=>!0},malice:{name:\"malice\",description:\"<b>Cost: 50 Stamina</b> - The user transforms their malice into a curse that afflicts the enemy. Deals low magical dark damage and inflicts <u>Malice</u> [-200% ATK/DEF/MATK/MDEF/SPEED, 20T duration] upon the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:.9,def_mod:1,dmg_mod:.423,use:(e,t,a)=>{const n=qe.malice,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} curses the enemy with their malice! [Malice]`,o);const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;qe.gainStamina(a,-50,\"self\",!1,!1,s,r,!1);const i={name:\"malice\",duration:20,atk:-2,def:-2,mdef:-2,matk:-2,mdef:-2,speed:-2,element:\"dark\",types:[\"debuff\"],apply_text:\" is afflicted with a crushing despair...\",max_stacks:1};if(0==o.eva){const t=()=>{Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",!1,!1,s,r)}const l={damage:o,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};qe.dealDamage(a,o.damage,\"opponent\",[n.name,l,a],!0,s,r)},cost:(e,t)=>e.stamina>=50||\"Insufficient Stamina!\"},invoke_cataclysm:{name:\"invoke cataclsym\",description:\"<b>Cost: 40 Stamina</b> - The user calls upon the power of the Demon sword, Cataclysm to strike their enemies. Deals one hit of high physical fire damage and one hit of high magical dark damage before applying <u>Catalysis</u> [-50% DEF/MDEF, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:1.123,def_mod:1.06,dmg_mod:1.78,use:(e,t,a)=>{const n=qe.invoke_cataclysm;qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} calls upon the power of Cataclysm!`,r);const o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,r=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,\"\",r),qe.dealDamage(a,r.damage,!1,!1,o,s);const i=qe.calcDamage(e,t,n.off_stat,n.def_stat,\"fire\",\"fire\",n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e.name,t.name,\"\",r),qe.dealDamage(a,i.damage,\"opponent\",!1,!1,o,s);const l={name:\"catalysis\",duration:3,def:-.5,mdef:-.5,element:\"dark\",types:[\"debuff\"],apply_text:\" has been afflicted by the power of Cataclysm!\",max_stacks:1};if(0==r.eva||0==i.eva){const t=()=>{Le.applyBuff(l,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")};qe.applyBuff(a,t,\"opponent\",!1,!1,o,s)}},cost:(e,t)=>!0},guard_break:{name:\"guard break\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy with a blunt edge, dealing low physical weapon element damage but possibly with a 75% chance to apply <u>Guard Broken</u> [-10% DEF, 5T duration, stacks to 3].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{e.stamina=e.stamina-35;const n=qe.guard_break,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} struck the enemy with a blunt edge!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;const n={name:\"guard broken\",def:-.1,duration:5,element:\"physical\",types:[\"debuff\"],apply_text:\"'s guard has been broken!\",max_stacks:3,elemental:{offence:{},defence:{}}};0==o.eva&&Le.applyBuff(n,75,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\");const s=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;Le.uploadChanges(s,r),qe.finish(\"guard_break\",o,a)})},cost:(e,t)=>e.stamina>=35||\"Insufficient stamina!\"},rush_attack:{name:\"rush attack\",description:\"<b>Cost: 10 stamina</b> - The user strikes the enemy several times, dealing 3 hits of low physical weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=qe.rush_attack,o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;qe.gainStamina(a,-10,\"self\",!1,!1,o,s,!1),qe.pushMessagesToState([e.name+\" lashed out at their enemy!<br>\"],!0,\"unshift\");const r={damage:[],type:[\"attack\",\"multihit\"],target:\"opponent\"};for(var i=0;i<3;i++){const i=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);qe.prepareAttackMessage(e,t,\"\",i,\"push\",!1),qe.dealDamage(a,i.damage,\"opponent\",!1,!1,o,s),r.damage.push(i)}qe.pushCustomFunc(a,()=>{},\"self\",[n.name,r,a],!0,o,s)},cost:(e,t)=>e.stamina>=10||\"Insufficient stamina!\"},health_potion:{name:\"health potion\",description:\"Drink a health potion, recovering 20% of one's health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=30;qe.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.health/4)},o=[[e.name+\" Drank a health potion!\",1],[`recovered ${n.damage} HP!`,1]];_t(o,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(o,s),qe.finish(\"health_potion\",n,a)})},cost:(e,t)=>e.mana>=30||\"Insufficient mana!\"},camoflague:{name:\"camoflague\",description:\"<b>Cost: 12 mana</b> - The user envelops themselves in a camoflague that makes them hard to see and react to. Applies <u>Camoflague</u> [+30% evasion, +70% resistance, +30% SPD, 2T duration].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=12;const n={damage:0,crit:!1,eva:!1},o=[[`<br>${e.name} camoflagues themselves.`,1]];_t(o,\"battle\",()=>{t.health-=n.damage;const o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(o,s);Le.applyBuff({name:\"camoflague\",evasion:.3,resistance:70,speed:.3,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is camoflagued!\",max_stacks:1},100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\"),qe.finish(\"camoflague\",n,a)})},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},engulf:{name:\"engulf\",description:\"<b>Cost: 10 mana</b> - Absorb the enemy's power. Deals low physical damage and removes all buffs from the enemy. For each buff removed, applies <u>Empowered</u> [+10% ATK/DEF/MATK/MDEF/SPD, 2T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=qe.engulf;e.mana-=10;const o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} engulfs the enemy!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;const n={name:\"empowered\",atk:.1,matk:.1,mdef:.1,def:.1,speed:.1,duration:2,element:\"dark\",types:[\"buff\"],apply_text:\" is empowered!\",max_stacks:99};if(0==o.eva){const o=JSON.parse(JSON.stringify(t.buffs));for(;o.length>0;){var s=Math.round(Math.random()*o.length)-1;s<0&&(s=0),o[s].hasOwnProperty(\"unstrippable\")||(Le.stripBuff(\"player\"==a?Le.getEnemy().buffs:Le.getPlayer().buffs,o[s].name),Le.applyBuff(n,100,\"player\"==a?e:Le.getPlayer(),\"player\"==a?Le.getPlayer():Le.getEnemy(),\"buffs\")),o.splice(s,1)}}const r=\"enemy\"==a?t:e,i=\"enemy\"==a?e:t;Le.uploadChanges(r,i),qe.finish(\"engulf\",o,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient SP!\"},dark_pact:{name:\"dark pact\",description:\"<b>Cost: 18 mana</b> - The user calls upon their pact with the dark forest to strengthen them. At the cost of 5% HP, applies three stacks each of standard ATK/MATK/SPEED buff with increased duration [+10% ATK/MATK/SPEED, 5+3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:e.max_health/20,crit:!1,eva:!1,note:\"self-inflicted damage\"},o=[[`<br>${e.name} forms a covenant with darkness..`,1],[`<br>${e.name} took damage! (${e.max_health/20})`]];_t(o,\"battle\",()=>{e.health-=n.damage;const o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(o,s);const r={...De.matkup};r.duration=6;const i={...De.atkup};i.duration=6;const l={...De.spdup};l.duration=6;for(var c=0;c<3;c++)Le.applyBuff(r,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\"),Le.applyBuff(i,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\"),Le.applyBuff(l,100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\");qe.finish(\"dark_pact\",n,a)})},cost:(e,t)=>e.health>e.max_health/20&&e.mana>=18||\"Insufficient health/mana!\"},dark_howl:{name:\"dark howl\",description:\"<b>Cost: 15 mana</b> - The user lets out a howl imbued with malevolent magic. Deals low magical dark damage and has a 40% chance each to apply <u>Fear</u> [-100% evasion, -20% SPD, -10% ATK/DEF/MATK/MDEF], <u>Dark Curse</u> [+70% dark defence], and <u>Elemental Weaken</u> [-10% all elemental offences]. Each debuff lasts 2 turns and stacks twice.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:.6,use:(e,t,a)=>{e.mana=e.mana-15;const n=qe.dark_howl,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} lets out a dark howl!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;const n={name:\"fear\",duration:2,def:-.1,mdef:-.1,matk:-.1,atk:-.1,speed:-.2,evasion:-1,element:\"dark\",types:[\"debuff\"],apply_text:\" is rapt with fear!\",max_stacks:2},s={name:\"dark curse\",element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by darkness!\",elemental:{defence:{dark:70},offence:{}},duration:2,max_stacks:2},r={name:\"elemental weaken\",element:\"dark\",types:[\"debuff\"],apply_text:\"'s elemental strength has decreased!'\",elemental:{defence:{},offence:{physical:-10,fire:-10,water:-10,earth:-10,wind:-10,thunder:-10,dark:-10,light:-10}},duration:2,max_stacks:2};0==o.eva&&(Le.applyBuff(n,40,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\"),Le.applyBuff(s,40,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\"),Le.applyBuff(r,40,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\"));const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;Le.uploadChanges(i,l),qe.finish(\"dark_howl\",o,a)})},cost:(e,t)=>e.mana>=15||\"Insufficient mana!\"},nox_curse:{name:\"nox curse\",description:\"<b>Cost: 20 mana</b> - The user curses the opponent, dealing moderate dark magical damage and removing all debuffs. For each debuff previously applied, applies a stack of <u>Nox Curse</u> to the enemy [15% HP DOT, 2T duration, stacks to 99]. <u>Nox Curse</u> has a base 300% apply chance. This skill's effects will proc even if the skill misses.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1.15,use:(e,t,a)=>{e.mana=e.mana-10;const n=qe.nox_curse,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} curses the opponent!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;const n={name:\"nox curse\",duration:2,damage:[\"percentile\",15],element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by the shadows...\",max_stacks:99},s=JSON.parse(JSON.stringify(t.debuffs));for(;s.length>0;){var r=Math.round(Math.random()*s.length)-1;r<0&&(r=0),s[r].hasOwnProperty(\"unstrippable\")||(Le.stripBuff(\"player\"==a?Le.getEnemy().debuffs:Le.getPlayer().debuffs,s[r].name),Le.applyBuff(n,100,\"player\"==a?Le.getPlayer():Le.getEnemy(),\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\")),s.splice(r,1)}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;Le.uploadChanges(i,l),qe.finish(\"nox curse\",o,a)})},cost:(e,t)=>e.mana>=20||\"Insufficient mana!\"},boar_rush:{name:\"boar rush\",description:\"The user rushes at the enemy and strikes them powerfully. Deals notable physical damage and applies <u>Boar Rush</u> [+10% SPD, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,t,a)=>{const n=qe.boar_rush,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} rushed at the enemy!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;Le.applyBuff({name:\"boar rush\",duration:4,speed:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased!\",max_stacks:3},100,\"player\"==a?e:Le.getPlayer(),\"player\"==a?Le.getPlayer():Le.getEnemy(),\"buffs\"),\"player\"==a?(Le.getPlayer().sp+=5,Le.getPlayer().sp>Le.getPlayer().max_sp&&(Le.getPlayer().sp,Le.getPlayer().max_sp),pt(e.name+\" gained 5 SP!\")):(Le.getEnemy().sp+=5,Le.getEnemy().sp>Le.getEnemy().max_sp&&(Le.getEnemy().sp,Le.getEnemy().max_sp),pt(e.name+\" gained 5 SP!\"));const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(n,s),qe.finish(\"boar_rush\",o,a)})},cost:(e,t)=>!0},boar_strike:{name:\"boar strike\",description:\"The user strikes the enemy with their axe. Deals above average physical damage and applies <u>Boar Strike</u> [+10% ATK, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.4,use:(e,t,a)=>{const n=qe.boar_strike,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} crashed their axe into the enemy!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;Le.applyBuff({name:\"boar strike\",duration:4,atk:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s attack increased!\",max_stacks:3},100,\"player\"==a?e:Le.getPlayer(),\"player\"==a?Le.getPlayer():Le.getEnemy(),\"buffs\"),\"player\"==a?(Le.getPlayer().sp+=5,Le.getPlayer().sp>Le.getPlayer().max_sp&&(Le.getPlayer().sp,Le.getPlayer().max_sp),pt(e.name+\" gained 5 SP!\")):(Le.getEnemy().sp+=5,Le.getEnemy().sp>Le.getEnemy().max_sp&&(Le.getEnemy().sp,Le.getEnemy().max_sp),pt(e.name+\" gained 5 SP!\"));const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(n,s),qe.finish(\"boar_strike\",o,a)})},cost:(e,t)=>!0},flare_impact:{name:\"flare impact\",description:\"<b>Cost: 20 SP</b> - The user ignites their axe and smashes the enemy, dealing high physical fire damage and applying <u>Burning</u> [3% HP DOT, 5T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:2.1,use:(e,t,a)=>{e.sp=e.sp-20;const n=qe.flare_impact,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} ignited their axe and smashed the enemy!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;Le.applyBuff({name:\"burning\",duration:5,element:\"fire\",types:[\"debuff\"],apply_text:\" is burning!\",damage:[\"percentile\",3],max_stacks:1},100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getEnemy():Le.getPlayer(),\"debuffs\");const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(n,s),qe.finish(\"flare_impact\",o,a)})},cost:(e,t)=>e.sp>=20||\"Insufficient mana!\"},ignis_destroyer:{name:\"ignis destroyer\",description:\"The user strikes the enemy with a great fireball and a flaming axe simulatenously, dealing massive fire physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:3.2,use:(e,t,a)=>{const n=qe.ignis_destroyer,o=qe.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,!1),s=qe.prepareAttackMessage(e.name,t.name,`<Br>${e.name} attempts to obliterate the enemy with flames!`,o);_t(s,\"battle\",()=>{t.health-=o.damage;const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(n,s),qe.finish(\"ignis_destroyer\",o,a)})},cost:(e,t)=>!0},boar_haste:{name:\"boar haste\",description:\"The user enchants their speed with powerful magic, applying <u>Boar Haste</u> [+50% SPD, unstrippable, 999T duration]  to themselves.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:0,crit:!1,eva:!1},o=[[`<br>${e.name} enchants themselves with powerful magic!`,1]];_t(o,\"battle\",()=>{t.health-=n.damage;const o=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;Le.uploadChanges(o,s);Le.applyBuff({name:\"boar haste\",speed:.5,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased greatly!\",max_stacks:1,unstrippable:!0,duration:999},100,\"player\"==a?Le.getPlayer():e,\"player\"==a?Le.getPlayer():e,\"buffs\"),qe.finish(\"camoflague\",n,a)})},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},true_cleanse:{name:\"true cleanse\",description:\"<b>Cost: 10 SP</b> - The user cleanses their spirit completely. Removes all buffs and debuffs from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.sp=e.sp-10;const n={damage:0,crit:!1,eva:!1},o=[[`<br>${e.name} cleanses themselves completely.`,1]];_t(o,\"battle\",()=>{var o,s;t.health-=n.damage,\"player\"==a?(o=Le.getPlayer().buffs,s=Le.getEnemy().debuffs):(o=Le.getEnemy().buffs,s=Le.getEnemy().debuffs);for(var r=0;r<o.length;r++){const e=o[r];1==Le.stripBuff(\"player\"==a?Le.getPlayer().buffs:Le.getEnemy().buffs,e.name)&&r--}for(r=0;r<s.length;r++){const e=s[r];1==Le.stripBuff(\"player\"==a?Le.getPlayer().debuffs:Le.getEnemy().debuffs,e.name)&&r--}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;Le.uploadChanges(i,l),qe.finish(\"true_cleanse\",n,a)})},cost:(e,t)=>e.sp>=10||\"Insufficient SP!\"}},De={defdown:{name:\"DEF down\",def:-.1,duration:5,element:\"none\",types:[\"debuff\"],apply_text:\"'s defence was decreased!\",max_stacks:5},defup:{name:\"DEF up\",def:.1,duration:5,element:\"none\",types:[\"buff\"],apply_text:\"'s defence was increased!\",max_stacks:5},mdefdown:{name:\"MDEF down\",mdef:-.1,duration:5,types:[\"debuff\"],apply_text:\"'s magical defence was decreased!\",max_stacks:5},mdefup:{name:\"MDEF up\",mdef:.1,duration:5,apply_text:\"'s magical defence was increased!\",max_stacks:5},atkup:{name:\"ATK up\",atk:.1,duration:5,types:[\"buff\"],apply_text:\"'s attack was increased!\",max_stacks:5},matkup:{name:\"MATK up\",matk:.1,duration:5,types:[\"buff\"],apply_text:\"'s magical attack was increased!\",max_stacks:5},spdup:{name:\"SPEED up\",speed:.1,duration:5,element:\"none\",types:[\"buff\"],apply_text:\"'s speed was increased!\",max_stacks:5}},Re=(e,t)=>{var a=0;return e.forEach(e=>{e.skill==t&&a++}),a},Ye=e=>{var t=[];return e.forEach(e=>{t.push(e.damage.damage)}),t},je=e=>{for(var t=JSON.parse(JSON.stringify(e)),a=0,n=0;n<t.length&&(n<0&&(n=0),0!=t.length);n++){var o=t[n].name;a+=1;for(var s=0;s<t.length;s++)t[s].name==o&&(t.splice(s,1),s-=1,n-=1)}return a},Fe=e=>{var t=JSON.parse(JSON.stringify(e)),a=0;return t.forEach(e=>{var n=e.name;a+=1;for(var o=0;o<t.length;o++)if(t[o].name==n){t.splice(o,1),o-=1;break}}),a},He=(e,t)=>{const a=Le.state;var n=0;return a[Le.turn-1][e].forEach(e=>{e.skill==t&&(n+=1)}),n},Ne=(e,t)=>{for(var a=!1;0==a;){var n=Math.floor(Math.random()*t.length);1==qe[t[n]].cost(e)&&(a=!0,qe[t[n]].use(Le.getEnemy(),Le.getPlayer(),\"enemy\"))}},We={damaged_dagger:{name:\"damaged dagger\",type:\"weapon\",atk:4,def:1,matk:5,mdef:3,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged dagger. Slightly rusty. It's corrogated edge may help against some enemies, but will not do any favours against slimes.\",sell_value:100},damaged_sword:{name:\"damaged sword\",type:\"weapon\",atk:7,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged sword. It is a little bit rusty, with varying sharpness throughout the length of its edge. It's uneven length is unlikely to assist its user in swordplay.\",sell_value:100},simple_sword:{name:\"simple sword\",type:\"weapon\",atk:5,def:1,matk:2,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of craftmanship evidently skilled and yet still simplistic. It has a presently untouched silver blade under a brown hilt. Swords of this type are often used by skilled adventurers who want to return to their roots.\",sell_value:25},sharpened_sword:{name:\"sharpened sword\",type:\"weapon\",atk:12,def:3,matk:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The blade atop this sword is noticeable sharper than weaker swords. It has a weightier feel that allows for stronger swings.\",sell_value:100},crafted_blade:{name:\"crafted blade\",type:\"weapon\",atk:20,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The result of a very skilled weapon forger working with limited materials. Even one unknowledgable in swords can infer the love put into this blade from the intricate hilt to the blade optimised for killing.\",sell_value:250},silver_axe:{name:\"silver axe\",type:\"weapon\",atk:18,def:6,matk:6,mdef:6,speed:-10,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe forged of silver. It is double-bladed, and the weight on either side makes it a little uncomfortable to handle.\",sell_value:120},reinforced_silver_axe:{name:\"reinforced silver axe\",type:\"weapon\",atk:25,def:8,matk:8,mdef:8,speed:-20,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe that seems to be exactly like the silver axe except it has been reinforced by various stronger materials. However, the materials used to reinforce it seem to have been applied unevenly, which makes this weapon, however strong, difficult to use.\",sell_value:300},metal_stave:{name:\"metal stave\",type:\"weapon\",atk:3,def:1,matk:6,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It is a common misconception that simple weaponry for mages are made out of wood. Wood actually doesn't really conduct mana very well and is susceptible to breaking and fragmenting, making it a poor choice. Instead, a simple stave constructed from various metals melded together haphazardly is the weapon of choice for beginning magic users.\",sell_value:30},magisteel_stave:{name:\"magisteel stave\",type:\"weapon\",atk:7,def:1,matk:13,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A stave made from a single alloy that is particularly good at conducting mana. Useful for intermediate mages but a lack of resistance to mana makes it unsuitable for stronger users.\",sell_value:150},enchanted_magisteel_stave:{name:\"enchanted magisteel stave\",type:\"weapon\",atk:9,def:1,matk:20,mdef:8,elemental:{offence:{water:10},defence:{water:-10}},element:\"water\",desc:\"A stave made from an alloy that conducts maigc easily, but also enchanted so that more powerful spells can be cast using it. It seems to have been enchanted with water magic.\",sell_value:350},conduit_orb:{name:\"conduit orb\",type:\"weapon\",matk:20,elemental:{offence:{},defence:{}},element:\"none\",desc:\"Most orbs are formed from solidified mana over a very long period of time, and therefore has a very high mana conductivity that allows for the use of very powerful spells. However this orb is manmade with no elemental alignment using a complicated and specialised technique. It offers no other combat advantages, however allows a user a relatively high increase in magic power for its price.\",sell_value:200},simple_dagger:{name:\"simple dagger\",type:\"weapon\",atk:2,speed:5,mdef:1,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A weapon that seems almost identical to another named 'simple sword' although it is smaller in length. It has a lightly curved blade that allows attacks to be parried more easily.\",sell_value:25},crafted_dagger:{name:\"crafted dagger\",type:\"weapon\",atk:10,speed:10,evasion:.1,mdef:3,def:3,elemental:{offence:{},defence:{}},element:\"none\",desc:\"A wonderfully crafted weapon. It's hilt it designed such that the weapon can be held in most positions very comfortably, and such that the way the weapon is held can be changed at will. The blade is an intricate array of grooves and smooth edges that allow attacks to be blocked and parried with great ease and effectiveness. Not to be used by newbie dagger wielders.\",sell_value:250},silver_shield:{name:\"silver shield\",type:\"weapon\",def:25,mdef:20,speed:-20,elemental:{offence:{},defence:{physical:-10}},element:\"physical\",desc:\"A silver shield. It is well-made and sturdy but with little nuance to speak of.\",sell_value:200},runeblade:{name:\"runeblade\",type:\"weapon\",atk:10,matk:7,mdef:5,def:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A blade of simple structure. The blade has been formed of two half-blades with runic inscriptions on the inside of either welded together such that the inscriptions cannot be seen. This along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},runic_dagger:{name:\"runic dagger\",type:\"weapon\",atk:7,matk:5,mdef:2,def:2,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger of simple structure. The weapon is too small for inscriptions to be placed inside of the blade so they are plainly visible. The runes along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},magisteel_runic_dagger:{name:\"magisteel runic dagger\",type:\"weapon\",atk:10,matk:8,mdef:7,def:5,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger crafted meticulously with the magisteel alloy and also encrusted with runes. This along with an enchantment placed upon the blade makes it possible to enhance the dagger with some runes, and even without magic, the expert craftsmanship evident on the weapon makes it an effective combat tool.\",sell_value:300},slime_reinforced_sword:{name:\"slime reinforced sword\",type:\"weapon\",atk:3,def:1,mdef:3,elemental:{offence:{water:10},defence:{}},element:\"water\",desc:\"A basic sword reinforced with some slime. It is a little heavier and more dull but grants some more elemental defence.\",sell_value:50},wolfhide_dagger:{name:\"wolfhide dagger\",type:\"weapon\",atk:3,speed:6,def:1,mdef:1,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"A simple dagger wherein the grip has been enhanced with grey wolf's skin.\",sell_value:50},pickaxe:{name:\"pickaxe\",type:\"weapon\",atk:3,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It's a pickaxe. What more do you want?\",sell_value:25},earthen_sword:{name:\"earthen sword\",type:\"weapon\",atk:23,def:2,matk:6,mdef:4,elemental:{offence:{earth:15,wind:-5},defence:{earth:-6,wind:6,fire:10}},element:\"earth\",desc:\"A blade enhanced with the venom of a venomous wolf from the dark forest. It can't really poison enemies due the limited quantity of poison, but it does grant the sword some earthen qualities.\",sell_value:390},makeshift_sword:{name:\"makeshift sword\",type:\"weapon\",atk:3,def:1,matk:1,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of limited craftsmanship. Besides that, nothing of note regarding this weapon.\",sell_value:25},wolven_reavers:{name:\"wolven reavers\",type:\"weapon\",atk:4,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Small weapons fashioned from wolf claws and pelt. Easy to carry and useful for close range combat.\",sell_value:75},flamme_kaiser:{name:\"flamme kaiser\",type:\"weapon\",atk:35,matk:15,elemental:{offence:{fire:20},defence:{fire:-5,water:10,thunder:-5}},element:\"fire\",desc:\"An axe whose craftsmanship is indicative of something beyond the comprehension of even a decently-skilled artisan. Even though it should be far too heavy to hold, somehow it is comfortable in just one hand. The heat it emanates makes it difficult to hold, however.\",sell_value:1e3},fishing_rod:{name:\"fishing rod\",type:\"weapon\",atk:5,speed:5,crit_chance:.2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An old fishing rod. You can tell it's used, and the wear of the old user's arms have given it a more comfortable grip. However, the compromise is the quality of the rod. It can clearly seen better days.\",sell_value:25},barren_sword:{name:\"barren sword\",type:\"weapon\",atk:30,matk:15,speed:5,elemental:{offence:{},defence:{}},element:\"none\",desc:\"There is a distinct lack of personaility and heart put into this sword, in spite of its elegance. Emotion is often a strong proponent of items made by skilled craftsmen, and seeing it completely absent in this weapon is a little... eerie. It emanates an unknown power.\",sell_value:\"unsellable\"},hydra_staff:{name:\"hydra staff\",type:\"weapon\",matk:25,atk:15,mdef:5,elemental:{offence:{water:20,fire:-5},defence:{water:-5,thunder:5}},element:\"water\",desc:\"A staff that has been very elegantly crafted - a stick of what looks like ivory has had two white-and-cyan snakes wrapped around it, swirling in opposite directions until they meet at the top, just below a water orb. Or at least, that's what it looks like. If it were truly made from such materials, it would probably be much more power. Nevertheless, it seems to be a formidable weapon.\",sell_value:\"unsellable\"},wooden_sword:{name:\"wooden sword\",type:\"weapon\",matk:1,atk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword made from wood. It is a little unpleasant to look at, to be honest.\",sell_value:20},vine_wrapped_wooden_sword:{name:\"vine wrapped wooden sword\",type:\"weapon\",matk:3,atk:6,elemental:{offence:{earth:5},defence:{earth:-2}},element:\"physical\",desc:\"A sword made from wood that has been enhanced with vines. The vines grant it a slight aestetic edge.\",sell_value:40},wooden_stave:{name:\"wooden stave\",type:\"weapon\",matk:3,atk:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A staff made from wood. It is a little unpleasant to look at, to be honest.\",sell_value:20},vine_wrapped_wooden_stave:{name:\"vine wrapped wooden stave\",type:\"weapon\",matk:6,atk:3,elemental:{offence:{earth:5},defence:{earth:-2}},element:\"physical\",desc:\"A stave made from wood that has been enhanced with vines. The vines grant it a slight aestetic edge.\",sell_value:40},feathervine_sword:{name:\"feathervine sword\",type:\"weapon\",matk:5,atk:9,elemental:{offence:{wind:5,earth:5},defence:{wind:-2,earth:-2}},element:\"physical\",desc:\"This sword doesn't actually have feathers attached to it. But the wolf pelt used in it's creation has been frayed and split to the extent that they look a bit like feathered remains.\",sell_value:70},wolf_hermit_staff:{name:\"wolf hermit staff\",type:\"weapon\",matk:10,atk:7,elemental:{offence:{physical:15},defence:{}},element:\"physical\",desc:\"This item uses the remains of wolves to capture their essence and in doing so, enhance one's attacks with the magic enherent within a grey wolf. The claws it is embroidered with look like charms worn by a hermit.\",sell_value:80},thunder_rod:{name:\"thunder rod\",type:\"weapon\",matk:10,atk:10,elemental:{offence:{thunder:10},defence:{}},element:\"thunder\",desc:\"A rod enchanted with simple thunder magic. Used by fighters of all types as a way of easily aligning one's attacks with the thunder element.\",sell_value:150},forest_explorer_daggers:{name:\"forest explorer daggers\",type:\"weapon\",atk:8,speed:8,resistance:5,mdef:2,def:2,elemental:{offence:{earth:10,dark:3},defence:{earth:-5,physical:-5,dark:-2}},element:\"earth\",desc:\"A pair of daggers that seem to have aspects of various creatures found in the forest skillfully woven together into a pair of small blades. They also seem to have several enchantments upon them to make exploring the area easier. Whoever owned these must have known a lot about the place they were found..\",sell_value:250},damaged_helm:{name:\"damaged helm\",type:\"head\",def:7,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A damaged helm. The perforations in the front may help the user to see better. The ones in the back, not so much.\",sell_value:100},leather_cap:{name:\"damaged helm\",type:\"head\",def:5,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A cap made of brown leather.\",sell_value:20},silver_helm:{name:\"damaged helm\",type:\"head\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-2,water:-2,fire:2}},element:\"physical\",desc:\"A silver helm. It is not a full helm, instead protecting the neck and head. Offers less protection than a full helm but does not restrict movement or sight.\",sell_value:50},advanced_silver_helm:{name:\"advanced silver helm\",type:\"head\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A helm made of impressive silver. It has more coverage than some lower end helmets but is still fairly free, at the cost of protection.\",sell_value:80},silver_knight_helm:{name:\"silver knight helm\",type:\"head\",def:10,mdef:5,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A knight's helm made of silver. It covers the face completely, but the limited view makes it harder to accurately move about and evade attacks.\",sell_value:200},ninja_wrap:{name:\"ninja wrap\",type:\"head\",def:2,mdef:1,speed:5,elemental:{offence:{},defence:{dark:-2,light:5}},element:\"dark\",desc:\"Black cloth intricately wrapped such that it can be wore on the head, hiding most of the face. Offers almost no protection but does not restrict movement at all.\",sell_value:90},wizard_headband:{name:\"wizard headband\",type:\"head\",def:1,mdef:4,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Stereotypical wizard hats are worn by many but often cannot function as much more than a fashion piece. This wizard headband, crafted from silver with a small gem at the center is designed to enhance spells cast by the wielder.\",sell_value:70},enchanted_wooden_helm:{name:\"enchanted wooden helm\",type:\"helm\",def:5,mdef:2,elemental:{offence:{},defence:{water:-10,fire:30,physical:-5}},element:\"physical\",desc:\"One would assume that a wooden helm would be very ineffective, but it seems to have been enchanted that prevents it from fragmenting and greatly increases its water absorbance.\",sell_value:75},wolfhide_cap:{name:\"wolfhide cap\",type:\"head\",def:1,mdef:1,speed:2,elemental:{offence:{physical:5},defence:{earth:-5}},element:\"physical\",desc:\"A cap fashioned from grey wolves hide. It doesn't offer much protection but does look quite nice!\",sell_value:50},water_infused_helm:{name:\"water infused helm\",type:\"head\",def:8,mdef:6,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"A metal helm infused with water mana. Surprisingly, the water magic does not change how the helm feels to wear. Grants some nice protection against the elements.\",sell_value:120},makeshift_steel_helm:{name:\"makeshift steel helm\",type:\"head\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-3}},element:\"physical\",desc:\"The artisanship observed with this helm is fairly weak. It's clear it was made by someone fairly inexperienced\",sell_value:50},shinobi_headcloak:{name:\"shinobi headcloak\",type:\"head\",def:8,mdef:6,speed:5,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-12,physical:-5,light:15}},element:\"dark\",desc:\"Basic black fabric that stealthy fighters use to hide their faces has been enhanced with the pelt of dark beasts. Just like their skin, it has an ethereal quality.\",sell_value:400},vine_helmet:{name:\"vine helmet\",type:\"head\",def:3,mdef:4,elemental:{offence:{},defence:{earth:-5,physical:-5,fire:20,water:-2,thunder:-2}},element:\"earth\",desc:\"Vines from a teravalum that looks a bit like a helmet. Better than nothing but since it's not designed to be a helmet, but it's a little uncomfortable.\",sell_value:35},crown_of_darkness:{name:\"crown of darkness\",type:\"head\",def:10,mdef:7,evasion:.1,elemental:{offence:{dark:10,physical:5},defence:{dark:-10,light:15,physical:-5}},element:\"dark\",desc:\"A small crown-looking headpiece. It is entirely black but unlike shadow pelts, completely solid. It is quite difficult to tell what material this item is made from, although it is imbued with magical power.\",sell_value:\"unsellable\"},leather_cap:{name:\"leather cap\",type:\"head\",def:3,mdef:4,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A cap made of brown leather. Uncomfortable and not practical. Is this even helpful?\",sell_value:20},forest_explorer_cap:{name:\"forest explorer cap\",type:\"head\",def:8,mdef:7,resistance:5,elemental:{offence:{},defence:{earth:-10,physical:-5,dark:-5}},element:\"earth\",desc:\"The cap of an experienced explorer of the forest. It seems to have several enchantments placed upon it designed to aid someone in a normal forest. Whoever previously owned these must have known a lot about the area in which they were found...\",sell_value:250},damaged_armour:{name:\"damaged armour\",type:\"body\",def:6,mdef:7,speed:-5,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A damaged chestplate. The damage to the ligaments would increase one's agility were it not for the rusting forcing one to move against the resistance of the joints.\",sell_value:100},leather_armour:{name:\"leather armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A chestplate made of leather.\",sell_value:20},silver_armour:{name:\"silver armour\",type:\"body\",def:5,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"Armour designed to protect the main vulnerable part of the body, leaving a chainmail pattern around the joints for movement. Not expertly cafted, but well made nonetheless.\",sell_value:50},advanced_silver_armour:{name:\"advanced silver armour\",type:\"body\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"An armour made almost entirely of silver. The joints use overlapping and interlocking pieces of iron to enable movement while facilitating good protection.\",sell_value:80},silver_knight_armour:{name:\"silver knight armour\",type:\"body\",def:13,mdef:7,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A complete silver knight's armour. It still allows movement at the joints, but still restricts movement slightly. In exchange, the wearer is granted greater defenses.\",sell_value:200},ninja_garb:{name:\"ninja garb\",type:\"body\",def:5,mdef:2,speed:10,evasion:.1,elemental:{offence:{},defence:{dark:-5,light:10}},element:\"dark\",desc:\"The equivalent of a chestplate for a ninja. It is made of a thin black fabric that offers little protection but allows for quick movement without detection.\",sell_value:130},light_wizard_robes:{name:\"light wizard robes\",type:\"body\",def:3,mdef:7,matk:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Grey and blue wizard robes are often worn by new mages. They have a light enchant to enhance spells cast by the user, are comfortable to move about in and are fairly stylish.\",sell_value:70},tattered_magus_robes:{name:\"tattered magus robes\",type:\"body\",def:5,mdef:10,matk:9,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Magi are extremely powerful magic users. Becaue of the powerful magic they use, spellcaster garb that they wear can wear out quickly. Some magi discard them and others donate them. These robes seem to have sustained a lot of damage, but are still better than most beginners wear. \",sell_value:140},wolfhide_armour:{name:\"wolfhide armour\",type:\"body\",def:3,mdef:2,speed:5,elemental:{offence:{physical:5},defence:{earth:-7}},element:\"physical\",desc:\"Armour fashioned from grey wolf hide. It is comfortable and enabled great movement.\",sell_value:50},water_infused_armour:{name:\"water infused armour\",type:\"body\",def:8,mdef:7,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Metal armour enhanced with water magic. Grants increased defence against the elements.\",sell_value:120},makeshift_steel_armour:{name:\"makeshift steel armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Makeshift steel armour. Not made very well, but grants rudimentary protection.\",sell_value:50},shinobi_armour:{name:\"shinobi armour\",type:\"body\",def:10,mdef:8,speed:8,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-8,physical:-5,light:12}},element:\"dark\",desc:\"Body wear worn by stealth fighters enhanced with the pelt of a dark beast. Having part of them on you makes you feel a little like a dark beast yourself.\",sell_value:400},shadow_cloak:{name:\"Shadow cloak\",type:\"body\",def:13,mdef:10,speed:15,evasion:.1,crit_chance:.1,elemental:{offence:{},defence:{physical:-10,dark:-15,light:15}},element:\"physical\",desc:\"A cloak that looks as though it was fashioned from darkness itself. It cannot be felt physically when worn but its power can still be felt.\",sell_value:600},bladed_armour:{name:\"bladed armour\",type:\"body\",def:5,mdef:3,atk:5,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Simple armour with claws used to grant the wearer an offensive edge.\",sell_value:120},vine_armour:{name:\"vine armour\",type:\"body\",def:4,mdef:4,speed:-2,elemental:{offence:{},defence:{fire:5,earth:-2}},element:\"earth\",desc:\"Armour fashioned from vines. It's surprisingly comofrtable, but grants little insulation.\",sell_value:20},wooden_armour:{name:\"wooden armour\",type:\"body\",def:3,mdef:3,elemental:{offence:{},defence:{}},element:\"earth\",desc:\"Armour made from wood. You could get splinters wearing this!\",sell_value:15},strong_vine_chestplate:{name:\"strong vine chestplate\",type:\"body\",def:6,mdef:6,elemental:{offence:{},defence:{fire:4,earth:-3,physical:-2}},element:\"earth\",desc:\"Armour from vines enhanced with hempwood ligaments. The use of the flexible but strong ligaments allows for better movement, and they cover vulnerable gaps present in armour without it.\",sell_value:45},leather_amour:{name:\"leather armour\",type:\"body\",def:4,mdef:4,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Armour made from leather. Fairly comfortable to move in but doesn't help keep you alive that much.\",sell_value:30},forest_explorer_armour:{name:\"forest explorer armour\",type:\"body\",def:10,mdef:7,resistance:5,elemental:{offence:{},defence:{earth:-10,physical:-5,dark:-3}},element:\"earth\",desc:\"A pair of daggers that seem to have aspects of various creatures found in the forest skillfully woven together into it. They also seem to have several enchantments upon them to make exploring the area easier. Whoever owned these must have known a lot about the place they were found..\",sell_value:250},damaged_pantaloons:{name:\"damaged pantaloons\",type:\"legs\",def:5,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"Damaged pantaloons. They're pretty uncomfortable, and rapid movement causes them to make a sound that hurts the ear. Also, pantaloons is such a silly sounding word.\",sell_value:100},leather_pants:{name:\"leather pants\",type:\"legs\",def:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Trousers made of brown leather.\",sell_value:20},silver_legwear:{name:\"silver legwear\",type:\"legs\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-4,water:-3,fire:2}},element:\"physical\",desc:\"Silver legwear. There is some type of fabric protecting the legs down to the knees, beyond which silver armour is present.\",sell_value:50},advanced_silver_legwear:{name:\"advanced silver legwear\",type:\"legs\",def:6,mdef:3,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"Advanced silver legwear. It uses relatively advanced craftsmanship to allow movement at the joints with overlapping and interlocking pieces of silver.\",sell_value:80},silver_knight_legwear:{name:\"silver knight legwear\",type:\"legs\",def:10,mdef:7,speed:-10,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"Legwear made of silver used by knights. There is a considerable compromise in movement in exchange for improved defenses.\",sell_value:200},ninja_legwear:{name:\"ninja legwear\",type:\"legs\",def:7,mdef:3,speed:10,elemental:{offence:{},defence:{dark:-2,light:10}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings. They offer great movement and are very comfortable, and seem to have been lightly enchanted for a little protection\",sell_value:90},light_wizard_leggings:{name:\"light wizard leggings\",type:\"legs\",def:2,mdef:5,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Simple legwear designed to synergise aesthetically with simple wizard robes. Has a light enchant to boost magical power.\",sell_value:70},wolfhide_leggings:{name:\"wolfhide leggings\",type:\"legs\",def:1,mdef:2,speed:3,elemental:{offence:{physical:5},defence:{earth:-5}},element:\"physical\",desc:\"Legwewar fasioned from grey wolf's hide. It is comfortable, and allows for great movement.\",sell_value:50},water_infused_legwear:{name:\"water infused legwear\",type:\"legs\",def:6,mdef:5,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Basic metal armour infused with water magic. Asides from enhanced physical protection, it also grants some defence against the elements.\",sell_value:120},makeshift_steel_legwear:{name:\"makeshift steel legwear\",type:\"legs\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-4}},element:\"physical\",desc:\"Steel legwear made somewhat poorly, but not unwearable. Seems like it might fall apart after some use.\",sell_value:50},shinobi_leggings:{name:\"shinobi leggings\",type:\"legs\",def:9,mdef:5,speed:10,elemental:{offence:{},defence:{dark:-9,physical:-5,light:12}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings, but that have been enhanced using the pelt of a dark beast. Quite comfortable, but have an ethereal quality to them.\",sell_value:400},vine_pantaloons:{name:\"vine pantaloons\",type:\"legs\",def:2,mdef:2,elemental:{offence:{},defence:{fire:3,earth:-2}},element:\"earth\",desc:\"Trousers fashioned from vines. It's surprisingly comofrtable, but grants little insulation.\",sell_value:15},wooden_trousers:{name:\"wooden trousers\",type:\"legs\",def:1,mdef:1,elemental:{offence:{},defence:{fire:3}},element:\"physical\",desc:\"Trousers crudely made from wood. You could get splinters from these!\",sell_value:10},leather_pants:{name:\"leather pants\",type:\"legs\",def:2,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Trousers fashioned entirely from brown leather. Comfortable to wear but do not offer great protecton.\",sell_value:15},forest_explorer_pants:{name:\"forest explorer pants\",type:\"legs\",def:9,mdef:6,resistance:5,elemental:{offence:{},defence:{earth:-10,physical:-5,dark:-3}},element:\"earth\",desc:\"Legwear that somehow has aspects of all the creatures found in the F1 forest woven together and still looks nice. It also seems to have various enchantments placed upon it aimed to grant an advantage to the wearer against the enemies found in the area. Whoever previously owned these must have known a lot about the place they were found..\",sell_value:250},shadowwarding_pendant:{name:\"Shadowwarding Pendant\",type:\"misc\",atk:5,def:5,matk:7,mdef:8,elemental:{offence:{},defence:{dark:-10,light:10}},element:\"physical\",description:\"A short pendant with a silver chain. On the front seems to be a small, dark purple crystal. It seems that the pendant is designed to defend against the more dangerous creatures in the dark forest.\",sell_value:500},slime_bracers:{name:\"Slime bracers\",type:\"misc\",def:3,mdef:4,speed:-3,resistance:5,elemental:{offence:{water:10},defence:{water:-5,fire:-10,thunder:10}},element:\"water\",description:\"Bracers for defending one's arms fashioned from slime. The solid and slightly sticky substance offers fairly good elemental protection but stunts one's ability to move somewhat.\",sell_value:30},wolfhide_charm:{name:\"Wolfhide charm\",type:\"misc\",atk:4,def:3,mdef:2,speed:3,evasion:.05,crit_chance:.1,elemental:{offence:{physical:8},defence:{fire:10}},element:\"physical\",description:\"A charm fashioned from wolf pelts. The residual inherent mana of the wolves seems to grant the charm some special qualities.\",sell_value:60},lizard_bracelet:{name:\"Lizard bracelet\",type:\"misc\",atk:7,def:4,mdef:3,evasion:.1,elemental:{offence:{},defence:{fire:-5}},element:\"water\",description:\"Small parts of lizard tails were wrapped intricately together to create a bracelet. It is quite pretty, and seems to have some magical properties.\",sell_value:100},aquus_orb:{name:\"Aquus orb\",type:\"misc\",matk:7,mdef:6,resistance:10,elemental:{offence:{water:10,fire:-10},defence:{water:-15,fire:-6,thunder:12}},element:\"water\",description:\"Aquus clusters condensed to form a small orb capable of enhancing the capabilities of the wielder.\",sell_value:100},luminant_charm:{name:\"Luminant charm\",type:\"misc\",matk:5,atk:5,mdef:6,speed:2,elemental:{offence:{light:10},defence:{light:-5,dark:-10}},element:\"light\",description:\"A simple charm enhanced with the luminescent eye of a water lizard. Can be worn on jewelry or held in a pocket.\",sell_value:150},tear_of_lucia:{name:\"Tear of lucia\",type:\"misc\",matk:7,mdef:7,resistance:5,elemental:{offence:{water:20},defence:{water:-15,fire:-10,dark:-5,light:-5,earth:-5,thunder:-5,wind:-5}},element:\"water\",description:\"A manasoul condensed using a makeshift orb into a very small space. The compactness of the charm causes the mana inside the be quite powerful. Items of this nature are called 'Tears of Lucia' as it believed that the tears of the Solace goddess will grant any who observes them inpenetrable safety, and the mana of this item for some reason has a very soothing aura.\",sell_value:350},lores_legacy:{name:\"Lore's Legacy\",type:\"misc\",atk:5,def:5,matk:5,mdef:5,speed:5,elemental:{offence:{all:5},defence:{all:-5}},element:\"light\",description:\"A trinket previously owned by a man who adventured with a girl named Lucia. After a fearsome encounter one day, she disappeared, and he never saw her again. It is said that the first thing he did after the event is return to Arlam, his hometown, however since he was now blind, he received help along the way from adventurers he met. Some of them stuck around with him, and they formed an team. They then became renowned adventurers, and later Wanderers.\",sell_value:\"unsellable\"},red_slime_bracers:{name:\"Red slime bracers\",type:\"misc\",def:9,mdef:13,speed:-5,resistance:5,crit_damage:.1,elemental:{offence:{fire:10},defence:{water:5,fire:-13,thunder:-5}},element:\"water\",description:\"Bracers for defending one's arms fashioned from red slime. It is more solid than blue slime and has different elemental properties.\",sell_value:300},special_armband:{name:\"Special armband\",type:\"misc\",atk:3,def:3,matk:3,mdef:3,speed:3,max_stamina:20,elemental:{offence:{},defence:{}},element:\"physical\",description:\"A simple bracelet that promotes spirituality. It's a little tight..\",sell_value:200},friendly_slime:{name:\"Friendly slime\",type:\"misc\",def:9,mdef:13,resistance:5,max_mana:20,max_stamina:5,elemental:{offence:{water:20},defence:{water:-7,fire:-8,thunder:15}},element:\"water\",description:\"A slime to help you in battle! Where'd you find this little guy?\",sell_value:250},friendly_greater_slime:{name:\"Friendly greater slime\",type:\"misc\",def:15,mdef:20,resistance:5,max_mana:30,max_stamina:5,elemental:{offence:{water:25},defence:{water:-10,fire:-10,thunder:15}},element:\"water\",description:\"A greater slime to help you in battle! Where'd you find this little guy?\",sell_value:400},vine_membrane_bracers:{name:\"Vine membrance bracers\",type:\"misc\",atk:2,def:5,mdef:4,max_stamina:5,elemental:{offence:{earth:10},defence:{earth:-4,fire:4}},element:\"earth\",description:\"Bracers made from vines and hempweed ligaments. They offer a good mixture of offence and defence.\",sell_value:40},water_orb_necklace:{name:\"Water orb necklace\",type:\"misc\",matk:10,def:5,mdef:10,max_mana:50,elemental:{offence:{water:25,thunder:-10,fire:-10},defence:{thunder:20,fire:-10,water:-5}},element:\"water\",description:\"A simple necklace with a water orb encrusted at its center. Basic but very effective.\",sell_value:200},blue_vine_charm:{name:\"Blue vine charm\",type:\"misc\",atk:3,matk:3,def:3,mdef:3,speed:-2,max_mana:10,max_stamina:10,elemental:{offence:{water:5,earth:5},defence:{fire:25,water:-5,earth:-5}},element:\"water\",description:\"A necklace fashioned from various items that can be found from blue slimes and vined creatures. The coalesce of their inherent magics grants the wearer a range of boons.\",sell_value:30},fishers_lucky_charm:{name:\"Fisher's lucky charm\",type:\"misc\",atk:6,matk:7,def:4,mdef:5,crit_chance:.2,crit_damage:.15,evasion:.05,elemental:{offence:{},defence:{}},element:\"water\",description:\"Many fishers are known for their extreme luck both in finding rare and dangerous fish and surviving various encounters with them. Is this item the sole reason for that..?\",sell_value:50},vinewarding_charm:{name:\"Vinewarding charm\",type:\"misc\",atk:3,matk:2,def:4,mdef:3,resistance:15,elemental:{offence:{},defence:{earth:-10}},element:\"earth\",description:\"A charm infused with the essence of a teravalum. As such, it is useful in defending against them.\",sell_value:30},bearkiller_charm:{name:\"Bearkiller charm\",type:\"misc\",def:9,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",description:\"This charm isn't actually infused with a bear's essence, unfortunately. Since bears specialise in offence what is needed to beat them is a good defence, and this is what this item offers.\",sell_value:30},canine_charm:{name:\"Canine charm\",type:\"misc\",atk:5,speed:8,elemental:{offence:{physical:10},defence:{}},element:\"physical\",description:\"A charm infused with the essence of a wolf. Interestingly, many species of wolves may show respect, rather than hatred towards wearers of this charm. Such is the way of the canine.\",sell_value:30},forest_explorer_pendant:{name:\"Forest explorer pendant\",type:\"misc\",def:8,mdef:8,resistance:10,elemental:{offence:{earth:10},defence:{earth:-10,physical:-5,dark:-3}},element:\"earth\",description:\"A pendant with a silver chain and green gem at the center. The gem seems to have the essences of various creatures found in floor one infused into it, granting the wearer a series of boons.\",sell_value:250},forest_explorer_charm:{name:\"Forest explorer charm\",type:\"misc\",atk:8,mdef:8,effectiveness:10,elemental:{offence:{earth:15},defence:{earth:-6,physical:-2,dark:-1}},element:\"earth\",description:\"A charm made with several parts of various creatures from the floor one forest. It should look like a complete mess, but... it actually looks rather nice.\",sell_value:250},slime_ball:{name:\"Slime Ball\",type:\"reagent\",desc:\"A ball of blue slime. Although it has shape, it is easy to press into. Has a peculiar texture.\",sell_value:5},grey_wolf_pelt:{name:\"Grey Wolf Pelt\",type:\"reagent\",desc:\"The fur of a grey wolf. Most of it remains intact, but if you shake the straps of fur, parts of it will flake off rapidly\",sell_value:7},wanderer_memorabilia:{name:\"Adventurer Memorabilia\",type:\"reagent\",desc:\"Various things that may remind an old advenutrer of the adventures they had.\",sell_value:0},weak_membrane:{name:\"Weak Membrane\",type:\"reagent\",desc:\"A very thin layer of skin from some kind of weap reptile. A single wrong move and it would tear.\",sell_value:10},tiny_lizard_tail:{name:\"Tiny Lizard Tail\",type:\"reagent\",desc:\"The tail of a lizard. It still moves sometimes.\",sell_value:12},aquus_cluster:{name:\"Aquus Cluster\",type:\"reagent\",desc:\"An undeveloped orb of weak water magic. 'Aquus' refers to weak water magic. There wasn't enough of it to form an orb, so the mana settled as a semi-solid substance that has form and yet is very soft and malleable. Even so, it is fairly useful to novice mages.\",sell_value:25},water_orb:{name:\"Water Orb\",type:\"reagent\",desc:\"Water magic that gathered at a single point over a fairly long period of time and eventually reached a high enough concentration to possess crystalline form. These very rarely form naturally, and are often crafted by strong magic users to store mana of a particular alignment.\",sell_value:400},manasoul:{name:\"Manasoul\",type:\"reagent\",desc:\"Beings such as klastera and elementals with no anatomy or creature soul are animated by a 'manasoul', mana with the power to grant consciousness. It is not known how to create these and so they are often extracted from naturally occurring creatures such as klastera, elementals and very rarely, dragons.\",sell_value:1e3},light_absorbant_eye:{name:\"Light absorbant eye\",type:\"reagent\",desc:\"The eye of a class of lizard that absorbs light from the sun to be used to keep the body warm during hibernation. In many places with cold winters there is little space to burrow or make warm refuge, and so this skill is essential in keeping the lizards alive when the climate becomes cold.\",sell_value:20},red_slime_ball:{name:\"Red slime ball\",type:\"reagent\",desc:\"A ball of red slime. It can be pressed into but seems to return to a general shape after the deforming force is removed. Has a peculiar texture.\",sell_value:7},sharp_claw:{name:\"Sharp claw\",type:\"reagent\",desc:\"A dull grey claw. Seems to be sharper than most. Both the sides and prick cause bleeding upon contact.\",sell_value:8},venomous_claw:{name:\"Venomous claw\",type:\"reagent\",desc:\"A dull greenish-grey claw. The venom the claw is laced with seems to cause fatigue in small amounts. It would be unwise to toy with this item.\",sell_value:8},shadow_pelt:{name:\"Shadow pelt\",type:\"reagent\",desc:\"A patch of fur from a Dark beast. Although it is clearly tangible, it has an ethereal quality that makes it uncomfortable to hold - like it would just fade into black smoke.\",sell_value:10},shadow_corona:{name:\"Shadow corona\",type:\"reagent\",desc:\"It's difficult to tell what part of the Dark beast this comes from - it seems like a particularly tough, solid patch of its fur. It is heavily enchanted and seems to serve as some kind of evidence that the dark beast is in fact a dark beast.\",sell_value:20},trash:{name:\"Trash\",type:\"reagent\",desc:\"Human garbage. Arguably of negative value.\",sell_value:-1},fire_rune:{name:\"Fire rune\",type:\"reagent\",desc:\"A simple flame rune. It is contained in a transparent box of some material that seems to block any heat emanating from them.\",sell_value:40},water_rune:{name:\"Water rune\",type:\"reagent\",desc:\"A simple water rune. It isn't dangerous, but feels a little weird to touch - probably due to the water mana constantly emanating from it.\",sell_value:40},thunder_rune:{name:\"Thunder rune\",type:\"reagent\",desc:\"A simple thunder rune. Touching it would shock the user a little, so it is encased in a transparent box of some material.\",sell_value:40},dark_rune:{name:\"Dark rune\",type:\"reagent\",desc:\"A simple dark rune. It is uncomfortable to have in your inventory due to the foreboding enery it emits.\",sell_value:40},light_rune:{name:\"Light rune\",type:\"reagent\",desc:\"A simple light rune. It is difficult to tell whether it is emitting light or light mana.\",sell_value:40},vip_card:{name:\"VIP card\",type:\"reagent\",desc:\"A basic-looking small card. Apparently functions as evidence of one's generous patronage.\",sell_value:100},steel:{name:\"steel\",type:\"reagent\",desc:\"It's steel. What more do you want?\",sell_value:10},wood:{name:\"wood\",type:\"reagent\",desc:\"Some wood. Who cares what type it is?\",sell_value:8},leather:{name:\"leather\",type:\"reagent\",desc:\"Leather. It is cheap but fairly well made.\",sell_value:9},stone:{name:\"stone\",type:\"reagent\",desc:\"Stone.\",sell_value:3},water_energy:{name:\"water energy\",type:\"reagent\",desc:\"Pure water energy. Humans have not yet learned to replicate this with magic; this is something only animals can create. Can be used by some creatures to strengthen themselves.\",sell_value:60},weak_vine:{name:\"weak vine\",type:\"reagent\",desc:\"Weak vines woven of some kind of thick cellulose material. It feels a little leathery.\",sell_value:6},hempweed_ligament:{name:\"hempweed ligament\",type:\"reagent\",desc:\"Seems to form the ligaments of a Lesser Teravalum. It is very thin, but very strong. Could probably be woven into a fabric\",sell_value:7},brown_fur:{name:\"brown fur\",type:\"reagent\",desc:\"The brown fur of a brown bear. Despite feeling quite nice, it smells very bad.\",sell_value:6},magic_bark:{name:\"Magic bark\",type:\"reagent\",desc:\"Bark of a tree imbued with magic. The material of the tree itself seems to have a relatively poor magical, however bark of this nature could still be very useful to beginning adventurers.\",sell_value:12},special_sap:{name:\"Special sap\",type:\"reagent\",desc:\"The sap of a treant. It has potent magical qualities, specifically in healing. It's quite bitter, so in healing potions for children, sugar is often added to it.\",sell_value:15},forest_scourge_scales:{name:\"Forest scourge scales\",type:\"reagent\",desc:\"The scales of a forest scourge. They are dull, likely to aid camoflague, but incredibly tough and smooth to the touch.\",sell_value:12},mage_cheat_sheet:{name:\"Mage cheat sheet\",type:\"reagent\",desc:\"A cheat sheet for some basic spells. It reads (messily):<i><br>Water charge: fire + ice<br>Steam charge: fire + water<br>Soil charge: earth + water<br>Magma charge: fire + earth<br>Volcano charge: magma + earth<br>Obsidian charge: magma + water<br>Frozen Earth charge: ice + earth</i>\",sell_value:300},f1_settlement_teleportation_stone:{name:\"f1 settlement tp stone\",type:\"reagent\",desc:\"It is difficult to explain the function of this item, but it allows for instantaneous travel, albeit is destroyed afterwards. When exploring on floor one, consume to travel to the settlement in the north-west of the map.\",sell_value:5,use:{case:\"outside\",effect:[[\"player\",\"teleport\",\"floor1\",[4,2]]]}},f1_forest_settlement_teleportation_stone:{name:\"f1 forest settlement tp stone\",type:\"reagent\",desc:\"It is difficult to explain the function of this item, but it allows for instantaneous travel, albeit is destroyed afterwards. [When exploring on floor one, consume to travel to the settlement in the forest region of the map.]\",sell_value:5,use:{case:\"outside\",effect:[[\"player\",\"teleport\",\"floor1\",[17,20]]]}},stamina_vial:{name:\"stamina vial\",type:\"reagent\",desc:\"A vial filled with invigorating reagents. Recovers 40 stamina upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"stamina\",\"flat\",40]],battleEffect:()=>{qe.pushMessagesToState([\"Used stamina vial!\"]),qe.gainStamina(\"player\",40,\"self\",[\"item:stamina_vial\",{damage:30,type:[\"gain_stamina\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:4}},health_potion:{name:\"health potion\",type:\"reagent\",desc:\"A simple health potion. Recovers 40 HP upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",40]],battleEffect:()=>{qe.pushMessagesToState([\"Used health potion!\"]),qe.gainHealth(\"player\",40,\"self\",[\"item:health_potion\",{damage:30,type:[\"heal\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:5}},greater_health_potion:{name:\"greater health potion\",type:\"reagent\",desc:\"A fairly well-made health potion. Recovers 80 HP upon use.\",sell_value:15,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",80]],battleEffect:()=>{qe.pushMessagesToState([\"Used greater health potion!\"]),qe.gainHealth(\"player\",80,\"self\",[\"item:greater_health_potion\",{damage:80,type:[\"heal\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:5}},crafted_health_potion:{name:\"crafted health potion\",type:\"reagent\",desc:\"This health potion is somewhat of a spectacle of artisanship. Recovers 200 HP upon use.\",sell_value:50,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",200]],battleEffect:()=>{qe.pushMessagesToState([\"Used crafted health potion!\"]),qe.gainHealth(\"player\",200,\"self\",[\"item:crafted_health_potion\",{damage:150,type:[\"heal\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:5}},mana_potion:{name:\"mana potion\",type:\"reagent\",desc:\"A simple mana potion. Recovers 40 MP upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"mana\",\"flat\",40]],battleEffect:()=>{qe.pushMessagesToState([\"Used mana potion!\"]),qe.gainMana(\"player\",40,\"self\",[\"item:health_potion\",{type:[\"mana_gain\",\"item\"],mana:40,target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:5}},greater_mana_potion:{name:\"greater mana potion\",type:\"reagent\",desc:\"A fairly well-made mana potion. Recovers 80 MP upon use.\",sell_value:15,use:{case:\"all\",effect:[[\"player\",\"mana\",\"flat\",80]],battleEffect:()=>{qe.pushMessagesToState([\"Used greater mana potion!\"]),qe.gainMana(\"player\",80,\"self\",[\"item:greater_health_potion\",{mana:80,type:[\"mana_gain\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:5}},earthen_shield_potion:{name:\"earthen shield potion\",type:\"reagent\",desc:\"A potion infused with the concentrated essence of the forest. Applies <u>Earthen Shield</u> [+50 resistance, 1T duration] to the user. Can only be used in battle.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{qe.pushMessagesToState([\"Used earthen shield potion!\"]);const e={name:\"earthen shield\",duration:1,resistance:50,element:\"earth\",types:[\"buff\"],apply_text:\" is protected by the earth!!\",max_stacks:1};qe.applyBuff(\"player\",()=>{Le.applyBuff(e,100,Le.getPlayer(),Le.getPlayer(),\"buffs\")},\"self\",[\"item:health_potion\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:3}},weak_slingshot:{name:\"weak slingshot\",type:\"reagent\",desc:\"A weak slingshot. It can be used once but will break afterwards. Use in battle to deal low physical damage and gain an action.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{const e=Le.getPlayer(),t=Le.getEnemy(),a=qe.calcDamage(e,t,\"atk\",\"def\",\"physical\",\"physical\",.9,1.15,.5);qe.prepareAttackMessage(e.name,t.name,`<br>${e.name} slung a slingshot at their enemy!`,a),qe.dealDamage(\"player\",a.damage,\"opponent\",!1,!1,e,t),qe.gainActions(\"player\",1,\"self\",[\"item:weak_slingshot\",{damage:0,type:[\"attack\",\"item\"],target:\"opponent\"},\"player\"],!0,e,t,!0)},pouchMax:4}},invigorating_flower:{name:\"invigorating flower\",type:\"reagent\",desc:\"An edible flower with invigorating qualities. Eat it in battle to gain 20 SP.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{qe.pushMessagesToState([\"Used invigorating flower!\"]),qe.gainSP(\"player\",20,\"self\",[\"item:invigorating_flower\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy(),!0)},pouchMax:3}},desperate_flower:{name:\"desperate flower\",type:\"reagent\",desc:\"An edible flower with properties that increase with in effectiveness depending on the desperation of the consumer. Grants 2 extra actions, then 1 additional action for every 30% of HP lost.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{const e=Le.getPlayer(),t=Le.getEnemy();qe.pushMessagesToState([\"Used desperate flower!\"]),qe.gainActions(\"player\",2,\"self\",!1,!1,e,t,!0),e.health<=.7*e.max_health&&qe.gainActions(\"player\",1,\"self\",!1,!1,e,t,!0),e.health<=.4*e.max_health&&qe.gainActions(\"player\",1,\"self\",!1,!1,e,t,!0),e.rhealth<=.3*e.max_health&&qe.gainActions(\"player\",1,\"self\",!1,!1,e,t,!0),qe.pushCustomFunc(\"player\",()=>{},\"self\",[\"item:desperate_flower\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,e,t,!1)},pouchMax:2}},monster_essence:{name:\"monster essence\",type:\"reagent\",desc:\"A pouch infused with various monster essences. Consume during battle to grant oneself a <u>Monster Soul</u> for the duration of that battle.\",sell_value:20,use:{case:\"battle\",battleEffect:()=>{qe.pushMessagesToState([\"Used monster essence!\"]);const e={name:\"monster soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{qe.pushMessagesToState([\"<br>The afflicted's monster soul radiates energy!\"],!0,\"push\"),qe.gainSP(e,5,\"self\",!1,!1,a,n,!0)},apply_text:\"'s monster soul radiates energy!\",max_stacks:1};qe.applyBuff(\"player\",()=>{Le.applyBuff(e,100,Le.getPlayer(),Le.getPlayer(),\"buffs\")},\"self\",[\"item:monster_essence\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:1}},kindred_essence:{name:\"kindred essence\",type:\"reagent\",desc:\"A pouch infused with various kindred essences. Consume during battle to grant oneself a <u>Kindred Soul</u> for the duration of that battle.\",sell_value:20,use:{case:\"battle\",battleEffect:()=>{qe.pushMessagesToState([\"Used kindred essence!\"]);const e={name:\"kindred soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{console.log(t),qe.pushMessagesToState([\"<br>The afflicted's kindred soul radiates energy!\"],!0,\"push\"),qe.gainHealth(e,Math.round(.03*user.max_health),\"self\",!1,!1,a,n,!0)},apply_text:\"'s kindred soul radiates energy!\",max_stacks:1};qe.applyBuff(\"player\",()=>{Le.applyBuff(e,100,Le.getPlayer(),Le.getPlayer(),\"buffs\")},\"self\",[\"item:kindred_essence\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,Le.getPlayer(),Le.getEnemy())},pouchMax:1}}},ze=(e,t=1,a=1)=>{const o={...We[e]},s=Math.floor(Math.random()*(a-t+1))+t;pt(`<br>Attained ${s} ${o.name}${s>1?\"s\":\"\"}!`);var r=!1;const i=n.player;if(\"reagent\"==o.type&&i.inventory.forEach(t=>{t[0]==e&&(t[1]+=s,r=!0)}),0==r)if(\"reagent\"!=o.type)for(var l=1;l<s+1;l++)n.player.inventory.push(e);else n.player.inventory.push([e,s])},Ue=(e,t)=>{const a=We[e];pt(`<br>Removed ${t} ${a.name}${t>1?\"s\":\"\"}!`);var o=!1;const s=n.player;if(\"reagent\"==a.type){const a=n.player;a.inventory.forEach(n=>{if(n[0]==e){if(n[1]-=t,0==n[1]){const t=a.inventory.findIndex(t=>t[0]==e);a.inventory.splice(t,1)}o=!0}})}if(0==o)for(var r=1;r<t+1;r++)-1!=s.inventory.indexOf(e)&&(delete s.inventory[s.inventory.indexOf(e)],Ze(),o=!1);return Ze(),0==o?-1:0},Ge=(e,t=!0,a=!0,n=!0,o=!0,s=!1,r=!0)=>{const i=[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"critical_chance\",\"critical_damage\",\"effectiveness\",\"resistance\",\"max_stamina\",\"max_mana\",\"evasion\"],l=[\"attack\",\"defence\",\"magic attack\",\"magic defence\",\"speed\",\"critical chance\",\"critical damage\",\"effectiveness\",\"resistance\",\"max stamina\",\"max mana\",\"evasion\"];s&&pt(e.name),Object.keys(e).forEach(o=>{const s=e[o];n&&\"type\"==o&&pt(\"Type: \"+s),t&&i.includes(o)&&pt(`${s} ${l[i.indexOf(o)]}`),t&&\"elemental\"==o&&(Object.keys(s.offence).forEach(e=>{pt(`${s.offence[e]<0?\"\":\"+\"}${s.offence[e]} ${e} attack`)}),Object.keys(s.defence).forEach(e=>{pt(`${s.defence[e]<0?\"\":\"+\"}${s.defence[e]} ${e} defence`)})),a&&\"desc\"==o&&pt(\"Description: \"+s),a&&\"sell_value\"==o&&pt(\"Sell value: \"+s),r&&\"use\"==o&&null!=e[o].pouchMax&&pt(\"Pouch limit: \"+s.pouchMax)})},Je=e=>e[0].length>1,Ke=e=>Je(e)?e[0]:e,Ve=(e,t)=>{var a=0;return\"reagent\"!=We[e].type?t.forEach(t=>{t==e&&a++}):t.forEach(t=>{t[0]==e&&(a=t[1])}),a},Xe=e=>{const t=Object.keys(We);for(var a=0;a<t.length;a++)if(We[t[a]].name==e)return t[a];return!1},Ze=()=>{const e=n.player;for(var t=0;t<e.inventory.length;t++)null!=e.inventory[t]&&null!=e.inventory[t]||e.inventory.splice(t,1)},Qe=e=>{d.minimap.style.visibility=\"hidden\",d.miscView.style.visibility=\"visible\";var t=\"\";const a=e.stats.equips;Object.keys(e.stats.equips).forEach(e=>{const n=a[e],o={...We[n]};var s=!1;if(t+=e.toUpperCase()+\": \",null!=o.name){t+=o.name+\"<br>\",delete o.name;var r=\"\";o.hasOwnProperty(\"elemental\")&&(Object.keys(o.elemental.offence).forEach(e=>{r+=`${e} attack: ${o.elemental.offence[e]}<br>`}),Object.keys(o.elemental.defence).forEach(e=>{r+=`${e} defence: ${o.elemental.defence[e]}<br>`}),delete o.elemental,s=!0),Object.keys(o).forEach(e=>{\"desc\"!=e&&\"sell_value\"!=e&&\"description\"!=e&&(t+=`${e}: ${o[e]}<br>`)}),1==s&&(t+=r)}t+=\"<br>\"});const n=`\\n    Level: ${e.level}<br>\\n    EXP: ${e.exp}/${s[e.level]}<br>\\n    Gold: ${e.gold}<br>\\n    SP: ${e.sp}<br>\\n    AP: ${e.ap}<br><br>\\n    \\n    <b>Equipped items</b><br>\\n    ${t}\\n\\n\\n    `;const o=\"\\n    <b>Inventory</b><br>\\n    \"+(e.inventory.length>0?Object.keys(e.inventory).map((t,a)=>{const n=a==me.currentIndex?\"<b>\":\"\",o=a==me.currentIndex?\"</b>\":\"\";return e.inventory[t][1].length<2?`${n}${We[e.inventory[t]].name}${o}`:`${n}${e.inventory[t][1]} ${We[e.inventory[t][0]].name}${o}`}):[]).join(\"<br>\");d.playerStats.innerHTML=n,d.inventory.innerHTML=o},et=(e,t,a=[999,999])=>{const o=((e,t,a)=>{const o=n.player.maps[t.name];for(var s=\"\",r=0;r<e.length;r++){for(var i=0;i<e[r].length;i++){const e=i+a[1]-8,n=r+a[0]-8;if(n<o.length)if(a[0]==n&&a[1]==e)s+=\" \\t▣\";else if(\"discovered\"==o[e][n]){s+=`<span style=\"color:${t[t.zone[n][e][0]].colour}\">  ▣</span>`}else\"seen\"==o[e][n]?\"n\"==t.zone[n][e]?s+=\"  ▩\":s+=\"\\t▢\":s+=\"\\t▥\";else s+=\"\\t▥\"}s+=\"<br>\"}return s})(e,t,a);d.miscView.style.visibility=\"hidden\",d.minimap.style.visibility=\"visible\",d.minimap.innerHTML=o};function tt(e,t,a){return e<=t?t:e>=a?a:e}function at(e){return e[0].toUpperCase()+e.slice(1)}const nt={mode:\"normal\"},ot=(e,t=\"none\")=>{if(\"normal\"==nt.mode&&\"none\"==t)Qe(e);else if(\"normal\"==t||null==he().currentZone)Qe(e);else{const e=he(),t=e.coordinates,s=[...Array(17)].map(e=>Array(17).fill(void 0)),r=n.player.maps[e.currentZone.name];for(var a=0;a<s.length;a++)for(var o=0;o<s[a].length;o++)null!=r[a+t[0]-8]&&a+t[0]-8>-1&&o+t[1]-8>-1?s[a][o]=r[a+t[0]-8][o+t[1]-8]:s[a][o]=void 0;et(s,e.currentZone,e.coordinates)}const s=JSON.parse(JSON.stringify(e));s.stats=Le.getPlayerAdd(s.stats),v(s)},st=(e,t)=>{if(\"reagent\"==We[e].type){const a=t.findIndex(t=>t[0]==e);return-1==a?0:t[a][1]}var a=0;return t.forEach(t=>{t==e&&a++}),a},rt=(e,t)=>{var a;if(e.hasOwnProperty(t))return e[t];for(a in e){if(a==t)return e[a];if(\"object\"==typeof e[a]&&null==e[a].length)return rt(e[a],t)}},it=e=>e===Object(e),lt=e=>{if(!e)return e;let t,a=Array.isArray(e)?[]:{};for(const n in e)t=e[n],a[n]=\"object\"==typeof t?lt(t):t;return a},ct=e=>{const t=n.player;var a=!0;return e.forEach(e=>{const n=e.split(\" \");switch(n[0]){case\"gold:\":{const e=n[1];t.gold>=e||(a=!1);break}case\"item:\":{const e=n[2],o=n[1];Ve(e,t.inventory)>=o||(a=!1);break}case\"level:\":{const e=n[1];t.level>=e||(a=!1);break}case\"flag:\":{var o=n[1],s=\"t\";\"-\"==n[1][0]&&(s=\"f\",o=o.slice(1));const e=c[o];\"f\"==s&&0==e.complete||\"t\"==s&&1==e.complete||(a=!1)}}}),a},dt=e=>e.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var t=e.split(\"-\"),a=t[0],n=t[1];return l[a].skills[n].name}return e});function ft(){document.querySelector(\".tab-container\").style.visibility=\"visible\"}function mt(e,t){var a,n,o;for(n=document.getElementsByClassName(\"tabcontent\"),a=0;a<n.length;a++)n[a].style.display=\"none\";for(o=document.getElementsByClassName(\"tablinks\"),a=0;a<o.length;a++)o[a].className=o[a].className.replace(\" active\",\"\");document.getElementById(t).style.display=\"block\",e.currentTarget.className+=\" active\"}function ut(e,t){var a,n,o;for(n=document.getElementsByClassName(\"tabcontent-2\"),a=0;a<n.length;a++)n[a].style.display=\"none\";for(o=document.getElementsByClassName(\"tablinks-2\"),a=0;a<o.length;a++)o[a].className=o[a].className.replace(\" active\",\"\");document.getElementById(t).style.display=\"block\",e.currentTarget.className+=\" active\"}function ht(e){!function(){const e=document.getElementsByClassName(\"tabcontent\");for(var t=0;t<e.length;t++)e[t].style.display=\"none\";const a=document.getElementsByClassName(\"tablinks\");for(t=0;t<a.length;t++)a[t].className=a[t].className.replace(\" active\",\"\")}();document.querySelector(\".tab-container\").style.visibility=\"hidden\"}document.addEventListener(\"DOMContentLoaded\",e=>{!function(e){var t=0,a=0,n=0,o=0;document.getElementById(e.id+\"header\")?document.getElementById(e.id+\"header\").onmousedown=s:e.onmousedown=s;function s(e){(e=e||window.event).preventDefault(),n=e.clientX,o=e.clientY,document.onmouseup=i,document.onmousemove=r}function r(s){(s=s||window.event).preventDefault(),t=n-s.clientX,a=o-s.clientY,n=s.clientX,o=s.clientY,e.style.top=e.offsetTop-a+\"px\",e.style.left=e.offsetLeft-t+\"px\"}function i(){document.onmouseup=null,document.onmousemove=null}}(document.getElementById(\"draggable\"))});const pt=(e,t=!0,a={})=>{const n=[e,0,t];1==a.unshift?bt.queue.unshift(n):bt.queue.push(n),bt.runQueue()};function gt(e){d.main.insertAdjacentHTML(\"beforeend\",e+\"<br>\")}const yt=(e,t,a=!1)=>{for(var n=0;n<e.length;n++){const t=e[n];var o;o=null==t[3]?{}:t[3],a?bt.queue.push([t[0]+\" <i>(Press enter to continue...)</i>\",\"input\",!0,o]):bt.queue.push([t+\" <i>(Press enter to continue...)</i>\",\"input\",!0,o])}bt.queue.push([\"finishFunction\",t]),bt.runQueue()},_t=(e,t,a)=>{const n=\"battle\"==t?o.battleMessageDelay:o.messageDelay;e.forEach(e=>{if(\"flatsec\"==e[4]);else if(\"flat\"==e[4])e[1]=e[1]*n;else{const t=e[0].split(\" \").length/4;e[1]=t*n}null!=e[4]&&e.splice(4,1),null==e[3]&&(e[3]={}),null==e[2]&&(e[2]=!0),bt.queue.push(e)}),bt.queue.push([\"finishFunction\",a]),bt.runQueue()},bt={queue:[],playing:!1,runQueue(){if(!this.playing){this.playing=!0;const e=()=>{if(this.playing){const t=lt(this.queue[0]);if(\"finishFunction\"==t[0])t[1].call(),this.queue.shift(),this.queue.length>0?e():this.playing=!1;else if(null!=t)if(d.main.insertAdjacentHTML(\"beforeend\",t[0]+\"<br>\"),1==t[2]&&St(),this.queue.shift(),this.queue.length>0)if(0==t[1])e();else if(\"input\"==t[1]){const t=()=>{vt(t,!1),e()};wt(t),this.playing=!0}else setTimeout(e,1e3*t[1]);else this.playing=!1;else this.playing=!1}};e()}}},kt=(e=!0)=>{const t=d.input.value,a=It.inputShortcuts;return e&&(d.input.value=\"\"),It.on&&\"Nan\"!=parseInt(t).toString()&&null!=It.inputShortcuts[parseInt(t)]?(It.inputShortcuts={},It.on=!1,a[parseInt(t)]):(It.inputShortcuts={},It.special={},It.on=!1,t)},wt=e=>{xt.callback=e},vt=(e=\"nothing\",t=!0)=>{xt.callback=void 0,t&&pt(\"<br>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\")},xt={callback:void 0,response:()=>{const e=d.input.value;if(/[~`!#$%\\^&*+=\\\\[\\]\\\\;,/{}|\\\\\":<>\\?]/g.test(e))pt(\"<br>Please don't include any special characters in your inputs!\"),d.input.value=\"\";else{const r=e.toLowerCase().split(\"-\");if(\"sc\"==r[0]){var t=!1;if(3==r.length){if(\"px\"==r[2].slice(-2)&&0==isNaN(r[2].slice(0,-2))){const e=\"fontSize\",a=r[2];\"main\"==r[1]?(d.main.style[e]=a,o.mainTextSize=r[2],St(),t=!0):\"stat\"==r[1]?(d.mainStats.style[e]=a,d.elementalStats.style[e]=a,o.statsTextSize=r[2],St(),t=!0):\"misc\"==r[1]&&(d.miscView.style[e]=a,o.miscTextSize=r[2],St(),t=!0)}else 0==isNaN(r[2])&&parseFloat(r[2])<=1&&parseFloat(r[2])>=0&&(\"volume\"==r[1]?(R.changeVolume(r[2],\"volume\"),R.changeVolume(r[2],\"volumeFX\"),gt('<br><span style=\"color:#33cccc\">Volume changed</span>'),t=!0):\"music\"==r[1]?(R.changeVolume(r[2],\"volume\"),gt('<br><span style=\"color:#33cccc\">Music volume changed</span>'),t=!0):\"fx\"==r[1]&&(R.changeVolume(r[2],\"volumeFX\"),gt('<br><span style=\"color:#33cccc\">FX volume changed</span>'),t=!0));d.input.value=\"\"}else 2==r.length&&(\"reset\"==r[1]?(d.main.style.fontSize=\"16px\",d.mainStats.style.fontSize=\"16px\",d.elementalStats.style.fontSize=\"16px\",d.playerStats.style.fontSize=\"16px\",d.inventory.style.fontSize=\"16px\",St(),t=!0):\"inputshortcut\"==r[1]?(gt(`<br><span style=\"color:#33cccc\">Input shortcut is currently set to\\n                         <b>${o.toggleShortcut}</b>. Don't like this key? You can change the key input shortcut\\n                         is assigned to in settings.</span>`),t=!0):\"help\"==r[1]?(ft(),gt(\"<br><span style=\\\"color:#33cccc\\\">Showing help module. Is it offscreen?\\n                         If so, input 'sc-helpreset' to reset its position.</span>\"),t=!0):\"helpreset\"==r[1]?(!function(){const e=document.querySelector(\".tab-container\");e.style.visibility=\"visible\",e.style.left=\"0px\",e.style.right=\"0px\",e.style.top=\"0px\",e.style.bottom=\"0px\"}(),t=!0):\"minimap\"==r[1]?(\"minimap\"==nt.mode?(nt.mode=\"normal\",t=!0):(nt.mode=\"minimap\",t=!0),ot(n.player)):\"clear\"==r[1]?(d.main.textContent=\"\",t=!0):\"discord\"==r[1]&&(gt('<br><span style=\"color:#33cccc\">Discord invite link: https://discord.com/invite/w73Z44z</span'),t=!0),d.input.value=\"\");t||(gt(\"<br><span style=\\\"color:#33cccc\\\">Did you try and input a super command? Input 'sc-help' for assistance.</span>\"),d.input.value=\"\")}else if(\"help\"==e)ft(),gt(\"<br><span style=\\\"color:#33cccc\\\">Showing help module. Is it offscreen?\\n                 If so, input 'sc-helpreset' to reset its position.</span>\"),d.input.value=\"\";else if(\"skip\"==e){if(bt.playing){d.input.value=\"\",bt.playing=!1;for(var a=window.setTimeout((function(){}),0);a--;)window.clearTimeout(a);console.log(bt.queue);for(var s=bt.queue.length-1;-1!=s;s--)\"finishFunction\"!=bt.queue[s][0]&&(console.log(bt[s]),bt.queue[s][3].hasOwnProperty(\"unskippable\")||bt.queue.splice(s,1));pt('<span style=\"color:#2DFF34\"><br>Skipped.</span>',!0,{unshift:!0})}}else null!=xt.callback&&xt.callback()}}},St=()=>{d.mainBox.scrollTop=d.mainBox.scrollHeight;var e=d.main.innerHTML.split(\"<br>\");e.length>o.scrollLimit&&((e=e.filter(e=>!e.includes(\"form\"))).splice(1,e.length-o.scrollLimit),d.main.innerHTML=e.join(\"<br>\"))};window.addEventListener(\"keyup\",(function(e){this.event.code==_[o.toggleShortcut]&&It.toggleInputShortcut()}));const It={on:!1,inputShortcuts:{},special:{combat:!1},toggleInputShortcut:()=>{if(It.on)It.on=!1,pt(\"<br>Input shortcut turned off.\");else if(d.input.value=\"\",Object.keys(It.inputShortcuts).length>0)if(It.on=!0,pt(\"<br>Input shortcut turned on.\"),1==It.special.combat){const t={...It.inputShortcuts},a={...It.inputShortcuts};for(var e in t)[\"skills\",\"status\",\"enemy\",\"pouch\",\"flee\"].includes(t[e])||delete t[e];for(var e in a)[\"skills\",\"status\",\"enemy\",\"pouch\",\"flee\"].includes(a[e])&&delete a[e];pt(\"<b>Actions\"),Object.keys(t).forEach(e=>{pt(`${e} - ${It.inputShortcuts[e]}`)}),pt(\"<b>Skills\"),Object.keys(a).forEach(e=>{pt(`${e} - ${It.inputShortcuts[e]}`)})}else Object.keys(It.inputShortcuts).forEach(e=>{pt(`${e} - ${It.inputShortcuts[e]}`)});else pt(\"<br>Input shortcut cannot be used here.\")}},Pt=(e,t={})=>{const a={};return e.forEach((e,t)=>{a[t+1]=e}),It.inputShortcuts=a,It.special=t,a},Tt={data:void 0,disciplines:void 0,flags:void 0,settings:void 0},At=()=>{R.playMusic(\"lobby\"),Le.heal(n.player.stats),nt.mode=\"normal\",pt(`${p}You are currently on floor ${n.current_floor}`);var e={...n.player};e.stats=Le.getPlayerAdd(e.stats),v(e),Qe(n.player);const t=n.presents;if(t.length>0)for(pt(\"<br>You have some presents!\");t.length>0;){const e=t[0];switch(e[0]){case\"gold\":pt(`<br>Received ${e[1]} gold!`),n.player.gold+=e[1];break;case\"item\":ze(e[1],e[2],e[2])}t.splice(0,1)}(e={...n.player}).stats=Le.getPlayerAdd(e.stats),v(e),Qe(n.player),Ct(),wt(Lt)},Et=()=>{pt(\"<br>Welcome to Tower RPG. Please input a name.\"),wt(Mt)},Mt=()=>{if(vt(Et),\"\"==kt(!1).replace(/\\s/gi,\"\"))pt(\"<br><b>Please input a name!</b>\"),wt(Mt);else{const e=kt();n.player.name=e,pt(e+\"? That's a nice name!\"),pt(\"Proceeding to main menu...\"),At()}},$t=()=>{yt(b.gameIntroPartOne,()=>{pt(p+\"<b>Now you will set your input shortcut key.</b>\"),pt(\"<br>Input Shortcut is a <b>VERY IMPORTANT</b> mechanic that will make menu navigation and combat much easier. By pressing the designated key, you can bring up a list of your options in a particular menu, and also select an option by inputting a number rather than a line of text. Input shortcut won't work in some menus, however.\"),pt(\"<br>Once you enter the main menu, use Input Shortcut to see your options.\"),pt(\"<br>You can check your input shortcut key at any time by inputting <b>sc-inputshortcut</b>.\"),pt(\"<br>Please input one of the following to set input shortcut to that key:\"),Object.keys(_).forEach(e=>{pt(\" - \"+e)}),wt(Ot)})};function Bt(){vt(Bt);switch(kt().toLowerCase()){case\"yes\":yt([\"<br>Great! As a side note, this tutorial has a good bit of story text.\",\"<br>If you aren't interested, you can input 'skip' to skip dialogue. This will skip a few lines or until you reach an important unskippable line (these are ususally in bold).\",\"<br>Once the demo starts, use <b>input shortcut</b> to see your options. I hope you enjoy Tower RPG!\"],()=>{const e=n;e.player.name=\"Lore\",e.max_floor=0,e.current_floor=0,e.player.maps={floor0:[...Array(46)].map(e=>Array(41).fill(void 0))},e.player.gold=0,e.player.stats.equips={weapon:void 0,head:void 0,body:\"silver_armour\",legs:\"silver_legwear\",misc1:\"tear_of_lucia\",misc2:void 0},e.unlocked={explore:!0,shop:!1,inventory:!1,stats:!1,crafting:!1,settings:!1,ascend:!1};const t=l;Object.keys(t).forEach(e=>{t[e].visible=!1,t[e].unlocked=!1}),l.lore.visible=!0,l.lore.unlocked=!0,n.special.doingTutorial=!0,Z(),At()});break;case\"no\":pt(\"<br>Understood. Proceeding to main game...\"),Et();break;default:pt(\"<br>Invalid input.\"),wt(Bt)}}const Lt=()=>{R.playMusic(\"lobby\"),vt(Lt);const e=kt().toLowerCase(),t=n.unlocked;if(\"ascend\"==e.toLowerCase()&&t.ascend)if(0==n.current_floor){pt(\"<br>This will end the tutorial. You will not be able to return to the tutorial once you leave. Are you sure you would like to exit?\"),pt(\"<br>If so, then input 'END TUTORIAL' in all caps. Otherwise, input anything else to return.\");const e=()=>{vt(e);\"END TUTORIAL\"==kt()?qt():(pt(\"<br>Returning...\"),At())};wt(e)}else pt(\"<br><b>Floor boss currently unavailable.</b>\"),At();else if(\"inventory\"!=e&&\"i\"!=e||!t.inventory)if(\"stats\"!=e&&\"st\"!=e||!t.stats)if(\"explore\"!=e&&\"e\"!=e||!t.explore)if(\"shop\"!=e&&\"sh\"!=e||!t.shop)\"crafting\"!=e&&\"c\"!=e||!t.crafting?\"settings\"==e||\"set\"==e?Y(At):(pt(\"<br>Invalid input\"),Ct(),wt(Lt)):O(At);else{const e=M[n.current_floor];E(e,At)}else{((e,t=\"start\")=>{Se.currentZone=Ie[e];const a=Ie[e].zone;if(\"start\"==t)for(var n=0;n<a.length;n++)for(var o=0;o<a[n].length;o++)if(\"s\"==a[n][o]){Se.coordinates=[n,o];break}Se.roomLoop()})(we[n.current_floor])}else Q(At);else ue(At)};function Ct(){const e=[],t=n.unlocked;[\"explore\",\"shop\",\"inventory\",\"stats\",\"crafting\",\"ascend\"].forEach(a=>{1==t[a]&&e.push(a)}),e.push(\"settings\"),Pt(e)}function Ot(){vt(Ot);var e=kt();e.length>0&&(e=at(e.toLowerCase()));-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(pt(`${p}Input shortcut toggle changed to <b>${e}</b>.`),o.toggleShortcut=e,b.gameIntroPartTwo.forEach(e=>{pt(e)}),wt(Bt),Pt([\"yes\",\"no\"])):(pt(\"<br>Invalid input\"),wt(Ot))}function qt(){yt(b.tutorial_end,()=>{n.special.clearedTutorial=!0,Z(),location.reload()},!1)}!function(){const e=document.getElementsByClassName(\"tablinks\");for(var t=0;t<e.length;t++){const a=e[t];if(a.classList.contains(\"tablinks-2\")||\"close\"==a.id)if(a.classList.contains(\"tablinks-2\")){const e=a.id;a.addEventListener(\"click\",t=>{ut(t,e.slice(0,-5))})}else a.addEventListener(\"click\",e=>ht());else{const e=a.id;a.addEventListener(\"click\",t=>{mt(t,e.slice(0,-5))})}}}(),(()=>{if(Tt.data=lt(n),Tt.disciplines=lt(l),Tt.flags=lt(c),Tt.settings=lt(o),d.form.addEventListener(\"submit\",xt.response),pt(\" ---- TOWER RPG -----\"),null==localStorage.getItem(\"save1Player\"))X.autoSave=!1,$t();else{z(\"save1\"),((e,t=\"localStorage\")=>{const a=o;var n;n=\"localStorage\"==t?JSON.parse(localStorage.getItem(e+\"Settings\")):e,K(a,n)})(\"save1\"),G(\"save1\"),U(\"save1\"),(e=>{const t=n;if(1==t.special.doingTutorial)if(X.autoSave=!1,1==t.special.clearedTutorial){t.special.doingTutorial=!1;const e=lt(n.special);z(Tt.data,\"object\"),U(Tt.disciplines,\"object\"),G(Tt.flags,\"object\"),n.special=e,n.presents.push([\"gold\",300]),1==n.special.clearedTutorialTrue&&n.presents.push([\"item\",\"lores_legacy\",1]),Et()}else e();else e()})((function(){const e=JSON.parse(localStorage.getItem(\"save1Settings\"));w(\"main\",e.mainTextSize),w(\"stat\",e.statsTextSize),w(\"misc\",e.miscTextSize),Ze(),At()}))}})()}]);","extractedComments":[]}