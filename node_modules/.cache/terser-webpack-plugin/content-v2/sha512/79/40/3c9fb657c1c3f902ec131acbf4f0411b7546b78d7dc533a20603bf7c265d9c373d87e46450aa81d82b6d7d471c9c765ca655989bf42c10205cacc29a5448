{"code":"!function(e){var a={};function t(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&a&&\"string\"!=typeof e)for(var s in e)t.d(n,s,function(a){return e[a]}.bind(null,s));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,\"a\",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p=\"\",t(t.s=5)}([function(e,a,t){(function(e){function t(e,a){for(var t=0,n=e.length-1;n>=0;n--){var s=e[n];\".\"===s?e.splice(n,1):\"..\"===s?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(a)for(;t--;t)e.unshift(\"..\");return e}function n(e,a){if(e.filter)return e.filter(a);for(var t=[],n=0;n<e.length;n++)a(e[n],n,e)&&t.push(e[n]);return t}a.resolve=function(){for(var a=\"\",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var r=o>=0?arguments[o]:e.cwd();if(\"string\"!=typeof r)throw new TypeError(\"Arguments to path.resolve must be strings\");r&&(a=r+\"/\"+a,s=\"/\"===r.charAt(0))}return(s?\"/\":\"\")+(a=t(n(a.split(\"/\"),(function(e){return!!e})),!s).join(\"/\"))||\".\"},a.normalize=function(e){var o=a.isAbsolute(e),r=\"/\"===s(e,-1);return(e=t(n(e.split(\"/\"),(function(e){return!!e})),!o).join(\"/\"))||o||(e=\".\"),e&&r&&(e+=\"/\"),(o?\"/\":\"\")+e},a.isAbsolute=function(e){return\"/\"===e.charAt(0)},a.join=function(){var e=Array.prototype.slice.call(arguments,0);return a.normalize(n(e,(function(e,a){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e})).join(\"/\"))},a.relative=function(e,t){function n(e){for(var a=0;a<e.length&&\"\"===e[a];a++);for(var t=e.length-1;t>=0&&\"\"===e[t];t--);return a>t?[]:e.slice(a,t-a+1)}e=a.resolve(e).substr(1),t=a.resolve(t).substr(1);for(var s=n(e.split(\"/\")),o=n(t.split(\"/\")),r=Math.min(s.length,o.length),l=r,i=0;i<r;i++)if(s[i]!==o[i]){l=i;break}var c=[];for(i=l;i<s.length;i++)c.push(\"..\");return(c=c.concat(o.slice(l))).join(\"/\")},a.sep=\"/\",a.delimiter=\":\",a.dirname=function(e){if(\"string\"!=typeof e&&(e+=\"\"),0===e.length)return\".\";for(var a=e.charCodeAt(0),t=47===a,n=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(a=e.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?t?\"/\":\".\":t&&1===n?\"/\":e.slice(0,n)},a.basename=function(e,a){var t=function(e){\"string\"!=typeof e&&(e+=\"\");var a,t=0,n=-1,s=!0;for(a=e.length-1;a>=0;--a)if(47===e.charCodeAt(a)){if(!s){t=a+1;break}}else-1===n&&(s=!1,n=a+1);return-1===n?\"\":e.slice(t,n)}(e);return a&&t.substr(-1*a.length)===a&&(t=t.substr(0,t.length-a.length)),t},a.extname=function(e){\"string\"!=typeof e&&(e+=\"\");for(var a=-1,t=0,n=-1,s=!0,o=0,r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47!==l)-1===n&&(s=!1,n=r+1),46===l?-1===a?a=r:1!==o&&(o=1):-1!==a&&(o=-1);else if(!s){t=r+1;break}}return-1===a||-1===n||0===o||1===o&&a===n-1&&a===t+1?\"\":e.slice(a,n)};var s=\"b\"===\"ab\".substr(-1)?function(e,a,t){return e.substr(a,t)}:function(e,a,t){return a<0&&(a=e.length+a),e.substr(a,t)}}).call(this,t(2))},function(e,a,t){\"use strict\";a.decode=a.parse=t(3),a.encode=a.stringify=t(4)},function(e,a){var t,n,s=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t=\"function\"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var i,c=[],d=!1,m=-1;function f(){d&&i&&(d=!1,i.length?c=i.concat(c):m=-1,c.length&&h())}function h(){if(!d){var e=l(f);d=!0;for(var a=c.length;a;){for(i=c,c=[];++m<a;)i&&i[m].run();m=-1,a=c.length}i=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(a){try{return n.call(null,e)}catch(a){return n.call(this,e)}}}(e)}}function u(e,a){this.fun=e,this.array=a}function p(){}s.nextTick=function(e){var a=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)a[t-1]=arguments[t];c.push(new u(e,a)),1!==c.length||d||l(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title=\"browser\",s.browser=!0,s.env={},s.argv=[],s.version=\"\",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error(\"process.binding is not supported\")},s.cwd=function(){return\"/\"},s.chdir=function(e){throw new Error(\"process.chdir is not supported\")},s.umask=function(){return 0}},function(e,a,t){\"use strict\";function n(e,a){return Object.prototype.hasOwnProperty.call(e,a)}e.exports=function(e,a,t,o){a=a||\"&\",t=t||\"=\";var r={};if(\"string\"!=typeof e||0===e.length)return r;var l=/\\+/g;e=e.split(a);var i=1e3;o&&\"number\"==typeof o.maxKeys&&(i=o.maxKeys);var c=e.length;i>0&&c>i&&(c=i);for(var d=0;d<c;++d){var m,f,h,u,p=e[d].replace(l,\"%20\"),y=p.indexOf(t);y>=0?(m=p.substr(0,y),f=p.substr(y+1)):(m=p,f=\"\"),h=decodeURIComponent(m),u=decodeURIComponent(f),n(r,h)?s(r[h])?r[h].push(u):r[h]=[r[h],u]:r[h]=u}return r};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,a,t){\"use strict\";var n=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e:\"\";default:return\"\"}};e.exports=function(e,a,t,l){return a=a||\"&\",t=t||\"=\",null===e&&(e=void 0),\"object\"==typeof e?o(r(e),(function(r){var l=encodeURIComponent(n(r))+t;return s(e[r])?o(e[r],(function(e){return l+encodeURIComponent(n(e))})).join(a):l+encodeURIComponent(n(e[r]))})).join(a):l?encodeURIComponent(n(l))+t+encodeURIComponent(n(e)):\"\"};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};function o(e,a){if(e.map)return e.map(a);for(var t=[],n=0;n<e.length;n++)t.push(a(e[n],n));return t}var r=Object.keys||function(e){var a=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.push(t);return a}},function(e,a,t){\"use strict\";t.r(a);const n={player:{name:name,gold:100,exp:0,level:1,sp:0,ap:1,sp_investment:{health:0,mana:0,atk:0,def:0,matk:0,mdef:0,speed:0},stats:{health:60,current_health:60,max_sp:100,max_mana:100,current_mana:100,max_stamina:100,atk:30,def:30,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100}},skills:[\"attack\",\"guard\"],equips:{weapon:void 0,head:void 0,body:void 0,legs:void 0,misc1:void 0,misc2:void 0}},inventory:[],library:[\"attack\",\"guard\"],recipes:[],maps:{floor1:[...Array(21)].map(e=>Array(18).fill(void 0))}},max_floor:2,current_floor:1,first_time:{explore:!0,shop:!0,equip:!0,stats:!0,crafting:!0,settings:!0,game:!0,combat:!0}},s={max:1,1:{boss:\"flame_minotaur\"}},o={messageDelay:1,battleMessageDelay:1,toggleShortcut:\"Rshift\"},r={1:100,2:400,3:800,4:1100,5:1500,6:2e3,7:3e3,8:3500,9:4e3,10:4500,11:5e3,12:5500,13:6100,14:6700,15:7500,16:8500,17:9600,18:10700,19:12e3,20:14e3,21:16500,22:19e3,23:23e3,24:26e3,25:3e4},l=-99,i=500,c={adventurer:{name:\"adventurer\",requirements:{skills:[],level:1,flags:[]},cost:{gold:0,items:[]},skills:[{name:\"check\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"channel_health\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"channel_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"brutal_swipe\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"hex\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0}],unlocked:!0,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},mage:{name:\"mage\",requirements:{skills:[],level:2,flags:[]},cost:{gold:300,items:[]},skills:[{name:\"fireball\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"icebolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"thunder_jolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"lesser_quake\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"arcane_shield\",requirements:{skills:[],level:3,flags:[]},disciple:\"mage\",cost:{gold:100,items:[],ap:2},unlocked:!1,unlearnable:!1}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}},warrior:{name:\"warrior\",requirements:{skills:[],level:2,flags:[]},cost:{gold:300,items:[]},skills:[{name:\"stalwart_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"protect\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"bulwark\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"guard_conversion\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"debilitate\",requirements:{skills:[],level:3,flags:[]},disciple:\"warrior\",cost:{gold:100,items:[],ap:2},unlocked:!1,unlearnable:!1}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}},rogue:{name:\"rogue\",requirements:{skills:[],level:2,flags:[]},cost:{gold:300,items:[]},skills:[{name:\"swift_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"shinobi_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"crippling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"enfeebling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"shadow_strike\",requirements:{skills:[],level:3,flags:[]},disciple:\"rogue\",cost:{gold:100,items:[],ap:2},unlocked:!1,unlearnable:!1}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}}},d={beatSlime:{desc:\"Defeat the slime on floor one.\",complete:!1},f1_spoken_to_little_girl:{desc:\"Speak to a little girl on floor one about her slime problem.\",complete:!1},f1_helped_little_girl:{desc:\"Help a little girl on floor one with her slime problem.\",complete:!1},f1_spoken_to_docile_slime:{desc:\"Interact with a docile slime on floor one.\",complete:!1},f1_helped_docile_slime:{desc:\"Help a docile slime on floor one gather their bretheren.\",complete:!1},f1_spoken_to_rude_kid:{desc:\"Speak to a rude kid on floor one.\",complete:!1},f1_kicked_rude_kids_shin:{desc:\"Kick the shin of a rude kid on floor one.\",complete:!1},f1_extended_convo_with_rude_kid:{desc:\"Have an extended conversation with a rude kid on floor one.\",complete:!1},f1_spoken_to_little_boy:{desc:\"Speak to a young boy in the dark forest of floor one.\",complete:!1},f1_helped_little_boy:{desc:\"Help the young boy in the dark forest of floor one.\",complete:!1}},m=e=>{J.main.insertAdjacentHTML(\"beforeend\",`${e}<br>`),y()},f=()=>{const e=J.input.value,a=g.inputShortcuts;return J.input.value=\"\",console.log(`input is ${e}`),g.on&&\"Nan\"!=parseInt(e).toString()&&null!=g.inputShortcuts[parseInt(e)]?(g.inputShortcuts={},g.on=!1,a[parseInt(e)]):(g.inputShortcuts={},g.on=!1,e)},h=e=>{J.form.addEventListener(\"submit\",e)},u=e=>{J.form.removeEventListener(\"submit\",e),m(oe)},p=(e,a,t)=>{var n=0;const s=\"battle\"==a?o.battleMessageDelay:o.messageDelay,r=()=>{n<e.length?(m(e[n][0]),y(),++n<e.length?setTimeout(r,1e3*s*e[n-1][1]):setTimeout(t,1e3*s*e[n-1][1])):t.call()};r()},y=()=>{J.main.scrollTop=J.main.scrollHeight};window.addEventListener(\"keyup\",(function(e){this.event.code==ne[o.toggleShortcut]&&g.toggleInputShortcut()}));const g={on:!1,inputShortcuts:{},toggleInputShortcut:()=>{g.on?(g.on=!1,m(\"<br>Input shortcut turned off.\")):(J.input.value=\"\",Object.keys(g.inputShortcuts).length>0?(g.on=!0,m(\"<br>Input shortcut turned on.\"),Object.keys(g.inputShortcuts).forEach(e=>{m(`${e} - ${g.inputShortcuts[e]}`)})):m(\"<br>Input shortcut cannot be used here.\"))}},b=e=>{const a={};return e.forEach((e,t)=>{a[t+1]=e}),g.inputShortcuts=a,a},_={damaged_dagger:{name:\"damaged dagger\",type:\"weapon\",atk:4,def:1,matk:5,mdef:3,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged dagger. Slightly rusty. It's corrogated edge may help against some enemies, but will not do any favours against slimes.\",sell_value:100},damaged_sword:{name:\"damaged sword\",type:\"weapon\",atk:7,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged sword. It is a little bit rusty, with varying sharpness throughout the length of its edge. It's uneven length is unlikely to assist its user in swordplay.\",sell_value:100},simple_sword:{name:\"simple sword\",type:\"weapon\",atk:5,def:1,matk:2,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of craftmanship evidently skilled and yet still simplistic. It has a presently untouched silver blade under a brown hilt. Swords of this type are often used by skilled adventurers who want to return to their roots.\",sell_value:25},sharpened_sword:{name:\"sharpened sword\",type:\"weapon\",atk:12,def:3,matk:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The blade atop this sword is noticeable sharper than weaker swords. It has a weightier feel that allows for stronger swings.\",sell_value:100},crafted_blade:{name:\"crafted blade\",type:\"weapon\",atk:20,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The result of a very skilled weapon forger working with limited materials. Even one unknowledgable in swords can infer the love put into this blade from the intricate hilt to the blade optimised for killing.\",sell_value:250},silver_axe:{name:\"silver axe\",type:\"weapon\",atk:18,def:6,matk:6,mdef:6,speed:-10,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe forged of silver. It is double-bladed, and the weight on either side makes it a little uncomfortable to handle.\",sell_value:120},reinforced_silver_axe:{name:\"reinforced silver axe\",type:\"weapon\",atk:25,def:8,matk:8,mdef:8,speed:-20,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe that seems to be exactly like the silver axe except it has been reinforced by various stronger materials. However, the materials used to reinforce it seem to have been applied unevenly, which makes this weapon, however strong, difficult to use.\",sell_value:300},metal_stave:{name:\"metal stave\",type:\"weapon\",atk:3,def:1,matk:6,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It is a common misconception that simple weaponry for mages are made out of wood. Wood actually doesn't really conduct mana very well and is susceptible to breaking and fragmenting, making it a poor choice. Instead, a simple stave constructed from various metals melded together haphazardly is the weapon of choice for beginning magic users.\",sell_value:30},magisteel_stave:{name:\"magisteel stave\",type:\"weapon\",atk:7,def:1,matk:13,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A stave made from a single alloy that is particularly good at conducting mana. Useful for intermediate mages but a lack of resistance to mana makes it unsuitable for stronger users.\",sell_value:150},enchanted_magisteel_stave:{name:\"enchanted magisteel stave\",type:\"weapon\",atk:9,def:1,matk:20,mdef:8,elemental:{offence:{water:10},defence:{water:-10}},element:\"water\",desc:\"A stave made from an alloy that conducts maigc easily, but also enchanted so that more powerful spells can be cast using it. It seems to have been enchanted with water magic.\",sell_value:350},conduit_orb:{name:\"conduit orb\",type:\"weapon\",matk:20,elemental:{offence:{},defence:{}},element:\"none\",desc:\"Most orbs are formed from solidified mana over a very long period of time, and therefore has a very high mana conductivity that allows for the use of very powerful spells. However this orb is manmade with no elemental alignment using a complicated and specialised technique. It offers no other combat advantages, however allows a user a relatively high increase in magic power for its price.\",sell_value:200},simple_dagger:{name:\"simple dagger\",type:\"weapon\",atk:2,speed:5,mdef:1,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A weapon that seems almost identical to another named 'simple sword' although it is smaller in length. It has a lightly curved blade that allows attacks to be parried more easily.\",sell_value:25},crafted_dagger:{name:\"crafted dagger\",type:\"weapon\",atk:10,speed:10,evasion:.1,mdef:3,def:3,elemental:{offence:{},defence:{}},element:\"none\",desc:\"A wonderfully crafted weapon. It's hilt it designed such that the weapon can be held in most positions very comfortably, and such that the way the weapon is held can be changed at will. The blade is an intricate array of grooves and smooth edges that allow attacks to be blocked and parried with great ease and effectiveness. Not to be used by newbie dagger wielders.\",sell_value:250},silver_shield:{name:\"silver shield\",type:\"weapon\",def:25,mdef:20,speed:-20,elemental:{offence:{},defence:{physical:-10}},element:\"physical\",desc:\"A silver shield. It is well-made and sturdy but with little nuance to speak of.\",sell_value:200},runeblade:{name:\"runeblade\",type:\"weapon\",atk:10,matk:7,mdef:5,def:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A blade of simple structure. The blade has been formed of two half-blades with runic inscriptions on the inside of either welded together such that the inscriptions cannot be seen. This along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},runic_dagger:{name:\"runic dagger\",type:\"weapon\",atk:7,matk:5,mdef:2,def:2,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger of simple structure. The weapon is too small for inscriptions to be placed inside of the blade so they are plainly visible. The runes along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},magisteel_runic_dagger:{name:\"magisteel runic dagger\",type:\"weapon\",atk:10,matk:8,mdef:7,def:5,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger crafted meticulously with the magisteel alloy and also encrusted with runes. This along with an enchantment placed upon the blade makes it possible to enhance the dagger with some runes, and even without magic, the expert craftsmanship evident on the weapon makes it an effective combat tool.\",sell_value:300},slime_reinforced_sword:{name:\"slime reinforced sword\",type:\"weapon\",atk:3,def:1,mdef:3,elemental:{offence:{water:10},defence:{}},element:\"water\",desc:\"A basic sword reinforced with some slime. It is a little heavier and more dull but grants some more elemental defence.\",sell_value:50},wolfhide_dagger:{name:\"wolfhide dagger\",type:\"weapon\",atk:3,speed:6,def:1,mdef:1,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"A simple dagger wherein the grip has been enhanced with grey wolf's skin.\",sell_value:50},pickaxe:{name:\"pickaxe\",type:\"weapon\",atk:3,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It's a pickaxe. What more do you want?\",sell_value:25},earthen_sword:{name:\"earthen sword\",type:\"weapon\",atk:23,def:2,matk:6,mdef:4,elemental:{offence:{earth:15,wind:-5},defence:{earth:-6,wind:6,fire:10}},element:\"earth\",desc:\"A blade enhanced with the venom of a venomous wolf from the dark forest. It can't really poison enemies due the limited quantity of poison, but it does grant the sword some earthen qualities.\",sell_value:390},makeshift_sword:{name:\"makeshift sword\",type:\"weapon\",atk:3,def:1,matk:1,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of limited craftsmanship. Besides that, nothing of note regarding this weapon.\",sell_value:25},wolven_reavers:{name:\"wolven reavers\",type:\"weapon\",atk:4,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Small weapons fashioned from wolf claws and pelt. Easy to carry and useful for close range combat.\",sell_value:75},flamme_kaiser:{name:\"flamme kaiser\",type:\"weapon\",atk:35,matk:15,elemental:{offence:{fire:20},defence:{fire:-5,water:10,thunder:-5}},element:\"fire\",desc:\"An axe whose craftsmanship is indicative of something beyond the comprehension of even a decently-skilled artisan. Even though it should be far too heavy to hold, somehow it is comfortable in just one hand. The heat it emanates makes it difficult to hold, however.\",sell_value:1e3},fishing_rod:{name:\"fishing rod\",type:\"weapon\",atk:5,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An old fishing rod. You can tell it's used, and the wear of the old user's arms have given it a more comfortable grip. However, the compromise is the quality of the rod. It can clearly seen better days.\",sell_value:25},damaged_helm:{name:\"damaged helm\",type:\"head\",def:7,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:10}},element:\"physical\",desc:\"A damaged helm. The perforations in the front may help the user to see better. The ones in the back, not so much.\",sell_value:100},silver_helm:{name:\"damaged helm\",type:\"head\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-2,water:-2,fire:10}},element:\"physical\",desc:\"A silver helm. It is not a full helm, instead protecting the neck and head. Offers less protection than a full helm but does not restrict movement or sight.\",sell_value:50},advanced_silver_helm:{name:\"advanced silver helm\",type:\"head\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"A helm made of impressive silver. It has more coverage than some lower end helmets but is still fairly free, at the cost of protection.\",sell_value:80},silver_knight_helm:{name:\"silver knight helm\",type:\"head\",def:10,mdef:5,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"A knight's helm made of silver. It covers the face completely, but the limited view makes it harder to accurately move about and evade attacks.\",sell_value:200},ninja_wrap:{name:\"ninja wrap\",type:\"head\",def:2,mdef:1,speed:5,elemental:{offence:{},defence:{dark:-2,fire:10}},element:\"dark\",desc:\"Black cloth intricately wrapped such that it can be wore on the head, hiding most of the face. Offers almost no protection but does not restrict movement at all.\",sell_value:90},wizard_headband:{name:\"wizard headband\",type:\"head\",def:1,mdef:4,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Stereotypical wizard hats are worn by many but often cannot function as much more than a fashion piece. This wizard headband, crafted from silver with a small gem at the center is designed to enhance spells cast by the wielder.\",sell_value:70},enchanted_wooden_helm:{name:\"enchanted wooden helm\",type:\"helm\",def:5,mdef:2,elemental:{offence:{},defence:{water:-10,fire:30,physical:-5}},element:\"physical\",desc:\"One would assume that a wooden helm would be very ineffective, but it seems to have been enchanted that prevents it from fragmenting and greatly increases its water absorbance.\",sell_value:75},wolfhide_cap:{name:\"wolfhide cap\",type:\"head\",def:1,mdef:1,speed:2,elemental:{offence:{},defence:{fire:5}},element:\"physical\",desc:\"A cap fashioned from grey wolves hide. It doesn't offer much protection but does look quite nice!\",sell_value:50},water_infused_helm:{name:\"water infused helm\",type:\"head\",def:8,mdef:6,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"A metal helm infused with water mana. Surprisingly, the water magic does not change how the helm feels to wear. Grants some nice protection against the elements.\",sell_value:120},makeshift_steel_helm:{name:\"makeshift steel helm\",type:\"head\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-3}},element:\"physical\",desc:\"The artisanship observed with this helm is fairly weak. It's clear it was made by someone fairly inexperienced\",sell_value:50},shinobi_headcloak:{name:\"shinobi headcloak\",type:\"head\",def:8,mdef:6,speed:5,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-12,physical:-5,fire:13,light:15}},element:\"dark\",desc:\"Basic black fabric that stealthy fighters use to hide their faces has been enhanced with the pelt of dark beasts. Just like their skin, it has an ethereal quality.\",sell_value:400},damaged_armour:{name:\"damaged armour\",type:\"body\",def:6,mdef:7,speed:-5,elemental:{offence:{},defence:{physical:-5,fire:10}},element:\"physical\",desc:\"A damaged chestplate. The damage to the ligaments would increase one's agility were it not for the rusting forcing one to move against the resistance of the joints.\",sell_value:100},silver_armour:{name:\"silver armour\",type:\"body\",def:5,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"Armour designed to protect the main vulnerable part of the body, leaving a chainmail pattern around the joints for movement. Not expertly cafted, but well made nonetheless.\",sell_value:50},advanced_silver_armour:{name:\"advanced silver armour\",type:\"body\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"An armour made almost entirely of silver. The joints use overlapping and interlocking pieces of iron to enable movement while facilitating good protection.\",sell_value:80},silver_knight_armour:{name:\"silver knight armour\",type:\"body\",def:13,mdef:7,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"A complete silver knight's armour. It still allows movement at the joints, but still restricts movement slightly. In exchange, the wearer is granted greater defenses.\",sell_value:200},ninja_garb:{name:\"ninja garb\",type:\"body\",def:5,mdef:2,speed:10,evasion:.1,elemental:{offence:{},defence:{dark:-5,fire:10}},element:\"dark\",desc:\"The equivalent of a chestplate for a ninja. It is made of a thin black fabric that offers little protection but allows for quick movement without detection.\",sell_value:130},light_wizard_robes:{name:\"light wizard robes\",type:\"body\",def:3,mdef:7,matk:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Grey and blue wizard robes are often worn by new mages. They have a light enchant to enhance spells cast by the user, are comfortable to move about in and are fairly stylish.\",sell_value:70},tattered_magus_robes:{name:\"tattered magus robes\",type:\"body\",def:5,mdef:10,matk:9,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Magi are extremely powerful magic users. Becaue of the powerful magic they use, spellcaster garb that they wear can wear out quickly. Some magi discard them and others donate them. These robes seem to have sustained a lot of damage, but are still better than most beginners wear. \",sell_value:140},wolfhide_armour:{name:\"wolfhide armour\",type:\"body\",def:3,mdef:2,speed:5,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"Armour fashioned from grey wolf hide. It is comfortable and enabled great movement.\",sell_value:50},water_infused_armour:{name:\"water_infused_armour\",type:\"body\",def:8,mdef:7,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Metal armour enhanced with water magic. Grants increased defence against the elements.\",sell_value:120},makeshift_steel_armour:{name:\"makeshift steel armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Makeshift steel armour. Not made very well, but grants rudimentary protection.\",sell_value:50},shinobi_armour:{name:\"shinobi armour\",type:\"body\",def:10,mdef:8,speed:8,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-8,physical:-5,fire:10,light:12}},element:\"dark\",desc:\"Body wear worn by stealth fighters enhanced with the pelt of a dark beast. Having part of them on you makes you feel a little like a dark beast yourself.\",sell_value:400},shadow_cloak:{name:\"Shadow cloak\",type:\"body\",def:13,mdef:10,speed:15,evasion:.1,crit_chance:.1,elemental:{offence:{},defence:{physical:-10,dark:-15,fire:5}},element:\"physical\",desc:\"A cloak that looks as though it was fashioned from darkness itself. It cannot be felt physically when worn but its power can still be felt.\",sell_value:600},bladed_armour:{name:\"bladed armour\",type:\"body\",def:5,mdef:3,atk:5,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Simple armour with claws used to grant the wearer an offensive edge.\",sell_value:120},damaged_pantaloons:{name:\"damaged pantaloons\",type:\"legs\",def:5,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:10}},element:\"physical\",desc:\"Damaged pantaloons. They're pretty uncomfortable, and rapid movement causes them to make a sound that hurts the ear. Also, pantaloons is such a silly sounding word.\",sell_value:100},silver_legwear:{name:\"silver legwear\",type:\"legs\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-4,water:-3,fire:14}},element:\"physical\",desc:\"Silver legwear. There is some type of fabric protecting the legs down to the knees, beyond which silver armour is present.\",sell_value:50},advanced_silver_legwear:{name:\"advanced silver legwear\",type:\"legs\",def:6,mdef:3,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"Advanced silver legwear. It uses relatively advanced craftsmanship to allow movement at the joints with overlapping and interlocking pieces of silver.\",sell_value:80},silver_knight_legwear:{name:\"silver knight legwear\",type:\"legs\",def:10,mdef:7,speed:-10,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"Legwear made of silver used by knights. There is a considerable compromise in movement in exchange for improved defenses.\",sell_value:200},ninja_legwear:{name:\"ninja legwear\",type:\"legs\",def:7,mdef:3,speed:10,elemental:{offence:{},defence:{dark:-2,fire:10}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings. They offer great movement and are very comfortable, and seem to have been lightly enchanted for a little protection\",sell_value:90},light_wizard_leggings:{name:\"light wizard leggings\",type:\"legs\",def:2,mdef:5,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Simple legwear designed to synergise aesthetically with simple wizard robes. Has a light enchant to boost magical power.\",sell_value:70},wolfhide_leggings:{name:\"wolfhide leggings\",type:\"legs\",def:1,mdef:2,speed:3,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"Legwewar fasioned from grey wolf's hide. It is comfortable, and allows for great movement.\",sell_value:50},water_infused_legwear:{name:\"water-infused legwear\",type:\"legs\",def:6,mdef:5,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Basic metal armour infused with water magic. Asides from enhanced physical protection, it also grants some defence against the elements.\",sell_value:120},makeshift_steel_legwear:{name:\"makeshift steel legwear\",type:\"legs\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-4}},element:\"physical\",desc:\"Steel legwear made somewhat poorly, but not unwearable. Seems like it might fall apart after some use.\",sell_value:50},shinobi_leggings:{name:\"shinobi leggings\",type:\"legs\",def:9,mdef:5,speed:10,elemental:{offence:{},defence:{dark:-9,physical:-5,fire:12,light:15}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings, but that have been enhanced using the pelt of a dark beast. Quite comfortable, but have an ethereal quality to them.\",sell_value:400},shadowwarding_pendant:{name:\"Shadowwarding Pendant\",type:\"misc\",atk:5,def:5,matk:7,mdef:8,elemental:{offence:{},defence:{dark:-10,light:10}},element:\"physical\",description:\"A short pendant with a silver chain. On the front seems to be a small, dark purple crystal. It seems that the pendant is designed to defend against the more dangerous creatures in the dark forest.\",sell_value:500},slime_bracers:{name:\"Slime bracers\",type:\"misc\",def:1,mdef:2,speed:-3,resistance:.05,elemental:{offence:{water:10},defence:{water:-5,fire:-10,thunder:10}},element:\"water\",description:\"Bracers for defending one's arms fashioned from slime. The solid and slightly sticky substance offers fairly good elemental protection but stunts one's ability to move somewhat.\",sell_value:30},wolfhide_charm:{name:\"Wolfhide charm\",type:\"misc\",atk:2,def:2,mdef:1,speed:3,evasion:.05,crit_chance:.1,elemental:{offence:{physical:8},defence:{fire:10}},element:\"physical\",description:\"A charm fashioned from wolf pelts. The residual inherent mana of the wolves seems to grant the charm some special qualities.\",sell_value:60},lizard_bracelet:{name:\"Lizard bracelet\",type:\"misc\",atk:7,def:4,mdef:3,evasion:.1,elemental:{offence:{},defence:{fire:-5}},element:\"water\",description:\"Small parts of lizard tails were wrapped intricately together to create a bracelet. It is quite pretty, and seems to have some magical properties.\",sell_value:100},aquus_orb:{name:\"Aquus orb\",type:\"misc\",matk:7,mdef:6,resistance:.1,elemental:{offence:{water:10,fire:-10},defence:{water:-15,fire:-6,thunder:12}},element:\"water\",description:\"Aquus clusters condensed to form a small orb capable of enhancing the capabilities of the wielder.\",sell_value:100},luminant_charm:{name:\"Luminant charm\",type:\"misc\",matk:5,atk:5,mdef:6,speed:2,elemental:{offence:{light:10},defence:{light:-5,dark:-10}},element:\"light\",description:\"A simple charm enhanced with the luminescent eye of a water lizard. Can be worn on jewelry or held in a pocket.\",sell_value:150},tear_of_lucia:{name:\"Tear of lucia\",type:\"misc\",matk:7,mdef:7,resistance:.05,elemental:{offence:{water:20},defence:{water:-15,fire:-10,dark:-5,light:-5,earth:-5,thunder:-5,wind:-5}},element:\"water\",description:\"A manasoul condensed using a makeshift orb into a very small space. The compactness of the charm causes the mana inside the be quite powerful. Items of this nature are called 'Tears of Lucia' as it believed that the tears of the Solace goddess will grant any who observes them inpenetrable safety, and the mana of this item for some reason has a very soothing aura.\",sell_value:350},red_slime_bracers:{name:\"Red slime bracers\",type:\"misc\",def:9,mdef:13,speed:-5,resistance:.05,crit_damage:.1,elemental:{offence:{fire:10},defence:{water:5,fire:-13,thunder:-5}},element:\"water\",description:\"Bracers for defending one's arms fashioned from red slime. It is more solid than blue slime and has different elemental properties.\",sell_value:300},special_armband:{name:\"Special armband\",type:\"misc\",atk:3,def:3,matk:3,mdef:3,speed:3,max_stamina:15,elemental:{offence:{},defence:{}},element:\"physical\",description:\"A simple bracelet that promotes spirituality. It's a little tight..\",sell_value:200},friendly_slime:{name:\"Friendly slime\",type:\"misc\",def:9,mdef:13,resistance:.05,max_mana:20,max_stamina:5,elemental:{offence:{water:20},defence:{water:-7,fire:-8,thunder:15}},element:\"water\",description:\"A slime to help you in battle! Where'd you find this little guy?\",sell_value:250},friendly_greater_slime:{name:\"Friendly greater slime\",type:\"misc\",def:15,mdef:20,resistance:.05,max_mana:30,max_stamina:5,elemental:{offence:{water:25},defence:{water:-10,fire:-10,thunder:15}},element:\"water\",description:\"A greater slime to help you in battle! Where'd you find this little guy?\",sell_value:400},slime_ball:{name:\"Slime Ball\",type:\"reagent\",desc:\"A ball of blue slime. Although it has shape, it is easy to press into. Has a peculiar texture.\",sell_value:5},grey_wolf_pelt:{name:\"Grey Wolf Pelt\",type:\"reagent\",desc:\"The fur of a grey wolf. Most of it remains intact, but if you shake the straps of fur, parts of it will flake off rapidly\",sell_value:7},wanderer_memorabilia:{name:\"Adventurer Memorabilia\",type:\"reagent\",desc:\"Various things that may remind an old advenutrer of the adventures they had.\",sell_value:0},weak_membrane:{name:\"Weak Membrane\",type:\"reagent\",desc:\"A very thin layer of skin from some kind of weap reptile. A single wrong move and it would tear.\",sell_value:10},tiny_lizard_tail:{name:\"Tiny Lizard Tail\",type:\"reagent\",desc:\"The tail of a lizard. It still moves sometimes.\",sell_value:12},aquus_cluster:{name:\"Aquus Cluster\",type:\"reagent\",desc:\"An undeveloped orb of weak water magic. 'Aquus' refers to weak water magic. There wasn't enough of it to form an orb, so the mana settled as a semi-solid substance that has form and yet is very soft and malleable. Even so, it is fairly useful to novice mages.\",sell_value:25},water_orb:{name:\"Water Orb\",type:\"reagent\",desc:\"Water magic that gathered at a single point over a fairly long period of time and eventually reached a high enough concentration to possess crystalline form. These very rarely form naturally, and are often crafted by strong magic users to store mana of a particular alignment.\",sell_value:400},manasoul:{name:\"Manasoul\",type:\"reagent\",desc:\"Beings such as klastera and elementals with no anatomy or creature soul are animated by a 'manasoul', mana with the power to grant consciousness. It is not known how to create these and so they are often extracted from naturally occurring creatures such as klastera, elementals and very rarely, dragons.\",sell_value:1e3},light_absorbant_eye:{name:\"Light absorbant eye\",type:\"reagent\",desc:\"The eye of a class of lizard that absorbs light from the sun to be used to keep the body warm during hibernation. In many places with cold winters there is little space to burrow or make warm refuge, and so this skill is essential in keeping the lizards alive when the climate becomes cold.\",sell_value:20},red_slime_ball:{name:\"Red slime ball\",type:\"reagent\",desc:\"A ball of red slime. It can be pressed into but seems to return to a general shape after the deforming force is removed. Has a peculiar texture.\",sell_value:7},sharp_claw:{name:\"Sharp claw\",type:\"reagent\",desc:\"A dull grey claw. Seems to be sharper than most. Both the sides and prick cause bleeding upon contact.\",sell_value:8},venomous_claw:{name:\"Venomous claw\",type:\"reagent\",desc:\"A dull greenish-grey claw. The venom the claw is laced with seems to cause fatigue in small amounts. It would be unwise to toy with this item.\",sell_value:8},shadow_pelt:{name:\"Shadow pelt\",type:\"reagent\",desc:\"A patch of fur from a Dark beast. Although it is clearly tangible, it has an ethereal quality that makes it uncomfortable to hold - like it would just fade into black smoke.\",sell_value:10},shadow_corona:{name:\"Shadow corona\",type:\"reagent\",desc:\"It's difficult to tell what part of the Dark beast this comes from - it seems like a particularly tough, solid patch of its fur. It is heavily enchanted and seems to serve as some kind of evidence that the dark beast is in fact a dark beast.\",sell_value:20},trash:{name:\"Trash\",type:\"reagent\",desc:\"Human garbage. Arguably of negative value.\",sell_value:-1},fire_rune:{name:\"Fire rune\",type:\"reagent\",desc:\"A simple flame rune. It is contained in a transparent box of some material that seems to block any heat emanating from them.\",sell_value:40},water_rune:{name:\"Water rune\",type:\"reagent\",desc:\"A simple water rune. It isn't dangerous, but feels a little weird to touch - probably due to the water mana constantly emanating from it.\",sell_value:40},thunder_rune:{name:\"Thunder rune\",type:\"reagent\",desc:\"A simple thunder rune. Touching it would shock the user a little, so it is encased in a transparent box of some material.\",sell_value:40},dark_rune:{name:\"Dark rune\",type:\"reagent\",desc:\"A simple dark rune. It is uncomfortable to have in your inventory due to the foreboding enery it emits.\",sell_value:40},light_rune:{name:\"Light rune\",type:\"reagent\",desc:\"A simple light rune. It is difficult to tell whether it is emitting light or light mana.\",sell_value:40},vip_card:{name:\"VIP card\",type:\"reagent\",desc:\"A basic-looking small card. Apparently functions as evidence of one's generous patronage.\",sell_value:100},steel:{name:\"steel\",type:\"reagent\",desc:\"It's steel. What more do you want?\",sell_value:10},wood:{name:\"wood\",type:\"reagent\",desc:\"Some wood. Who cares what type it is?\",sell_value:8},leather:{name:\"leather\",type:\"reagent\",desc:\"Leather. It is cheap but fairly well made.\",sell_value:9},water_energy:{name:\"water energy\",type:\"reagent\",desc:\"Pure water energy. Humans have not yet learned to replicate this with magic; this is something only animals can create. Can be used by some creatures to strengthen themselves.\",sell_value:60}},k=(e,a=1,t=1)=>{const s={..._[e]},o=Math.floor(Math.random()*(t-a+1))+a;m(`<br>Attained ${o} ${s.name}${o>1?\"s\":\"\"}!`);var r=!1;const l=n.player;if(\"reagent\"==s.type&&l.inventory.forEach(a=>{a[0]==e&&(a[1]+=o,r=!0)}),0==r)if(\"reagent\"!=s.type)for(var i=1;i<o+1;i++)n.player.inventory.push(e);else n.player.inventory.push([e,o])},w=(e,a)=>{const t=_[e];m(`<br>Removed ${a} ${t.name}${a>1?\"s\":\"\"}!`);var s=!1;const o=n.player;if(\"reagent\"==t.type){const t=n.player;t.inventory.forEach(n=>{if(n[0]==e){if(n[1]-=a,0==n[1]){const a=t.inventory.findIndex(a=>a[0]==e);console.log(a),t.inventory.splice(a,1)}s=!0}})}if(0==s)for(var r=1;r<a+1;r++)-1!=o.inventory.indexOf(e)&&(delete o.inventory[o.inventory.indexOf(e)],s=!1);for(r=0;r<o.inventory.length;r++)null==o.inventory[r]&&o.inventory.splice(r,1);return 0==s?-1:0},v=(e,a=!0,t=!0,n=!0,s=!0,o=!1)=>{const r=[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"critical_chance\",\"critical_damage\",\"effectiveness\",\"resistance\",\"max_stamina\",\"max_mana\",\"evasion\"],l=[\"attack\",\"defence\",\"magic attack\",\"magic defence\",\"speed\",\"critical chance\",\"critical damage\",\"effectiveness\",\"resistance\",\"max stamina\",\"max mana\",\"evasion\"];o&&m(e.name),Object.keys(e).forEach(s=>{const o=e[s];n&&\"type\"==s&&m(`Type: ${o}`),a&&r.includes(s)&&m(`${o} ${l[r.indexOf(s)]}`),a&&\"object\"==typeof o&&(Object.keys(o.offence).forEach(e=>{m(`${o.offence[e]<0?\"\":\"+\"}${o.offence[e]} ${e} attack`)}),Object.keys(o.defence).forEach(e=>{m(`${o.defence[e]<0?\"\":\"+\"}${o.defence[e]} ${e} defence`)})),t&&\"desc\"==s&&m(`Description: ${o}`),t&&\"sell_value\"==s&&m(`Sell value: ${o}`)})},$=e=>e[0].length>1,x=e=>$(e)?e[0]:e,I=(e,a)=>{var t=0;return\"reagent\"!=_[e].type?a.forEach(a=>{a==e&&t++}):a.forEach(a=>{a[0]==e&&(t=a[1])}),t};function S(e,a,t){return e<=a?a:e>=t?t:e}function P(e){return e[0].toUpperCase()+e.slice(1)}const E=e=>{U(e);const a={...e};a.stats=N.getPlayerAdd(a.stats),W(a)},T=(e,a)=>{if(\"reagent\"==_[e].type){const t=a.findIndex(a=>a[0]==e);return-1==t?0:a[t][1]}var t=0;return a.forEach(a=>{a==e&&t++}),t},A=(e,a)=>{var t;if(e.hasOwnProperty(a))return e[a];for(t in e){if(t==a)return e[t];if(\"object\"==typeof e[t]&&null==e[t].length)return A(e[t],a)}},M=e=>e===Object(e),L={calcDamage(e,a,t,n,s,o,r,l,i,c=!0){\"weapon\"==s&&(s=L.getWeaponElement(e)),\"weapon\"==o&&(o=L.getWeaponElement(e));const d=N.calcElementBuffs(e),m=N.calcElementBuffs(a),f=e.elemental.offence[s]+d.offence[s],h=a.elemental.defence[o]+m.defence[o],u=e[t]*(1+N.calcMod(t,e)),p=a[n]*(1+N.calcMod(n,a)),y=Math.random()<e.crit_chance+e.crit_chance_mod?e.crit_damage+e.crit_damage_mod:1;var g=Math.random()<a.evasion+N.calcMod(\"evasion\",a)?0:1;const b=1-S(N.calcMod(\"mitigation\",a),0,.8);0==c&&(g=1);var _=(Math.pow(u,2)*r+250)/(p*l+100)*(f/100)*(h/100)*y*g*b*i;return{damage:S(_=Math.round(_*(.1*Math.random()+.9)),0,99999999),crit:1!==y,eva:0==g,element:s,offElement:f,defElement:h,mitigation:b,type:\"atk\"==t?\"physical\":\"magical\"}},prepareAttackMessage(e,a,t,n){const s=`${n.crit?\"<b>\":\"\"}<span style=\"color:${Q[n.element]}\">`+`${n.damage} damage! (${Math.round(n.defElement*n.offElement*n.mitigation)/100}% ${n.type})</span>${n.crit?\"</b>\":\"\"}`;return console.log(`damage msg is ${s}`),`${t}${n.crit?\"[]CRITICAL HIT!!\":\"\"}${n.eva?`[]${a} evaded the attack!`:\"\"}[]${s}`.split(\"[]\").map(e=>[e,1])},pushToState(e,a,t){N.state[N.state.length-1][t].push({skill:e,damage:a,user:t})},getSkill(e){console.log(Object.keys(L));var a=-1;return Object.keys(L).forEach(t=>{L[t].name.toLowerCase()==e&&(a=L[t])}),a},finish(e,a,t){L.pushToState(e,a,t),N.endTurn(t)},getWeaponElement(e){var a=\"physical\";return e.hasOwnProperty(\"equips\")&&null!=e.equips.weapon&&(a=_[e.equips.weapon].element),a},attack:{name:\"attack\",description:\"Strike the enemy, dealing moderate damage. Attack element is based on the element of the equipped weapon.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{const n=L.attack;var s=L.getWeaponElement(e);const o=L.calcDamage(e,a,n.off_stat,n.def_stat,s,s,n.off_mod,n.def_mod,n.dmg_mod),r=L.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy!`,o);p(r,\"battle\",()=>{a.health-=o.damage;const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a;N.uploadChanges(n,s),L.finish(\"attack\",o,t)})},cost:(e,a)=>!0},guard:{name:\"guard\",description:\"Take a defensive stance, applying <u>Guard</u> [50% migiation, unstrippable] to the user. This only be used as the first action of a turn, and will consume up to two actions when used.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} guards.`,1]];p(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);N.applyBuff({name:\"guard\",mitigation:.5,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is guarding..\",unstrippable:!0,max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),e.actions-=1,e.actions<0&&(e.actions=0),L.finish(\"guard\",n,t)})},cost:(e,a)=>!(e.actionsTaken>0)||\"Cannot be used this turn!\"},check:{name:\"check\",description:\"Has a 50% chance to apply <u>Analysed<u> to the enemy for 2 turns. When used on an enemy with <u>Analysed</u>, will display all of the stats of that enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={damage:0,crit:!1,eva:!1};if(N.checkStacks(a.debuffs,\"analysed\")>0){p([[\"<br>Analysing...\",1]],\"battle\",()=>{N.displayStats(a),L.finish(\"analysis\",n,t)})}else{const s=[[`<br>${e.name} attempts to analyse the enemy...`,1]];p(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);N.applyBuff({name:\"analysed\",duration:2,element:\"physical\",types:[\"debuff\"],apply_text:\" has been analysed!\",max_stacks:1,desc:\"Allows for analysis of an enemy.\"},50,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),L.finish(\"check\",n,t)})}},cost:(e,a)=>!0},channel_health:{name:\"channel health\",description:\"<b>Cost: 20% max mana</b> - The user channels their magic into life energy, recovering 20% health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=e.max_mana/5;L.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.max_health/5)},s=[[`<br>${e.name} channels their mana!`,1],[`recovered ${-1*n.damage} HP!`,1]];p(s,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o),L.finish(\"channel_health\",n,t)})},cost:(e,a)=>e.mana>=e.max_mana/5||\"Insufficient mana!\"},channel_energy:{name:\"channel energy\",description:\"<b>Cost: 50 stamina</b> - The user channels their strength into special energy, gaining 25 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.stamina-=50;L.channel_energy;const n={crit:!1,eva:!1,damage:0,sp:-25},s=[[`<br>${e.name} channels their energy!`,1],[`gained ${-1*n.sp} SP!`,1]];p(s,\"battle\",()=>{e.sp-=n.sp,e.sp>e.max_sp&&(e.sp=e.ma_sp);const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o),L.finish(\"channel_health\",n,t)})},cost:(e,a)=>e.stamina>=50||\"Insufficient stamina!\"},brutal_swipe:{name:\"brutal swipe\",description:\"<b>Cost: 25 SP</b> - The user enhances their strength temporarily and attacks, dealing high weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1.7,use:(e,a,t)=>{e.sp-=25;const n=L.brutal_swipe,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);s.damage+=5;const o=L.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy with great force!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o),L.finish(\"attack\",s,t)})},cost:(e,a)=>e.sp>=25||\"Insufficient SP!\"},hex:{name:\"hex\",description:\"<b>Cost: 7 mana</b> - The user curses the enemy, applying <u>Hexed</u> [-30% Resistance, 3T duration] to them.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{e.mana-=7;L.hex;const n={crit:!1,eva:!1,damage:0},s=[[`<br>${e.name} attempts to curse the enemy!`,1]];p(s,\"battle\",()=>{N.applyBuff({name:\"hexed\",duration:3,resistance:-30,element:\"dark\",types:[\"debuff\"],apply_text:\" has been hexed!\",max_stacks:1,elemental:{offence:{},defence:{}}},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\");const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o),L.finish(\"hex\",n,t)})},cost:(e,a)=>e.mana>=7||\"insufficient mana!\"},fireball:{name:\"fireball\",description:\"<b>Cost: 10 MP</b> - The user fires a fireball at the enemy, dealing moderate magical fire damage. Applies <u>Scorched</u> [+10% fire defence, -20% MATK, 4T duration] to the enemy, unless <u>Earthed</u> is applied to the enemy, in which case <u>Earthed</u> is consumed and <u>Scorched Earth</u> [-30% DEF, +20% fire/earth defence, 4T duration] is applied.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{const n=L.fireball;e.mana=e.mana-10;const s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} fired a ball of flame at the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"scorched\",matk:-.2,duration:4,element:\"fire\",types:[\"debuff\"],apply_text:\" is scorched!\",max_stacks:1,elemental:{offence:{},defence:{fire:10}}},o={name:\"scorched earth\",def:-.3,duration:4,element:\"fire\",types:[\"debuff\"],apply_text:\" is scorched and earthed!\",max_stacks:1,elemental:{offence:{},defence:{fire:20,earth:20}}};if(0==s.eva){N.checkStacks(a.debuffs,\"earthed\")>0?(N.applyBuff(o,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"earthed\")):N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\")}const r=\"enemy\"==t?a:e,l=\"enemy\"==t?e:a;N.uploadChanges(r,l),L.finish(\"fireball\",s,t)})},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},icebolt:{name:\"icebolt\",description:\"<b>Cost: 10 mana</b> - The user fires a bolt of ice at the enemy, dealing moderate magical water damage and applying <u>Frozen</u> [-20% SPD, 4T duration] to the enemy. If <u>Scorched</u> is applied, instead deal 1.5x damage, consume <u>Scorched</u> and apply <u>Soaked</u> [-20% SPD, +10% water defence, 4T duration].\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{const n=L.icebolt;e.mana=e.mana-10;const s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=N.checkStacks(a.debuffs,\"scorched\");o>0&&(s.damage=Math.floor(1.5*s.damage));const r=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} fired a bolt of ice at the enemy!`,s);p(r,\"battle\",()=>{const n={name:\"frozen\",speed:-.2,duration:4,element:\"water\",types:[\"debuff\"],apply_text:\" is frozen!\",max_stacks:1,elemental:{offence:{},defence:{}}},r={name:\"soaked\",speed:-.2,duration:4,element:\"water\",types:[\"debuff\"],apply_text:\" is soaked!\",max_stacks:1,elemental:{offence:{},defence:{water:10}}};0==s.eva&&(o>0?(N.applyBuff(r,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"scorched\")):N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\")),a.health-=s.damage;const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"icebolt\",s,t)})},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},thunder_jolt:{name:\"thunder jolt\",description:\"<b>Cost: 10 mana</b> - The user shocks the opponent with lightning, dealing moderate magical thunder damage. Applies <u>Shocked</u> [-20% MDEF, +10% thunder defence, 4T duration] to the enemy. If <u>Soaked</u> is applied, instead consume <u>Soaked</u> and deal 1.5x damage (not applying <u>Shocked</u>). If <u>Frozen</u> is applied, consume <u>Frozen</u> and apply <u>Gailic Shock</u> [-30% MATK, 4T duration] to the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"thunder\",def_element:\"thunder\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{const n=L.thunder_jolt;e.mana=e.mana-10;const s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=N.checkStacks(a.debuffs,\"soaked\");o>0&&(s.damage=Math.floor(1.5*s.damage));const r=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} fired a jolt of electricity at the enemy!`,s);p(r,\"battle\",()=>{const n={name:\"shocked\",mdef:-.2,duration:4,element:\"thunder\",types:[\"debuff\"],apply_text:\" is shocked!\",max_stacks:1,elemental:{offence:{},defence:{thunder:10}}},r={name:\"gailic shock\",matk:-.3,duration:4,element:\"thunder\",types:[\"debuff\"],apply_text:\" is shocked and frozen!\",max_stacks:1,elemental:{offence:{},defence:{}}};if(0==s.eva){N.checkStacks(a.debuffs,\"frozen\")>0?(N.applyBuff(r,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"frozen\")):0==o?N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"):N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"soaked\")}a.health-=s.damage;const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"thunder_jolt\",s,t)})},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},lesser_quake:{name:\"lesser quake\",description:\"<b>Cost: 10 mana</b> - The user causes small tremors in the earth, dealing moderate magical earth damage. Applies <u>Earthed</u> [-20% ATK, +10% earth defence, 4T duration] to the enemy. If <u>Shocked</u> is applied, consumes <u>Shocked</u> and instead applies <u>De-energised</u> [-30% ATK, 4T duration]. If <u>Frozen</u> is applied, instead consumes <u>Frozen</u> and instead applies <u>Gailic Earth</u> [-30% MDEF, 4T duration]\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{const n=L.lesser_quake;e.mana=e.mana-10;const s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} causes the ground to shake beneath the enemy!`,s);p(o,\"battle\",()=>{const n={name:\"earthed\",atk:-.2,duration:4,element:\"earth\",types:[\"debuff\"],apply_text:\" is earthed!\",max_stacks:1,elemental:{offence:{},defence:{earth:10}}},o={name:\"gailic earth\",mdef:-.3,duration:4,element:\"earth\",types:[\"debuff\"],apply_text:\" is frozen and earthed!\",max_stacks:1,elemental:{offence:{},defence:{}}},r={name:\"de-energised\",atk:-.3,duration:4,element:\"earth\",types:[\"debuff\"],apply_text:\" is de-energised!\",max_stacks:1,elemental:{offence:{},defence:{}}};if(0==s.eva){const s=N.checkStacks(a.debuffs,\"frozen\"),l=N.checkStacks(a.debuffs,\"shocked\");s>0?(N.applyBuff(o,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"frozen\")):l>0?(N.applyBuff(r,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"shocked\")):N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\")}a.health-=s.damage;const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"lesser_quake\",s,t)})},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},arcane_shield:{name:\"arcane shield\",description:\"<b>Cost: 20 mana</b> - The user bolsters their defences with arcane energy, applying <u>Arcane Shield</u> [50% mitigation, 1T duration] and <u>Arcane Protection</u> [20% mitigation, +20% DEF/MDEF, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=20;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} shields themselves with magical energy.`,1]];p(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);N.applyBuff({name:\"arcane shield\",mitigation:.5,duration:1,element:\"none\",types:[\"buff\"],apply_text:\" is protected by arcane energy.\",max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),N.applyBuff({name:\"arcane protection\",mitigation:.2,def:.2,mdef:.2,duration:3,element:\"none\",types:[\"buff\"],apply_text:\" is protected by residual arcane energy.\",max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),L.finish(\"arcane_shield\",n,t)})},cost:(e,a)=>e.mana>=20||\"Insufficient mana!\"},stalwart_strike:{name:\"stalwart strike\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy while bolstering their defences. Deals low physical weapon element damage and applies <u>Stalwart</u> [+20% DEF/MDEF, 3T duration]. Also removes one debuff at random from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.7,use:(e,a,t)=>{e.stamina=e.stamina-35;const n=L.stalwart_strike,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} struck the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;N.applyBuff({name:\"stalwart\",def:.2,mdef:.2,duration:3,element:\"physical\",types:[\"buff\"],apply_text:\" is stalwart!\",max_stacks:1},100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\");const n=JSON.parse(JSON.stringify(e.debuffs));for(var o=!1;n.length>0&&0==o;){var r=Math.round(Math.random()*n.length-1);r<0&&(r=0),n[r].hasOwnProperty(\"unstrippable\")?n.splice(r,1):(o=!0,N.stripBuff(\"player\"==t?N.getPlayer().debuffs:N.getEnemy().debuffs,n[r].name))}const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"stalwart_strike\",s,t)})},cost:(e,a)=>e.stamina>=35||\"Insufficient stamina!\"},protect:{name:\"protect\",description:\"<b>Cost: 20 SP</b> - The user defends themselves with mystical energy. Applies <u>Protect</u> [70% mitigation, 1T duration] to the user, and heals them a little (heal based on MDEF)\",off_stat:\"mdef\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:1,def_mod:0,dmg_mod:1,use:(e,a,t)=>{e.sp-=20;const n=L.protect,s=L.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,!1),o=[[`<br>${e.name} protects themselves.`,1],[`${e.name} gained ${s.damage} HP!`]];p(o,\"battle\",()=>{e.health+=s.damage;const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o);N.applyBuff({name:\"protect\",mitigation:.7,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is under mystical protection..\",max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),L.finish(\"protect\",s,t)})},cost:(e,a)=>e.sp>=20||\"Insufficient SP!\"},bulwark:{name:\"bulwark\",description:\"<b>Cost: 7 mana</b> - The user resolves to stand firm in the face of all danger. Applies <u>Bulwark</u> [+25% ATK/DEF/MDEF, -20% SPD, 4T duration, stacks to 3] and <u>Lesser Protection</u> [15% mitigation, 1T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=7;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} steadies themselves..`,1]];p(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);N.applyBuff({name:\"bulwark\",speed:-.2,atk:.25,def:.25,mdef:.25,duration:4,element:\"physical\",types:[\"buff\"],apply_text:\" is standing their ground!\",max_stacks:3},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),N.applyBuff({name:\"lesser protection\",mitigation:.15,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is slightly protected!\",max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),L.finish(\"bulwark\",n,t)})},cost:(e,a)=>e.mana>=7||\"Insufficient mana!\"},guard_conversion:{name:\"guard conversion\",description:\"<b>Cost: 10 stamina</b> - The user converts all defensive energy into pure energy. Removes all buffs that increase DEF or MDEF from the user. For each one removed, the user gains SP equal to the DEF/MDEF (higher one is taken) percentage increase. Then, grants an additional action if at least one buff was removed\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.stamina-=10;L.guard_conversion;const n={crit:!1,eva:!1,damage:0},s=[[`<br>${e.name} is converting their energy..`,1]];p(s,\"battle\",()=>{var s=!1;const o=JSON.parse(JSON.stringify(e.buffs));for(;o.length>0;){var r=Math.round(Math.random()*o.length-1);if(r<0&&(r=0),o[r].hasOwnProperty(\"unstrippable\"))o.splice(r,1);else if(o[r].hasOwnProperty(\"def\")||o[r].hasOwnProperty(\"mdef\")){if(o[r].def>0||o[r.mdef>0]){var l=null!=o[r].def?100*o[r].def:0,i=null!=o[r].mdef?100*o[r].def:0;i>l&&(l=i),m(`Gained ${Math.floor(l)} SP! (${e.name})`),e.sp+=Math.floor(l),e.sp>e.max_sp&&(e.sp=e.max_sp),N.stripBuff(\"player\"==t?N.getPlayer().buffs:N.getEnemy().buffs,o[r].name),o.splice(r,1),s=!0}}else o.splice(r,1)}1==s&&(N.getPlayer().actions+=1,m(\"Gained an action!\"));const c=\"enemy\"==t?a:e,d=\"enemy\"==t?e:a;N.uploadChanges(c,d),L.finish(\"challenge\",n,t)})},cost:(e,a)=>e.stamina>=10||\"Insufficient stamina!\"},debilitate:{name:\"debilitate\",description:\"<b>Cost: 25 SP</b> - The user strikes the enemy in a way that removes a portion of their power, dealing low physical weapon element damage and removing one random buff from the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{const n=L.debilitate;e.sp-=25;const s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<br>${e.name} strips the enemy of their power!`,s);p(o,\"battle\",()=>{if(a.health-=s.damage,0==s.eva){const e=JSON.parse(JSON.stringify(a.buffs));for(var n=!1;e.length>0&&0==n;){var o=Math.round(Math.random()*e.length-1);e[o].hasOwnProperty(\"unstrippable\")?e.splice(o,1):(n=!0,N.stripBuff(\"player\"==t?N.getEnemy().buffs:N.getPlayer().buffs,e[o].name))}}const r=\"enemy\"==t?a:e,l=\"enemy\"==t?e:a;N.uploadChanges(r,l),L.finish(\"attack\",s,t)})},cost:(e,a)=>e.sp>=25||\"Insufficient SP!\"},swift_strike:{name:\"swift strike\",description:\"<b>Cost: 9 mana - </b> The user strikes the enemy quickly and lightly, dealing moderate physical weapon element damage and applying <u>Swift</u> to the user [+20% SPD, -5% ATK, 2T duration]. If <u>Swift</u> is already applied, consumes <u>Swift</u> and applies <u>Footwork</u> [0.2/20% evasion, 2T duration].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{e.mana=e.mana-9;const n=L.swift_strike;var s=L.getWeaponElement(e);const o=L.calcDamage(e,a,n.off_stat,n.def_stat,s,s,n.off_mod,n.def_mod,n.dmg_mod),r=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} slashed rapidly at the enemy!`,o);p(r,\"battle\",()=>{a.health-=o.damage;const n={name:\"swift\",duration:2,atk:-.05,speed:.2,element:\"physical\",types:[\"buff\"],apply_text:\" is swift!\",max_stacks:1},s={name:\"footwork\",duration:2,evasion:.2,element:\"physical\",types:[\"buff\"],apply_text:\" has enhanced footwork!\",max_stacks:1};N.checkStacks(e.buffs,\"swift\")>0?(N.stripBuff(\"player\"==t?N.getPlayer().buffs:N.getEnemy().buffs,\"swift\"),N.applyBuff(s,100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\")):N.applyBuff(n,100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\");const r=\"enemy\"==t?a:e,l=\"enemy\"==t?e:a;N.uploadChanges(r,l),L.finish(\"swift_strike\",o,t)})},cost:(e,a)=>e.mana>=9||\"Insufficient mana\"},shinobi_strike:{name:\"shinobi strike\",description:\"<b>Cost: 10 stamina</b> - Strike the enemy and blend into the shadows. Deals low physical weapon element damage andapplies <u>Stealth</u> [-5% ATK, +20% SPD, 3T duration] to the user. <u>Stealth</u> also changes the effects of some other skills.If <u>Swift</u> and <u>Stealth</u> are applied to the user, consumes an additional 15 stamina (if possible) and grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{e.stamina=e.stamina-10;const n=L.shinobi_strike;var s=L.getWeaponElement(e);const o=L.calcDamage(e,a,n.off_stat,n.def_stat,s,s,n.off_mod,n.def_mod,n.dmg_mod),r=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} slashes the enemy before blending into the shadows..`,o);p(r,\"battle\",()=>{a.health-=o.damage;const n=N.checkStacks(e.buffs,\"swift\"),s=N.checkStacks(e.buffs,\"stealth\");n>0&&s>0&&(N.getPlayer().actions+=1,m(\"Gained an action!\"),e.stamina-=15,e.stamina<0&&(e.stamina=0)),N.applyBuff({name:\"stealth\",duration:3,atk:-.05,speed:.2,desc:\"Used to change the effects of other skills.\",element:\"physical\",types:[\"buff\"],apply_text:\" has blended into the shadows.\",max_stacks:1},100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\");const r=\"enemy\"==t?a:e,l=\"enemy\"==t?e:a;N.uploadChanges(r,l),L.finish(\"shinobi_strike\",o,t)})},cost:(e,a)=>e.stamina>=10||\"Insufficient stamina!\"},crippling_blow:{name:\"crippling blow\",description:\"<b>Cost: 12 mana</b> - Deals considerable physical weapon element damage. If <u>Stealth</u> is applied to the user, consumes it and applies <u>Weakened</u> [-30% DEF/MDEF, 3T duration] to the enemy. <u>Weakened</u> does not stack, and cannot be active as the same time as the <u>Feeble</u> debuff.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,a,t)=>{e.mana=e.mana-12;const n=L.crippling_blow,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} strikes the enemy with a special technique!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"weakened\",duration:3,def:-.3,mdef:-.3,element:\"physical\",types:[\"buff\"],apply_text:\" is weakened!\",max_stacks:1};if(0==s.eva){N.checkStacks(e.buffs,\"stealth\")>0&&(N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getPlayer().buffs:N.getEnemy().buffs,\"stealth\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer.debuffs,\"feeble\"))}const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;N.uploadChanges(o,r),L.finish(\"crippling_blow\",s,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},enfeebling_blow:{name:\"enfeebling blow\",description:\"<b>Cost: 12 mana</b> - Deals considerable physical weapon element damage. If <u>Stealth</u> is applied to the user, consumes it and applies <u>Feeble</u> [30% ATK/MATK, 3T duration] to the enemy. <u>Feeble</u> does not stack, and cannot be active at the same time as the <u>Weakened</u> debuff.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,a,t)=>{e.mana=e.mana-12;const n=L.enfeebling_blow,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} strikes the enemy with a special technique!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"feeble\",duration:3,atk:-.3,matk:-.3,element:\"physical\",types:[\"buff\"],apply_text:\" is enfeebled!\",max_stacks:1};if(0==s.eva){N.checkStacks(e.buffs,\"stealth\")>0&&(N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==t?N.getPlayer().buffs:N.getEnemy().buffs,\"stealth\"),N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer().debuffs,\"weakened\"))}const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;N.uploadChanges(o,r),L.finish(\"enfeebling_blow\",s,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},shadow_strike:{name:\"shadow strike\",description:\"<b>Cost: 25 SP</b> - The user emerges from the shadows and strikes the opponent, dealing moderate physical weapon element damage. If <u>Weakened</u> is applied to the target, consumes it and applies three stacks of <u>standard ATK and MATK buff</u> [+10%ATK/MATK, 3T duration, stacks 5]. If <u>Feeble</u> is applied to the target, consumes it and applies three stacks of <u>standard DEF and MDEF buff</u> [+10 DEF/MDEF, 3T duration, stacks to 5]. Gain an action if either are applied. Otherwise, consumes all stamina of the user and grants them two extra actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{e.sp=e.sp-25;const n=L.shadow_strike,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} strikes from the shadows!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n=N.checkStacks(a.debuffs,\"feeble\"),o=N.checkStacks(a.debuffs,\"weakened\");if(n>0){if(0==s.eva){for(var r=0;r<3;r++)N.applyBuff(O.mdefup,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\"),N.applyBuff(O.defup,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\");N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer().debuffs,\"feeble\"),\"player\"==t?N.getPlayer().actions+=1:N.getEnemy().actions+=1}}else if(o>0){if(0==s.eva){for(r=0;r<3;r++)N.applyBuff(O.atkup,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\"),N.applyBuff(O.matkup,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\");N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer().debuffs,\"weakened\"),\"player\"==t?N.getPlayer().actions+=1:N.getEnemy().actions+=1}}else\"player\"==t?(N.getPlayer().actions+=2,e.stamina=0,m(\"Gained an action!\")):(N.getEnemy().actions+=2,e.stamina=0,m(\"The enemy gained an action!\"));const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"shadow_strike\",s,t)})},cost:(e,a)=>e.sp>=25||\"Insufficient SP!\"},splash:{name:\"splash\",description:\"The user splashes at the enemy with high-pressure liquid, dealing low physical water damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,a,t)=>{const n=L.splash,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} splashed the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o),L.finish(\"splash\",s,t)})},cost:(e,a)=>!0},guard_break:{name:\"guard break\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy with a blunt edge, dealing low physical weapon element damage but possibly with a 75% chance to apply <u>Guard Broken</u> [-10% DEF, 5T duration, stacks to 3].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{e.stamina=e.stamina-35;const n=L.guard_break,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} struck the enemy with a blunt edge!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"guard broken\",def:-.1,duration:5,element:\"physical\",types:[\"debuff\"],apply_text:\"'s guard has been broken!\",max_stacks:3,elemental:{offence:{},defence:{}}};0==s.eva&&N.applyBuff(n,75,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\");const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;N.uploadChanges(o,r),L.finish(\"guard_break\",s,t)})},cost:(e,a)=>e.stamina>=35||\"Insufficient stamina!\"},rush_attack:{name:\"rush attack\",description:\"<b>Cost: 10 stamina</b> - The user strikes the enemy several times, dealing 3 hits of low physical weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{e.stamina=e.stamina-10;const n=L.rush_attack;p([[`${e.name} strikes the enemy multiple times!`,1]],\"battle\",()=>{var s,o=0,r=0;const l=()=>{s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),p(L.prepareAttackMessage(e,a,\"\",s),\"battle\",()=>{a.health-=s.damage;const n=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(n,i),o+=s.damage,2==r?(s.damage=o,L.finish(\"rush_attack\",s,t)):(r++,l())})};l()})},cost:(e,a)=>e.stamina>=10||\"Insufficient stamina!\"},health_potion:{name:\"health potion\",description:\"Drink a health potion, recovering 20% of one's health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=30;L.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.health/4)},s=[[`${e.name} Drank a health potion!`,1],[`recovered ${n.damage} HP!`,1]];p(s,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o),L.finish(\"health_potion\",n,t)})},cost:(e,a)=>e.mana>=30||\"Insufficient mana!\"},rend:{name:\"rend\",description:\"<b>Cost: 20 stamina</b> -  The user slashes at the enemy viciously, dealing moderate physical damage and applying <u>Bleed</u> [-20% ATK, 15% HP DOT, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{e.stamina=e.stamina-20;const n=L.rend,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} claws at its target viciously!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"bleed\",atk:-.2,duration:3,element:\"physical\",types:[\"debuff\"],apply_text:\" is bleeding!\",max_stacks:1,damage:[\"percentile\",15]};0==s.eva&&N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\");const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;N.uploadChanges(o,r),L.finish(\"rend\",s,t)})},cost:(e,a)=>e.stamina>=20||\"Insufficient stamina!\"},poison_claws:{name:\"poison claws\",description:\"<b>Cost: 12 mana</b> - Create a wound with sharp poisonous claws. The poison seeps into the enemy, applying <u>Viridian Toxin</u> [-10% SPD, 5% HP DOT, 3T duration, stacks to 3]\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{e.stamina=e.stamina-20;const n=L.poison_claws,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} envenoms the target!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"viridian toxin\",speed:-.1,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" is envenomed!\",max_stacks:3,damage:[\"percentile\",5]};0==s.eva&&N.applyBuff(n,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\");const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;N.uploadChanges(o,r),L.finish(\"poison_claws\",s,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},camoflague:{name:\"camoflague\",description:\"<b>Cost: 12 mana</b> - The user envelops themselves in a camoflague that makes them hard to see and react to. Applies <u>Camoflague</u> [+30% evasion, +70% resistance, +30% SPD, 2T duration].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=12;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} camoflagues themselves.`,1]];p(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);N.applyBuff({name:\"camoflague\",evasion:.3,resistance:70,speed:.3,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is camoflagued!\",max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),L.finish(\"camoflague\",n,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},engulf:{name:\"engulf\",description:\"<b>Cost: 10 mana</b> - Absorb the enemy's power. Deals low physical damage and removes all buffs from the enemy. For each buff removed, applies <u>Empowered</u> [+10% ATK/DEF/MATK/MDEF/SPD, 2T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{const n=L.engulf;e.mana-=10;const s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<br>${e.name} engulfs the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"empowered\",atk:.1,matk:.1,mdef:.1,def:.1,speed:.1,duration:2,element:\"dark\",types:[\"buff\"],apply_text:\" is empowered!\",max_stacks:99};if(0==s.eva){const s=JSON.parse(JSON.stringify(a.buffs));for(;s.length>0;){var o=Math.round(Math.random()*s.length)-1;o<0&&(o=0),s[o].hasOwnProperty(\"unstrippable\")?s.splice(o,1):(N.stripBuff(\"player\"==t?N.getEnemy().buffs:N.getPlayer().buffs,s[o].name),N.applyBuff(n,100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\"),s.splice(o,1))}}const r=\"enemy\"==t?a:e,l=\"enemy\"==t?e:a;N.uploadChanges(r,l),L.finish(\"engulf\",s,t)})},cost:(e,a)=>e.mana>=10||\"Insufficient SP!\"},dark_pact:{name:\"dark pact\",description:\"<b>Cost: 18 mana</b> - The user calls upon their pact with the dark forest to strengthen them. At the cost of 5% HP, applies three stacks each of standard ATK/MATK/SPEED buff with increased duration [+10% ATK/MATK/SPEED, 3+3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={damage:e.max_health/20,crit:!1,eva:!1,note:\"self-inflicted damage\"},s=[[`<br>${e.name} forms a covenant with darkness..`,1],[`<br>${e.name} took damage! (${e.max_health/20})`]];p(s,\"battle\",()=>{e.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);const r={...O.matkup};r.duration=6;const l={...O.atkup};l.duration=6;const i={...O.spdup};i.duration=6;for(var c=0;c<3;c++)N.applyBuff(r,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),N.applyBuff(l,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),N.applyBuff(i,100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\");L.finish(\"dark_pact\",n,t)})},cost:(e,a)=>e.health>e.max_health/20&&e.mana>=18||\"Insufficient health/mana!\"},dark_howl:{name:\"dark howl\",description:\"<b>Cost: 15 mana</b> - The user lets out a howl imbued with malevolent magic. Deals low magical dark damage and has a 40% chance each to apply <u>Fear</u> [-100% evasion, -20% SPD, -10% ATK/DEF/MATK/MDEF], <u>Dark Curse</u> [+70% dark defence], and <u>Elemental Weaken</u> [-10% all elemental offences]. Each debuff lasts 2 turns and stacks twice.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:.6,use:(e,a,t)=>{e.mana=e.mana-15;const n=L.dark_howl,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} lets out a dark howl!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"fear\",duration:2,def:-.1,mdef:-.1,matk:-.1,atk:-.1,speed:-.2,evasion:-1,element:\"dark\",types:[\"debuff\"],apply_text:\" is rapt with fear!\",max_stacks:2},o={name:\"dark curse\",element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by darkness!\",elemental:{defence:{dark:70},offence:{}},duration:2,max_stacks:2},r={name:\"elemental weaken\",element:\"dark\",types:[\"debuff\"],apply_text:\"'s elemental strength has decreased!'\",elemental:{defence:{},offence:{physical:-10,fire:-10,water:-10,earth:-10,wind:-10,thunder:-10,dark:-10,light:-10}},duration:2,max_stacks:2};0==s.eva&&(N.applyBuff(n,40,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.applyBuff(o,40,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),N.applyBuff(r,40,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"));const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"dark_howl\",s,t)})},cost:(e,a)=>e.mana>=15||\"Insufficient mana!\"},nox_curse:{name:\"nox curse\",description:\"<b>Cost: 20 mana</b> - The user curses the opponent, dealing moderate dark magical damage and removing all debuffs. For each debuff previously applied, applies a stack of <u>Nox Curse</u> to the enemy [15% HP DOT, 2T duration, stacks to 99]. <u>Nox Curse</u> has a base 300% apply chance. This skill's effects will proc even if the skill misses.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1.15,use:(e,a,t)=>{e.mana=e.mana-10;const n=L.nox_curse,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} curses the opponent!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"nox curse\",duration:2,damage:[\"percentile\",15],element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by the shadows...\",max_stacks:99},o=JSON.parse(JSON.stringify(a.debuffs));for(;o.length>0;){var r=Math.round(Math.random()*o.length)-1;r<0&&(r=0),o[r].hasOwnProperty(\"unstrippable\")?o.splice(r,1):(N.stripBuff(\"player\"==t?N.getEnemy().debuffs:N.getPlayer().debuffs,o[r].name),N.applyBuff(n,100,\"player\"==t?N.getPlayer():N.getEnemy(),\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\"),o.splice(r,1))}const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"nox curse\",s,t)})},cost:(e,a)=>e.mana>=20||\"Insufficient mana!\"},boar_rush:{name:\"boar rush\",description:\"The user rushes at the enemy and strikes them powerfully. Deals notable physical damage and applies <u>Boar Rush</u> [+10% SPD, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,a,t)=>{const n=L.boar_rush,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} rushed at the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;N.applyBuff({name:\"boar rush\",duration:4,speed:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased!\",max_stacks:3},100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\"),\"player\"==t?(N.getPlayer().sp+=5,N.getPlayer().sp>N.getPlayer().max_sp&&(N.getPlayer().sp,N.getPlayer().max_sp),m(`${e.name} gained 5 SP!`)):(N.getEnemy().sp+=5,N.getEnemy().sp>N.getEnemy().max_sp&&(N.getEnemy().sp,N.getEnemy().max_sp),m(`${e.name} gained 5 SP!`));const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o),L.finish(\"boar_rush\",s,t)})},cost:(e,a)=>!0},boar_strike:{name:\"boar strike\",description:\"The user strikes the enemy with their axe. Deals above average physical damage and applies <u>Boar Strike</u> [+10% ATK, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.4,use:(e,a,t)=>{const n=L.boar_strike,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} crashed their axe into the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;N.applyBuff({name:\"boar strike\",duration:4,atk:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s attack increased!\",max_stacks:3},100,\"player\"==t?e:N.getPlayer(),\"player\"==t?N.getPlayer():N.getEnemy(),\"buffs\"),\"player\"==t?(N.getPlayer().sp+=5,N.getPlayer().sp>N.getPlayer().max_sp&&(N.getPlayer().sp,N.getPlayer().max_sp),m(`${e.name} gained 5 SP!`)):(N.getEnemy().sp+=5,N.getEnemy().sp>N.getEnemy().max_sp&&(N.getEnemy().sp,N.getEnemy().max_sp),m(`${e.name} gained 5 SP!`));const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o),L.finish(\"boar_strike\",s,t)})},cost:(e,a)=>!0},flare_impact:{name:\"flare impact\",description:\"<b>Cost: 20 SP</b> - The user ignites their axe and smashes the enemy, dealing high physical fire damage and applying <u>Burning</u> [5% HP DOT, 5T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:2.1,use:(e,a,t)=>{e.sp=e.sp-20;const n=L.flare_impact,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} ignited their axe and smashed the enemy!`,s);p(o,\"battle\",()=>{a.health-=s.damage;N.applyBuff({name:\"burning\",duration:5,element:\"fire\",types:[\"debuff\"],apply_text:\" is burning!\",damage:[\"percentile\",1],max_stacks:1},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getEnemy():N.getPlayer(),\"debuffs\");const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o),L.finish(\"flare_impact\",s,t)})},cost:(e,a)=>e.sp>=20||\"Insufficient mana!\"},ignis_destroyer:{name:\"ignis destroyer\",description:\"The user strikes the enemy with a great fireball and a flaming axe simulatenously, dealing massive fire physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:3.2,use:(e,a,t)=>{const n=L.ignis_destroyer,s=L.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,!1),o=L.prepareAttackMessage(e.name,a.name,`<Br>${e.name} attempts to obliterate the enemy with flames!`,s);p(o,\"battle\",()=>{a.health-=s.damage;const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(n,o),L.finish(\"ignis_destroyer\",s,t)})},cost:(e,a)=>!0},boar_haste:{name:\"boar haste\",description:\"The user enchants their speed with powerful magic, applying <u>Boar Haste</u> [+50% SPD, unstrippable, 999T duration]  to themselves.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} enchants themselves with powerful magic!`,1]];p(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;N.uploadChanges(s,o);N.applyBuff({name:\"boar haste\",speed:.5,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased greatly!\",max_stacks:1,unstrippable:!0,duration:999},100,\"player\"==t?N.getPlayer():e,\"player\"==t?N.getPlayer():e,\"buffs\"),L.finish(\"camoflague\",n,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},true_cleanse:{name:\"true cleanse\",description:\"<b>Cost: 10 SP</b> - The user cleanses their spirit completely. Removes all buffs and debuffs from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.sp=e.sp-10;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} cleanses themselves completely.`,1]];p(s,\"battle\",()=>{var s,o;a.health-=n.damage,\"player\"==t?(s=N.getPlayer().buffs,o=N.getEnemy().debuffs):(s=N.getEnemy().buffs,o=N.getEnemy().debuffs);for(var r=0;r<s.length;r++){const e=s[r];1==N.stripBuff(\"player\"==t?N.getPlayer().buffs:N.getEnemy().buffs,e.name)&&r--}for(r=0;r<o.length;r++){const e=o[r];1==N.stripBuff(\"player\"==t?N.getPlayer().debuffs:N.getEnemy().debuffs,e.name)&&r--}const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;N.uploadChanges(l,i),L.finish(\"true_cleanse\",n,t)})},cost:(e,a)=>e.sp>=10||\"Insufficient SP!\"}},O={defdown:{name:\"DEF down\",def:-.1,duration:3,element:\"none\",types:[\"debuff\"],apply_text:\"'s defence was decreased!\",max_stacks:5},defup:{name:\"DEF up\",def:.1,duration:3,element:\"none\",types:[\"buff\"],apply_text:\"'s defence was increased!\",max_stacks:5},mdefdown:{name:\"MDEF down\",mdef:-.1,duration:3,types:[\"debuff\"],apply_text:\"'s magical defence was decreased!\",max_stacks:5},mdefup:{name:\"MDEF up\",mdef:.1,duration:3,apply_text:\"'s magical defence was increased!\",max_stacks:5},atkup:{name:\"ATK up\",atk:.1,duration:3,types:[\"buff\"],apply_text:\"'s attack was increased!\",max_stacks:5},matkup:{name:\"MATK up\",matk:.1,duration:3,types:[\"buff\"],apply_text:\"'s magical attack was increased!\",max_stacks:5},spdup:{name:\"SPEED up\",speed:.1,duration:3,element:\"none\",types:[\"buff\"],apply_text:\"'s speed was increased!\",max_stacks:5}},q=(e,a)=>{var t=0;return e.forEach(e=>{e.skill==a&&t++}),t},C=e=>{var a=[];return e.forEach(e=>{a.push(e.damage.damage)}),a},R=e=>{var a=JSON.parse(JSON.stringify(e));console.log(\"PRINTING BUFFS COPY\"),console.log(a),console.log(e);for(var t=0,n=0;n<a.length;n++){var s=a[n].name;t+=1;for(var o=0;o<a.length;o++)a[o].name==s&&(a.splice(o,1),o-=1,n-=1)}return t},B=(e,a)=>{for(var t=!1;0==t;){var n=Math.floor(Math.random()*a.length);1==L[a[n]].cost(e)&&(t=!0,L[a[n]].use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))}};t(0);const D={slime:{stats:{base_level:1,max_health:50,atk:30,def:30,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:50,wind:50,thunder:150,dark:75,light:75}},ai:\"slime\",mode:\"slime\",skills:[\"splash\"],name:\"Slime\",baseLevel:1,exp:100,gold:10,drops:[[\"slime_ball\",1e3,2,5]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions.\"}},grey_wolf:{stats:{base_level:3,max_health:70,atk:30,def:40,matk:30,mdef:30,speed:45,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:80,wind:100,thunder:100,dark:100,light:100}},ai:\"grey_wolf\",mode:\"grey_wolf\",skills:[\"attack\"],name:\"Grey Wolf\",baseLevel:1,exp:150,gold:15,drops:[[\"grey_wolf_pelt\",500,3,6],[\"sharp_claw\",200,1,2]],desc:\"A wolf with bristling grey fur. Despite its aggression, the wolf has a sort of rough beauty about it. Seems to attack indiscriminately.\"}},wayward_traveler:{stats:{max_health:500,base_level:10,atk:65,def:55,matk:40,mdef:45,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:10,resistance:10,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{physical:90,fire:110,water:110,earth:110,wind:110,thunder:110,dark:110,light:110}},ai:\"wayward_traveler\",mode:\"wayward_traveler\",skills:[\"attack\",\"guard_break\",\"rush_attack\",\"healing_potion\"],name:\"Wayward Traveler\",baseLevel:5,exp:300,gold:50,drops:[[\"damaged_sword\",50,1,1],[\"damaged_armour\",50,1,1],[\"damaged_pantaloons\",50,1,1],[\"damaged_boots\",50,1,1],[\"damaged_helm\",50,1,1],[\"wanderer_memorabilia\",1e3,2,3]],desc:\"A traveler who seems to have lost their way. From their responsive battle style and analytic glances, you infer that they seem to have some kind of specific strategy in mind.\"}},greater_slime:{stats:{base_level:5,max_health:150,atk:60,def:60,matk:70,mdef:60,speed:22,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:70,fire:0,water:10,earth:50,wind:50,thunder:200,dark:75,light:75}},ai:\"greater_slime\",mode:\"greater_slime\",skills:[\"splash\",\"icebolt\"],name:\"Greater Slime\",exp:200,gold:15,drops:[[\"slime_ball\",1e3,5,8]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions. Seems larger and more experienced(?) than most slimes.\"}},lesser_water_klastera:{stats:{base_level:6,max_health:125,atk:60,def:70,matk:70,mdef:70,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:50,evasion:0,max_mana:200,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:150,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:80,earth:80,wind:80,thunder:150,dark:80,light:80}},ai:\"lesser_water_klastera\",mode:\"lesser_water_klastera\",skills:[\"icebolt\",\"arcane_shield\",\"channel_health\",\"splash\"],name:\"Lesser Water Klastera\",exp:350,gold:15,drops:[[\"aquus_cluster\",500,1,3],[\"manasoul\",10,1,1],[\"water_orb\",1,1,1]],desc:\"A being comprised of only water. It's body seems to be some kind of deep blue semi-solid. It's only facial feature is white, oval eyes that convey no sense of emotion. One might infer from its formulaic structure that the same could be said about its battle style.\"}},young_water_lizard:{stats:{base_level:7,max_health:100,atk:60,def:60,matk:40,mdef:50,speed:70,crit_chance:.3,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:100,wind:120,thunder:120,dark:100,light:100}},ai:\"young_water_lizard\",mode:\"young_water_lizard\",skills:[\"attack\",\"rush_attack\",\"camoflague\"],name:\"Young Water Lizard\",exp:400,gold:20,drops:[[\"weak_membrane\",500,1,3],[\"tiny_lizard_tail\",250,1,1],[\"light_absorbant_eye\",100,1,2]],desc:\"A relatively small reptile. It has clearly rough skin, although the abundant tiny spikes all over its body are clearly conscious designs of nature. Perhaps due to the size difference, it seems wary of any attacks.\"}},red_slime:{stats:{base_level:11,max_health:250,atk:70,def:70,matk:70,mdef:70,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:150,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:150,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:50,earth:70,wind:70,thunder:70,dark:60,light:130}},ai:\"red_slime\",mode:\"red_slime\",skills:[\"fireball\",\"guard\",\"engulf\",\"attack\"],name:\"Red Slime\",exp:500,gold:35,drops:[[\"red_slime_ball\",1e3,5,8]],desc:\"A red slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Seems to be wary of boons you grant yourself.\"}},venomous_wolf:{stats:{base_level:14,max_health:210,atk:80,def:60,matk:70,mdef:55,speed:100,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:170,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"venemous_wolf\",mode:\"venemous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Venemous Wolf\",exp:550,gold:30,drops:[[\"sharp_claw\",500,1,2],[\"venomous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build, although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately.\"}},dark_beast:{stats:{base_level:18,max_health:300,atk:90,def:70,matk:80,mdef:80,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:.1,max_mana:120,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:100,wind:100,thunder:100,dark:120,light:100},defence:{none:100,physical:80,fire:100,water:100,earth:100,wind:100,thunder:100,dark:0,light:150}},ai:\"dark_beast\",mode:\"dark_beast\",skills:[\"attack\",\"rend\",\"rush_attack\",\"nox_curse\",\"dark_howl\",\"hex\"],name:\"Dark Beast\",exp:800,gold:10,drops:[[\"sharp_claw\",500,1,2],[\"venemous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"A creature with a wolf-like structure, but with a larger upper body. It's entire body is shrouded in an oppressive mist that makes you uncomfortable. Little regarding its disposition can be inferred from its movements besides its apparent intelligence compared to its wolf 'bretheren'.\"}},flame_minotaur:{stats:{base_level:30,max_health:5e3,atk:110,def:80,matk:80,mdef:80,speed:75,crit_chance:0,crit_damage:1.5,effectiveness:30,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:120,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:0,water:130,earth:90,wind:120,thunder:80,dark:110,light:90}},ai:\"flame_minotaur\",mode:\"flame_minotaur\",mode2:\"phase one\",skills:[\"boar_strike\",\"boar_rush\",\"flame_impact\",\"ignis_destroyer\",\"boar_haste\",\"engulf\",\"true_cleanse\"],name:\"Flame Minotaur\",exp:5e3,gold:2500,drops:[[\"flamme_kaiser\",1e3,1,1]],desc:\"A tall beast of extremely muscular built. It is difficult to fully appreciate the stature of the minotaur, as it is several times taller than you. However you can feel it's scorching breath, and see it's giant, rune-encrusted axe. Nothing can about it's mannerisms can be inferred from its appearance besides its great power.\"}}},F={slime:()=>{const e=N.getEnemy().modeBattle;if(\"aggressive\"==e)L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else if(\"defensive\"==e)L.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{Math.random()>.5?L.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}},grey_wolf:()=>{const e=N.getEnemy();B(e,e.skills)},wayward_traveler:()=>{const e=N.getEnemy().modeBattle;console.log(\"this was called\"),console.log(e),\"wary\"==e?L.health_potion.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"desperate\"==e||\"allout\"==e?1==L.rush_attack.cost(N.getEnemy(),N.getPlayerAdd(N.getPlayer()))?L.rush_attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"preparing\"==e&&(1==L.guard_break.cost(N.getEnemy(),N.getPlayerAdd(N.getPlayer()))?L.guard_break.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))},greater_slime:()=>{const e=N.getEnemy().modeBattle;if(\"aggressive\"==e){1==Math.round(2*(Math.random()+.1))?L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.icebolt.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}else if(\"defensive\"==e)L.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{const e=Math.round(3*(Math.random()+.1));1==e?L.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}},lesser_water_klastera:()=>{const e=N.getEnemy(),a=e.modeBattle;\"normal\"==a?1==L.icebolt.cost(e)?L.icebolt.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"heal\"==a?1==L.channel_health.cost(e)?L.channel_health.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"arcane\"==a&&(1==L.arcane_shield.cost(e)?L.arcane_shield.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))},young_water_lizard:()=>{const e=N.getEnemy(),a=N.getPlayerAdd(N.getPlayer());if(\"cautious\"==e.modeBattle&&1==L.camoflague.cost(e,a)&&0==N.checkStacks(e.buffs,\"camoflague\"))L.camoflague.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{1==Math.round(3*Math.random()+1)&&1==L.rush_attack.cost(e,a)?L.rush_attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}},red_slime:()=>{const e=N.getEnemy(),a=N.getEnemy().modeBattle,t=R(N.getPlayer().buffs);console.log(`PLAYERBUFFCOUNT ${t}`),\"normal\"==a&&(0==e.actionsTaken&&1==L.engulf.cost(e)&&t>1?L.engulf.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):1==L.fireball.cost(e)?L.fireball.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):L.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))},venemous_wolf:()=>{const e=N.getEnemy();for(var a=!1;0==a;){var t=Math.floor(4*Math.random());console.log(t),console.log(e.skills[t]),1==L[e.skills[t]].cost(e)&&(a=!0,L[e.skills[t]].use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))}},dark_beast:()=>{const e=N.getEnemy(),a=e.modeBattle;\"dark pact\"==a&&1==L.dark_pact.cost(e)?L.dark_pact.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"hex\"==a&&1==L.hex.cost(e)?L.hex.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"nox curse\"==a&&1==L.nox_curse.cost(e)?L.nox_curse.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):B(e,[\"rend\",\"attack\",\"dark_howl\"])},flame_minotaur:()=>{const e=N.getEnemy(),a=e.modeBattle;\"normal\"!=a?L[a].use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):B(e,[\"boar_strike\",\"boar_rush\"])}},j={slime:(e,a,t,n)=>{const s=e[N.turn-1].player;var o=!0,r=q(s,\"guard\"),l=C(s);console.log(\"logging player damage\"),console.log(l),l.forEach(e=>{e<1&&(o=!1)}),r>0?(t.modeBattle=\"defensive\",p([[`<br>${t.name} eyes ${a.name} cautiously...`,1]],\"battle\",n)):o?(t.modeBattle=\"aggressive\",p([[`<br>${t.name} assumes an aggressive stance!`,1]],\"battle\",n)):(t.modeBattle=\"normal\",p([[`<br>${t.name} assumes a normal stance.`,1]],\"battle\",n))},grey_wolf:(e,a,t,n)=>{n()},wayward_traveler:(e,a,t,n)=>{const s=t.health,o=N.checkStacks(a.debuffs,\"guard broken\");console.log(`found ${o} guard broken stacks`),s<t.max_health/2?t.mana>30?(t.modeBattle=\"wary\",p([[`<br>${t.name} is concerned about their condition..`,1]],\"battle\",n)):(t.modeBattle=\"desperate\",p([[`<br>${t.name} is employing a last ditch attempt!`,1]],\"battle\",n)):o<3?(t.modeBattle=\"preparing\",p([[`<br>${t.name} seems to be setting something up..`,1]],\"battle\",n)):(t.modeBattle=\"allout\",p([[`<br>${t.name} is going all out!`,1]],\"battle\",n))},greater_slime:(e,a,t,n)=>{const s=e[N.turn-1].player;var o=!0,r=q(s,\"guard\"),l=C(s);console.log(\"logging player damage\"),console.log(l),l.forEach(e=>{e<1&&(o=!1)}),r>0?(t.modeBattle=\"defensive\",p([[`<br>${t.name} eyes ${a.name} cautiously...`,1]],\"battle\",n)):o?(t.modeBattle=\"aggressive\",p([[`<br>${t.name} assumes an aggressive stance!`,1]],\"battle\",n)):(t.modeBattle=\"normal\",p([[`<br>${t.name} assumes a normal stance.`,1]],\"battle\",n))},lesser_water_klastera:(e,a,t,n)=>{var s=N.checkStacks(t.buffs,\"arcane protection\"),o=0;null!=e[N.turn-1].enemy&&(o=q(e[N.turn-1].enemy,\"channel_health\")),0==s?(t.modeBattle=\"arcane\",p([[`<br>${t.name} would like to enhance themselves with magic...`,1]],\"battle\",n)):N.turn%3==0&&0==o?(t.modeBattle=\"heal\",p([[`<br>${t.name} would like to heal..`,1]],\"battle\",n)):(t.modeBattle=\"normal\",p([[`<br>${t.name} has no particular desire.`,1]],\"battle\",n))},young_water_lizard:(e,a,t,n)=>{0==q(e[N.turn-1].player,\"guard\")?(t.modeBattle=\"cautious\",p([[`<br>${t.name} feels uncomfortable...`,1]],\"battle\",n)):(t.modeBattle=\"normal\",p([[`<br>${t.name} seems to be feeling normal.`,1]],\"battle\",n))},red_slime:(e,a,t,n)=>{t.modeBattle=\"normal\",n()},venemous_wolf:(e,a,t,n)=>{n()},dark_beast:(e,a,t,n)=>{const s=N.checkStacks(t.buffs,\"ATK up\"),o=N.checkStacks(t.buffs,\"MATK up\"),r=N.checkStacks(t.buffs,\"SPEED up\"),l=N.checkStacks(a.debuffs,\"hexed\"),i=(c=a.debuffs,d=JSON.parse(JSON.stringify(c)),m=0,d.forEach(e=>{var a=e.name;m+=1;for(var t=0;t<d.length;t++)if(d[t].name==a){d.splice(t,1),t-=1;break}}),m);var c,d,m;s<3&&o<3&&r<3?(t.modeBattle=\"dark pact\",p([[`<br>${t.name} eyes ${a.name} with a slight glare.`,1]],\"battle\",n)):0==l?(t.modeBattle=\"hex\",p([[`<br>${t.name} eyes ${a.name} with a malicious glare.`,1]],\"battle\",n)):i-N.checkStacks(a.debuffs,\"nox curse\")>1?(t.modeBattle=\"nox curse\",p([[`<br>${t.name} eyes ${a.name} with a malevolent glare.`,1]],\"battle\",n)):(t.modeBattle=\"normal\",p([[`<br>${t.name} eyes ${a.name} with a dry glare.`,1]],\"battle\",n))},flame_minotaur:(e,a,t,n)=>{const s=N.turn,o=R(t.debuffs),r=R(a.buffs),l=N.checkStacks(t.buffs,\"boar haste\");var i=t.mode2,c=5;\"phase two\"==i&&(c=3),t.health<t.max_health/2&&\"phase one\"==i&&(m('<span style=\"color:red\"><b>The minotaur grows evermore furious..</span></b>'),t.mode2=\"phase two\",i=\"phase two\"),\"phase two\"==i&&0==l?(t.modeBattle=\"boar_haste\",n()):s%c==0?(t.modeBattle=\"ignis_destroyer\",n()):1==L.flare_impact.cost(t)?(t.modeBattle=\"flare_impact\",n()):o>2?1==L.true_cleanse.cost(t)?(t.modeBattle=\"true_cleanse\",n()):(t.modeBattle=\"ignis_destroyer\",n()):r>2?1==L.engulf.cost(t)?(t.modeBattle=\"engulf\",n()):(t.modeBattle=\"ignis_destroyer\",n()):(t.modeBattle=\"normal\",n())}},N={battleProcessing(e,a,t,s=!0){m(\"<br>---------------------------------------\"),m(`<br>Battle between ${e.name} and ${a.stats.name} has begun!`);const o=JSON.parse(JSON.stringify(e));this.playerFighter=this.addCombatStats(o.stats,o.name,\"player\",s);const r=JSON.parse(JSON.stringify(a));this.enemy=this.addCombatStats(r.stats,r.stats.name,\"enemy\",s),this.turn=0,this.state=[],this.endFunction=t,z(N.getPlayerAdd(N.playerFighter)),n.first_time.combat&&(n.first_time.combat=!1,m(se.combatIntroduction)),z(N.getPlayerAdd(N.playerFighter)),this.combatLoop()},addCombatStats(e,a,t,s){if(e.name=a,e.health_mod=0,e.atk_mod=0,e.def_mod=0,e.matk_mod=0,e.mdef_mod=0,e.crit_chance_mod=0,e.crit_damage_mod=0,e.effectiveness_mod=0,e.resistance_mod=0,e.evasion_mod=0,e.speed_mod=0,e.actions=0,e.buffs=[],e.debuffs=[],e.mitigation=0,\"player\"==t)e.mana=e.current_mana,e.sp=0,e.stamina=e.max_stamina,e.max_health=this.getMaxHealth(e),e.health=e.current_health;else{e.modeBattle=\"normal\",e.mana=e.max_mana,e.stamina=e.max_stamina,e.health=e.max_health,e.sp=0,e.level=e.base_level,e.actionsTaken=0;const a=e.base_level,t=n.player.level;var o;if(console.log(`changelveel is ${s}`),o=0==s?a:1==s?t:s>t?s:t,console.log(`indetened ${o}`),o>a){const t=o-a;e.level=e.level+t,e.health=e.health+10*t,e.max_health=e.health,e.atk=e.atk+3*t,e.def=e.def+3*t,e.matk=e.matk+3*t,e.mdef=e.mdef+3*t,e.speed=e.speed+3*t,e.exp=e.exp+10*t}delete e.base_level}return e},getEquips(e){const a={atk:0,def:0,matk:0,mdef:0,crit_chance:0,crit_damage:0,effectiveness:0,resistance:0,evasion:0,speed:0,mitigation:0,max_mana:0,max_sp:0,max_stamina:0};return Object.keys(e.equips).forEach(t=>{null!=e.equips[t]&&Object.keys(_[e.equips[t]]).forEach(n=>{a.hasOwnProperty(n)&&(a[n]+=_[e.equips[t]][n])})}),a},getEquipStat(e,a){var t=0;return Object.keys(e.equips).forEach(n=>{null!=e.equips[n]&&Object.keys(_[e.equips[n]]).forEach(s=>{s==a&&(t+=_[e.equips[n]][a])})}),t},getMaxHealth(e){const a={health:0};return a.health+=this.getEquipStat(n.player.stats,\"health\"),a.health+=20*n.player.sp_investment.health,e.health+a.health},getEquipsElements(e){const a={offence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}},t=e.equips;return Object.keys(t).forEach(e=>{if(null!=t[e]){const n=_[t[e]];Object.keys(n.elemental.offence).forEach(e=>{a.offence[e]+=n.elemental.offence[e],a.offence[e]=S(a.offence[e],l,i)}),Object.keys(n.elemental.defence).forEach(e=>{a.defence[e]+=n.elemental.defence[e],a.defence[e]=S(a.defence[e],l,i)})}}),a},healthCheck:()=>N.playerFighter.health<=0?(z(N.getPlayerAdd(N.playerFighter)),\"enemy\"):N.enemy.health<=0&&(z(N.getPlayerAdd(N.playerFighter)),\"player\"),uploadChanges(e,a){N.playerFighter.health=e.health,N.enemy.health=a.health,N.playerFighter.mana=e.mana,N.playerFighter.sp=e.sp,N.playerFighter.stamina=e.stamina},calcBuffs(e,a){var t=0;const n=a.buffs;return n.length>0&&Object.keys(n).forEach(a=>{n[a].hasOwnProperty(e)&&(t+=n[a][e])}),t},calcDebuffs(e,a){var t=0;const n=a.debuffs;return Object.keys(n).forEach(a=>{n[a].hasOwnProperty(e)&&(t+=n[a][e])}),t},calcMod(e,a){var t=0;return t+=N.calcBuffs(e,a),t=S(t+=N.calcDebuffs(e,a),-.9,5)},calcElementBuffs(e){const a={offence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}};return e.buffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(t=>{a.offence[t]+=e.elemental.offence[t],a.offence[t]=S(a.offence[t],l,i)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(t=>{a.defence[t]+=e.elemental.defence[t],a.defence[t]=S(a.defence[t],l,i)}))}),e.debuffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(t=>{a.offence[t]+=e.elemental.offence[t],a.offence[t]=S(a.offence[t],l,i)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(t=>{a.defence[t]+=e.elemental.defence[t],a.defence[t]=S(a.defence[t],l,i)}))}),a},applyBuff(e,a,t,n,s){var o,r;n==t||\"buffs\"==s?(o=0,r=0):(o=S(t.effectiveness+N.calcBuffs(\"effectiveness\",t)+N.calcDebuffs(\"effectiveness\",t),0,999),r=S(n.resistance+N.calcBuffs(\"resistance\",n)+N.calcDebuffs(\"resistance\",n),0,999)),a=S(a+o,0,100);const l=Math.round(100*Math.random()),i=a-r;console.log(\"Trying to apply debuff:\"),console.log(l),console.log(a),console.log(r),console.log(i),console.log(l<=a),l<=i?N.checkStacks(n[s],e.name)<e.max_stacks&&(m(`${n.name} ${e.apply_text}`),\"buffs\"==s?n.buffs.push({...e}):n.debuffs.push({...e}),z(N.getPlayerAdd(N.playerFighter))):l<=a&&(console.log(\"effect resisted\"),m('<span style=\"color:#9500D6\">Effect resisted!</span>'))},stripBuff(e,a){var t=!1;return e.forEach((n,s)=>{if(n.name==a){if(n.hasOwnProperty(\"unstrippable\"))return!1;e.splice(s,1),t=!0,m(`${n.name} removed.`)}}),t},buffCheck(e){const a=e.buffs.concat(e.debuffs);for(var t=a.length-1;t>=0;t--){const s=a[t];if(s.hasOwnProperty(\"damage\")){const a=s.damage;var n;\"percentile\"==a[0]&&(n=Math.round(e.max_health*(a[1]/100))),\"flat\"==a[0]&&(n=a[1]),m(`<br>(${s.name}) ${e.name} took damage! <span style=\"color:${Q[a[2]]}\">[${n}, ${a[0]}]</span>`),e.health-=n,m(`${e.name}'s health remaining: ${e.health}/${e.max_health}`)}s.hasOwnProperty(\"heal\")}for(t=e.buffs.length-1;t>=0;t--){const a=e.buffs[t];a.duration-=1,a.duration<=0&&(m(`${a.name} faded. (${e.name})`),e.buffs.splice(t,1))}for(t=e.debuffs.length-1;t>=0;t--){const a=e.debuffs[t];a.duration-=1,a.duration<=0&&(m(`${a.name} faded. (${e.name})`),e.debuffs.splice(t,1))}},turnReset(e){e.actions-=1,e==N.playerFighter&&z(N.getPlayerAdd(N.playerFighter))},combatLoop(){var e=this.healthCheck();N.turn+=1,N.state.push({player:[],enemy:[]}),m(`<br>TURN ${N.turn}`),0==e?(N.playerFighter.actions=N.calcActions(N.getPlayerAdd(N.playerFighter),N.getEnemy()),z(N.getPlayerAdd(N.playerFighter)),N.initShortcuts(),p(N.combatMessage(),\"battle\",()=>\"\"),h(this.selectAttack)):this.endBattle(this.healthCheck())},combatMessage:()=>[[`<br>Health: ${N.playerFighter.health}/${N.playerFighter.max_health}`,0],[`${N.getEnemy().name} (LV${N.getEnemy().level}) Health: ${N.enemy.health}/${N.enemy.max_health}`,0],[`Actions: ${N.playerFighter.actions}`,0],[\"Please select an action\",0]],endTurn(e){const a=\"player\"==e?N.playerFighter:N.enemy;\"player\"==e?N.enemy:N.playerFighter;if(0==this.healthCheck())if(z(N.getPlayerAdd(N.playerFighter)),a.actions>1)a.actions-=1,\"player\"==e?(p(N.combatMessage(),\"battle\",()=>\"\"),N.initShortcuts(),h(this.selectAttack)):(a.actionsTaken+=1,j[N.enemy.mode].call(void 0,N.state,N.getPlayerAdd(N.playerFighter),N.enemy,()=>{F[N.enemy.ai].call()}));else if(\"player\"==e){var t=Math.round(N.getPlayerAdd(N.playerFighter).max_stamina/10);N.playerFighter.stamina+=t,N.playerFighter.stamina=S(N.playerFighter.stamina,0,N.playerFighter.max_stamina),m(`<br>Regenned ${t} stamina!`),m(\"<br>Player turn end\"),N.turnReset(N.playerFighter),m(\"<br>---------------------------------------\"),N.enemy.actions=N.calcActions(N.getEnemy(),N.getPlayerAdd(N.playerFighter)),N.buffCheck(N.enemy),j[N.enemy.mode].call(void 0,N.state,N.getPlayerAdd(N.playerFighter),N.enemy,()=>{F[N.enemy.ai].call()})}else{m(\"<br>Enemy turn end\"),a.actionsTaken=0;t=Math.round(N.enemy.max_stamina/10);N.enemy.stamina+=t,N.enemy.stamina=S(N.enemy.stamina,0,N.enemy.max_stamina),m(`<br>${N.enemy.name} regenned ${t} stamina!`),N.turnReset(N.enemy),N.buffCheck(N.playerFighter),m(\"<br>---------------------------------------\"),this.combatLoop()}else this.endBattle(this.healthCheck())},displayStatus(e){const a=(e,a)=>e.name>a.name?1:e.name<a.name?-1:0;e.buffs.sort(a),e.debuffs.sort(a),m(`${ee}Displaying status...`),m(`HP: ${e.health}/${e.max_health}`),m(`Mana: ${e.mana}/${e.max_mana}`),m(`Stamina: ${e.stamina}/${e.max_stamina}`),m(`SP: ${e.sp}/${e.max_sp}`),m(\"<br><b>BUFFS</b>\");const t=[];0==e.buffs.length&&m(\"<br>None\"),e.buffs.forEach(a=>{var n={...a},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${Q[n.element]}\">${n.element}</span>`;delete n.element;const l=N.checkStacks(e.buffs,n.name),i=`<br>${l} stack${l>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;var c;delete n.max_stacks,n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\";var d=\"\";if(n.hasOwnProperty(\"damage\")&&(d=\"percentile\"==n.damage[0]?`<br> ➢ ${n.damage[1]}% DOT`:\"\"),n.hasOwnProperty(\"elemental\"))var f=Object.keys(n.elemental.offence).map(e=>{const a=n.elemental.offence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} attack`}),h=Object.keys(n.elemental.defence).map(e=>{const a=n.elemental.defence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} defence`});else f=[],h=[];delete n.elemental;var u,p=Object.keys(n).map(e=>{const a=n[e];if(\"name\"!=e&&\"damage\"!=e)return[\"resistance\",\"effectiveness\"].includes(e)?`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e}`:`<br> ➢ ${a>0?\"+\":\"\"}${100*a}% ${e}`});u=t.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${i}${o}${p.join(\", \")}\\n                `+`${f.join(\", \")}${h.join(\", \")}${c}${d}`,m(u),t.push(n.name)}),m(\"<br><b>DEBUFFS</b>\"),0==e.debuffs.length&&m(\"<br>None\"),e.debuffs.forEach(a=>{var n={...a},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${Q[n.element]}\">${n.element}</span>`;delete n.element;const l=N.checkStacks(e.debuffs,n.name),i=`<br>${l} stack${l>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;delete n.max_stacks;var c,d=\"\";if(n.hasOwnProperty(\"damage\")&&(d=\"percentile\"==n.damage[0]?`<br> ➢ ${n.damage[1]}% DOT`:\"\"),n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\",n.hasOwnProperty(\"elemental\"))var f=Object.keys(n.elemental.offence).map(e=>{const a=n.elemental.offence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} attack`}),h=Object.keys(n.elemental.defence).map(e=>{const a=n.elemental.defence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} defence`});else f=[],h=[];delete n.elemental;var u,p=Object.keys(n).map(e=>{const a=n[e];if(\"name\"!=e&&\"damage\"!=e)return[\"resistance\",\"effectiveness\"].includes(e)?`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e}`:`<br> ➢ ${a>0?\"+\":\"\"}${100*a}% ${e}`});u=t.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${i}${o}${p.join(\", \")}\\n                `+`${f.join(\", \")}${h.join(\", \")}${c}${d}`,m(u),t.push(n.name)}),m(`${ee}Please select an action`)},displayStats(e){const a={atk:\"attack\",def:\"defence\",matk:\"magic attack\",mdef:\"magic defence\",speed:\"speed\",crit_chance:\"critical chance\",crit_damage:\"critical damage\",effectiveness:\"effectiveness\",resistance:\"resistance\"};var t=\"\";[\"atk\",\"matk\",\"def\",\"matk\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\"].forEach(n=>{var s=e[n];\"crit_chance\"!=n&&\"crit_damage\"!=n||(s=(100*s).toString()+\"%\"),t+=`<br> - ${a[n]}: ${s}`}),Object.keys(e.elemental.offence).forEach(a=>{t+=`<br> - ${e.elemental.offence[a]} ${a} attack`}),Object.keys(e.elemental.defence).forEach(a=>{t+=`<br> - ${e.elemental.defence[a]} ${a} defence`}),t+=`<br><br>${e.desc}`,m(t)},initShortcuts(){const e=n.player.stats.skills,a=[\"skills\",\"status\",\"enemy\"];e.forEach(e=>{a.push(L[e].name)}),b(a)},selectAttack(){const e=N.playerFighter,a=N.enemy;u(N.selectAttack);const t=f();N.getEquips(e),\"skills\"==t?(m(`<br> ${e.skills.map(e=>`${L[e].name}: ${L[e].description}`).join(\"<br><br>\")}`),N.initShortcuts(),h(N.selectAttack)):\"status\"==t?(N.displayStatus(e),N.initShortcuts(),h(N.selectAttack)):\"enemy\"==t?(N.displayStatus(a),N.initShortcuts(),h(N.selectAttack)):-1!==e.skills.findIndex(e=>L[e].name==t)?1==L.getSkill(t).cost(e,a)?L.getSkill(t).use(N.getPlayerAdd(e),a,\"player\"):(m(`<br> ${L.getSkill(t).cost(e,a)}`),N.initShortcuts(),h(N.selectAttack)):(N.initShortcuts(),p([[\"\",0],[\"Invalid Input\",0]],\"battle\",h(N.selectAttack)))},getEnemy:()=>N.enemy,getPlayerAdd(e){const a=N.getEquips(n.player.stats),t=N.getEquipsElements(n.player.stats),s=t.offence,o=t.defence,r=JSON.parse(JSON.stringify(e));return Object.keys(n.player.sp_investment).forEach(e=>{\"health\"!=e&&\"mana\"!=e&&(a[e]+=2*n.player.sp_investment[e]),\"mana\"==e&&(a.max_mana+=15*n.player.sp_investment[e])}),Object.keys(r).forEach(e=>{a.hasOwnProperty(e)&&(r[e]+=a[e])}),Object.keys(s).forEach(e=>{r.elemental.offence[e]+=s[e]}),Object.keys(o).forEach(e=>{r.elemental.defence[e]+=o[e]}),r},getPlayer:()=>N.playerFighter,checkStacks(e,a){var t,n=0;for(t in e)console.log(t),e[t].name==a&&n++;return n},calcActions:(e,a)=>(console.log(\"printing object, followed by object2\"),console.log(e),console.log(a),e.speed*(1+N.calcMod(\"speed\",e))>a.speed*(2+N.calcMod(\"speed\",a))?(m(\"<br>The superior speed of the caster grants them an extra action!\"),2):(e.speed,N.calcMod(\"speed\",e),a.speed,N.calcMod(\"speed\",a),1)),endBattle(e){if(console.log(this.enemy),\"enemy\"==e){m(`${N.playerFighter.name} has been defeated!`);const e=[[\"The defeat in battle leaves you disoriented...<br>\",1],[\"Fortuately, you awake in familiar surroundings...\",1]];n.player.stats.current_health=n.player.max_health,n.player.stats.current_mana=n.player.stats.max_mana,p(e,\"battle\",Ge)}else{m(`${N.playerFighter.name} emerged victorious!<br>`),console.log(`playerfighter hp/mana ${N.playerFighter.health}/${N.playerFighter.mana}`),n.player.stats.current_health=N.playerFighter.health,n.player.stats.current_mana=N.playerFighter.mana,console.log(`data hp/mana = ${n.player.stats.current_health}/${n.player.stats.current_mana}`),n.player.gold+=this.enemy.gold,n.player.exp+=this.enemy.exp,m(`Gained ${this.enemy.gold} gold!<br>`),m(`Gained ${this.enemy.exp} exp!<br>`);const e=this.enemy.drops;var a=0;for(a in e){const t=Math.round(1e3*Math.random()),n=e[a];n[1]>=t&&(null!=n[3]?k(n[0],n[2],n[3]):k(n[0]))}this.endFunction.call(),Y()}E(n.player)},heal(e){e.current_health=N.getMaxHealth(e),e.current_mana=N.getPlayerAdd(e).max_mana}},Y=()=>{if(n.player.level<25&&n.player.exp>=r[n.player.level]){const e=\"<br>You can feel yourself becoming stronger...<br>\"+`Levelled up to level ${n.player.level+1}`+\"<br>+2 SP!<br>+2 AP!<br>+20 health!<br>+2 all stats!<br>\";m(e),H()}},H=()=>{const e=n.player,a=e.stats;e.exp-=r[e.level],e.level+=1,e.sp+=2,e.ap+=2,a.health+=20,a.current_health+=20,a.max_mana+=5,a.current_mana+=5,a.atk+=2,a.def+=2,a.matk+=2,a.mdef+=2,a.speed+=2,E(e),Y()},W=e=>{const a=e.stats,t=e.stats.elemental.offence,n=e.stats.elemental.defence,s=`\\n    ${e.name}'s stats <br>\\n    health: ${a.current_health}/${N.getMaxHealth(e.stats)} <br>\\n    attack: ${a.atk}<br>\\n    defence: ${a.def} <br>\\n    magic attack: ${a.matk}<br>\\n    magic defense: ${a.mdef}<br>\\n    speed: ${a.speed}<br>\\n    critical chance: ${a.crit_chance}<br>\\n    critical damage: ${a.crit_damage}<br>\\n    effectiveness: ${a.effectiveness}<br>\\n    resistance: ${a.resistance}<br>\\n    mana: ${a.current_mana}/${a.max_mana}<br>\\n    max stamina: ${a.max_stamina}<br>\\n    max sp: ${a.max_sp}\\n    `,o=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${t.physical}<br>\\n    fire: ${t.fire}<br>\\n    water: ${t.water}<br>\\n    wind: ${t.wind}<br>\\n    earth: ${t.earth}<br>\\n    thunder: ${t.thunder}<br>\\n    light: ${t.light} <br>\\n    dark: ${t.dark}<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${n.physical}<br>\\n    fire: ${n.fire}<br>\\n    water: ${n.water}<br>\\n    wind: ${n.wind}<br>\\n    earth: ${n.earth}<br>\\n    thunder: ${n.thunder}<br>\\n    light: ${n.light}<br>\\n    dark: ${n.dark}<br>\\n    `;J.mainStats.innerHTML=s,J.elementalStats.innerHTML=o},z=e=>{const a=e.elemental.offence,t=e.elemental.defence,n=N.calcElementBuffs(e),s=n.offence,o=n.defence,r=N.calcMod(\"atk\",e),l=N.calcMod(\"def\",e),i=N.calcMod(\"matk\",e),c=N.calcMod(\"mdef\",e),d=N.calcMod(\"speed\",e),m=N.calcMod(\"crit_chance\",e),f=N.calcMod(\"crit_damage\",e),h=N.calcMod(\"effectiveness\",e),u=N.calcMod(\"resistance\",e),p=` \\n    ${e.name}'s stats <br>\\n    health: ${e.health} (${Math.round(e.health/e.max_health*100)}%)<br>\\n    attack: ${Math.round(e.atk*(r+1))} (${Math.round(100+100*r)}%)<br>\\n    defence: ${Math.round(e.def*(l+1))} (${Math.round(100+100*l)}%)<br>\\n    magic attack: ${Math.round(e.matk*(i+1))} (${Math.round(100+100*i)}%)<br>\\n    magic defense: ${Math.round(e.mdef*(c+1))} (${Math.round(100+100*c)}%)<br>\\n    speed: ${Math.round(e.speed*(d+1))} (${Math.round(100+100*d)}%)<br>\\n    critical chance: ${e.crit_chance+m} (${Math.round(100+100*m)}%)<br>\\n    critical damage: ${e.crit_damage+f} (${Math.round(100+100*f)}%)<br>\\n    effectiveness: ${e.effectiveness+h} (${Math.round(100+100*h)}%)<br>\\n    resistance: ${e.resistance+u} (${Math.round(100+100*u)}%)<br>\\n    mitigation: ${Math.round(100*N.calcMod(\"mitigation\",e))}%<br>\\n    mana: ${e.mana}/${e.max_mana}<br>\\n    stamina: ${e.stamina}/${e.max_stamina}<br>\\n    sp: ${e.sp}/${e.max_sp}\\n    \\n    `,y=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${a.physical+s.physical} (${s.physical<0?\"\":\"+\"}${s.physical})<br>\\n    fire: ${a.fire+s.fire} (${s.fire<0?\"\":\"+\"}${s.fire})<br>\\n    water: ${a.water+s.water} (${s.water<0?\"\":\"+\"}${s.water})<br>\\n    wind: ${a.wind+s.wind} (${s.wind<0?\"\":\"+\"}${s.wind})<br>\\n    earth: ${a.earth+s.earth} (${s.earth<0?\"\":\"+\"}${s.earth})<br>\\n    thunder: ${a.thunder+s.thunder} (${s.thunder<0?\"\":\"+\"}${s.thunder})<br>\\n    light: ${a.light+s.light} (${s.light<0?\"\":\"+\"}${s.light})<br>\\n    dark: ${a.dark+s.dark} (${s.dark<0?\"\":\"+\"}${s.dark})<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${t.physical+o.physical} (${o.physical<0?\"\":\"+\"}${o.physical})<br>\\n    fire: ${t.fire+o.fire} (${o.fire<0?\"\":\"+\"}${o.fire})<br>\\n    water: ${t.water+o.water} (${o.water<0?\"\":\"+\"}${o.water})<br>\\n    wind: ${t.wind+o.wind} (${o.wind<0?\"\":\"+\"}${o.wind})<br>\\n    earth: ${t.earth+o.earth} (${o.earth<0?\"\":\"+\"}${o.earth})<br>\\n    thunder: ${t.thunder+o.thunder} (${o.thunder<0?\"\":\"+\"}${o.thunder})<br>\\n    light: ${t.light+o.light} (${o.light<0?\"\":\"+\"}${o.light})<br>\\n    dark: ${t.dark+o.dark} (${o.dark<0?\"\":\"+\"}${o.dark})<br>\\n    `;J.mainStats.innerHTML=p,J.elementalStats.innerHTML=y},G=e=>{K.returnFunction=e,n.first_time.equip&&(n.first_time.equip=!1,m(se.equipIntroduction)),K.menuLoop()},K={currentItem:null,currentIndex:-1,returnFunction:null,menuLoop(){K.currentIndex=-1,E(n.player),m(`${ee}Entering equip mode. Say the name of an item to view its details and equip it.`+\" Say the name of a slot to unequip the item in that slot.\"),h(K.inventoryMenu)},inventoryMenu(){u(K.inventoryMenu);const e=n.player,a=f().toLowerCase(),t=e.inventory.length>0?e.inventory.findIndex(e=>1==e[1].length?_[e].name.toLowerCase()==a.toLowerCase():_[e[0]].name.toLowerCase()==a.toLowerCase()):-1;if(e.stats.equips.hasOwnProperty(a))null!=e.stats.equips[a]&&K.unequipItem(a),h(K.inventoryMenu);else if(-1!=t){const a=e.inventory[t];_[a];K.currentItem=a,K.itemLoop()}else\"back\"==a||\"b\"==a?(m(\"<br>Returning...\"),K.currentIndex=-1,K.returnFunction()):(m(\"<br>Invalid input\"),h(K.inventoryMenu));E(n.player)},itemLoop(){const e=n.player,a=K.currentItem,t=$(a)?_[a[0]]:_[a];K.currentIndex=e.inventory.findIndex(e=>$(e)?e[0]==K.currentItem[0]:e==K.currentItem);const s=JSON.parse(JSON.stringify(t));s.hasOwnProperty(\"elemental\")&&(JSON.parse(JSON.stringify(s.elemental)),delete s.elemental),m(`<br>${t.name} selected.`),v(t),m(\"<br>say 'e' or 'equip' to equip this item. Otherwise, enter 'b' to return. The item's position in your inventory is marked in <b>bold</b>. Input 'z' to scroll up or 'x' to scroll down.\"),K.currentItem=a,E(n.player),h(K.itemMenu)},itemMenu(){u(K.itemMenu);const e=n.player,a=f().toLowerCase(),t=K.currentItem,s=$(t)?_[t[0]]:_[t];if(\"e\"==a||\"equip\"==a)if(\"reagent\"==s.type)m(\"<br>You cannot equip reagents.\"),h(K.itemMenu);else{const a=e.inventory.findIndex(e=>e==t.toLowerCase());\"misc\"!=s.type?null==e.stats.equips[s.type]?K.equipItem(a):(K.unequipItem(s.type),K.equipItem(a)):(null!=e.stats.equips.misc1&&null!=e.stats.equips.misc2&&K.unequipItem(\"misc1\"),K.equipItem(a)),K.menuLoop()}else if(\"z\"==a||\"x\"==a){K.currentItem;const t=K.currentIndex;var o;if(\"z\"==a)m(`${ee}Scrolling up..`),(o=t-1)<0&&(o=e.inventory.length-1),$(e.inventory[o])?e.inventory[o][0]:e.inventory[o],K.currentItem=e.inventory[o],K.itemLoop();else m(`${ee}Scrolling down..`),(o=t+1)==e.inventory.length&&(o=0),$(e.inventory[o])?e.inventory[o][0]:e.inventory[o],K.currentItem=e.inventory[o],K.itemLoop()}else\"b\"==a||\"back\"==a?(m(`${ee}Returning...`),K.menuLoop()):(m(\"<br>Invalid input.\"),h(K.itemMenu))},unequipItem(e){const a=n.player,t=a.stats.equips[e],s=_[t];a.stats.equips[e]=void 0,a.inventory.push(t),m(`${ee}${s.name} unequipped.`)},equipItem(e){const a=n.player,t=a.inventory[e],s={..._[t]};if(\"misc\"==s.type&&(null==a.stats.equips.misc1?s.type=\"misc1\":null==a.stats.equips.misc2?s.type=\"misc2\":s.type=\"misc1\"),null==a.stats.equips[s.type]){const t=a.inventory[e];delete a.inventory[e],a.stats.equips[s.type]=t,m(`${ee}${s.name} equipped.`)}else m(\"There is already an item equipped in that slot.\");for(var o=0;o<a.inventory.length;o++)null==a.inventory[o]&&a.inventory.splice(o,1);E(a)}},U=e=>{var a=\"\";const t=e.stats.equips;Object.keys(e.stats.equips).forEach(e=>{const n=t[e],s={..._[n]};var o=!1;if(a+=`${e.toUpperCase()}: `,null!=s.name){a+=`${s.name}<br>`,delete s.name;var r=\"\";s.hasOwnProperty(\"elemental\")&&(Object.keys(s.elemental.offence).forEach(e=>{r+=`${e} attack: ${s.elemental.offence[e]}<br>`}),Object.keys(s.elemental.defence).forEach(e=>{r+=`${e} defence: ${s.elemental.defence[e]}<br>`}),delete s.elemental,o=!0),Object.keys(s).forEach(e=>{\"desc\"!=e&&\"sell_value\"!=e&&\"description\"!=e&&(a+=`${e}: ${s[e]}<br>`)}),1==o&&(a+=r)}a+=\"<br>\"});const n=`\\n    Level: ${e.level}<br>\\n    EXP: ${e.exp}/${r[e.level]}<br>\\n    Gold: ${e.gold}<br>\\n    SP: ${e.sp}<br>\\n    AP: ${e.ap}<br><br>\\n    \\n    <b>Equipped items</b><br>\\n    ${a}\\n\\n\\n    `;var s;s=e.inventory.length>0?Object.keys(e.inventory).map((a,t)=>{const n=t==K.currentIndex?\"<b>\":\"\",s=t==K.currentIndex?\"</b>\":\"\";return e.inventory[a][1].length<2?`${n}${_[e.inventory[a]].name}${s}`:`${n}${e.inventory[a][1]} ${_[e.inventory[a][0]].name}${s}`}):[],console.log(`INV STRING IS ${s}`);const o=`\\n    <b>Inventory</b><br>\\n    ${s.join(\"<br>\")}`;J.playerStats.innerHTML=n,J.inventory.innerHTML=o},J={main:document.querySelector(\".main\"),input:document.querySelector(\".main-input\"),form:document.querySelector(\".form-input\"),mainStats:document.getElementById(\"mainstats\"),elementalStats:document.getElementById(\"elemstats\"),playerStats:document.getElementById(\"playerstats\"),inventory:document.getElementById(\"inventory\")},V=[\"skills\",\"sp\",\"back\"],Z=[\"gamestart\",\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"combat\",\"combat-complex\",\"back\"],X=[\"message delay\",\"change shortcut\",\"test message\",\"tutorials\",\"save\",\"back\"],Q={none:\"#FFFFFF\",physical:\"#737373\",fire:\"#FF2D00\",water:\"#000FFF\",earth:\"#7F2C00\",thunder:\"#DAAB00\",dark:\"#2A003D\",light:\"#E8CC3E\",wind:\"#8BF020\"},ee=\"<br> --------------------------------<br><br>\",ae={slow:1.25,medium:.75,fast:.25},te={slow:1.25,medium:.75,fast:.25},ne={Rshift:\"ShiftRight\",Lshift:\"ShiftLeft\",Lctrl:\"ControlLeft\",Rctrl:\"ControlRight\",Altleft:\"AltLeft\",Altright:\"AltRight\",\"¬\":\"Backquote\"},se={exploreIntroduction:`${ee}Welcome to your first zone! Here you can traverse 'rooms' by moving in any one of`+\" the four cardinal directions. You can also 'explore' which has a chance of finding you items, or an enemy encounter!<br><br>In some places, you can also interact with NPCs. You may find something interesting if you do so! If it's possible, it will be in your menu of options.<br><br>You can access some menus while exploring. But do note that if you leave (input 'leave') and return, you will return to the beginning of the zone.<br><br>Use the map to see where you are. Your position is the black square. If you've been somewhere already, it will light up as a colour depending on the type of area it is.<br><br>(This message will only show once.)\",gameIntroduction:`${ee}Welcome to Tower RPG! In this game, the object is to get to the highest floor you can.`+\" You advance floors by defeating the boss of the current floor. Each floor is specifically designed and you can save at any time wherein you can access settings to return to continue your progress (please note that data may not save if you clear your cache or restart your device). Data also autosaves every 30 seconds.<br><br>I hope you you enjoy this game I've made! You will be briefed on some things as you explore the menus, but here is some stuff you might want to know:<br><br> - There is no music in this game. I'd recommend playing some music of your own so things don't get dull!<br><br> - The game is focused on the combat and gameplay. Please don't expect a grand story.<br><br> - You can press <b>RIGHT SHIFT</b> to active Input Shorcut, which can help if you forget what to type or if you have a low WPM. The key assigned to Input Shortcut can be changed in the settings. Use it once you've read this to see your options in the main menu. It can't be used everywhere, however.\"+`<br><br> - At the moment, there are ${s.max} floors.`+\"<br><br> - You can battle the floor boss while in the main menu by typing 'ascend'. There's no penalty for losing, so don't be afraid to try lots of different strategies!<br><br> - Please message iuc#1105 with any feedback or bugs you have/find, no matter how small!\",shopIntroduction:`${ee}Shops are pretty self-explanatory. But do note that all shops have inifnite stock!`+\"<br><br>Also, each floor has a shop you can access from the main menu. Remember to check them out!\",equipIntroduction:`${ee}Here, you can equip and unequip items. Just follow the instructions!`,statsIntroduction:`${ee}Welcome to the stats menu! Here, you can learn skills and equip them.`+\"<br><br>Skills are learned using AP, which is gained from levelling up. They can also require gold and reagents to unlock.<br><br>Skills are contained within disciplines. You unlock these with gold and reagents. Learning certain skills, disciplines and reaching certain levels may unlock new disciplines!<br><br>You can use SP to increase your stats. SP is gained from levelling up [you get the same amount of SP/AP per level].<br><br>Skills can be unlearned and SP reset, so don't worry too much about being locked into one build forever.<br><br>The menus here can be a little complex, so here's how to find some things you may be looking for:<br><br>To unequip a skill, go (sk/skills) -> (e/equip) -> (e/equipped) and follow the instructions.<br><br>To forget a skill, make sure it isn't equipped. Then go (sk/skills) -> (e/equipped) -> (select the discipline) -> (select the skill) -> (f/forget).\",craftingIntroduction:`${ee}Welcome to the crafting menu! Here, you can use recipes that you've learned to craft`+\" items.<br><br>Recipes use gold and items to create items and are not consumed upon use.<br><br>Recipes are unlocked when you reach a new floor and can be unlocked through other means as well. Make yourself some powerful items!\",settingsIntroduction:`${ee}Welcome to settings! This is pretty self-explanatory. Here, you can adjust various`+\" things to enhance your play experience. You can also save and reset your data here and see any of the tutorial messages again if you need to.\",combatIntroduction:`${ee}Your first fight! Don't worry, there isn't much to know. Press your input shortcut key`+\" to see your options. There are a few that will always be present:<br><br> - 'status' will display the buffs and debuffs applied to you.<br><br> - 'enemy' will display the buffs and debuffs applied to the enemy.<br><br> - 'skills' will display all your skills and what they do.<br><br> - Anything else you can see are attacks you can use.<br><br>Also note that some enemies have 'modes', which dictate what they will do. These depend on your actions and the state of the battle. Pay attention, and use the way the enemy thinks to your advantage!<br><br>Also, if you die, you will return to the main menu of your floor, no matter where you are. Try not to die!<br><br>Finally, there are a bunch more stats and things you might want to know. If you're interested, a more comprehensive explanation is available in settings.\",combatComplex:`${ee}There are quite a few stats of which the explanation isn't obvious. All that's left to`+\" complete your knowledge of combat is to explain what each of them mean:<br><br> <b>- Elemental defence.</b> For each element, this is the % of damage you take from attacks of that element. So if you have 50 fire defence, you take half damage from fire attacks. 200 fire defence, and you take double damage from fire attacks.<br><br> <b>- Elemental offence.</b> For each element, this is the % of damage you deal when using attacks of that element. So, if you have 50 fire offence, your fire attacks deal half damage. 200 Fire offence, and your fire attacks deal double damage.<br><br><b>- Resistance and Effectiveness.</b> Effectiveness increases your chance of applying debuffs to the enemy. Resistance decreases your chance of receiving debuffs from the enemy. Both are added to are taken away directly from the percentage. So, if you are using an attack with a 50% chance to apply a debuff and you have 50 effectiveness, the chance of applying the debuff is 100%. Likewise, if you had 0 effectiveness and the opponent had 50 resistance, the chance of applying the debuff would be 0%.<br><br><b>-Stamina, mana and SP.</b> All three are resources for using skills but they all work a little differently. <b>Mana</b> does not regenerate and you gain maximum mana after healing. <b>Stamina</b> regenerates at the end of each turn (10%) and you gain 100% stamina at the start of each fight. <b>SP</b> can only be gained through skills and various effects. It does not carry over in battles and starts at 0.<br><br><b>- Critical chance and critical damage.</b> Critical chance is the chance of you dealing a critical hit. Critical damage is the damage modifier applied to your critical hit.<br><br><b>- ATK, DEF, MATK, MDEF, SPD.</b> ATK and DEF increase dealt and decrease taken physical damage respecitvely. MATK and MDEF increase dealt and decrease taken magical damage respectively. SPD doesn't do anything, although if your speed is 2.5x greater than the enemy, then you will have 2 actions, as opposed to the usual 3 each. The same applies to your enemy. Don't be outsped!\"},oe=\"<br>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\",re=e=>{le.returnFunction=e,n.first_time.stats&&(n.first_time.stats=!1,m(se.statsIntroduction)),le.statLoop()},le={returnFunction:void 0,statLoop:()=>{m(\"<br>Entering the stats menu.<br> Say 'sk'/'skills' to enter the skill menu, or 'sp' to enter the sp menu.\"),b(V),h(le.statLoopResponse)},statLoopResponse:()=>{u(le.statLoopResponse);n.player;switch(f().toLowerCase()){case\"sk\":case\"skills\":m(`${ee}Entering skills menu. To change skills equipped, say 'e'/equipped', or say 'l'/'learn' to learn new skills.`),b([\"equipped\",\"learn\",\"back\"]),h(he);break;case\"sp\":m(`${ee}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),m(\"<br>Current SP investments:\"),ce(),b([\"allocate\",\"reset\",\"back\"]),h(ie);break;case\"b\":case\"back\":m(`${ee}Returning to main menu...`),le.returnFunction();break;default:m(\"<br>Invalid input\"),b(V),h(le.statLoopResponse)}}},ie=()=>{u(ie);const e=f(),a=n.player;switch(e.toLowerCase()){case\"a\":case\"allocate\":m(`${ee}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),m(`You have ${n.player.sp} SP.`),b([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),h(me);break;case\"r\":case\"reset\":var t=0;Object.keys(a.sp_investment).forEach(e=>{t+=a.sp_investment[e]}),m(`${ee}Are you sure you want to reset your SP? It will cost ${50*t} gold. Type 'y' or 'yes' to confirm. To go back, enter anything else.`),h(de);break;case\"b\":case\"back\":m(`${ee}Returning to status menu..`),le.statLoop();break;default:m(\"<br>Invalid input\"),m(`${ee}Current SP investments:`),ce(),h(ie)}},ce=()=>{const e=n.player;Object.keys(e.sp_investment).map(a=>`${a}: ${e.sp_investment[a]}`).forEach(e=>m(e))},de=()=>{u(de);const e=f().toLowerCase(),a=n.player;var t=0;Object.keys(a.sp_investment).forEach(e=>{t+=a.sp_investment[e]});const s=50*t;\"yes\"!=e&&\"y\"!=e||(a.gold>=s?(m(`${ee}SP has been reset.`),Object.keys(a.sp_investment).forEach(e=>{a.sp+=a.sp_investment[e],a.sp_investment[e]=0}),a.gold-=s):m(`${ee}You don't have enough gold!`),m(`${ee}You now have ${a.sp} SP.`)),m(`${ee}Returning to SP menu..`),m(`${ee}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),m(\"<br>Current SP investments:\"),ce(),h(ie),b([\"allocate\",\"reset\"]),E(n.player)},me=()=>{u(me);const e=f().toLowerCase(),a=n.player;var t=!0;a.sp_investment.hasOwnProperty(e)?a.sp>0?(m(`How many SP points would you like to allocate to ${e}?`),h(fe(e)),t=!1):m(\"You don't have any SP!\"):\"back\"==e||\"b\"==e?(t=!1,m(`${ee}Returning to SP menu...`),m(`${ee}Entering SP menu. Say 'a/allocate' to allocate SP, 'r/reset' to reset allocation.`),m(\"Current SP investments:\"),ce(),b([\"allocate\",\"reset\"]),h(ie)):m(\"Invalid input.\"),t&&(m(`<br>You currently have ${a.sp} SP.`),h(me)),E(n.player)},fe=e=>{u(fe);const a=()=>{u(a);const t=f();if(\"NaN\"!=parseInt(t).toString()){const a=n.player;parseInt(t)<=a.sp?(a.sp-=parseInt(t),a.sp_investment[e]+=parseInt(t),m(`${t} SP allocated to ${e}. Returning to allocate mode..`),m(`${ee}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),m(`You have ${n.player.sp} SP.`),b([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),h(me),E(a)):(m(\"You don't have enough SP! Returning to allocate mode..\"),m(`${ee}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),m(`You have ${n.player.sp} SP.`),b([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),h(me))}else m(\"Invalid input.\"),h(fe(e))};return a},he=()=>{u(he);const e=f().toLowerCase();n.player;switch(e){case\"e\":case\"equipped\":pe.disciplinesMenuLoop();break;case\"l\":case\"learn\":ue.disciplinesMenuLoop();break;case\"b\":case\"back\":m(`${ee}Returning...`),le.statLoop();break;default:m(\"<br>Invalid input.\"),h(he)}},ue={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){m(`${ee}Showing all available disciplines. Say the name of a discipline to view the skills it contains if it is unlocked, or to unlock it if it is not unlocked.`);const e=c;Object.keys(e).forEach(a=>{e[a].requirements.level<=n.player.level&&(e[a].visible=!0)}),Object.keys(e).forEach(a=>{const t=e[a];1==t.unlocked?m(` - ${P(t.name)} -- UNLOCKED`):1==t.visible&&m(` - ${P(t.name)} -- LOCKED`)}),ye.showAllDisciplines(e),h(ue.disciplinesMenu)},disciplineMenuLoop(e){const a=ue.currentDiscipline,t=n.player;if(1==e){m(`${ee}Showing all skills in the ${a.name.toUpperCase()} discipline. Say the name of a skill to view its description and unlock it if you haven't done so already.`);var s=0,o=0;a.skills.forEach(e=>{-1!=t.library.indexOf(e.name)&&(s+=1),o+=1}),m(`Skills known in this discipline: ${s}/${o}<br>`),a.skills.forEach(e=>{const a=e.name,n=-1!=t.library.indexOf(e.name)?\"X\":\" \";m(`${L[a].name} - [${n}]`)})}ye.skillsInDiscipline(a),h(ue.disciplineMenu)},disciplineMenu(){u(ue.disciplineMenu);const e=f().toLowerCase(),a=n.player,t=ue.currentDiscipline,s=t.skills.findIndex(a=>L[a.name].name==e);if(-1!=s){const n=L[t.skills[s].name].description,r=t.skills[s];if(m(`${ee}${P(e)} - ${n}`),-1!=a.library.indexOf(e))m(`${ee}This skill is already unlocked.`),ye.skillsInDiscipline(t),ue.disciplineMenuLoop(!1);else{if(m(`${ee}This skill is not learned. In order to unlock it, the following requirements must be met:`),0==ue.checkRequirements(r))m(\"<br>You do not meet the requirements to unlock this skill!\"),ue.disciplinesMenuLoop(!0);else{var o=ue.checkCost(r);m(`Unlocking this skill requires ${r.cost.ap} AP.`),a.ap<r.cost.ap&&(o=!1),0==o?(m(\"<br>You do not have enough items/gold/ap to unlock this skill!\"),ue.disciplinesMenuLoop(!0)):(m(\"Would you like to learn this skill? Say 'y' or 'yes' to learn it, otherwise enter anything else.\"),ue.currentSkill=r,h(ue.unlockSkill))}}}else\"back\"==e||\"b\"==e?ue.disciplinesMenuLoop():(m(\"<br>Invalid input\"),ye.skillsInDiscipline(t),ue.disciplineMenuLoop(!1))},unlockSkill(){u(ue.unlockSkill);const e=f().toLowerCase(),a=n.player,t=ue.currentSkill;\"y\"==e||\"yes\"==e?(a.library.push(t.name),t.unlocked=!0,t.cost.items.forEach(e=>{const t=a.inventory.findIndex(a=>{try{return a.name==e[0]}catch{}}),n=a.inventory[t];n[1]-=e[1],0==n[1]&&delete a.inventory[t]}),a.gold-=t.cost.gold,a.ap-=t.cost.ap,m(\"Skill unlocked!\"),ye.unlockedDisciplines(),ue.disciplineMenuLoop(!0)):(m(`${ee}Returning to discipline menu...`),ye.unlockedDisciplines(),ue.disciplineMenuLoop(!0)),E(a)},disciplinesMenu(){u(ue.disciplinesMenu);const e=f().toLowerCase(),a=(n.player,c);if(a.hasOwnProperty(e)){if(1==a[e].unlocked)ue.currentDiscipline=a[e],ue.disciplineMenuLoop(!0);else if(0==a[e].unlocked&&1==a[e].visible){this.currentDiscipline=a[e];const t=this.currentDiscipline;m(`${ee}This discipline is not unlocked. To unlock it, the following requirements must be met:`);n.player;if(0==ue.checkRequirements(t))m(\"You do not meet the requirements to unlock this discipline!\"),ue.disciplinesMenuLoop();else{0==ue.checkCost(t)?(m(\"You do not have enough items/gold to unlock this discipline!\"),ue.disciplinesMenuLoop()):(m(\"Would you like to unlock this discipline? If so, type 'y' or 'yes'. This action cannot be undone.\"),h(ue.unlockDiscipline))}}}else\"back\"==e||\"b\"==e?(m(`${ee}Returning...`),m(`${ee}Entering skills menu. To change skills equipped, say 'e'/'equipped', or say 'l'/'learn' to learn new skills.`),b([\"equipped\",\"learn\",\"back\"]),h(he)):(m(\"<br>Invalid input<br>\"),h(ue.disciplinesMenu));E(n.player)},unlockDiscipline(){u(ue.unlockDiscipline);const e=n.player,a=f().toLowerCase();\"y\"==a||\"yes\"==a?(this.currentDiscipline.unlocked=!0,this.currentDiscipline.cost.items.forEach(a=>{const t=e.inventory.findIndex(e=>{try{return e[0]==a[0]}catch{}}),n=e.inventory[t];n[1]-=a[1],0==n[1]&&delete e.inventory[t]}),e.gold-=this.currentDiscipline.cost.gold,m(`${ee}Discipline unlocked!`),this.currentDiscipline=null,ue.disciplinesMenuLoop()):(m(`${ee}Returning to disciplines menu..`),ue.disciplinesMenuLoop()),E(n.player)},checkRequirements(e,a=!0){const t=n.player;var s=!0,o=!1;return t.level>=e.requirements.level?o=!0:s=!1,a&&m(`Be at level ${e.requirements.level} or higher - [${1==o?\"X\":\" \"}]`),e.requirements.skills.forEach(e=>{-1!=t.library.indexOf(e)?o=!0:(o=!1,s=!1),a&&m(`Unlock skill ${e} - [${1==o?\"X\":\" \"}]`)}),e.requirements.flags.forEach(e=>{1==d[e].complete?o=!0:(o=!1,s=!1),a&&m(`${d[e].desc} - [${1==o?\"X\":\" \"}]`)}),s},checkCost(e){const a=n.player;var t=!0;return m(`<br>You will need to pay: ${e.cost.gold} gold.`),e.cost.items.length>0&&(m(\"You will also need the following items:\"),e.cost.items.forEach(e=>{const n=a.inventory.findIndex(a=>{try{return a[0]==e[0]}catch{}});var s=0;s=-1==n?0:a.inventory[n][1],m(`${e[1]} ${e[0]} (${s}/${e[1]})`),e[1]>s&&(t=!1)})),e.cost.gold>a.gold&&(t=!1),t}},pe={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){m(`${ee}Showing all available disciplines. Say the name of a discipline to`+\" view the skills it contains. Or, say 'e' or 'equipped' to view your currently equipped skills.\");const e=c;Object.keys(e).forEach(a=>{e[a].requirements.level<=n.player.level&&(e[a].visible=!0)}),Object.keys(e).forEach(a=>{const t=e[a];1==t.unlocked&&m(` - ${P(t.name)}`)});var a=[\"equipped\"];Object.keys(e).forEach(t=>{const n=e[t];1==n.unlocked&&a.push(n.name)}),a.push(\"back\"),b(a),h(pe.disciplinesMenu)},disciplinesMenu(){u(pe.disciplinesMenu);const e=f().toLowerCase(),a=n.player,t=c;if(t.hasOwnProperty(e)){if(1==t[e].unlocked){pe.currentDiscipline=t[e];var s=[\"equipped\"];Object.keys(t).forEach(e=>{const a=t[e];1==a.unlocked&&s.push(a.name)}),s.push(\"back\"),b(s),pe.disciplineMenuLoop(!0)}}else\"back\"==e||\"b\"==e?(m(`${ee}Returning...`),m(`${ee}Entering skills menu. To change skills equipped, say 'e'/'equipped',`+\" or say 'l'/'learn' to learn new skills.\"),b([\"equipped\",\"learn\",\"back\"]),h(he)):\"e\"==e||\"equipped\"==e?(m(`${ee}Showing equipped skills. Say the name of an equipped skill to unequip it.`),console.log(\"logging skills\"),console.log(a.stats.skills),a.stats.skills.forEach(e=>{console.log(`current skills is ${e}`);const a=L[e].description;m(`<br>${L[e].name} - ${a}`)}),pe.initShortcuts(),h(pe.unequipSkill)):(m(\"<br>Invalid input<br>\"),h(pe.disciplinesMenu));E(n.player)},unequipSkill(){const e=f().toLowerCase(),a=n.player;if(u(pe.unequipSkill),-1!=a.stats.skills.indexOf(e.replace(/\\s/g,\"_\")))if(a.stats.skills.length>1){if(\"attack\"!=e&&\"guard\"!=e){const t=e.replace(/\\s/g,\"_\");a.stats.skills.splice([a.stats.skills.indexOf(t)],1),m(`${e} unequipped.`)}else m(\"<br>That skill can't be unequipped!\");pe.initShortcuts(),h(pe.unequipSkill)}else m(\"You can't have 0 skills!\"),pe.initShortcuts(),h(pe.unequipSkill);else\"back\"==e||\"b\"==e?(m(`${ee}Returning to disciplines menu...`),pe.disciplinesMenuLoop()):(m(\"<br>Invalid input.\"),pe.initShortcuts(),h(pe.unequipSkill))},disciplineMenuLoop(e=!1){const a=pe.currentDiscipline,t=n.player;1==e&&(m(`${ee}Showing all known skills in the ${a.name.toUpperCase()} discipline. Say the name of a skill to view its description.`),a.skills.forEach(e=>{const a=e.name;\"X\"==(-1!=t.library.indexOf(e.name)?\"X\":\" \")&&m(` - ${L[a].name}`)}));var s=[];a.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&1==e.unlocked&&s.push(L[e.name].name)}),s.push(\"back\"),b(s),h(pe.disciplineMenu)},disciplineMenu(){u(pe.disciplineMenu);const e=f().toLowerCase(),a=n.player,t=pe.currentDiscipline,s=a.library.map(e=>L[e].name);if(-1!=s.indexOf(e)){const n=L[a.library[s.indexOf(e)]].description,o=ge(t,e.replace(\" \",\"_\"));pe.currentSkill=o,m(`<br>${P(e)} - ${n}`),-1!=a.stats.skills.indexOf(e)?(m(\"This skill is already equipped.\"),pe.disciplineMenuLoop(!1)):(m(\"This skill is not equipped. Say 'e' or 'equip' to equip this skill. You can also say 'f' or 'forget' to unlearn this skill. Input anything else to return.\"),h(pe.skillMenu))}else\"back\"==e||\"b\"==e?pe.disciplinesMenuLoop():(m(\"<br>Invalid input\"),ye.skillsInDiscipline(t),h(pe.disciplineMenu))},skillMenu(){const e=f().toLowerCase(),a=n.player;u(pe.skillMenu),\"e\"!=e&&\"equip\"!=e||(a.stats.skills.length<10?(a.stats.skills.push(pe.currentSkill.name),m(`${ee}Skill equipped.`),pe.disciplineMenuLoop(!0)):(m(`${ee}You have too many skills equipped!`),pe.disciplineMenuLoop(!0))),\"f\"==e||\"forget\"==e?(m(`${ee}Would you like to unlearn this skill? You will get the AP back, but you the reagents and gold will be lost.`),m(\"<br>Input 'y'/'yes' to forget the skill, otherwise input 'b'/'back' to return to the discipline menu.\"),b([\"yes\",\"back\"]),h(pe.unlearnSkillResponse)):(m(`${ee}Returning to discipline menu...`),pe.disciplineMenuLoop(!0))},unlearnSkillResponse(){switch(u(pe.unlearnSkillResponse),f().toLowerCase()){case\"y\":case\"yes\":1==pe.currentSkill.unlearnable?pe.unlearnSkill():(m(\"<br>This skill cannot be forgotten!\"),pe.disciplineMenuLoop(!0));break;case\"b\":case\"back\":m(`${ee}Returning...`),pe.disciplineMenuLoop(!0);break;default:m(\"Invalid input.\"),h(pe.unlearnSkillResponse)}},unlearnSkill(){const e=pe.currentSkill;e.unlocked=!1;const a=n.player.library,t=a.indexOf(e.name);a.splice(t,1),n.player.ap+=e.cost.ap,m(`${ee}Skill unlearned! Gained ${e.cost.ap} AP.`),E(n.player),m(`${ee}Returning...`),pe.disciplineMenuLoop(!0)},getSkills:()=>n.player.stats.skills.map(e=>L[e].name),initShortcuts(){const e=pe.getSkills();e.push(\"back\"),b(e)}},ye={unlockedDisciplines:()=>{const e=c;var a=[\"equipped\"];Object.keys(e).forEach(t=>{const n=e[t];1==n.unlocked&&a.push(n.name)}),a.push(\"back\"),b(a)},skillsInDiscipline:e=>{var a=[];e.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&a.push(L[e.name].name)}),a.push(\"back\"),b(a)},showAllDisciplines:e=>{var a=[];Object.keys(e).forEach(t=>{const n=e[t];1==n.visible&&a.push(n.name)}),a.push(\"back\"),b(a)}},ge=(e,a)=>{var t=-1;return e.skills.forEach(e=>{e.name==a&&(t=e)}),t};t(1);const be=(e,a)=>{we.currentShop=ke[e],we.returnFunction=a,n.first_time.shop&&(n.first_time.shop=!1,m(se.shopIntroduction)),we.shopLoop()},_e={1:\"f1_shop\"},ke=Object.assign({f1_shop:{name:\"Floor one shop\",items:[[\"special_armband\",500]]},old_man:{name:\"Old man's teeth\",items:[[\"old_man_yellow_tooth\",6e3],[\"old_man_white_tooth\",1200]]},f1_docile_slime_shop:{name:\"Docile slime's shop\",items:[[\"water_energy\",100]]},f1_old_man:{name:\"Old man's shop\",items:[[\"fishing_rod\",100]]},f1_weak_weapons:{name:\"Weapons shop\",items:[[\"simple_sword\",100],[\"silver_axe\",400],[\"metal_stave\",120],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"magisteel_stave\",500]]},f1_strong_weapons:{name:\"Advanced Weapons shop\",items:[[\"crafted_blade\",1e3],[\"crafted_dagger\",1e3],[\"reinforced_silver_axe\",1200],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"enchanted_magisteel_stave\",1400],[\"conduit_orb\",800],[\"magisteel_runic_dagger\",1200]]},f1_weak_armours:{name:\"Armour shop\",items:[[\"silver_helm\",200],[\"silver_armour\",200],[\"silver_legwear\",200],[\"advanced_silver_helm\",320],[\"advanced_silver_armour\",320],[\"advanced_silver_legwear\",320],[\"wizard_headband\",280],[\"light_wizard_robes\",280],[\"light_wizard_leggings\",280],[\"enchanted_wooden_helm\",350]]},f1_strong_armours:{name:\"Advanced armour shop\",items:[[\"silver_knight_helm\",600],[\"silver_knight_armour\",600],[\"silver_knight_legwear\",600],[\"ninja_wrap\",360],[\"ninja_garb\",360],[\"ninja_legwear\",360],[\"tattered_magus_robes\",600]]},f1_misc:{name:\"Misc shop\",items:[[\"steel\",40],[\"leather\",36],[\"wood\",32],[\"fire_rune\",200],[\"water_rune\",200],[\"thunder_rune\",200],[\"vip_card\",400]]},f1_misc_vip:{name:\"VIP Misc shop\",items:[[\"dark_rune\",200],[\"light_rune\",200]]}}),we={currentItem:void 0,currentShop:void 0,returnFunction:void 0,mode:void 0,price:void 0,menuOptions:void 0,shopLoop:(e=!0)=>{const a=we.currentShop;m(`${ee}Currently shopping at ${a.name}`),m(\"Wares available:\"),a.items.forEach(e=>{const t=a.items.findIndex(a=>a[0]==e[0]);m(`${t+1} - ${_[e[0]].name} - ${e[1]}G`)}),m(\"Type the name/number of an item to buy it, or type 's'/'sell' to enter sell mode.\"),h(we.shopResponse)},shopResponse:()=>{u(we.shopResponse);const e=we.currentShop,a=f().toLowerCase();var t=null!=e.items[a-1]?parseInt(a)-1:-1;if(-1==t&&(t=e.items.findIndex(e=>a==_[e[0]].name.toLowerCase())),-1!=t){const a=e.items[t];m(`${ee}${_[a[0]].name} selected.`),v(_[a[0]]),m(\"<br>Type 'b' or 'buy to buy it. Otherwise, type anything else to return.\"),we.currentItem=a,we.mode=\"buy\",b([\"buy\"]),h(we.itemMenu)}else\"sell\"==a||\"s\"==a?(we.mode=\"sell\",m(`${ee}Entering sell mode..`),we.sellLoop()):\"back\"==a||\"b\"==a?(m(`${ee}Returning...`),we.returnFunction()):(m(\"<br>Invalid input.\"),h(we.shopResponse))},sellLoop:(e=!0)=>{const a=n.player;m(`${ee}Currently in sell mode. Type the name/number of an item in the inventory to see\\n        its details and sell it. Type 'b'/'back' to exit sell mode.`),m(\"<br>Inventory:\");var t=[];a.inventory.forEach(e=>{$(e)?t.push(e):t.includes(e)||t.push(e)}),e&&t.forEach((e,t)=>{var n,s;$(e)?(n=_[e[0]],s=e[0]):\"nothing\"==e||(n=_[e],s=e),m(`${t+1} - ${n.name} (x${T(s,a.inventory)}) - ${n.sell_value}${\"unsellable\"==n.sell_value?\"\":\"G\"}`)}),we.menuOptions=t,h(we.sellResponse)},sellResponse:()=>{u(we.sellResponse);const e=f().toLowerCase(),a=we.menuOptions;var t=-1;\"NaN\"!=parseInt(e).toString()?a.length>=parseInt(e)?(m(`<br>${_[x(a[parseInt(e-1)])].name} selected.`),t=e-1):m(\"<br>Number out of range.\"):(a.forEach((a,n)=>{$(a)?_[a[0]].name.toLowerCase()==e&&(t=n):_[a].name.toLowerCase()==e&&(t=n)}),-1!=t&&m(`<br>${_[a[parseInt(t)].name]} selected.`)),-1!=t?(v(_[x(a[t])]),we.currentItem=a[t],\"unsellable\"!=_[x(a[t])].sell_value?(m(`${ee}If you would like to sell this item, type 's'/'sell'. Otherwise, type anything else to return.`),h(we.itemMenu)):(m(\"This item cannot be sold.\"),we.sellLoop())):\"b\"==e||\"back\"==e?(m(`${ee}Returning...`),we.shopLoop()):(m(\"<br>Invalid input.\"),h(we.sellResponse))},itemMenu:()=>{u(we.itemMenu);we.currentShop;const e=f().toLowerCase();var a=\"none\";\"b\"==e||\"buy\"==e?a=\"buy\":\"s\"!=e&&\"sell\"!=e||(a=\"sell\"),a==we.mode?(m(\"buy\"==a?`${ee}How many would you like to buy? (Please type a numerical integer value`+\", or type '0' to return)\":`${ee}<br>How many would you like to sell? (Please type a numerical integer value`+\", or type '0' to return\"),h(we.itemConfirmation)):(m(`${ee}Returning...`),\"buy\"==we.mode?we.shopLoop():we.sellLoop())},itemConfirmation:()=>{u(we.itemConfirmation);we.currentShop;const e=f().toLowerCase();var a=!1;if(\"NaN\"!=parseInt(e).toString())if(parseInt(e)>0&&\"buy\"==we.mode){const t=parseInt(e),n=t*we.currentItem[1];m(`${ee}buying ${t} ${_[we.currentItem[0]].name}${t>1?\"s\":\"\"} will cost`+` ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),we.price=n,h(we.itemTransaction),a=!0}else if(parseInt(e)>0&&\"sell\"==we.mode){const s=parseInt(e);var t,n;$(we.currentItem)?(n=s*_[we.currentItem[0]].sell_value,t=_[we.currentItem[0]].name):(n=s*_[we.currentItem].sell_value,t=_[we.currentItem].name),m(`${ee}${s} ${t}${s>1?\"s\":\"\"} will sell for\\n                ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),we.price=n,h(we.itemTransaction),a=!0}else 0==parseInt(e)&&(m(`${ee}Returning..`),a=!0,\"buy\"==we.mode?we.shopLoop():we.sellLoop());0==a&&(m(\"<br>Invalid input\"),h(we.itemConfirmation))},itemTransaction:()=>{u(we.itemTransaction);we.currentShop;const e=f().toLowerCase(),a=n.player,t=we.price;if(\"y\"==e||\"yes\"==e)if(\"buy\"==we.mode)if(a.gold>=t){a.gold-=t;const e=t/we.currentItem[1];m(`${ee}Purchasing...`),k(we.currentItem[0],e,e),m(\"Returning...\"),we.shopLoop()}else m(\"<br>Too expensive!\"),we.sellLoop();else{const e=we.currentItem,n=a.inventory;if(($(e)?T(e[0],n):T(e,n))>=t/_[x(we.currentItem)].sell_value){a.gold+=t;const e=t/_[x(we.currentItem)].sell_value;w(x(we.currentItem),e),m(`${ee}Selling..`),m(\"<br>Returning...\"),we.sellLoop()}else m(`${ee}Not enough of the item in the inventory!`),we.sellLoop()}else m(\"<br>Returning..\"),\"buy\"==we.mode?we.shopLoop():we.sellLoop();E(n.player)}},ve={wolfhide_armour:{name:\"Wolfhide armour\",item:\"wolfhide_armour\",description:\"Allows for the crafting of an item.\",gold:40,items:[[\"grey_wolf_pelt\",10],[\"leather\",1]]},wolfhide_cap:{name:\"Wolfhide cap\",item:\"wolfhide_cap\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",7],[\"leather\",1]]},wolfhide_leggings:{name:\"Wolfhide leggings\",item:\"wolfhide_leggings\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",8],[\"leather\",1]]},slime_bracers:{name:\"Slime bracers\",item:\"slime_bracers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"slime_ball\",10],[\"steel\",1]]},slime_reinforced_sword:{name:\"Slime reinforced sword\",item:\"slime_reinforced_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",10],[\"simple_sword\",1]]},wolfhide_charm:{name:\"Wolfhide charm\",item:\"wolfhide_charm\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"sharp_claw\",2],[\"grey_wolf_pelt\",8]]},lizard_bracelet:{name:\"Lizard bracelet\",item:\"lizard_bracelet\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"tiny_lizard_tail\",2],[\"leather\",3]]},aquus_orb:{name:\"Aquus orb\",item:\"aquus_orb\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5]]},water_infused_armour:{name:\"Water infused armour\",item:\"water_infused_armour\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5],[\"advanced_silver_armour\",1]]},water_infused_helm:{name:\"Water infused helm\",item:\"water_infused_helm\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",3],[\"advanced_silver_helm\",1]]},water_infused_legwear:{name:\"Water infused legwear\",item:\"water_infused_legwear\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",4],[\"advanced_silver_helm\",1]]},luminant_charm:{name:\"Luminant charm\",item:\"luminant_charm\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"steel\",2],[\"leather\",2],[\"light_absorbant_eye\",1]]},wolfhide_dagger:{name:\"Wolfhide dagger\",item:\"wolfhide_dagger\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"simple_dagger\",1],[\"grey_wolf_pelt\",8]]},tear_of_lucia:{name:\"Tear of Lucia\",item:\"tear_of_lucia\",description:\"Allows for the crafting of an item.\",gold:500,items:[[\"steel\",4],[\"conduit_orb\",1],[\"manasoul\",1]]},pickaxe:{name:\"Pickaxe\",item:\"pickaxe\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"wood\",1]]},makeshift_steel_armour:{name:\"Makeshift steel armour\",item:\"makeshift_steel_armour\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_steel_helm:{name:\"Makeshift steel helm\",item:\"makeshift_steel_helm\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",2]]},makeshift_steel_legwear:{name:\"Makeshift steel legwear\",item:\"makeshift_steel_legwear\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},red_slime_bracers:{name:\"Red slime bracers\",item:\"red_slime_bracers\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"red_slime_ball\",10],[\"steel\",2]]},shinobi_armour:{name:\"Shinobi armour\",item:\"shinobi_armour\",description:\"Allows for the crafting of an item.\",gold:300,items:[[\"ninja_garb\",1],[\"grey_wolf_pelt\",10],[\"shadow_pelt\",5]]},shinobi_headcloak:{name:\"Shinobi headcloak\",item:\"shinobi_headcloak\",description:\"Allows for the crafting of an item.\",gold:250,items:[[\"ninja_wrap\",1],[\"grey_wolf_pelt\",7],[\"shadow_pelt\",3]]},shinobi_leggings:{name:\"Shinobi leggings\",item:\"shinobi_leggings\",description:\"Allows for the crafting of an item.\",gold:280,items:[[\"ninja_legwear\",1],[\"grey_wolf_pelt\",8],[\"shadow_pelt\",4]]},earthen_sword:{name:\"Earthen sword\",item:\"earthen_sword\",description:\"Allows for the crafting of an item.\",gold:220,items:[[\"sharpened_sword\",1],[\"venomous_claw\",4],[\"sharp_claw\",3],[\"steel\",3]]},makeshift_sword:{name:\"Makeshift sword\",item:\"makeshift_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"leather\",1]]},wolven_reavers:{name:\"Wolven reavers\",item:\"wolven_reavers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"leather\",1],[\"sharp_claw\",3],[\"grey_wolf_pelt\",3]]},shadow_cloak:{name:\"Shadow cloak\",item:\"shadow_cloak\",description:\"Allows for the crafting of an item.\",gold:400,items:[[\"leather\",3],[\"shadow_pelt\",8],[\"shadow_corona\",1],[\"grey_wolf_pelt\",15]]},bladed_armour:{name:\"Bladed armour\",item:\"bladed_armour\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"makeshift_steel_armour\",1],[\"sharp_claw\",4]]},friendly_greater_slime:{name:\"Friendly greater slime\",item:\"friendly_greater_slime\",description:\"Strengthen your slime buddy!\",gold:0,items:[[\"friendly_slime\",1],[\"water_rune\",1],[\"water_energy\",1],[\"slime_bracers\",1]]}},$e=e=>{xe.returnFunction=e,n.first_time.crafting&&(n.first_time.crafting=!1,m(se.craftingIntroduction)),xe.recipesLoop()},xe={currentRecipe:void 0,recipesArray:void 0,returnFunction:void 0,recipesLoop:(e=!0)=>{e&&m(`${ee}Currently in the recipes menu. Input 'a' to see them all in alphabetical order, `+\"or input 'r' to see first all recipes that can be crafted.\"),b([\"alphabetical\",\"gold\",\"ready\",\"back\"]),h(xe.displayRecipes)},displayRecipes:()=>{const e=f().toLowerCase();u(xe.displayRecipes);var a=n.player.recipes.map(e=>ve[e]);const t=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"];var s=!1;switch(e){case\"alphabetical\":case\"a\":s=!0;for(var o=0;o<a.length;o++)for(var r=1;r<a.length;r++)for(var l=!1,i=0;0==l;){const e=t.indexOf(a[r].name[i].toLowerCase()),n=t.indexOf(a[r-1].name[i].toLowerCase());if(e<n){const e=a[r];a[r]=a[r-1],a[r-1]=e,l=!0}else e>n?l=!0:i+1>=a[r].name.length||i+1>=a[r-1].name.length?l=!0:i++}break;case\"ready\":case\"r\":s=!0;var c=0;for(o=1;o<a.length;o++)if(xe.checkReady(a[o],inventory)){const e={...a[o]};delete a[o],a.unshift(e),o++,++c==a.length&&(o=a.length)}a=a.filter((function(e){return void 0!==e}));break;case\"back\":case\"b\":m(\"<br>Returning...\"),xe.returnFunction();break;default:m(\"<br>Invalid input.\"),xe.recipesLoop(!1)}if(s){xe.recipesArray=a,m(`${ee}Showing recipes...`),a.forEach(e=>{const t=1==xe.checkReady(e,inventory)?\"[X]\":\"[ ]\";m(`${a.indexOf(e)+1} - ${e.name} (${t})`)}),m(`${ee}Say the name or number of a recipe to access it. From there you can see the`+\" items and gold required, and craft the recipe if you desire as well.\");a.map(e=>e.name);h(xe.recipesMenu)}},recipesMenu:()=>{u(xe.recipesMenu);const e=f().toLowerCase(),a=xe.recipesArray,t=parseInt(e);var n=!1;\"NaN\"!=t.toString()&&a.length>t-1&&(n=!0);var s,o=!1;switch(a.forEach(a=>{a.name.toLowerCase()==e&&(o=!0,s=a)}),!0){case n:a[t-1];xe.currentRecipe=a[t-1],xe.recipeLoop();break;case o:xe.currentRecipe=s,xe.recipeLoop();break;case\"b\"==e:case\"back\"==e:m(`${ee}Returning..`),xe.recipesLoop();break;default:m(`${ee}Invalid input.`),h(xe.recipesMenu)}},recipeLoop:()=>{xe.recipesArr;const e=xe.currentRecipe,a=n.player.inventory;m(`${ee}Currently viewing ${e.name} recipe.`),m(\"The following is required:\"),m(`${e.gold} gold (You have ${n.player.gold})`),e.items.forEach(e=>{m(`${e[1]} ${_[e[0]].name}${e[1]>1?\"s\":\"\"} (You have ${I(e[0],a)})`)}),m(\"<br>The recipe will craft the following item:\"),v(_[e.item],!0,!0,!0,!1,!0),xe.checkReady(e,a)&&m(\"<br>This item can be crafted.\"),m(\"<br>If the item can be crafted, type 'c' to craft it. Otherwise, type 'z' to scroll up, 'x' to scroll down (looking through more recipes), or 'b' to go back. 'l' will reprint the list and your position.\"),b([\"up\",\"down\",\"list\",\"craft\",\"back\"]),h(xe.recipeMenu)},recipeMenu:()=>{u(xe.recipeMenu);const e=f().toLowerCase(),a=xe.recipesArray;console.log(a);const t=xe.currentRecipe,s=n.player.inventory;var o=a.findIndex(e=>(console.log(e),t.name==e.name));switch(e){case\"up\":case\"z\":m(`${ee}Scrolling back..`),0==o?o=a.length-1:o--,xe.currentRecipe=a[o],xe.recipeLoop();break;case\"down\":case\"x\":m(`${ee}Scrolling forward..`),o==a.length-1?o=0:o++,xe.currentRecipe=a[o],xe.recipeLoop();break;case\"list\":case\"l\":var r;m(`${ee}Displaying recipes...`),a.forEach(e=>{r=e.name==xe.currentRecipe.name?\"<b>\":\"\",m(`${r}${e.name}${\"<b>\"==r?\"</b>\":\"\"}`)}),h(xe.recipeMenu);break;case\"c\":xe.checkReady(xe.currentRecipe,s)?(m(`${ee}How many of this item would you like to craft? Please input the `+\" number you would like to craft, or input '0' if you would like to return.\"),h(xe.inputQuantity)):(m(\"<br>This item cannot be crafted.\"),h(xe.recipeMenu));break;case\"back\":case\"b\":m(\"<br>Returning...\"),xe.recipesLoop();break;default:m(\"<br>Invalid input.\"),h(xe.recipeMenu)}},inputQuantity:()=>{const e=f().toLowerCase();u(xe.inputQuantity);const a=n.player.inventory;if(\"NaN\"==parseInt(e).toString())m(\"<br>Invalid input.\"),h(xe.inputQuantity);else if(0==parseInt(e))m(\"<br>Returning...\"),xe.recipeLoop();else{const t=parseInt(e),n=JSON.parse(JSON.stringify(xe.currentRecipe));n.items.forEach(e=>{e[1]=e[1]*t}),n.gold=n.gold*t;const s=xe.checkReady(n,a);m(`${ee}In order to craft ${e} ${_[xe.currentRecipe.item].name}`+`${t>1?\"s\":\"\"}, You will need the following items:`),n.items.forEach(e=>{const t=e[0],n=e[1],s=I(t,a);m(`${n} ${_[t].name} (You have ${s})`)}),m(`${n.gold} gold`),s?(m(`<br>Are you sure you would like to craft ${t}`+` ${_[xe.currentRecipe.item].name}? Input 'y'/'yes' to confirm, or enter`+\" anything else to return.\"),xe.craftAmount=t,h(xe.craftConfirmation)):(m(\"<br>You cannot craft this much of that item!\"),xe.recipeLoop())}},craftConfirmation:()=>{u(xe.craftConfirmation);const e=f().toLowerCase();u(xe.craftConfirmation);const a=n.player;if(\"y\"==e||\"yes\"==e){const e=xe.currentRecipe,n=xe.craftAmount;for(var t=0;t<n;t++)a.gold-=e.gold,e.items.forEach(e=>{w(e[0],e[1])});k(e.item,n,n),E(a),m(`${ee}Returning to recipe menu...`),xe.recipeLoop()}else m(\"<br>Returning...\"),xe.recipeLoop()},checkReady:(e,a)=>{const t=n.player.inventory,s=e.items;var o=!0;return s.forEach(e=>{I(e[0],t)>=e[1]==0&&(o=!1)}),n.player.gold<e.gold&&(o=!1),o}},Ie=e=>{1==e[0].length&&(e=[e]),e.forEach(e=>{console.log(e),null!=ve[e]?(n.player.recipes.push(e),m(`<br>Unlocked recipe [${ve[e].name}]`)):console.log(\"recipe does not exist\")})},Se={old_man:{name:\"Old man\",say:[[\"<i>You approach the old man.\",1],[\"[name]: Hello! How are you faring today?\",1]],options:{\"I'm okay, thanks\":{say:[[\"[name]: That's good. Hope you've been eating your greens.\",1],[\"[name]: Any idea where I am?\",1]],options:{\"no, sorry\":{say:[[\"[name]: Oh, shame. Want to see my teeth?\",1]],options:{no:{say:[[\"[name]: Ok.\",1]],options:{\"ok, goodbye\":{action:[\"end\"]},\"put 'em up old man\":{say:[[\"[name]: Okay brother, you're asking for it.\",1],[\"Here we go!\",.5]],action:[\"battle\",[\"wolf\",[\"waypoint\",\"no, sorry\"]]]}}},yes:{say:[[\"<i>You respond 'yes', and also compliment him on his teeth.</i>\",1]],action:[\"waypoint\",\"You have nice teeth\"]}}}}},\"You have nice teeth\":{say:[[\"I know. Here, have a look\",1],[\"<i>He shows you his teeth</i>\",1],[\"Buy some!\",1]],action:[\"shop\",\"old_man\",[\"waypoint\",\"no, sorry\"]]}},end:[[\"[name]: Ok bye\",1]]},lily:{name:\"Lily\",say:[[\"<i>You approach the child. As you near her, she backs away slightly.\",1]],conditional:{\"level: 0\":{say:[[\"[name]: H-Hello [player]... can you help me?\"]],action:[\"gold\",1e3],action3:[\"exp\",1e3],action2:[\"end\"]},\"item: 1212 slime_ball\":{say:[[\"[name]: Icky! Slime!\"]],action:[\"items\",\"slime_ball\",200],action2:[\"end\"]},\"flag: -beatSlime\":{say:[[\"[name]: You haven't beat the slime? Weakling.\"]],action:[\"recipe\",\"slam_sword\"],action2:[\"end\"]},\"level: 121\":{say:[[\"[name]: I don't have anything interesting to say to you\",1]],action:[\"end\"]}},end:[[\"[name]: Goodbye.\",1]]},f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action5:[\"exp\",500],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},f1_docile_slime:{name:\"Docile slime\",say:[[\"<i>You approach the slime.</i>\",1]],conditional:{\"flag: f1_helped_docile_slime\":{say:[[\"<i>The slime looks happy to see you. It wants to show you something.\",2]],action:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},\"flag: -f1_spoken_to_docile_slime\":{say:[[\"<i>Slimes can't speak, obviously. But it seems to want something from you.</i>\",1],[\"<i>Somehow you gather that it is trying to gesture to the remnants of slime on the ground.. as though it wants some slime for itself.</i>\",2],[\"<i>100 Slime balls might be enough to appease the slime. It seems to have nothing more to say to you.\",2]],action:[\"flag\",\"f1_spoken_to_docile_slime\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_docile_slime\":{conditional:{\"item: 100 slime_ball\":{say:[[\"<i>The slime looks pleased with you, and hopeful. Will you give the sime what it wants?\",2]],options:{yes:{exp:[\"exp\",3e3],say:[[\"<i>You give the slime 100 slime balls. It has way of showing emotion, but you can tell that it's very happy.\",2],[\"<i>It seems to want to show you something..\",1]],action3:[\"items\",\"slime_ball\",-100],action:[\"flag\",\"f1_helped_docile_slime\",\"true\"],action4:[\"items\",\"friendly_slime\",1],action5:[\"recipe\",\"friendly_greater_slime\"],action2:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},no:{say:[[\"<i>The slime looks disappointed. It doesn't want to speak to you anymore.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>You don't seem to have what the slime wants. It ignores you.</i>\",1]],action:[\"end\"]}}}},end:[[\"[name]: ...\",1]]},f1_wanderer_statue:{name:\"Unnamed Wanderer\",say:[[\"<i>You approach the statue.</i>\",1],[\"<i>It is well looked after, despite showing clear signs of wear. It seems to be of some kind of goddess, who adorns a benevolent smile with her arms outstreched, as though enveloping many in her embrace.\",2],[\"<i>Below the statue is a tall rectangular stone container. It is filled up about halfway with various items.\",2]],conditional:{\"item: 1 wanderer_memorabilia\":{say:[[\"Some of the items remind you of the wanderer memorabilia that you found off somebody else. Will you add some to the container?\",2]],options:{yes:{say:[[\"<i>You place a piece of wanderer memorabilia into the rectangle. Nothing happens for a short while, but a person eventually emerges. They have ragged clothes and a few weapons and other useful items holstered at their waste. Despite their decrepit appearance there is an aura of experience and knowledge that you interpret from their demeanour.\",4],[\"[name]: Who are you? You don't look like a wanderer.\",1]],action:[\"items\",\"wanderer_memorabilia\",-1],options:{\"wanderer?\":{say:[[\"[name]: You must have happened on somebody else's memorabilia...\",1],[\"<i>The person thinks to themselves for a little.</i>\",1],[\"[name]: Many people have gone on adventures in the past in search for some purpose, or in pursuit of some kind of treasure or reward.\",2],[\"[name]: Regardless of whether they find what they are looking for, at the end of their quest, they almost always find that there is nothing more they want to achieve... these people are called wanderers.\",3],[\"[name]: Not all wanderers believe in the Solace Goddess Lucia, but she is somewhat of an icon for wanderers... hence the statue.\",2],[\"[name]: Wanderers place their memorabilia here in honour of her and other wanderers. if two wanderers meet here, they will often battle to remember their days of adventure and learn of the experiences of others.\",3],[\"[name]: You aren't a wanderer, but you still seem like somebody who can fight. If you would like, we can battle here, right now.\",2]],options:{yes:{action:[\"waypoint\",\"let's fight!\"]},no:{say:[[\"[name]: Alright. Well, now you know the purpose of this area. If you come here again, it's unlikely you will meet the same person. Keep safe, young one.\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}}},\"let's fight!\":{say:[[\"[name]: Very well then. Prepare yourself!\",1]],action:[\"battle\",[\"wayward_traveler\",[\"waypoint\",\"after_battle\"]]]}}},no:{say:[[\"<i>You decide to leave the statue alone.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>There doesn't seem to be much to do here. Nothing you own reminds you of the items that are in your possession. You decide to leave the statue alone.\",2]],action:[\"end\"]}},end:[[\"\",0]],after_battle:{say:[[\"[name]: It was a good fight. I am glad to have met you. Perhaps we will meet again someday...\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}},f1_rude_kid:{name:\"Kid\",conditional:{\"flag: -f1_spoken_to_rude_kid\":{say:[[\"<i>You approach the kid. He has an uninviting look on his face. As you near him, he spits on the floor.\",2],[\"[name]: Pfft. Whaddya want? Loser.\"]],options:{\"<i>kick his shin</i>\":{say:[[\"<i>You kick the kid's shin.</i>\",1],[\"[name]: OW! What the hell, dude?!\",1],[\"<i>The kid's eyes tear up and he runs away.\",1],[\"<i>You notice he left some gold on floor. Hopefully you don't see that kid again.</i>\"]],action:[\"gold\",50],action5:[\"exp\",100],action2:[\"flag\",\"f1_kicked_rude_kids_shin\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]},\"why are you so rude?\":{say:[[\"[name]: Rude? I'm just battle hardened, y'see. Check this out.\",1],[\"<i>The kid holds up a small patch of grey wolf fur.</i>\",1],[\"[name]: Runt attacked me and my li'l sis. We got separated, and I fought off the wolf with my own bare hands. Not a pretty sight for pansy folk like yourself.\",2],[\"[name]: You know what? Keep this pelt. As a reminder of the horrors of war.\",1],[\"<i>He throws the pelt at your feet.</i>\",1],[\"[name]: Not everyone has to go through what I did...\",1],[\"<i>The kid walks away, hands in his pockets. Hopefully you don't see that kid again.\",2]],action:[\"items\",\"grey_wolf_pelt\",3],action5:[\"exp\",300],action2:[\"flag\",\"f1_extended_convo_with_rude_kid\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]}}},\"flag: f1_spoken_to_rude_kid\":{say:[[\"<i>You look for the rude kid, but he isn't there anymore.\",1]],action:[\"end\"]}},end:[[\"\",0]]},f1_wolf_man:{name:\"Lucas\",say:[[\"<i>You approach the man. As you do so, he stands up. He smells a little.\",1.5],[\"[name]: Hi. My name's Lucas. I live in the forest, nearby this area.\",1],[\"[name]: I thought it would be a good idea to let you know that there more wolves in this spot than normal. If you need some wolf pelts, it might be worth hanging around here.\",2],[\"<i>The man closes his eyes. It doesn't seem like he wants to say much else..</i>\",1]],action:[\"end\"],end:[[\"\",0]]},f1_old_man:{name:\"Old Man\",say:[[\"<i>You start to move towards the old man, but before you can approach, he quickly notices you and beckons you over rather enthusiastically.</i>\",1.5],[\"[name]: Helloe there! Not many people come 'round these parts no more.\",1],[\"[name]: It's such a beautifool place.. but a little dangerous for most people, even though it's a little less dangerous than the ruins and forest a li'l far off.\",2],[\"[name]: Must the be rumours of some massive sea serpent, 'though I've never seen nothing like that in my time..\",1.5],[\"[name]: Thanks for listenin' to me ramblin' off about nothing. I have some stuff that could be of use to you, if you're interested...\",2]],options:{yes:{say:[[\"[name]: Ok, then - have yourself a look..\"]],action:[\"shop\",\"f1_old_man\",[\"end\"]]},no:{say:[[\"[name]: Alrighty then - I'll be seeyin' ye around, I suppose.\"]],action:[\"end\"]}},end:[[\"<i>You say goodbye to the old man.</i>\",1]]},f1_little_boy:{name:\"Little boy\",say:[[\"<i>As you begin to approach the kid, you notice his distinctive eyes, a hue of dull red. The dark clothes that he's wearing make him difficult to say, and coalesce with his facial aesthetic into a somewhat edgy demeanour.\",2]],conditional:{\"flag: f1_helped_little_girl\":{conditional:{\"flag: -f1_spoken_to_little_boy\":{say:[[\"[name]: ...\",.5],[\"[name]: I don't wanna speak to a weakling like you. Bring me the Crimson Regalia if you're realling worth my time..\",1],[\"<i>The kid seems reluctant to speak. Perhaps if you bring him 30 or so red slime balls..\",1]],action:[\"flag\",\"f1_spoken_to_little_boy\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_boy\":{conditional:{\"flag: -f1_helped_little_boy\":{conditional:{\"item: 30 red_slime_ball\":{say:[[\"[name]: Is that.. Crimson Reglia?!\",1],[\"<i>The child hesitates a little. It doesn't seem like he thought you'd actually bring him the slime balls.\",2],[\"[name]: I-I bet you stole them from someone. How pathetic--\",1],[\"[player]: What the hell man? What's your problem?\",1],[\"[name]: You can speak?! Crapdude calm down I was just messing around I--\",1],[\"[player]: Kids like you are so annoying.. I'll show you--\",1],[\"[name]: Brocalm down! OK, I found this thing in this forest and I thought it was really cool and since putting it on I haven't been attacked here just leave me alone!!\",2.5],[\"<i>The kid hands you a pendant and runs off. By the time you've processed what has happened the kid is out of earshot. Oh well. There was some money on the floor as well... your lucky day.\",3]],action:[\"gold\",500],action6:[\"exp\",3e3],action2:[\"items\",\"red_slime_ball\",-30],action5:[\"items\",\"shadowwarding_pendant\",1],action3:[\"flag\",\"f1_helped_little_boy\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: I don't see the crimson regalia.. get out of my sight.\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_boy\":{say:[[\"<i>...Is what you would've seen, but the kid is noowhere to be found.\",1]],action:[\"end\"]}}}}},\"level: 0\":{say:[[\"[name]: You aren't worthy.. I can feel it.\",1],[\"<i>The boy refuses to say anything more. It looks like you need to help someone else before him.</i>\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_lost_person:{name:\"Lost person\",say:[[\"[name]: Hi... I'm lost. Do you know where I am?\",1]],options:{yes:{say:[[\"[name]: Sweet! Can you tell me where I am then?\",1]],options:{\"Sorry I was lying, I don't know.\":{say:[[\"[name]: ...\",1],[\"[name]: Godammit.\",1]],action:[\"end\"]},\"The dark forest\":{say:[[\"[name]: Thanks! That's not helpful at all!\",1],[\"[name]: Asshole.\",1]],action:[\"end\"]},\"The twisted trees\":{say:[[\"[name]: I'm pretty sure that's not even a place.\",1]],action:[\"end\"]},Hell:{say:[[\"[name]: Figures. I've raided one too many village I guess..\",1],[\"[name]: But the women were worth it.\",1],[\"[name]: You were joking? UM..\",1]],action:[\"end\"]}}},no:{say:[[\"[name]: Fair enough. Not like I can talk...\",1],[\"[name]: I know a bit about the general area we're in. The Driftwood area has four main sections.\",2],[\"[name]: In the center sort of is the foresty area. To the north-west is a small settlement. I don't know...\",2],[\"...much about the rest but I guess there's one area other than this one..\",1],[\"[name]: This place is kind of well-known because it has a bunch of interesting stuff in such a small area.\",2],[\"[name]: Apparently there's a hydra in a nearby sea, and some evil creature lurking in the forest.. gives me the creeps!\",2],[\"[name]: If you ever find out where this place is, please let me know! I don't wanna stay here any longer...\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_weapons_shop:{name:\"Reiner\",say:[[\"<i>You approach the weapons merchant. He is quite large and muscular, with brown hair and brown facial hair. He flashes a friendly smile your way.</i>\",3],[\"[name]: Hey there, runt! You interested in some weapons?\",1]],options:{\"weapons shop\":{action:[\"shop\",\"f1_weak_weapons\",[\"end\"]]},\"advanced weapons shop\":{action:[\"shop\",\"f1_strong_weapons\",[\"end\"]]},nope:{say:[[\"[name]: No problem! Seeya around!\",1]],action:[\"end\"]}},end:[[\"[name]: See you later, runt! Come again soon!\",1]]},f1_armour_shop:{name:\"Sora\",say:[[\"<i>You approach the armour merchant. They look a little out of place. As you approach him, he scratches his head and watches you as you near.</i>\",3],[\"[name]: Umm... hi. Would you like some armour?\",1]],options:{\"armour shop\":{action:[\"shop\",\"f1_weak_armours\",[\"end\"]]},\"advanced armour shop\":{action:[\"shop\",\"f1_strong_armours\",[\"end\"]]},nope:{say:[[\"[name]: Alright. Um..\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, uh.. see you later, I guess...\",1]]},f1_misc_shop:{name:\"Amy\",say:[[\"<i>You approach the miscellaneous merchant. She has blond hair and an intelligent glare. She watches you silently as you approach, however she has a friendly aura.\",3],[\"[name]: Hello. I have some stuff for sale. Would you like anything?\"]],options:{\"misc shop\":{action:[\"shop\",\"f1_misc\",[\"end\"]]},\"VIP misc shop\":{conditional:{\"item: 1 vip_card\":{action:[\"shop\",\"f1_misc_vip\",[\"end\"]]},\"level: 0\":{say:[[\"[name]: Sorry, you need a VIP card to access the VIP shop.\",1]],action:[\"waypoint\",\"nope\"]}}},nope:{say:[[\"[name]: Ok. Thanks for coming.\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, see you later.\",1]]},f1_man_a:{name:\"Male settler\",say:[[\"<i>You approach the man. He, similar to most other men in the settlement, has a somewhat muscular build.\",1.5],[\"He had no facial hair and messy black hair, complimenting his plain, dark brown eyes. His attire was...\",1.5],[\"...Comparable to most others in the settlement, plain fabric of a dull hue.\",1],[\"[name]: Hey. What's up?\",1]],options:{talk:{say:[[\"[name]: This settlement has existed for a few centuies, I think.. I moved in a few years ago.\",2],[\"[name]: It's fairly dangerous around here, so a lot of the people who stay here are fairly strong.\",2],[\"[name]: But there are tons of animals here, and some of them can be hunted for good reagents, so it's a great place for adventurers to stay.\",3]],conditional:{\"level: 0\":{options:{\"How long are you going to stay here?\":{say:[[\"[name]: Ehh... I don't know. Maybe a few more years.\",1],[\"[name]: Maybe once I've made some more money. There are some safer places nearby.\",1],[\"[name]: I could settle down, get a more stable job and a house.. it's pretty appealing.\",1.5],[\"[name]: But I don't really know right now. It's pretty nice here right now. Gets you in the mood for an adventure..\",2]],action:[\"waypoint\",\"level: 0\"]},\"Do you have a family?\":{say:[[\"[name]: Parents? Yeah. But no wife or kids.\",1],[\"[name]: Women who just want to settle down don't really stay here, it's not a great place unless you wanna adventure. So most of the girls here are single and uninterested.\",3],[\"[name]: It's a real shame. I wish Amy would take some interest in me..\",1]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}}}},bye:{action:[\"end\"]}},end:[[\"[name]: Mk, see you later.\",1]]},f1_hyssha:{name:\"Hyssha\",say:[[\"<i>You approach the woman. She seems stronger than most of the residents. Wavy auburn hair cascades down her spine.</i>\",2],[\"<i>She has a somewhat tough face, and her blue eyes grant her a piercing gaze. She's wearing brownish hunter garb, accentuated by the intricate wooden bow holstered at her back.\",3],[\"[name]: Hello. I take it you are an adventuerer. My name is Hyssha.\",1]],conditional:{\"level: 0\":{options:{\"What are you doing here?\":{say:[[\"[name]: I have been staying here for some time. I am searching for a legendary beast..\",1.5],[\"[name]: I am trying to hunt powerful beasts. I use each one I slay to improve my adventuring gear.\",2]],options:{\"How many beasts have you slain?\":{say:[[\"[name]: Three. Rokusha, an earth anima, whose magical scales I used to enhance my bow.\",1.5],[\"[name]: Ignia, a fire wyvern. It's wings and scales I used to enhance my armour. With it's heart, I enhanced my bow.\",2],[\"[name]: The final was a beast in this area.. I don't know it's name, but it escaped before I could slay it. From a poison-tipped claw it had I enhanced many of my arrows.\",3],[\"[name]: I cannnot simply slay all beasts I come across. I must consider the consequences.\",1.5],[\"[name]: Otherwise, I would have slain many more creatures..\",1]],action:[\"waypoint\",\"level: 0\"]},\"Where's the legendary beast that you're hunting?\":{say:[[\"[name]: I don't know. It is a type of water beast, however to this point is has eluded me.\",2],[\"[name]: Perhaps it is absent, or must be summoned.. I must do more research.\",1.5],[\"(BOSS NOT ADDED YET)\"]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}},bye:{say:[[\"<i>You say goodbye to Hyssha.\",1]],action:[\"end\"]}}}},end:[[\"[name]: Until next, adventurer.\",1]]},f1_worried_woman:{name:\"Worried woman\",say:[[\"<i>You approach the worried woman. She has short hair and a friendly face, although right now it is warped into a worried expression.\",2],[\"[name]: Hello.. have you seen my kids?\",1],[\"[name]: They both seem to like slimes a lot.. but they ran off into the forest and I haven't seem them since!\",2],[\"[name]: I can't go out to find them on my own.. I wouldn't be able to fend for myself.\",1.5]],action:[\"end\"],end:[[\"[name]: I hope they're ok... if they were hurt, I..\",1]]},f1_tutorial_man:{name:\"Pel\",say:[[\"<i>You approach a man nearby. He looks at you as though he's unsurprised that you're here.</i>\",1.5],[\"[name]: Hello! My name's Pel. I'm just here to tell you a few things.\",1.5],[\"[name]: Currently you're in the rough center of a very small area. Be careful where you go, because you may be attacked by monsters as you travel!\",2.5],[\"[name]: I think to the north-west there's some kind of settlement, they might have some stuff. But I don't know what else there is in this area. Let me know if you see anything cool!\",3.5]],action:[\"end\"],end:[[\"<i>It looks like he's done talking. You don't have anything to say to him..</i>\",1]]}},Pe=Object.assign(Se),Ee={currentNpc:void 0,currentBranch:void 0,returnFunction:void 0,initNpc(e,a){this.currentNpc=JSON.parse(JSON.stringify(Pe[e])),this.currentBranch=this.currentNpc,this.returnFunction=a,this.runBranch(Object.keys(this.currentBranch))},runBranch(e){const a=this.currentBranch;console.log(\"CURRENTLY RUNNING ON THE FOLLOWING BRANCH\"),console.log(a),console.log(\"RESPONSE ARRAY IS AS FOLLOWS\"),console.log(e);for(var t,s=!1,r=0;r<Object.keys(a).length;r++){const f=e[r];switch(f){case\"say\":{s=!0;const t=Ee.parseDialogue(a.say);p(t,\"outside\",()=>{var a=e;delete a[a.indexOf(\"say\")],this.runBranch(a)});break}case\"action6\":case\"action5\":case\"action4\":case\"action3\":case\"action2\":case\"action\":if(!s){const e=Ee.currentBranch;Ee.currentNpc;switch(e[f][0]){case\"end\":Ee.runBranch([\"end\"]);break;case\"waypoint\":{const a=e[f][1],t=A(Ee.currentNpc,a);Ee.currentBranch=t,Ee.runBranch(Object.keys(t));break}case\"shop\":{const a=e[f][1];var l=e[f][2];switch(l[0]){case\"end\":l=()=>{const e={action:[\"end\"]};Ee.currentBranch=e,Ee.runBranch(Object.keys(e))};break;case\"waypoint\":l=()=>{const a={action:e[f][2]};Ee.currentBranch=a,Ee.runBranch(Object.keys(a))}}be(a,l);break}case\"battle\":N.battleProcessing(n.player,(t=e[f][1][0],D[t]),()=>{const a={action:e[f][1][1]};Ee.currentBranch=a,Ee.runBranch(Object.keys(a))});break;case\"gold\":{const a=e[f][1];m(`<br>Obtained ${a} gold!`),n.player.gold+=a,E(n.player);break}case\"exp\":{const a=e[f][1];m(`<br>Obtained ${a} EXP!`),n.player.exp+=a,Y(),E(n.player);break}case\"items\":{const a=e[f][1],t=e[f][2];t>0?k(a,t,t):w(a,-1*t),E(n.player);break}case\"flag\":{const a=e[f][1],t=e[f][2];d[a].complete=\"true\"==t;break}case\"recipe\":{const a=e[f][1];Ie(a);break}}}break;case\"end\":if(!s&&\"end\"==e[0]){Ee.currentBranch;const e=o.messageDelay,a=Ee.currentNpc,t=Ee.returnFunction;p(Ee.parseDialogue(a.end),e,t)}break;case\"options\":s||(Object.keys(a.options).forEach((e,a)=>{m(`${a+1} - ${e}`)}),h(this.branchResponse));break;case\"conditional\":if(!s){const e=Ee.currentBranch.conditional;var i=void 0,c=!1;const a=n.player;Object.keys(e).forEach(t=>{if(!c){const o=t.split(\" \");switch(console.log(\"CHECKING THE FOLLOWING CONDITION\"),console.log(o),o[0]){case\"item:\":{const n=o[2],s=o[1];I(n,a.inventory)>=s&&(c=!0,i=e[t]);break}case\"level:\":{const n=o[1];a.level>=n&&(c=!0,i=e[t]);break}case\"flag:\":{console.log(`CHECKING FLAG CONDITION ${o[1]}`);var n=o[1],s=\"t\";\"-\"==o[1][0]&&(s=\"f\",n=n.slice(1));const a=d[n];console.log(\"LOGGING FLAG IN DATA\"),console.log(a),\"f\"==s&&0==a.complete?(c=!0,i=e[t]):\"t\"==s&&1==a.complete&&(c=!0,i=e[t]);break}}}}),console.log(`RESULT: ${c}`),c&&(Ee.currentBranch=i,Ee.runBranch(Object.keys(i)))}}}},branchResponse(){u(Ee.branchResponse);const e=f().toLowerCase(),a=Ee.currentBranch,t=Object.keys(a.options);if(\"Nan\"!=parseInt(e).toString()&&\"\"!=e)if(null!=t[e-1]){const n=t[e-1];Ee.currentBranch=a.options[n],Ee.runBranch(Object.keys(Ee.currentBranch))}else m(\"<br>Input out of range\"),h(Ee.branchResponse);else m(\"<br>Invalid input.\"),h(Ee.branchResponse)},parseDialogue:e=>(e.forEach(e=>{e[0]=e[0].replace(\"[name]\",`${Ee.currentNpc.name}`),e[0]=e[0].replace(\"[player]\",`${n.player.name}`),e[0]=\"<br>\"+e[0]}),e),end(){Ee.runBranch([\"end\"])}},Te=e=>{Ae.returnFunction=e,n.first_time.settings&&(n.first_time.settings=!1,m(se.settingsIntroduction)),Ae.mainLoop()},Ae={returnFunction:void 0,mainLoop:()=>{m(`${ee}Currently in settings. You can do the following things:`),m(\"<br> - Change the message delay for battle and outside of battle (input 'md')\"),m(\"<br> - Change the input shortcut key ('ci')\"),m(\"<br> - Test your current message delay settings ('tc')\"),m(\"<br> - View or re-view any tutorial messages ('rv')\"),m(\"<br> - To save or reset your data, type 'save'.\"),b(X),h(Ae.mainLoopResponse)},mainLoopResponse:()=>{switch(u(Ae.mainLoopResponse),f().toLowerCase()){case\"message delay\":case\"md\":Ae.messageDelayLoop();break;case\"change shortcut\":case\"ci\":Ae.changeShortcutLoop();break;case\"test message\":case\"tc\":Ae.testMessageLoop();break;case\"sa\":case\"save\":Ae.saveLoop();break;case\"rv\":case\"tutorials\":Ae.tutorialLoop();break;case\"b\":case\"back\":m(`${ee}Returning...`),Ae.returnFunction();break;default:m(`${ee}Invalid input.`),b(X),h(Ae.mainLoopResponse)}},tutorialLoop:()=>{m(`${ee}Currently in the tutorial menu. State a topic to view the corresponding tutorial:`),m(\" - Gamestart\"),m(\" - Explore\"),m(\" - Shop\"),m(\" - Equip\"),m(\" - Stats\"),m(\" - Crafting\"),m(\" - Settings\"),m(\" - Combat\"),m(\" - Combat-complex\"),b(Z),h(Ae.tutorialLoopResponse)},tutorialLoopResponse:()=>{u(Ae.tutorialLoopResponse);const e=f().toLowerCase();switch(e){case\"gamestart\":m(se.gameIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"explore\":m(se.exploreIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"shop\":m(se.shopIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"equip\":m(se.equipIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"stats\":m(se.statsIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"crafting\":m(se.craftingIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"settings\":m(se.settingsIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"combat\":m(se.combatIntroduction),b(Z),h(Ae.tutorialLoopResponse);break;case\"combat-complex\":m(se.combatComplex),b(Z),h(Ae.tutorialLoopResponse);break;case\"b\":case\"back\":m(`${ee}Returning...`),Ae.mainLoop();break;default:m(\"<br>Invalid input.\"),h(Ae.tutorialLoopResponse),\"b\"!=e&&\"back\"!=e&&m(\"<br>Currently in tutorial menu. Use inputshortcut to see your options.\")}},saveLoop:()=>{m(`${ee}Entering the save menu. Data saved can be loaded if you refresh the page, but`+\" not if you clear the cache or restart your device. Saving will overwrite previously saved data. Type 's'/'save' to save, and 'r'/'reset' to reset your data.\"),b([\"save\",\"load\",\"back\"]),h(Ae.saveLoopResponse)},saveLoopResponse:()=>{switch(u(Ae.saveLoopResponse),f().toLowerCase()){case\"s\":case\"save\":m(`${ee}Saved data. Returning...`),Me(\"save1\",n),Le(\"save1\",o),qe(\"save1\",d),Oe(\"save1\",c),Ae.mainLoop();break;case\"r\":case\"reset\":m(`${ee}Data reset. Refresh the page to restart.`),localStorage.clear(),Ae.mainLoop();break;case\"b\":case\"back\":m(`${ee}Returning...`),Ae.mainLoop();break;default:m(\"<br>Invalid input.\"),h(Ae.saveLoopResponse);case!0:E(n.player)}},testMessageLoop:()=>{m(`${ee}Four messages of different length will play in order to show you approximately\\n        the speed of the text in the settings you have selected. Please choose whether you would like to test your battle\\n        display speed or your display speed outside of battle.`),m(\"<br>Please type 'ba'/'battle' to see text speed in battle and 'ou'/'outside' to see text speed outside of battle.\"),m(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),m(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),b([\"battle\",\"outside\",\"back\"]),h(Ae.testMessage)},testMessage:()=>{u(Ae.testMessage);var e=!1,a=\"outside\";switch(f().toLowerCase()){case\"ba\":case\"battle\":e=!0,a=\"battle\";break;case\"ou\":case\"outside\":e=!0,a=\"outside\";break;case\"b\":case\"back\":e=!1,m(`${ee}Returning...`),Ae.mainLoop();break;default:m(\"<br>Invalid input.\"),h(Ae.testMessage)}if(e){p([[\"This is a short message. Hi!\",.5],[\"This message is a little bit longer... Hello there. Lovely weather today.\",1],[\"This message is pretty long. Longer than the previous, and the one before it. Memento mori. Praise the sun? Weather is ok.\",1.5],[\"This is the longest message in this test. I hope you enjoy reading this one. Um. Have you seen Vinland Saga? It's a pretty good anime. I'd watch it if I were you. Or don't, I don't really care.\",3]],a,Ae.postTestMessage)}},postTestMessage:()=>{m(`${ee}Message testing has concluded. Returning...`),Ae.mainLoop()},changeShortcutLoop:()=>{m(`${ee}Currently changing the input shortcut toggle key. Because most of the keyboard is`+\" required for gameplay, there are a limited number of keys that can be used. Input the name of a key as seen to change input shortcut to that key:\"),m(\"<br>\"),Object.keys(ne).forEach(e=>{m(` - ${e}`)}),m(`<br>Your current key is ${ne[o.toggleShortcut]}`),b([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"AltLeft\",\"AltRight\",\"¬\",\"back\"]),h(Ae.changeShortcutResponse)},changeShortcutResponse:()=>{u(Ae.changeShortcutResponse);const e=P(f().toLowerCase());-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(m(`${ee}Input shortcut toggle changed to <b>${e}</b>.`),o.toggleShortcut=e,b([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),h(Ae.changeShortcutResponse)):\"Back\"==e||\"B\"==e?(m(`${ee}Returning...`),Ae.mainLoop()):(m(\"<br>Invalid input\"),b([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),h(Ae.changeShortcutResponse))},messageDelayLoop:()=>{m(`${ee}There are two types of message delay you can change. Would you like to change`+\" the message delay in battle or outside of battle?\"),m(\"<br>Type 'ba'/'battle' to change the message delay in battle and 'ou'/'outside' to change the message delay outside of battle.\"),m(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),m(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),b([\"battle\",\"outside\",\"back\"]),h(Ae.messageDelayResponse)},messageDelayResponse:()=>{switch(u(Ae.messageDelayResponse),f().toLowerCase()){case\"ba\":case\"battle\":Ae.battleMessageDelayLoop();break;case\"ou\":case\"outside\":Ae.outsideMessageDelayLoop();break;case\"b\":case\"back\":m(`${ee}Returning...`),Ae.mainLoop();break;default:m(\"<br>Invalid input.\"),b([\"battle\",\"outside\",\"back\"]),h(Ae.messageDelayResponse)}},battleMessageDelayLoop:()=>{const e=ae;m(`${ee}Currently changing battle message delay loop. You can type any integer from 0-9, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),h(Ae.battleMessageDelayResponse)},battleMessageDelayResponse:()=>{u(Ae.battleMessageDelayResponse);const e=f().toLowerCase(),a=ae;switch(!0){case\"s\"==e||\"slow\"==e:{const e=a.slow;o.battleMessageDelay=e,m(`${ee}Changed battle message delay to ${e} seconds.`),h(Ae.battleMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=a.medium;o.battleMessageDelay=e,m(`${ee}Changed battle message delay to ${e} seconds.`),h(Ae.battleMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=a.fast;o.battleMessageDelay=e,m(`${ee}Changed battle message delay to ${e} seconds.`),h(Ae.battleMessageDelayResponse);break}case\"NaN\"!=parseInt(e).toString():{const a=parseInt(e);a<10&&a>=0?(o.battleMessageDelay=a,m(`${ee}Changed battle message delay to ${a} seconds.`)):m(\"<br>That number is out of range!\"),h(Ae.battleMessageDelayResponse);break}case\"b\"==e||\"back\"==e:m(`${ee}Returning...`),Ae.messageDelayLoop();break;default:m(\"<br>Invalid input.\"),h(Ae.battleMessageDelayResponse)}},outsideMessageDelayLoop:()=>{const e=te;m(`${ee}Currently changing outside message delay. You can type any integer from 0-9, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),h(Ae.outsideMessageDelayResponse)},outsideMessageDelayResponse:()=>{u(Ae.outsideMessageDelayResponse);const e=f().toLowerCase(),a=te;switch(!0){case\"s\"==e||\"slow\"==e:{const e=a.slow;o.messageDelay=e,m(`${ee}Changed message delay to ${e} seconds.`),h(Ae.outsideMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=a.medium;o.messageDelay=e,m(`${ee}Changed message delay to ${e} seconds.`),h(Ae.outsideMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=a.fast;o.messageDelay=e,m(`${ee}Changed message delay to ${e} seconds.`),h(Ae.outsideMessageDelayResponse);break}case\"NaN\"!=parseInt(e).toString():{const a=parseInt(e);a<10&&a>=0?(o.messageDelay=a,m(`${ee}Changed message delay to ${a} seconds.`)):m(\"<br>That number is out of range!\"),h(Ae.outsideMessageDelayResponse);break}case\"b\"==e||\"back\"==e:m(`${ee}Returning...`),Ae.messageDelayLoop();break;default:m(\"<br>Invalid input.\"),h(Ae.outsideMessageDelayResponse)}}},Me=(e,a)=>{localStorage.setItem(e+\"Player\",JSON.stringify(a))},Le=(e,a)=>{localStorage.setItem(e+\"Settings\",JSON.stringify(a))},Oe=(e,a)=>{localStorage.setItem(e+\"Disciplines\",JSON.stringify(a))},qe=(e,a)=>{localStorage.setItem(e+\"Flags\",JSON.stringify(a))},Ce=(e,a)=>{Object.keys(e).forEach(t=>{null!=a[t]&&(!M(e[t])||Array.isArray(e[t])?e[t]=a[t]:Ce(e[t],a[t]))})},Re=(e,a)=>{Object.keys(e).forEach(t=>{console.log(`key is ${t}`),null!=a[t]&&(\"unlocked\"==t||\"visible\"==t||\"complete\"==t?e[t]=a[t]:M(e[t])&&Re(e[t],a[t]))})};setInterval(()=>{Me(\"save1\",n),Le(\"save1\",o),qe(\"save1\",d),Oe(\"save1\",c),m('<span style=\"color: gold\">Data saved</span>')},3e4);const Be={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"slime\",60],[\"grey_wolf\",35],[\"wayward_traveler\",5]],finds:[[\"slime_ball\",65,1,3],[\"grey_wolf_pelt\",30,1,1],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[[\"slime\",50]],interacts:[]},De={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"slime\",60],[\"grey_wolf\",35],[\"wayward_traveler\",5]],finds:[[\"slime_ball\",65,1,3],[\"grey_wolf_pelt\",30,1,1],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[[\"grey_wolf\",35],[\"slime\",15]],interacts:[]},Fe={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"greater_slime\",40],[\"lesser_water_klastera\",30],[\"young_water_lizard\",30]],finds:[[\"slime_ball\",40,2,5],[\"weak_membrane\",20,1,2],[\"tiny_lizard_tail\",20,1,1],[\"aquus_cluster\",17,1,2],[\"water_orb\",3,1,1]],ambushes:[[\"greater_slime\",30],[\"lesser_water_klastera\",30]],interacts:[]},je={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"red_slime\",35,!0],[\"venomous_wolf\",30,!0],[\"grey_wolf\",25,16],[\"dark_beast\",10,!0]],finds:[[\"red_slime_ball\",40,3,4],[\"grey_wolf_pelt\",30,2,4],[\"sharp_claw\",20,1,1],[\"shadow_pelt\",10,2,3]],ambushes:[[\"grey_wolf\",20,16],[\"venomous_wolf\",20,!0],[\"red_slime\",20,!0]],interacts:[]},Ne={explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]],interacts:[]},Ye={1:\"floor1\"},He={currentZone:void 0,coordinates:void 0,justEnteredRoom:!0,ambushed:!1,roomLoop:()=>{const e=He.currentZone,a=He.coordinates,t=e.zone[a[0]][a[1]],s=e[t];console.log(\"logging current room\"),console.log(s),console.log(\"logging zone followed by roomcode\"),console.log(e),console.log(t),console.log(a);const o=n.player.maps[e.name];console.log(o),\"discovered\"!=o[a[1]][a[0]]&&(o[a[1]][a[0]]=\"discovered\");var r=!1;if(0==He.ambushed){console.log(\"ammmmbushed\"),He.ambushed=!0;const e=s.ambushes,a=Math.floor(100*Math.random())+1;var l=0;for(l in e){var i=0==l?0:e[l-1][1];if(a>i&&a<=e[l][1]+i){r=!0,m(`${ee}AMBUSH!!`);const a=D[e[l][0]];var c=!0;null!=e[l][2]&&(c=e[l][2]),N.battleProcessing(n.player,a,He.roomLoop,c);break}i+=e[l][1]}}r||(He.roomLoop2(He.justEnteredRoom),h(He.roomResponse))},roomLoop2:(e=!1)=>{const a=He.coordinates,t=He.currentZone.zone,n=t[a[0]][a[1]],s=He.currentZone[n];e&&m(`${ee}${s.entrance}`);const o=[a[1],t.length-a[0]];m(`Coordinates: [${o}]`),ze.forEach(e=>{m(e)}),s.extraOptions.forEach(e=>{m(e)}),He.justEnteredRoom=!1,h(He.roomResponse)},roomResponse:()=>{u(He.roomResponse);const e=f().toLowerCase(),a=He.currentZone,t=He.coordinates,s=He.currentZone.zone[t[0]][t[1]],o=He.currentZone[s];switch(!0){case\"e\"==e:case\"explore\"==e:{const e=o.explores,a=Math.floor(100*Math.random())+1;console.log(`Random is ${a}`);var r=0;for(r in e){const t=0==r?0:e[r-1][1];if(a>t&&a<=e[r][1]+t)if(\"encounter\"==e[r][0]){r=0;const e=o.encounters,a=Math.floor(100*Math.random())+1;var l=0;for(r in console.log(`Encounter random is ${a}`),e){if(a>(l+=0==r?0:e[r-1][1])&&a<=e[r][1]+l){m(\"<br>You survey the area....\"),m(\"<br>An enemy approaches!\");const a=D[e[r][0]];var i=!0;console.log(`encounters s d  d ${e[r][2]}`),null!=e[r][2]&&(i=e[r][2]),N.battleProcessing(n.player,a,He.roomLoop,i);break}}}else if(\"find\"==e[r][0]){r=0;const e=o.finds,a=Math.floor(100*Math.random())+1;l=0;for(r in console.log(`Find random is ${a}`),e){if(a>(l+=0==r?0:e[r-1][1])&&a<=e[r][1]+l){m(\"<br>You survey the area....\"),m(\"<br>You find something while looking around!\"),null!=e[r][3]?k(e[r][0],e[r][2],e[r][3]):k(e[r][0]);break}}h(He.roomResponse)}}break}case\"i\"==e:case\"inventory\"==e:G(He.roomLoop);break;case\"st\"==e:case\"stats\"==e:re(He.roomLoop);break;case\"set\"==e:case\"settings\"==e:Te(He.roomLoop);break;case\"c\"==e:case\"crafting\"==e:$e(He.roomLoop);break;case null!=o.interacts[parseInt(e-1)]:b=o.interacts[parseInt(e-1)],_=He.roomLoop,Ee.initNpc(b,_);break;case\"leave\"==e:m(\"<br>Leaving area...\"),He.currentZone=void 0,He.coordinates=void 0,He.justEnteredRoom=!0,Ge();break;case\"s\"==e:case\"south\"==e:{var c=void 0;const e=[t[0]+1,t[1]];null!=o.south?c=He.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(c=e),null!=c?p([[\"<br>You travel to the south...\",1]],\"outside\",()=>{He.coordinates=c,He.justEnteredRoom=!0,He.ambushed=!1,He.roomLoop()}):(m(\"<b>You can't travel in that direction!</b>\"),He.roomLoop());break}case\"n\"==e:case\"north\"==e:{c=void 0;const e=[t[0]-1,t[1]];null!=o.south?c=He.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(c=e),null!=c?p([[\"<br>You travel to the north...\",1]],\"outside\",()=>{He.coordinates=c,He.justEnteredRoom=!0,He.ambushed=!1,He.roomLoop()}):(m(\"<b>You can't travel in that direction!</b>\"),He.roomLoop());break}case\"l\"==e:case\"left\"==e:{c=void 0;const e=[t[0],t[1]-1];null!=o.south?c=He.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(c=e),null!=c?p([[\"<br>You travel to the left...\",1]],\"outside\",()=>{He.coordinates=c,He.justEnteredRoom=!0,He.ambushed=!1,He.roomLoop()}):(m(\"<b>You can't travel in that direction!</b>\"),He.roomLoop());break}case\"r\"==e:case\"right\"==e:{c=void 0;const e=[t[0],t[1]+1];null!=o.south?c=He.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(c=e),null!=c?p([[\"<br>You travel to the right...\",1]],\"outside\",()=>{He.coordinates=c,He.justEnteredRoom=!0,He.ambushed=!1,He.roomLoop()}):(m(\"<b>You can't travel in that direction!</b>\"),He.roomLoop());break}case\"m\"==e:case\"map\"==e:{const e=a.zone,s=n.player.maps[a.name];var d=\"\";console.log(\"plr map\"),console.log(s);for(var y=0;y<e.length;y++){console.log(\"running on column\");for(var g=0;g<e[y].length;g++)if(console.log(\"running on row\"),\"n\"==e[y][g])d+=\"  ▩\";else if(t[0]==y&&t[1]==g)d+=\" \\t▣\";else if(\"discovered\"==s[g][y]){d+=`<span style=\"color:${a[a.zone[y][g]].colour}\">  ▣</span>`}else d+=\"\\t▢\";d+=\"<br>\"}m(d),He.roomLoop();break}default:m(\"Invalid input\"),h(He.roomResponse)}var b,_;E(n.player)}},We={floor1:{name:\"floor1\",start:[10,8],zone:[[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"s3\",\"s2\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r1\",\"r\",\"r2\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"s4\",\"s1\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i1\",\"i\",\"f\",\"f\",\"f1\",\"f\",\"f\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"f\",\"f\",\"f\",\"st\",\"f2\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"i\",\"i\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"iw1\",\"iw\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"i\",\"iw\",\"iw\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q1\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q2\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"]],st:{entrance:\"Green grass unfolds like a blanket in all directions. As far as can be seen, the view is fairly unchanging - vibrant leafage darkened by a lack of light caused by the sheltering of arborous towers above. Medum-sized bushes and thickets prevent a clear view in any particular direction, however to the north-east, some very faint echoes of water splashing can be heard.\",colour:\"#0b6d00\",extraOptions:[\"1 - Speak to nearby man\"],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:[],interacts:[\"f1_tutorial_man\"]},f:{entrance:\"The forest remains unchanging for a large distance. It is easy to travel if one avoids the occasional bushy path.\",colour:\"#0b6d00\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts},f1:{entrance:\"The forest remains unchanging for a large distance. It is easy to travel if one avoids the occasional bushy path.\",colour:\"#0b6d00\",extraOptions:[\"1 - Speak to little girl\"],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:[\"f1_little_girl\"]},f2:{entrance:\"The forest remains unchanging for a large distance. It is easy to travel if one avoids the occasional bushy path.\",colour:\"#0b6d00\",extraOptions:[\"1 - Speak to rude-looking kid\"],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:[\"f1_rude_kid\"]},i:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous.\",colour:\"#009b6f\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts},i1:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous. In a small clearing, a statue of some kind can be seen in the distance.\",colour:\"#009b6f\",extraOptions:[\"1 - Inspect wanderer statue\"],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:[\"f1_wanderer_statue\"]},iw:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous. This place in particular seems teeming with wolves.\",colour:\"#009b6f\",extraOptions:[],explores:De.explores,encounters:[[\"grey_wolf\",70],[\"slime\",30]],finds:De.finds,ambushes:[[\"grey_wolf\",50,!0]],interacts:De.interacts},iw1:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous. This place in particular seems teeming with wolves.\",colour:\"#009b6f\",extraOptions:[\"1 - Speak to man\"],explores:De.explores,encounters:[[\"grey_wolf\",70],[\"slime\",30]],finds:De.finds,ambushes:[[\"grey_wolf\",50,!0]],interacts:[\"f1_wolf_man\"]},r:{entrance:\"A thin river runs with numerous tributaries flowing out in all directions, such that no matter where you go, the river seems to follow. The grass is very short compared to the forest and it is much easier to see where you're going.\",colour:\"#0018a8\",extraOptions:[],explores:Fe.explores,encounters:Fe.encounters,finds:Fe.finds,ambushes:Fe.ambushes,interacts:Fe.interacts},r1:{entrance:\"A thin river runs with numerous tributaries flowing out in all directions, such that no matter where you go, the river seems to follow. The grass is very short compared to the forest and it is much easier to see where you're going.\",colour:\"#0018a8\",extraOptions:[\"1 - Speak to docile slime\"],explores:Fe.explores,encounters:Fe.encounters,finds:Fe.finds,ambushes:Fe.ambushes,interacts:Fe.interacts,interacts:[\"f1_docile_slime\"]},r2:{entrance:\"A thin river runs with numerous tributaries flowing out in all directions, such that no matter where you go, the river seems to follow. The grass is very short compared to the forest and it is much easier to see where you're going.\",colour:\"#0018a8\",extraOptions:[\"1 - Speak to old man\"],explores:Fe.explores,encounters:Fe.encounters,finds:Fe.finds,ambushes:Fe.ambushes,interacts:Fe.interacts,interacts:[\"f1_old_man\"]},q:{entrance:\"The trees are taller and brimming with leaves, although their black-purple hue makes them seem as though they are dead and rotton. The grass beneath your feet is crusty and uncomfortable to walk on. There is a dead silence that makes even taking a step an uncomfortable endeavour as the leafage crinkles below your feet.\",colour:\"#b10000\",extraOptions:[],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:je.interacts},q1:{entrance:\"The trees are taller and brimming with leaves, although their black-purple hue makes them seem as though they are dead and rotton. The grass beneath your feet is crusty and uncomfortable to walk on. There is a dead silence that makes even taking a step an uncomfortable endeavour as the leafage crinkles below your feet.\",colour:\"#b10000\",extraOptions:[\"1 - Speak to little boy\"],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:[\"f1_little_boy\"]},q2:{entrance:\"The trees are taller and brimming with leaves, although their black-purple hue makes them seem as though they are dead and rotton. The grass beneath your feet is crusty and uncomfortable to walk on. There is a dead silence that makes even taking a step an uncomfortable endeavour as the leafage crinkles below your feet.\",colour:\"#b10000\",extraOptions:[\"1 - Speak to lost person\"],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:[\"f1_lost_person\"]},s1:{entrance:\"There is a somewhat idyllic atmosphere. The area is lined with small, basic houses. In front of one of the houses is a small stand, at which stands a blonde woman. From the sign on a banner atom the stand you infer that it is a small shop selling miscallaneous items.\",colour:\"#b2009c\",extraOptions:[\"1 - Misc shop\"],explores:Ne.explores,encounters:Ne.encounters,finds:Ne.finds,ambushes:Ne.ambushes,interacts:[\"f1_misc_shop\"]},s2:{entrance:\"There are a few houses in this area, but mostly it is the beginning of a gradient into a small village settlement. There is little of note, however the complete absence of trees overhead lets one appreciate the brightness and warmth of the sun.\",colour:\"#b2009c\",extraOptions:[\"1 - Speak to hunter lady\",\"2 - Speak to worried woman\"],explores:Ne.explores,encounters:Ne.encounters,finds:Ne.finds,ambushes:Ne.ambushes,interacts:[\"f1_hyssha\",\"f1_worried_woman\"]},s3:{entrance:\"This section of the settlement has a clearly commerical vibe, with what looks like a weapons vendor and armour vendor, judging by the various items next to their stalls. There are a few items but it can be inferred that it is mostly artisans and dealers residing in this section.\",colour:\"#b2009c\",extraOptions:[\"1 - Weapons shop\",\"2 - Armour shop\"],explores:Ne.explores,encounters:Ne.encounters,finds:Ne.finds,ambushes:Ne.ambushes,interacts:[\"f1_weapons_shop\",\"f1_armour_shop\"]},s4:{entrance:\"There was a good distance to walk between where you are now and the forest area, but there is still some foliage around this point. It seems to serve more as a transition into the settlement as opposed to being a part of the settlement itself. However, there are a small number of houses , increasing in frequency as one looks to the west.\",colour:\"#b2009c\",extraOptions:[],explores:Ne.explores,encounters:Ne.encounters,finds:Ne.finds,ambushes:Ne.ambushes,interacts:[]}}},ze=[`${ee} - e/Explore`,\" - l/left\",\" - r/right\",\" - n/north\",\" - s/south\",\" - i/inventory\",\" - st/Stats\",\" - c/crafting\",\" - set/settings\",\" - m/map\",\" - Leave\"];t.d(a,\"mainLoop\",(function(){return Ge}));const Ge=()=>{N.heal(n.player.stats),m(`${ee}You are currently on floor ${n.current_floor}`);const e={...n.player};e.stats=N.getPlayerAdd(e.stats),W(e),U(n.player),b([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),h(Je)},Ke=()=>{u(Ke),name=f(),n.player.name=name,Ie([\"wolfhide_armour\",\"wolfhide_cap\",\"wolfhide_leggings\",\"slime_bracers\",\"slime_reinforced_sword\",\"wolfhide_charm\",\"lizard_bracelet\",\"aquus_orb\",\"water_infused_armour\",\"water_infused_helm\",\"water_infused_legwear\",\"luminant_charm\",\"wolfhide_dagger\",\"tear_of_lucia\",\"pickaxe\",\"makeshift_steel_armour\",\"makeshift_steel_helm\",\"makeshift_steel_legwear\",\"red_slime_bracers\",\"shinobi_armour\",\"shinobi_headcloak\",\"shinobi_leggings\",\"earthen_sword\",\"makeshift_sword\",\"wolven_reavers\",\"shadow_cloak\",\"bladed_armour\"]),Ue()},Ue=()=>{m(`${name}? That's a nice name. Nice to meet you!`);const e=[[\"Starting game...\",0],[se.gameIntroduction,0]];p(e,\"outisde\",Ge)},Je=()=>{u(Je);const e=f().toLowerCase();if(\"ascend\"==e.toLowerCase()){const e=D[s[n.current_floor].boss];console.log(e.name),N.battleProcessing(n.player,e,Ve)}else if(\"equip\"==e||\"eq\"==e)G(Ge);else if(\"stats\"==e||\"st\"==e)re(Ge);else if(\"explore\"==e||\"ex\"==e){((e,a=\"start\")=>{He.currentZone=We[e],\"start\"==a&&(He.coordinates=We[e].start),n.first_time.explore&&(n.first_time.explore=!1,m(se.exploreIntroduction)),He.roomLoop()})(Ye[n.current_floor])}else if(\"shop\"==e||\"sh\"==e){const e=_e[n.current_floor];be(e,Ge)}else\"crafting\"==e||\"c\"==e?$e(Ge):\"settings\"==e||\"se\"==e?Te(Ge):(m(\"<br>Invalid input\"),b([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),h(Je))},Ve=()=>{const e=n;e.current_floor==e.max_floor&&(m(`<h2><b><span style=\"color:green\">FLOOR ${e.current_floor} COMPLETED!!</span></b></h2>`),e.max_floor+=1,e.current_floor>s.max&&m(\"You have now completed the highest possible floor. You will be able to access the next floor once it is released!\")),Ge()};m(\"Welcome to Tower RPG!\"),null==localStorage.getItem(\"save1Player\")?(m(\"Please enter your name\"),h(Ke)):((e=>{const a=n,t=JSON.parse(localStorage.getItem(e+\"Player\"));console.log(t),Ce(a,t),E(n.player)})(\"save1\"),(e=>{const a=o,t=JSON.parse(localStorage.getItem(e+\"Settings\"));Ce(a,t),E(n.player)})(\"save1\"),(e=>{const a=d,t=JSON.parse(localStorage.getItem(e+\"Flags\"));Ce(a,t),E(n.player)})(\"save1\"),(e=>{const a=c,t=JSON.parse(localStorage.getItem(e+\"Disciplines\"));Re(a,t),E(n.player)})(\"save1\"),Ge())}]);","extractedComments":[]}