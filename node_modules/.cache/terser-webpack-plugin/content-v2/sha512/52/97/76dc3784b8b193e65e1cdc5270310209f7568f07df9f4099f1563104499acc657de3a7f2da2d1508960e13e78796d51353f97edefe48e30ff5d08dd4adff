{"code":"!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=5)}([function(e,t,a){(function(e){function a(e,t){for(var a=0,n=e.length-1;n>=0;n--){var s=e[n];\".\"===s?e.splice(n,1):\"..\"===s?(e.splice(n,1),a++):a&&(e.splice(n,1),a--)}if(t)for(;a--;a)e.unshift(\"..\");return e}function n(e,t){if(e.filter)return e.filter(t);for(var a=[],n=0;n<e.length;n++)t(e[n],n,e)&&a.push(e[n]);return a}t.resolve=function(){for(var t=\"\",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var r=o>=0?arguments[o]:e.cwd();if(\"string\"!=typeof r)throw new TypeError(\"Arguments to path.resolve must be strings\");r&&(t=r+\"/\"+t,s=\"/\"===r.charAt(0))}return(s?\"/\":\"\")+(t=a(n(t.split(\"/\"),(function(e){return!!e})),!s).join(\"/\"))||\".\"},t.normalize=function(e){var o=t.isAbsolute(e),r=\"/\"===s(e,-1);return(e=a(n(e.split(\"/\"),(function(e){return!!e})),!o).join(\"/\"))||o||(e=\".\"),e&&r&&(e+=\"/\"),(o?\"/\":\"\")+e},t.isAbsolute=function(e){return\"/\"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e})).join(\"/\"))},t.relative=function(e,a){function n(e){for(var t=0;t<e.length&&\"\"===e[t];t++);for(var a=e.length-1;a>=0&&\"\"===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var s=n(e.split(\"/\")),o=n(a.split(\"/\")),r=Math.min(s.length,o.length),i=r,l=0;l<r;l++)if(s[l]!==o[l]){i=l;break}var c=[];for(l=i;l<s.length;l++)c.push(\"..\");return(c=c.concat(o.slice(i))).join(\"/\")},t.sep=\"/\",t.delimiter=\":\",t.dirname=function(e){if(\"string\"!=typeof e&&(e+=\"\"),0===e.length)return\".\";for(var t=e.charCodeAt(0),a=47===t,n=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?a?\"/\":\".\":a&&1===n?\"/\":e.slice(0,n)},t.basename=function(e,t){var a=function(e){\"string\"!=typeof e&&(e+=\"\");var t,a=0,n=-1,s=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!s){a=t+1;break}}else-1===n&&(s=!1,n=t+1);return-1===n?\"\":e.slice(a,n)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){\"string\"!=typeof e&&(e+=\"\");for(var t=-1,a=0,n=-1,s=!0,o=0,r=e.length-1;r>=0;--r){var i=e.charCodeAt(r);if(47!==i)-1===n&&(s=!1,n=r+1),46===i?-1===t?t=r:1!==o&&(o=1):-1!==t&&(o=-1);else if(!s){a=r+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===a+1?\"\":e.slice(t,n)};var s=\"b\"===\"ab\".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(2))},function(e,t,a){\"use strict\";t.decode=t.parse=a(3),t.encode=t.stringify=a(4)},function(e,t){var a,n,s=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(a===setTimeout)return setTimeout(e,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a=\"function\"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var l,c=[],d=!1,m=-1;function h(){d&&l&&(d=!1,l.length?c=l.concat(c):m=-1,c.length&&f())}function f(){if(!d){var e=i(h);d=!0;for(var t=c.length;t;){for(l=c,c=[];++m<t;)l&&l[m].run();m=-1,t=c.length}l=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new u(e,t)),1!==c.length||d||i(f)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title=\"browser\",s.browser=!0,s.env={},s.argv=[],s.version=\"\",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error(\"process.binding is not supported\")},s.cwd=function(){return\"/\"},s.chdir=function(e){throw new Error(\"process.chdir is not supported\")},s.umask=function(){return 0}},function(e,t,a){\"use strict\";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,a,o){t=t||\"&\",a=a||\"=\";var r={};if(\"string\"!=typeof e||0===e.length)return r;var i=/\\+/g;e=e.split(t);var l=1e3;o&&\"number\"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var d=0;d<c;++d){var m,h,f,u,p=e[d].replace(i,\"%20\"),g=p.indexOf(a);g>=0?(m=p.substr(0,g),h=p.substr(g+1)):(m=p,h=\"\"),f=decodeURIComponent(m),u=decodeURIComponent(h),n(r,f)?s(r[f])?r[f].push(u):r[f]=[r[f],u]:r[f]=u}return r};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,a){\"use strict\";var n=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e:\"\";default:return\"\"}};e.exports=function(e,t,a,i){return t=t||\"&\",a=a||\"=\",null===e&&(e=void 0),\"object\"==typeof e?o(r(e),(function(r){var i=encodeURIComponent(n(r))+a;return s(e[r])?o(e[r],(function(e){return i+encodeURIComponent(n(e))})).join(t):i+encodeURIComponent(n(e[r]))})).join(t):i?encodeURIComponent(n(i))+a+encodeURIComponent(n(e)):\"\"};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var a=[],n=0;n<e.length;n++)a.push(t(e[n],n));return a}var r=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},function(e,t,a){\"use strict\";a.r(t);const n={player:{name:name,gold:100,exp:0,level:1,sp:0,ap:1,sp_investment:{health:0,atk:0,def:0,matk:0,mdef:0,speed:0},stats:{health:60,current_health:60,max_sp:100,max_mana:100,current_mana:100,max_stamina:100,atk:30,def:30,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100}},skills:[\"attack\",\"guard\"],equips:{weapon:void 0,head:void 0,body:void 0,legs:void 0,misc1:void 0,misc2:void 0}},inventory:[],library:[\"attack\",\"guard\"],recipes:[]},max_floor:1,current_floor:1,first_time:{explore:!0,shop:!0,equip:!0,stats:!0,crafting:!0,settings:!0,game:!0,combat:!0}},s=1,o={boss:\"slime\"},r={messageDelay:1,battleMessageDelay:1,toggleShortcut:\"Rshift\"},i={1:100,2:400,3:800,4:1100,5:1500,6:2e3,7:3e3,8:3500,9:4e3,10:4500,11:5e3,12:5500,13:6100,14:6700,15:7500,16:8500,17:9600,18:10700,19:12e3,20:14e3,21:16500,22:19e3,23:23e3,24:26e3,25:3e4},l=-99,c=500,d={adventurer:{name:\"adventurer\",requirements:{skills:[],level:1,flags:[]},cost:{gold:0,items:[]},skills:[{name:\"check\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"channel_health\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"channel_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"brutal_swipe\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0},{name:\"hex\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},unlocked:!1,unlearnable:!0}],unlocked:!0,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},mage:{name:\"mage\",requirements:{skills:[],level:2,flags:[]},cost:{gold:300,items:[]},skills:[{name:\"fireball\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"icebolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"thunder_jolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"lesser_quake\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"arcane_shield\",requirements:{skills:[],level:3,flags:[]},disciple:\"mage\",cost:{gold:100,items:[],ap:2},unlocked:!1,unlearnable:!1}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}},warrior:{name:\"warrior\",requirements:{skills:[],level:2,flags:[]},cost:{gold:300,items:[]},skills:[{name:\"stalwart_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"protect\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"bulwark\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"challenge\",requirements:{skills:[],level:1,flags:[]},disciple:\"warrior\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"debilitate\",requirements:{skills:[],level:3,flags:[]},disciple:\"warrior\",cost:{gold:100,items:[],ap:2},unlocked:!1,unlearnable:!1}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}},rogue:{name:\"rogue\",requirements:{skills:[],level:2,flags:[]},cost:{gold:300,items:[]},skills:[{name:\"swift_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"shinobi_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"crippling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"enfeebling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"rogue\",cost:{gold:50,items:[],ap:1},unlocked:!1,unlearnable:!1},{name:\"shadow_strike\",requirements:{skills:[],level:3,flags:[]},disciple:\"rogue\",cost:{gold:100,items:[],ap:2},unlocked:!1,unlearnable:!1}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}}},m={beatSlime:{desc:\"Defeat the slime on floor one.\",complete:!1},f1_spoken_to_little_girl:{desc:\"Speak to a little girl on floor one about her slime problem.\",complete:!1},f1_helped_little_girl:{desc:\"Help a little girl on floor one with her slime problem.\",complete:!1},f1_spoken_to_docile_slime:{desc:\"Interact with a docile slime on floor one.\",complete:!1},f1_helped_docile_slime:{desc:\"Help a docile slime on floor one gather their bretheren.\",complete:!1},f1_spoken_to_rude_kid:{desc:\"Speak to a rude kid on floor one.\",complete:!1},f1_kicked_rude_kids_shin:{desc:\"Kick the shin of a rude kid on floor one.\",complete:!1},f1_extended_convo_with_rude_kid:{desc:\"Have an extended conversation with a rude kid on floor one.\",complete:!1},f1_spoken_to_little_boy:{desc:\"Speak to a young boy in the dark forest of floor one.\",complete:!1},f1_helped_little_boy:{desc:\"Help the young boy in the dark forest of floor one.\",complete:!1}},h=e=>{K.main.insertAdjacentHTML(\"beforeend\",`${e}<br>`),y()},f=()=>{const e=K.input.value,t=b.inputShortcuts;return K.input.value=\"\",console.log(`input is ${e}`),b.on&&\"Nan\"!=parseInt(e).toString()&&null!=b.inputShortcuts[parseInt(e)]?(b.inputShortcuts={},b.on=!1,t[parseInt(e)]):(b.inputShortcuts={},b.on=!1,e)},u=e=>{K.form.addEventListener(\"submit\",e)},p=e=>{K.form.removeEventListener(\"submit\",e),h(oe)},g=(e,t,a)=>{var n=0;const s=\"battle\"==t?r.battleMessageDelay:r.messageDelay,o=()=>{n<e.length?(h(e[n][0]),y(),++n<e.length?setTimeout(o,1e3*s*e[n-1][1]):setTimeout(a,1e3*s*e[n-1][1])):a.call()};o()},y=()=>{K.main.scrollTop=K.main.scrollHeight};window.addEventListener(\"keyup\",(function(e){this.event.code==ne[r.toggleShortcut]&&b.toggleInputShortcut()}));const b={on:!1,inputShortcuts:{},toggleInputShortcut:()=>{b.on?(b.on=!1,h(\"<br>Input shortcut turned off.\")):(K.input.value=\"\",Object.keys(b.inputShortcuts).length>0?(b.on=!0,h(\"<br>Input shortcut turned on.\"),Object.keys(b.inputShortcuts).forEach(e=>{h(`${e} - ${b.inputShortcuts[e]}`)})):h(\"<br>Input shortcut cannot be used here.\"))}},_=e=>{const t={};return e.forEach((e,a)=>{t[a+1]=e}),b.inputShortcuts=t,t},k={damaged_dagger:{name:\"damaged dagger\",type:\"weapon\",atk:4,def:1,matk:5,mdef:3,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged dagger. Slightly rusty. It's corrogated edge may help against some enemies, but will not do any favours against slimes.\",sell_value:100},damaged_sword:{name:\"damaged sword\",type:\"weapon\",atk:7,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged sword. It is a little bit rusty, with varying sharpness throughout the length of its edge. It's uneven length is unlikely to assist its user in swordplay.\",sell_value:100},simple_sword:{name:\"simple sword\",type:\"weapon\",atk:5,def:1,matk:2,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of craftmanship evidently skilled and yet still simplistic. It has a presently untouched silver blade under a brown hilt. Swords of this type are often used by skilled adventurers who want to return to their roots.\",sell_value:25},sharpened_sword:{name:\"sharpened sword\",type:\"weapon\",atk:12,def:3,matk:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The blade atop this sword is noticeable sharper than weaker swords. It has a weightier feel that allows for stronger swings.\",sell_value:100},crafted_blade:{name:\"crafted blade\",type:\"weapon\",atk:20,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The result of a very skilled weapon forger working with limited materials. Even one unknowledgable in swords can infer the love put into this blade from the intricate hilt to the blade optimised for killing.\",sell_value:250},silver_axe:{name:\"silver axe\",type:\"weapon\",atk:18,def:6,matk:6,mdef:6,speed:-10,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe forged of silver. It is double-bladed, and the weight on either side makes it a little uncomfortable to handle.\",sell_value:120},reinforced_silver_axe:{name:\"reinforced silver axe\",type:\"weapon\",atk:25,def:8,matk:8,mdef:8,speed:-20,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe that seems to be exactly like the silver axe except it has been reinforced by various stronger materials. However, the materials used to reinforce it seem to have been applied unevenly, which makes this weapon, however strong, difficult to use.\",sell_value:300},metal_stave:{name:\"metal stave\",type:\"weapon\",atk:3,def:1,matk:6,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It is a common misconception that simple weaponry for mages are made out of wood. Wood actually doesn't really conduct mana very well and is susceptible to breaking and fragmenting, making it a poor choice. Instead, a simple stave constructed from various metals melded together haphazardly is the weapon of choice for beginning magic users.\",sell_value:30},magisteel_stave:{name:\"magisteel stave\",type:\"weapon\",atk:7,def:1,matk:13,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A stave made from a single alloy that is particularly good at conducting mana. Useful for intermediate mages but a lack of resistance to mana makes it unsuitable for stronger users.\",sell_value:150},enchanted_magisteel_stave:{name:\"enchanted magisteel stave\",type:\"weapon\",atk:8,def:1,matk:20,mdef:8,elemental:{offence:{water:10},defence:{water:-10}},element:\"water\",desc:\"A stave made from an alloy that conducts maigc easily, but also enchanted so that more powerful spells can be cast using it. It seems to have been enchanted with water magic.\",sell_value:350},conduit_orb:{name:\"conduit orb\",type:\"weapon\",matk:20,elemental:{offence:{},defence:{}},element:\"none\",desc:\"Most orbs are formed from solidified mana over a very long period of time, and therefore has a very high mana conductivity that allows for the use of very powerful spells. However this orb is manmade with no elemental alignment using a complicated and specialised technique. It offers no other combat advantages, however allows a user a relatively high increase in magic power for its price.\",sell_value:200},simple_dagger:{name:\"simple dagger\",type:\"weapon\",atk:2,speed:5,mdef:1,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A weapon that seems almost identical to another named 'simple sword' although it is smaller in length. It has a lightly curved blade that allows attacks to be parried more easily.\",sell_value:25},crafted_dagger:{name:\"crafted dagger\",type:\"weapon\",atk:10,speed:10,evasion:.1,mdef:3,def:3,elemental:{offence:{},defence:{}},element:\"none\",desc:\"A wonderfully crafted weapon. It's hilt it designed such that the weapon can be held in most positions very comfortably, and such that the way the weapon is held can be changed at will. The blade is an intricate array of grooves and smooth edges that allow attacks to be blocked and parried with great ease and effectiveness. Not to be used by newbie dagger wielders.\",sell_value:250},silver_shield:{name:\"silver shield\",type:\"weapon\",def:25,mdef:20,speed:-20,elemental:{offence:{},defence:{physical:-10}},element:\"physical\",desc:\"A silver shield. It is well-made and sturdy but with little nuance to speak of.\",sell_value:200},runeblade:{name:\"runeblade\",type:\"weapon\",atk:10,matk:7,mdef:5,def:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A blade of simple structure. The blade has been formed of two half-blades with runic inscriptions on the inside of either welded together such that the inscriptions cannot be seen. This along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},runic_dagger:{name:\"runic dagger\",type:\"weapon\",atk:7,matk:5,mdef:2,def:2,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger of simple structure. The weapon is too small for inscriptions to be placed inside of the blade so they are plainly visible. The runes along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},magisteel_runic_dagger:{name:\"magisteel runic dagger\",type:\"weapon\",atk:10,matk:8,mdef:7,def:5,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger crafted meticulously with the magisteel alloy and also encrusted with runes. This along with an enchantment placed upon the blade makes it possible to enhance the dagger with some runes, and even without magic, the expert craftsmanship evident on the weapon makes it an effective combat tool.\",sell_value:300},slime_reinforced_sword:{name:\"slime reinforced sword\",type:\"weapon\",atk:3,def:1,mdef:3,elemental:{offence:{water:10},defence:{}},element:\"water\",desc:\"A basic sword reinforced with some slime. It is a little heavier and more dull but grants some more elemental defence.\",sell_value:50},wolfhide_dagger:{name:\"wolfhide dagger\",type:\"weapon\",atk:3,speed:6,def:1,mdef:1,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"A simple dagger wherein the grip has been enhanced with grey wolf's skin.\",sell_value:50},pickaxe:{name:\"pickaxe\",type:\"weapon\",atk:3,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It's a pickaxe. What more do you want?\",sell_value:25},earthen_sword:{name:\"earthen sword\",type:\"weapon\",atk:23,def:2,matk:6,mdef:4,elemental:{offence:{earth:15,wind:-5},defence:{earth:-6,wind:6,fire:10}},element:\"earth\",desc:\"A blade enhanced with the venom of a venomous wolf from the dark forest. It can't really poison enemies due the limited quantity of poison, but it does grant the sword some earthen qualities.\",sell_value:390},makeshift_sword:{name:\"makeshift sword\",type:\"weapon\",atk:3,def:1,matk:1,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of limited craftsmanship. Besides that, nothing of note regarding this weapon.\",sell_value:25},wolven_reavers:{name:\"wolven reavers\",type:\"weapon\",atk:4,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Small weapons fashioned from wolf claws and pelt. Easy to carry and useful for close range combat.\",sell_value:75},damaged_helm:{name:\"damaged helm\",type:\"head\",def:7,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:10}},element:\"physical\",desc:\"A damaged helm. The perforations in the front may help the user to see better. The ones in the back, not so much.\",sell_value:100},silver_helm:{name:\"damaged helm\",type:\"head\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-2,water:-2,fire:10}},element:\"physical\",desc:\"A silver helm. It is not a full helm, instead protecting the neck and head. Offers less protection than a full helm but does not restrict movement or sight.\",sell_value:50},advanced_silver_helm:{name:\"advanced damaged helm\",type:\"head\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"A helm made of impressive silver. It has more coverage than some lower end helmets but is still fairly free, at the cost of protection.\",sell_value:80},silver_knight_helm:{name:\"silver knight helm\",type:\"head\",def:10,mdef:5,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"A knight's helm made of silver. It covers the face completely, but the limited view makes it harder to accurately move about and evade attacks.\",sell_value:200},ninja_wrap:{name:\"ninja wrap\",type:\"head\",def:2,mdef:1,speed:5,elemental:{offence:{},defence:{dark:-2,fire:10}},element:\"dark\",desc:\"Black cloth intricately wrapped such that it can be wore on the head, hiding most of the face. Offers almost no protection but does not restrict movement at all.\",sell_value:90},wizard_headband:{name:\"wizard headband\",type:\"head\",def:1,mdef:4,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Stereotypical wizard hats are worn by many but often cannot function as much more than a fashion piece. This wizard headband, crafted from silver with a small gem at the center is designed to enhance spells cast by the wielder.\",sell_value:70},enchanted_wooden_helm:{name:\"enchanted wooden helm\",type:\"helm\",def:5,mdef:2,elemental:{offence:{},defence:{water:-10,fire:30,physical:-5}},element:\"physical\",desc:\"One would assume that a wooden helm would be very ineffective, but it seems to have been enchanted that prevents it from fragmenting and greatly increases its water absorbance.\",sell_value:75},wolfhide_cap:{name:\"wolfhide cap\",type:\"head\",def:1,mdef:1,speed:2,elemental:{offence:{},defence:{fire:5}},element:\"physical\",desc:\"A cap fashioned from grey wolves hide. It doesn't offer much protection but does look quite nice!\",sell_value:50},water_infused_helm:{name:\"water infused helm\",type:\"head\",def:8,mdef:6,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"A metal helm infused with water mana. Surprisingly, the water magic does not change how the helm feels to wear. Grants some nice protection against the elements.\",sell_value:120},makeshift_steel_helm:{name:\"makeshift steel helm\",type:\"head\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-3}},element:\"physical\",desc:\"The artisanship observed with this helm is fairly weak. It's clear it was made by someone fairly inexperienced\",sell_value:50},shinobi_headcloak:{name:\"shinobi headcloak\",type:\"head\",def:8,mdef:6,speed:5,evasion:.05,critical_chance:.1,elemental:{offence:{},defence:{dark:-12,physical:-5,fire:13,light:15}},element:\"dark\",desc:\"Basic black fabric that stealthy fighters use to hide their faces has been enhanced with the pelt of dark beasts. Just like their skin, it has an ethereal quality.\",sell_value:400},damaged_armour:{name:\"damaged armour\",type:\"body\",def:6,mdef:7,speed:-5,elemental:{offence:{},defence:{physical:-5,fire:10}},element:\"physical\",desc:\"A damaged chestplate. The damage to the ligaments would increase one's agility were it not for the rusting forcing one to move against the resistance of the joints.\",sell_value:100},silver_armour:{name:\"silver armour\",type:\"body\",def:5,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"Armour designed to protect the main vulnerable part of the body, leaving a chainmail pattern around the joints for movement. Not expertly cafted, but well made nonetheless.\",sell_value:50},advanced_silver_armour:{name:\"advanced damaged armour\",type:\"body\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"An armour made almost entirely of silver. The joints use overlapping and interlocking pieces of iron to enable movement while facilitating good protection.\",sell_value:80},silver_knight_armour:{name:\"silver knight armour\",type:\"body\",def:13,mdef:7,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"A complete silver knight's armour. It still allows movement at the joints, but still restricts movement slightly. In exchange, the wearer is granted greater defenses.\",sell_value:200},ninja_garb:{name:\"ninja garb\",type:\"body\",def:5,mdef:2,speed:10,evasion:.1,elemental:{offence:{},defence:{dark:-5,fire:10}},element:\"dark\",desc:\"The equivalent of a chestplate for a ninja. It is made of a thin black fabric that offers little protection but allows for quick movement without detection.\",sell_value:130},light_wizard_robes:{name:\"light wizard robes\",type:\"body\",def:3,mdef:7,matk:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Grey and blue wizard robes are often worn by new mages. They have a light enchant to enhance spells cast by the user, are comfortable to move about in and are fairly stylish.\",sell_value:70},tattered_magus_robes:{name:\"tattered magus robes\",type:\"body\",def:5,mdef:10,matk:9,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Magi are extremely powerful magic users. Becaue of the powerful magic they use, spellcaster garb that they wear can wear out quickly. Some magi discard them and others donate them. These robes seem to have sustained a lot of damage, but are still better than most beginners wear. \",sell_value:140},wolfhide_armour:{name:\"wolfhide armour\",type:\"body\",def:3,mdef:2,speed:5,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"Armour fashioned from grey wolf hide. It is comfortable and enabled great movement.\",sell_value:50},water_infused_armour:{name:\"water_infused_armour\",type:\"body\",def:8,mdef:7,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Metal armour enhanced with water magic. Grants increased defence against the elements.\",sell_value:120},makeshift_steel_armour:{name:\"makeshift steel armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Makeshift steel armour. Not made very well, but grants rudimentary protection.\",sell_value:50},shinobi_armour:{name:\"shinobi armour\",type:\"body\",def:10,mdef:8,speed:8,evasion:.05,critical_chance:.1,elemental:{offence:{},defence:{dark:-8,physical:-5,fire:10,light:12}},element:\"dark\",desc:\"Body wear worn by stealth fighters enhanced with the pelt of a dark beast. Having part of them on you makes you feel a little like a dark beast yourself.\",sell_value:400},shadow_cloak:{name:\"Shadow cloak\",type:\"body\",def:13,mdef:10,speed:15,evasion:.1,critical_chance:.1,elemental:{offence:{},defence:{physical:-10,dark:-15,fire:5}},element:\"physical\",desc:\"A cloak that looks as though it was fashioned from darkness itself. It cannot be felt physically when worn but its power can still be felt.\",sell_value:600},bladed_armour:{name:\"bladed armour\",type:\"body\",def:5,mdef:3,atk:5,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Simple armour with claws used to grant the wearer an offensive edge.\",sell_value:120},damaged_pantaloons:{name:\"damaged pantaloons\",type:\"legs\",def:5,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:10}},element:\"physical\",desc:\"Damaged pantaloons. They're pretty uncomfortable, and rapid movement causes them to make a sound that hurts the ear. Also, pantaloons is such a silly sounding word.\",sell_value:100},silver_legwear:{name:\"silver legwear\",type:\"legs\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-4,water:-3,fire:14}},element:\"physical\",desc:\"Silver legwear. There is some type of fabric protecting the legs down to the knees, beyond which silver armour is present.\",sell_value:50},advanced_silver_legwear:{name:\"advanced silver legwear\",type:\"legs\",def:6,mdef:3,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"Advanced silver legwear. It uses relatively advanced craftsmanship to allow movement at the joints with overlapping and interlocking pieces of silver.\",sell_value:80},silver_knight_legwear:{name:\"silver knight legwear\",type:\"legs\",def:10,mdef:7,speed:-10,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:20}},element:\"physical\",desc:\"Legwear made of silver used by knights. There is a considerable compromise in movement in exchange for improved defenses.\",sell_value:200},ninja_legwear:{name:\"ninja legwear\",type:\"legs\",def:7,mdef:3,speed:10,elemental:{offence:{},defence:{dark:-2,fire:10}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings. They offer great movement and are very comfortable, and seem to have been lightly enchanted for a little protection\",sell_value:90},light_wizard_leggings:{name:\"light wizard leggings\",type:\"legs\",def:2,mdef:5,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Simple legwear designed to synergise aesthetically with simple wizard robes. Has a light enchant to boost magical power.\",sell_value:70},wolfhide_leggings:{name:\"wolfhide leggings\",type:\"legs\",def:1,mdef:2,speed:3,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"Legwewar fasioned from grey wolf's hide. It is comfortable, and allows for great movement.\",sell_value:50},water_infused_legwear:{name:\"water-infused legwear\",type:\"legs\",def:6,mdef:5,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Basic metal armour infused with water magic. Asides from enhanced physical protection, it also grants some defence against the elements.\",sell_value:120},makeshift_steel_legwear:{name:\"makeshift steel legwear\",type:\"legs\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-4}},element:\"physical\",desc:\"Steel legwear made somewhat poorly, but not unwearable. Seems like it might fall apart after some use.\",sell_value:50},shinobi_leggings:{name:\"shinobi leggings\",type:\"legs\",def:9,mdef:5,speed:10,elemental:{offence:{},defence:{dark:-9,physical:-5,fire:12,light:15}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings, but that have been enhanced using the pelt of a dark beast. Quite comfortable, but have an ethereal quality to them.\",sell_value:400},shadowwarding_pendant:{name:\"Shadowwarding Pendant\",type:\"misc\",atk:5,def:5,matk:7,mdef:8,elemental:{offence:{},defence:{dark:-10,light:10}},element:\"physical\",description:\"A short pendant with a silver chain. On the front seems to be a small, dark purple crystal. It seems that the pendant is designed to defend against the more dangerous creatures in the dark forest.\",sell_value:500},slime_bracers:{name:\"Slime bracers\",type:\"misc\",def:1,mdef:2,speed:-3,resistance:.05,elemental:{offence:{water:10},defence:{water:-5,fire:-10,thunder:10}},element:\"water\",description:\"Bracers for defending one's arms fashioned from slime. The solid and slightly sticky substance offers fairly good elemental protection but stunts one's ability to move somewhat.\",sell_value:30},wolfhide_charm:{name:\"Wolfhide charm\",type:\"misc\",atk:2,def:2,mdef:1,speed:3,evasion:.05,critical_chance:.1,elemental:{offence:{physical:8},defence:{fire:10}},element:\"physical\",description:\"A charm fashioned from wolf pelts. The residual inherent mana of the wolves seems to grant the charm some special qualities.\",sell_value:60},lizard_bracelet:{name:\"Lizard bracelet\",type:\"misc\",atk:7,def:4,mdef:3,evasion:.1,elemental:{offence:{},defence:{fire:-5}},element:\"water\",description:\"Small parts of lizard tails were wrapped intricately together to create a bracelet. It is quite pretty, and seems to have some magical properties.\",sell_value:100},aquus_orb:{name:\"Aquus orb\",type:\"misc\",matk:7,mdef:6,resistance:.1,elemental:{offence:{water:10,fire:-10},defence:{water:-15,fire:-6,thunder:12}},element:\"water\",description:\"Aquus clusters condensed to form a small orb capable of enhancing the capabilities of the wielder.\",sell_value:100},luminant_charm:{name:\"Luminant charm\",type:\"misc\",matk:5,atk:5,mdef:6,speed:2,elemental:{offence:{light:10},defence:{light:-5,dark:-10}},element:\"light\",description:\"A simple charm enhanced with the luminescent eye of a water lizard. Can be worn on jewelry or held in a pocket.\",sell_value:150},tear_of_lucia:{name:\"Tear of lucia\",type:\"misc\",matk:7,mdef:7,resistance:.05,elemental:{offence:{water:20},defence:{water:-15,fire:-10,dark:-5,light:-5,earth:-5,thunder:-5,wind:-5}},element:\"water\",description:\"A manasoul condensed using a makeshift orb into a very small space. The compactness of the charm causes the mana inside the be quite powerful. Items of this nature are called 'Tears of Lucia' as it believed that the tears of the Solace goddess will grant any who observes them inpenetrable safety, and the mana of this item for some reason has a very soothing aura.\",sell_value:350},red_slime_bracers:{name:\"Red slime bracers\",type:\"misc\",def:9,mdef:13,speed:-5,resistance:.05,critical_damage:.1,elemental:{offence:{fire:10},defence:{water:5,fire:-13,thunder:-5}},element:\"water\",description:\"Bracers for defending one's arms fashioned from red slime. It is more solid than blue slime and has different elemental properties.\",sell_value:300},slime_ball:{name:\"Slime Ball\",type:\"reagent\",desc:\"A ball of blue slime. Although it has shape, it is easy to press into. Has a peculiar texture.\",sell_value:5},grey_wolf_pelt:{name:\"Grey Wolf Pelt\",type:\"reagent\",desc:\"The fur of a grey wolf. Most of it remains intact, but if you shake the straps of fur, parts of it will flake off rapidly\",sell_value:7},wanderer_memorabilia:{name:\"Adventurer Memorabilia\",type:\"reagent\",desc:\"Various things that may remind an old advenutrer of the adventures they had.\",sell_value:0},weak_membrane:{name:\"Weak Membrane\",type:\"reagent\",desc:\"A very thin layer of skin from some kind of weap reptile. A single wrong move and it would tear.\",sell_value:10},tiny_lizard_tail:{name:\"Tiny Lizard Tail\",type:\"reagent\",desc:\"The tail of a lizard. It still moves sometimes.\",sell_value:12},aquus_cluster:{name:\"Aquus Cluster\",type:\"reagent\",desc:\"An undeveloped orb of weak water magic. 'Aquus' refers to weak water magic. There wasn't enough of it to form an orb, so the mana settled as a semi-solid substance that has form and yet is very soft and malleable. Even so, it is fairly useful to novice mages.\",sell_value:25},water_orb:{name:\"Water Orb\",type:\"reagent\",desc:\"Water magic that gathered at a single point over a fairly long period of time and eventually reached a high enough concentration to possess crystalline form. These very rarely form naturally, and are often crafted by strong magic users to store mana of a particular alignment.\",sell_value:400},manasoul:{name:\"Manasoul\",type:\"reagent\",desc:\"Beings such as klastera and elementals with no anatomy or creature soul are animated by a 'manasoul', mana with the power to grant consciousness. It is not known how to create these and so they are often extracted from naturally occurring creatures such as klastera, elementals and very rarely, dragons.\",sell_value:1e3},light_absorbant_eye:{name:\"Light absorbant eye\",type:\"reagent\",desc:\"The eye of a class of lizard that absorbs light from the sun to be used to keep the body warm during hibernation. In many places with cold winters there is little space to burrow or make warm refuge, and so this skill is essential in keeping the lizards alive when the climate becomes cold.\",sell_value:20},red_slime_ball:{name:\"Red slime ball\",type:\"reagent\",desc:\"A ball of red slime. It can be pressed into but seems to return to a general shape after the deforming force is removed. Has a peculiar texture.\",sell_value:7},sharp_claw:{name:\"Sharp claw\",type:\"reagent\",desc:\"A dull grey claw. Seems to be sharper than most. Both the sides and prick cause bleeding upon contact.\",sell_value:8},venomous_claw:{name:\"Sharp claw\",type:\"reagent\",desc:\"A dull greenish-grey claw. The venom the claw is laced with seems to cause fatigue in small amounts. It would be unwise to toy with this item.\",sell_value:8},shadow_pelt:{name:\"Shadow pelt\",type:\"reagent\",desc:\"A patch of fur from a Dark beast. Although it is clearly tangible, it has an ethereal quality that makes it uncomfortable to hold - like it would just fade into black smoke.\",sell_value:10},shadow_corona:{name:\"Shadow corona\",type:\"reagent\",desc:\"It's difficult to tell what part of the Dark beast this comes from - it seems like a particularly tough, solid patch of its fur. It is heavily enchanted and seems to serve as some kind of evidence that the dark beast is in fact a dark beast.\",sell_value:20},trash:{name:\"Trash\",type:\"reagent\",desc:\"Human garbage. Arguably of negative value.\",sell_value:-1},fire_rune:{name:\"Fire rune\",type:\"reagent\",desc:\"A simple flame rune. It is contained in a transparent box of some material that seems to block any heat emanating from them.\",sell_value:40},water_rune:{name:\"Water rune\",type:\"reagent\",desc:\"A simple water rune. It isn't dangerous, but feels a little weird to touch - probably due to the water mana constantly emanating from it.\",sell_value:40},thunder_rune:{name:\"Thunder rune\",type:\"reagent\",desc:\"A simple thunder rune. Touching it would shock the user a little, so it is encased in a transparent box of some material.\",sell_value:40},dark_rune:{name:\"Dark rune\",type:\"reagent\",desc:\"A simple dark rune. It is uncomfortable to have in your inventory due to the foreboding enery it emits.\",sell_value:40},light_rune:{name:\"Light rune\",type:\"reagent\",desc:\"A simple light rune. It is difficult to tell whether it is emitting light or light mana.\",sell_value:40},vip_card:{name:\"VIP card\",type:\"reagent\",desc:\"A basic-looking small card. Apparently functions as evidence of one's generous patronage.\",sell_value:100},steel:{name:\"steel\",type:\"reagent\",desc:\"It's steel. What more do you want?\",sell_value:10},wood:{name:\"wood\",type:\"reagent\",desc:\"Some wood. Who cares what type it is?\",sell_value:8},leather:{name:\"leather\",type:\"reagent\",desc:\"Leather. It is cheap but fairly well made.\",sell_value:9}},w=(e,t=1,a=1)=>{const s={...k[e]},o=Math.floor(Math.random()*(a-t+1))+t;h(`<br>Attained ${o} ${s.name}${o>1?\"s\":\"\"}!`);var r=!1;const i=n.player;if(\"reagent\"==s.type&&i.inventory.forEach(t=>{t[0]==e&&(t[1]+=o,r=!0)}),0==r)if(\"reagent\"!=s.type)for(var l=1;l<o+1;l++)n.player.inventory.push(e);else n.player.inventory.push([e,o])},v=(e,t)=>{const a=k[e];h(`<br>Removed ${t} ${a.name}${t>1?\"s\":\"\"}!`);var s=!1;const o=n.player;if(\"reagent\"==a.type){const a=n.player;a.inventory.forEach(n=>{if(n[0]==e){if(n[1]-=t,0==n[1]){const t=a.inventory.findIndex(t=>t[0]==e);console.log(t),a.inventory.splice(t,1)}s=!0}})}if(0==s)for(var r=1;r<t+1;r++)-1!=o.inventory.indexOf(e)&&(delete o.inventory[o.inventory.indexOf(e)],s=!1);for(r=0;r<o.inventory.length;r++)null==o.inventory[r]&&o.inventory.splice(r,1);return 0==s?-1:0},$=(e,t=!0,a=!0,n=!0,s=!0,o=!1)=>{const r=[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"critical_chance\",\"critical_damage\",\"effectiveness\",\"resistance\",\"max_stamina\",\"max_mana\",\"evasion\"],i=[\"attack\",\"defence\",\"magic attack\",\"magic defence\",\"speed\",\"critical chance\",\"critical damage\",\"effectiveness\",\"resistance\",\"max stamina\",\"max mana\",\"evasion\"];o&&h(e.name),Object.keys(e).forEach(s=>{const o=e[s];n&&\"type\"==s&&h(`Type: ${o}`),t&&r.includes(s)&&h(`${o} ${i[r.indexOf(s)]}`),t&&\"object\"==typeof o&&(Object.keys(o.offence).forEach(e=>{h(`${o.offence[e]<0?\"\":\"+\"}${o.offence[e]} ${e} attack`)}),Object.keys(o.defence).forEach(e=>{h(`${o.defence[e]<0?\"\":\"+\"}${o.defence[e]} ${e} defence`)})),a&&\"desc\"==s&&h(`Description: ${o}`),a&&\"sell_value\"==s&&h(`Sell value: ${o}`)})},x=e=>e[0].length>1,I=e=>x(e)?e[0]:e,S=(e,t)=>{var a=0;return\"reagent\"!=k[e].type?t.forEach(t=>{t==e&&a++}):t.forEach(t=>{t[0]==e&&(a=t[1])}),a};function P(e,t,a){return e<=t?t:e>=a?a:e}function A(e){return e[0].toUpperCase()+e.slice(1)}const E=e=>{J(e);const t={...e};t.stats=N.getPlayerAdd(t.stats),W(t)},T=(e,t)=>{if(\"reagent\"==k[e].type){const a=t.findIndex(t=>t[0]==e);return-1==a?0:t[a][1]}var a=0;return t.forEach(t=>{t==e&&a++}),a},M=(e,t)=>{var a;if(e.hasOwnProperty(t))return e[t];for(a in e){if(a==t)return e[a];if(\"object\"==typeof e[a]&&null==e[a].length)return M(e[a],t)}},L=e=>e===Object(e),O={calcDamage(e,t,a,n,s,o,r,i,l){const c=N.calcElementBuffs(e),d=N.calcElementBuffs(t),m=e.elemental.offence[s]+c.offence[s],h=t.elemental.defence[o]+d.defence[o],f=e[a]*(1+N.calcMod(a,e)),u=t[n]*(1+N.calcMod(n,t)),p=Math.random()<e.crit_chance+e.crit_chance_mod?e.crit_damage+e.crit_damage_mod:1,g=Math.random()<t.evasion+N.calcMod(\"evasion\",t)?0:1,y=1-P(N.calcMod(\"mitigation\",t),0,.8);var b=(Math.pow(f,2)*r+250)/(u*i+100)*(m/100)*(h/100)*p*g*y*l;return{damage:P(b=Math.round(b*(.1*Math.random()+.9)),0,99999999),crit:1!==p,eva:0==g,element:s,offElement:m,defElement:h,mitigation:y,type:\"atk\"==a?\"physical\":\"magical\"}},prepareAttackMessage(e,t,a,n){const s=`${n.crit?\"<b>\":\"\"}<span style=\"color:${Q[n.element]}\">`+`${n.damage} damage! (${Math.round(n.defElement*n.offElement*n.mitigation)/100}% ${n.type})</span>${n.crit?\"</b>\":\"\"}`;return console.log(`damage msg is ${s}`),`${a}${n.crit?\"[]CRITICAL HIT!!\":\"\"}${n.eva?`[]${t} evaded the attack!`:\"\"}[]${s}`.split(\"[]\").map(e=>[e,1])},pushToState(e,t,a){N.state[N.state.length-1][a].push({skill:e,damage:t,user:a})},getSkill(e){console.log(Object.keys(O));var t=-1;return Object.keys(O).forEach(a=>{O[a].name.toLowerCase()==e&&(t=O[a])}),t},finish(e,t,a){O.pushToState(e,t,a),N.endTurn(a)},attack:{name:\"attack\",description:\"Strike the enemy, dealing moderate damage. Attack element is based on the element of the equipped weapon.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{const n=O.attack;var s=\"physical\";e.hasOwnProperty(\"equips\")&&null!=e.equips.weapon&&(s=k[e.equips.weapon].element);const o=O.calcDamage(e,t,n.off_stat,n.def_stat,s,s,n.off_mod,n.def_mod,n.dmg_mod),r=O.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy!`,o);g(r,\"battle\",()=>{t.health-=o.damage;const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;N.uploadChanges(n,s),O.finish(\"attack\",o,a)})},cost:(e,t)=>!0},guard:{name:\"guard\",description:\"Take a defensive stance, reducing the damage you take by 20% until your next turn. This buff stacks up to 3\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} guards.`,1]];g(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);N.applyBuff({name:\"guard\",mitigation:.2,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is guarding..\",unstrippable:!0,max_stacks:3},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),O.finish(\"guard\",n,a)})},cost:(e,t)=>!0},check:{name:\"check\",description:\"Has a 50% chance to apply 'Analysed' to the enemy for 2 turns. When used on an enemy with 'Analysed', will display all of the stats of that enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:0,crit:!1,eva:!1};if(N.checkStacks(t.debuffs,\"analysed\")>0){g([[\"<br>Analysing...\",1]],\"battle\",()=>{N.displayStats(t),O.finish(\"analysis\",n,a)})}else{const s=[[`<br>${e.name} attempts to analyse the enemy...`,1]];g(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);N.applyBuff({name:\"analysed\",duration:2,element:\"physical\",types:[\"debuff\"],apply_text:\" has been analysed!\",max_stacks:1,desc:\"Allows for analysis of an enemy.\"},50,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\"),O.finish(\"check\",n,a)})}},cost:(e,t)=>!0},channel_health:{name:\"channel health\",description:\"Focus on channeling your inner mana in order to recover health. Consumes 20% of mana to recover 20% of health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=e.max_mana/5;O.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.max_health/5)},s=[[`<br>${e.name} channels their mana!`,1],[`recovered ${-1*n.damage} HP!`,1]];g(s,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o),O.finish(\"channel_health\",n,a)})},cost:(e,t)=>e.mana>=e.max_mana/5||\"Insufficient mana!\"},channel_energy:{name:\"channel energy\",description:\"Focus on channeling your stamina in order to gain SP. Consumes 50 stamina in exchnage for 25 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.stamina-=50;O.channel_energy;const n={crit:!1,eva:!1,damage:0,sp:-25},s=[[`<br>${e.name} channels their energy!`,1],[`gained ${-1*n.sp} SP!`,1]];g(s,\"battle\",()=>{e.sp-=n.sp,e.sp>e.max_sp&&(e.sp=e.ma_sp);const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o),O.finish(\"channel_health\",n,a)})},cost:(e,t)=>e.stamina>=50||\"Insufficient stamina!\"},brutal_swipe:{name:\"brutal swipe\",description:\"Use 25 SP to temporarily enhance your strength and strike the enemy, dealing high physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.3,use:(e,t,a)=>{e.sp-=25;const n=O.brutal_swipe,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);s.damage+=5;const o=O.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy with great force!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"attack\",s,a)})},cost:(e,t)=>e.sp>=25||\"Insufficient SP!\"},hex:{name:\"hex\",description:\"Use your mana to curse the enemy. Costs 7 mana and applies 'hexed', reducing enemy resistance by 30 for 3 turns.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{e.mana-=7;O.hex;const n={crit:!1,eva:!1,damage:0},s=[[`<br>${e.name} attempts to curse the enemy!`,1]];g(s,\"battle\",()=>{N.applyBuff({name:\"hexed\",duration:3,resistance:-30,element:\"dark\",types:[\"debuff\"],apply_text:\" has been hexed!\",max_stacks:1,elemental:{offence:{},defence:{}}},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\");const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o),O.finish(\"hex\",n,a)})},cost:(e,t)=>e.mana>=7||\"insufficient mana!\"},fireball:{name:\"fireball\",description:\"Costs 10 MP. Conjure a ball of flame and fire it at the enemy, dealing moderate magical fire damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=O.fireball;e.mana=e.mana-10;const s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} fired a ball of flame at the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"fireball\",s,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},icebolt:{name:\"icebolt\",description:\"Costs 10 MP. Fire a bolt of cold energy at the enemy, dealing moderate magical water damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=O.icebolt;e.mana=e.mana-10;const s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} fired a bolt of ice at the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"icebolt\",s,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},thunder_jolt:{name:\"thunder jolt\",description:\"Costs 10 MP. Shock the enemy with a small amount of lightning energy, dealing moderate magical thunder damage\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"thunder\",def_element:\"thunder\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=O.thunder_jolt;e.mana=e.mana-10;const s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} fired a jolt of electricity at the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"thunder_jolt\",s,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},lesser_quake:{name:\"lesser quake\",description:\"Costs 10 MP. Use mana to rupture the earth below the enemy slightly, dealing moderate magical earth damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=O.lesser_quake;e.mana=e.mana-10;const s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} causes the ground to shake beneath the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"lesser_quake\",s,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},arcane_shield:{name:\"arcane shield\",description:\"Use magic to bolster your defences. Applies 'arcane shield' to self, which grants 20% mitigation and lasts 1 turn. Also applies 'arcane protection' to self, which grants 5% mitigation and a 20% increase to mdef and def and lasts 3 turns. Costs 20 MP. Both stack to 1.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=20;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} shields themselves with magical energy.`,1]];g(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);N.applyBuff({name:\"arcane shield\",mitigation:.2,duration:1,element:\"none\",types:[\"buff\"],apply_text:\" is protected by arcane energy.\",max_stacks:1},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),N.applyBuff({name:\"arcane protection\",mitigation:.05,def:.2,mdef:.2,duration:3,element:\"none\",types:[\"buff\"],apply_text:\" is protected by residual arcane energy.\",max_stacks:1},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),O.finish(\"arcane_shield\",n,a)})},cost:(e,t)=>e.mana>=20||\"Insufficient mana!\"},stalwart_strike:{name:\"stalwart strike\",description:\"Costs 30 stamina. Strike the enemy while bolstering your defences. Deals low physical damage and applies standard DEF up to self (+10% DEF, stacks to 5, lasts 3 turns).\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.7,use:(e,t,a)=>{e.stamina=e.stamina-30;const n=O.stalwart_strike,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} struck the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=R.defup;N.applyBuff(n,100,\"player\"==a?e:N.getPlayer(),\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\");const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;N.uploadChanges(o,r),O.finish(\"stalwart_strike\",s,a)})},cost:(e,t)=>e.stamina>=30||\"Insufficient stamina!\"},protect:{name:\"protect\",description:\"Costs 15 SP. Enhance your guarding technique with mystical energy, applying 'protect' to self for 1 turn, reducing all incoming damage by 40%.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.sp-=15;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} protects themselves.`,1]];g(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);N.applyBuff({name:\"protect\",mitigation:.4,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is under mystical protection..\",max_stacks:1},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),O.finish(\"protect\",n,a)})},cost:(e,t)=>e.sp>=15||\"Insufficient SP!\"},bulwark:{name:\"bulwark\",description:\"Costs 20 stamina. Steady yourself and stand firm, applying 'bulwark' for 3 turns. Bulwark increases your attack by 25% but lowers your speed by 30%. Stacks to 4.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.sp-=20;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} steadies themselves..`,1]];g(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);N.applyBuff({name:\"bulwark\",speed:-.3,atk:.25,duration:3,element:\"physical\",types:[\"buff\"],apply_text:\" is standing their ground!\",max_stacks:4},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),O.finish(\"bulwark\",n,a)})},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina!\"},challenge:{name:\"challenge\",description:\"Taunt the enemy into accepting a challenge, applying 'challenge' to both fighters for 3 turns. 'Challenge' increases the afflicted's attack (and magic attack for the enemy) and does not stack. Costs 30 stamina.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.stamina-=30;O.challenge;const n={crit:!1,eva:!1,damage:0},s=[[`<br>${e.name} challenges the enemy!`,1]];g(s,\"battle\",()=>{N.applyBuff({name:\"challenge\",duration:3,atk:.4,matk:.4,element:\"none\",types:[\"buff\"],apply_text:\" is prepared for battle!\",max_stacks:1},999,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"buffs\"),N.applyBuff({name:\"challenge\",duration:3,atk:.4,element:\"none\",types:[\"buff\"],apply_text:\" is prepared for battle!\",max_stacks:1},999,\"player\"==a?e:N.getPlayer(),\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\");const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o),O.finish(\"challenge\",n,a)})},cost:(e,t)=>e.stamina>=30||\"Insufficient stamina!\"},debilitate:{name:\"debilitate\",description:\"Strike the enemy in a way that removes a portion of their power. Deals low physical damage and removes one buff at random from the target. Costs 25 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=O.debilitate;e.sp-=25;const s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<br>${e.name} strips the enemy of their power!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=JSON.parse(JSON.stringify(t.buffs));for(var o=!1;n.length>0&&0==o;){var r=Math.round(Math.random()*n.length-1);n[r].hasOwnProperty(\"unstrippable\")?n.splice(r,1):(o=!0,N.stripBuff(\"player\"==a?N.getEnemy().buffs:N.getPlayer().buffs,n[r].name))}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;N.uploadChanges(i,l),O.finish(\"attack\",s,a)})},cost:(e,t)=>e.sp>=25||\"Insufficient SP!\"},swift_strike:{name:\"swift strike\",description:\"Costs 20 stamina. Strike an enemy quickly and lightly, dealing moderate physical damage and applying standard SPD up to self (+10% SPD, stacks to 5, lasts 3 turns).\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{e.stamina=e.stamina-20;const n=O.swift_strike,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} slashed rapidly at the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=R.spdup;N.applyBuff(n,100,\"player\"==a?e:N.getPlayer(),\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\");const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;N.uploadChanges(o,r),O.finish(\"swift_strike\",s,a)})},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina!\"},shinobi_strike:{name:\"shinobi strike\",description:\"Costs 10 stamina. Strike an enemy and blend into the shadows. Deals low physical damage and applies 'stealh' for 3 turns. Stealth increases your offences and speed by 20% and is used to change the effects of other skills.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{e.stamina=e.stamina-10;const n=O.shinobi_strike,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} slashes the enemy before blending into the shadows..`,s);g(o,\"battle\",()=>{t.health-=s.damage;N.applyBuff({name:\"stealth\",duration:3,atk:.2,matk:.2,speed:.2,desc:\"Used to change the effects of other skills.\",element:\"physical\",types:[\"buff\"],apply_text:\" has blended into the shadows.\",max_stacks:1},100,\"player\"==a?e:N.getPlayer(),\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\");const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"swift_strike\",s,a)})},cost:(e,t)=>e.stamina>=10||\"Insufficient stamina!\"},crippling_blow:{name:\"crippling blow\",description:\"Costs 15 stamina. Deals considerable physical damage. If 'stealth' is applied to the user, consumes it and applies 'weakened' to the enemy, decreasing their defences by 30% for 3 turns. Weakened does not stack, and cannot be active as the same time as the 'feeble' debuff.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,t,a)=>{e.stamina=e.stamina-15;const n=O.crippling_blow,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} strikes the enemy with a special technique!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"weakened\",duration:3,def:-.3,mdef:-.3,element:\"physical\",types:[\"buff\"],apply_text:\" is weakened!\",max_stacks:1};N.checkStacks(e.buffs,\"stealth\")>0&&(N.applyBuff(n,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==a?N.getPlayer().buffs:N.getEnemy().buffs,\"stealth\"),N.stripBuff(\"player\"==a?N.getEnemy().debuffs:N.getPlayer.debuffs,\"feeble\"));const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;N.uploadChanges(o,r),O.finish(\"crippling_blow\",s,a)})},cost:(e,t)=>e.stamina>=15||\"Insufficient stamina!\"},enfeebling_blow:{name:\"enfeebling blow\",description:\"Costs 15 stamina. Deals considerable physical damage. If 'stealth' is applied to the user, consumes it and applies 'feeble' to the enemy, decreasing their offences by 30% for 3 turns. Feeble does not stack, and cannot be active at the same time as the 'weakened' debuff.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,t,a)=>{e.stamina=e.stamina-15;const n=O.enfeebling_blow,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} strikes the enemy with a special technique!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"feeble\",duration:3,atk:-.3,matk:-.3,element:\"physical\",types:[\"buff\"],apply_text:\" is enfeebled!\",max_stacks:1};N.checkStacks(e.buffs,\"stealth\")>0&&(N.applyBuff(n,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\"),N.stripBuff(\"player\"==a?N.getPlayer().buffs:N.getEnemy().buffs,\"stealth\"),N.stripBuff(\"player\"==a?N.getEnemy().debuffs:N.getPlayer().debuffs,\"weakened\"));const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;N.uploadChanges(o,r),O.finish(\"enfeebling_blow\",s,a)})},cost:(e,t)=>e.stamina>=15||\"Insufficient stamina!\"},shadow_strike:{name:\"shadow strike\",description:\"Emerge from the shadows and strike the opponent, dealing moderate physical damage. If 'weakened' was applied to the target, consumes it and applies three stacks of standard ATK and MATK buff (+10% ATK/MATK, stacks to 5, lasts 3 turns). If 'feeble' was applied to the target, consumes it and applies three stacks of standard DEF and MDEF buff (+10% DEF/MDEF, stacks to 5, lasts 3 turns). Gain an extra action if either are applied. Otherwise, consumes all stamina and grants two extra actions. Costs 30 stamina. \",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{e.stamina=e.stamina-30;const n=O.shadow_strike,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} strikes from the shadows!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=N.checkStacks(t.debuffs,\"feeble\"),o=N.checkStacks(t.debuffs,\"weakened\");if(n>0){for(var r=0;r<3;r++)N.applyBuff(R.mdefup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\"),N.applyBuff(R.defup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\");N.stripBuff(\"player\"==a?N.getEnemy().debuffs:N.getPlayer().debuffs,\"feeble\"),\"player\"==a?N.getPlayer().actions+=1:N.getEnemy().actions+=1}else if(o>0){for(r=0;r<3;r++)N.applyBuff(R.atkup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\"),N.applyBuff(R.matkup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\");N.stripBuff(\"player\"==a?N.getEnemy().debuffs:N.getPlayer().debuffs,\"weakened\"),\"player\"==a?N.getPlayer().actions+=1:N.getEnemy().actions+=1}else\"player\"==a?(N.getPlayer().actions+=2,e.stamina=0,h(\"Gained an action!\")):(N.getEnemy().actions+=2,e.stamina=0,h(\"The enemy gained an action!\"));const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;N.uploadChanges(i,l),O.finish(\"shadow_strike\",s,a)})},cost:(e,t)=>e.stamina>=30||\"Insufficient stamina!\"},splash:{name:\"splash\",description:\"Splash at the enemy with high-pressure liquid, dealing low physical water damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=O.splash,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} splashed the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"splash\",s,a)})},cost:(e,t)=>!0},guard_break:{name:\"guard break\",description:\"Costs 35 stamina. Strike the enemy with a blunt edge, dealing low damage but possibly (75%) reducing their defence by 20% for 3 turns. Debuff stacks to 3.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{e.stamina=e.stamina-35;const n=O.guard_break,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} struck the enemy with a blunt edge!`,s);g(o,\"battle\",()=>{t.health-=s.damage;N.applyBuff({name:\"guard broken\",def:-.1,duration:3,element:\"physical\",types:[\"debuff\"],apply_text:\"'s guard has been broken!\",max_stacks:3,elemental:{offence:{},defence:{}}},75,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\");const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"guard_break\",s,a)})},cost:(e,t)=>e.stamina>=35||\"Insufficient stamina!\"},rush_attack:{name:\"rush attack\",description:\"Costs 10 stamina. Strike the enemy several times, dealing 3 hits of low physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{e.stamina=e.stamina-10;const n=O.rush_attack;g([[`${e.name} strikes the enemy multiple times!`,1]],\"battle\",()=>{var s,o=0,r=0;const i=()=>{s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),g(O.prepareAttackMessage(e,t,\"\",s),\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;N.uploadChanges(n,l),o+=s.damage,2==r?(s.damage=o,O.finish(\"rush_attack\",s,a)):(r++,i())})};i()})},cost:(e,t)=>e.stamina>=10||\"Insufficient stamina!\"},health_potion:{name:\"health potion\",description:\"Drink a health potion, recovering 20% of one's health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=30;O.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.health/4)},s=[[`${e.name} Drank a health potion!`,1],[`recovered ${n.damage} HP!`,1]];g(s,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o),O.finish(\"health_potion\",n,a)})},cost:(e,t)=>e.mana>=30||\"Insufficient mana!\"},rend:{name:\"rend\",description:\"Costs 20 stamina. Slash at the enemy viciously, dealing moderate physical damage and applying \\\"bleed, a debuff which lowers physical attack by 20% and also applies a 15% HP DoT. 'Bleed' lasts 3 turns.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{e.stamina=e.stamina-20;const n=O.rend,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} claws at its target viciously!`,s);g(o,\"battle\",()=>{t.health-=s.damage;N.applyBuff({name:\"bleed\",atk:-.2,duration:3,element:\"physical\",types:[\"debuff\"],apply_text:\" is bleeding!\",max_stacks:1,damage:[\"percentile\",15]},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\");const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"rend\",s,a)})},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina!\"},poison_claws:{name:\"poison claws\",description:\"Costs 12 mana. Create a wound with sharp poisonous claws. The poison seeps into the enemy, applying 'viridian toxin' for 3 turns, decreasing afflicted's speed by 10% and dealing 5% HP damage. Stacks to 3.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{e.stamina=e.stamina-20;const n=O.poison_claws,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} envenoms the target!`,s);g(o,\"battle\",()=>{t.health-=s.damage;N.applyBuff({name:\"viridian toxin\",speed:-.1,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" is envenomed!\",max_stacks:3,damage:[\"percentile\",5]},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\");const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"poison_claws\",s,a)})},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},camoflague:{name:\"camoflague\",description:\"The user envelops themselves in a camoflague that makes them hard to see and react to. Applies 'camoflague' to the user for 2 turns, increasing evasion by 30%, resistance by 70% and speed by 30%. Costs 12 mana.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=12;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} camoflagues themselves.`,1]];g(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);N.applyBuff({name:\"camoflague\",evasion:.3,resistance:70,speed:.3,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is camoflagued!\",max_stacks:1},100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),O.finish(\"camoflague\",n,a)})},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},engulf:{name:\"engulf\",description:\"Absorb the enemy's power. Deals low physical damage and removes all buffs from the enemy. For each buff removed, applies 'empowered' to the user, raising atk/def/matk/mdef/spd by 10% for2 turns . Costs 10 mana.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=O.engulf;e.mana-=10;const s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<br>${e.name} engulfs the enemy!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"empowered\",atk:.1,matk:.1,mdef:.1,def:.1,speed:.1,duration:2,element:\"dark\",types:[\"buff\"],apply_text:\" is empowered!\",max_stacks:99},o=JSON.parse(JSON.stringify(t.buffs));for(;o.length>0;){var r=Math.round(Math.random()*o.length)-1;r<0&&(r=0),o[r].hasOwnProperty(\"unstrippable\")?o.splice(r,1):(N.stripBuff(\"player\"==a?N.getEnemy().buffs:N.getPlayer().buffs,o[r].name),N.applyBuff(n,100,\"player\"==a?e:N.getPlayer(),\"player\"==a?N.getPlayer():N.getEnemy(),\"buffs\"),o.splice(r,1))}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;N.uploadChanges(i,l),O.finish(\"engulf\",s,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient SP!\"},dark_pact:{name:\"dark pact\",description:\"Costs 18 mana. The user calls upon their pact with the dark forest to strengthen them. At the cost of 10% HP, applies three stacks each of standard ATK/MATK/SPEED buff (10% to ATK/MATK/SPEED, 3 turns) to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:e.max_health/10,crit:!1,eva:!1,note:\"self-inflicted damage\"},s=[[`<br>${e.name} forms a covenant with darkness..`,1],[`<br>${e.name} took damage! (${e.max_health/10})`]];g(s,\"battle\",()=>{e.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(s,o);for(var r=0;r<3;r++)N.applyBuff(R.matkup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),N.applyBuff(R.atkup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\"),N.applyBuff(R.spdup,100,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getPlayer():e,\"buffs\");O.finish(\"dark_pact\",n,a)})},cost:(e,t)=>e.health>e.max_health/10&&e.mana>=18||\"Insufficient health!\"},dark_howl:{name:\"dark howl\",description:\"The user lets out a howl imbued with malevolent magic. Deals low dark damage and has a 40% each to apply 'fear' (-100% evasion, -20% speed, -10% ATK/DEF/MATK/MDEF), dark curse (+70% dark defence), and 'elemental weaken' (-10% all elemental offences). Each debuff lasts 2 turns and stacks twice. Costs 15 mana.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:.6,use:(e,t,a)=>{e.mana=e.mana-15;const n=O.dark_howl,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} lets out a dark howl!`,s);g(o,\"battle\",()=>{t.health-=s.damage;N.applyBuff({name:\"fear\",duration:2,def:-.1,mdef:-.1,matk:-.1,atk:-.1,speed:-.2,evasion:-1,element:\"dark\",types:[\"debuff\"],apply_text:\" is rapt with fear!\",max_stacks:2},40,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\"),N.applyBuff({name:\"dark curse\",element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by darkness!\",elemental:{defence:{dark:70},offence:{}},duration:2,max_stacks:2},40,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\"),N.applyBuff({name:\"elemental weaken\",element:\"dark\",types:[\"debuff\"],apply_text:\"'s elemental strength has decreased!'\",elemental:{defence:{},offence:{physical:-10,fire:-10,water:-10,earth:-10,wind:-10,thunder:-10,dark:-10,light:-10}},duration:2,max_stacks:2},40,\"player\"==a?N.getPlayer():e,\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\");const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;N.uploadChanges(n,o),O.finish(\"dark_howl\",s,a)})},cost:(e,t)=>e.mana>=15||\"Insufficient mana!\"},nox_curse:{name:\"nox curse\",description:\"The user curses the opponent, dealing moderate dark damage and removing all debuffs. For each debuff previously applied, applies a stack of 'nox curse' to the enemy (15% DOT), which stacks to 99 and lasts 2 turns. Nox curse has a base 300% apply chance. Costs 20 mana.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1.15,use:(e,t,a)=>{e.mana=e.mana-10;const n=O.nox_curse,s=O.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=O.prepareAttackMessage(e.name,t.name,`<Br>${e.name} curses the opponent!`,s);g(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"nox curse\",duration:2,damage:[\"percentile\",15],element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by the shadows...\",max_stacks:99},o=JSON.parse(JSON.stringify(t.debuffs));for(;o.length>0;){var r=Math.round(Math.random()*o.length)-1;r<0&&(r=0),o[r].hasOwnProperty(\"unstrippable\")?o.splice(r,1):(N.stripBuff(\"player\"==a?N.getEnemy().debuffs:N.getPlayer().debuffs,o[r].name),N.applyBuff(n,100,\"player\"==a?N.getPlayer():N.getEnemy(),\"player\"==a?N.getEnemy():N.getPlayer(),\"debuffs\"),o.splice(r,1))}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;N.uploadChanges(i,l),O.finish(\"nox curse\",s,a)})},cost:(e,t)=>e.mana>=20||\"Insufficient mana!\"}},R={defdown:{name:\"DEF down\",def:-.1,duration:3,element:\"none\",types:[\"debuff\"],apply_text:\"'s defence was decreased!\",max_stacks:5},defup:{name:\"DEF up\",def:.1,duration:3,element:\"none\",types:[\"buff\"],apply_text:\"'s defence was increased!\",max_stacks:5},mdefdown:{name:\"MDEF down\",mdef:-.1,duration:3,types:[\"debuff\"],apply_text:\"'s magical defence was decreased!\",max_stacks:5},mdefup:{name:\"MDEF up\",mdef:.1,duration:3,apply_text:\"'s magical defence was increased!\",max_stacks:5},atkup:{name:\"ATK up\",atk:.1,duration:3,types:[\"buff\"],apply_text:\"'s attack was increased!\",max_stacks:5},matkup:{name:\"MATK up\",matk:.1,duration:3,types:[\"buff\"],apply_text:\"'s magical attack was increased!\",max_stacks:5},spdup:{name:\"SPEED up\",speed:.1,duration:3,element:\"none\",types:[\"buff\"],apply_text:\"'s speed was increased!\",max_stacks:5}},C=(e,t)=>{var a=0;return e.forEach(e=>{e.skill==t&&a++}),a},q=e=>{var t=[];return e.forEach(e=>{t.push(e.damage.damage)}),t},D=(e,t)=>{for(var a=!1;0==a;){var n=Math.floor(Math.random()*t.length);1==O[t[n]].cost(e)&&(a=!0,O[t[n]].use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))}};a(0);const B={slime:{stats:{base_level:1,max_health:50,atk:30,def:30,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:50,wind:50,thunder:150,dark:75,light:75}},ai:\"slime\",mode:\"slime\",skills:[\"splash\"],name:\"Slime\",baseLevel:1,exp:100,gold:10,drops:[[\"slime_ball\",1e3,2,5]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions.\"}},grey_wolf:{stats:{base_level:3,max_health:70,atk:45,def:40,matk:30,mdef:30,speed:30,crit_chance:.5,crit_damage:1.3,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:80,wind:100,thunder:100,dark:100,light:100}},ai:\"grey_wolf\",mode:\"grey_wolf\",skills:[\"attack\"],name:\"Grey Wolf\",baseLevel:1,exp:150,gold:15,drops:[[\"grey_wolf_pelt\",500,3,6],[\"sharp_claw\",200,1,2]],desc:\"A wolf with bristling grey fur. Despite its aggression, the wolf has a sort of rough beauty about it. Seems to attack indiscriminately.\"}},wayward_traveler:{stats:{max_health:500,base_level:10,atk:65,def:55,matk:40,mdef:45,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:10,resistance:10,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{physical:90,fire:110,water:110,earth:110,wind:110,thunder:110,dark:110,light:110}},ai:\"wayward_traveler\",mode:\"wayward_traveler\",skills:[\"attack\",\"guard_break\",\"rush_attack\",\"healing_potion\"],name:\"Wayward Traveler\",baseLevel:5,exp:300,gold:50,drops:[[\"damaged_sword\",50,1,1],[\"damaged_armour\",50,1,1],[\"damaged_pantaloons\",50,1,1],[\"damaged_boots\",50,1,1],[\"damaged_helm\",50,1,1],[\"wanderer_memorabilia\",1e3,2,3]],desc:\"A traveler who seems to have lost their way. From their responsive battle style and analytic glances, you infer that they seem to have some kind of specific strategy in mind.\"}},greater_slime:{stats:{base_level:5,max_health:150,atk:60,def:60,matk:70,mdef:60,speed:22,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:70,fire:0,water:10,earth:50,wind:50,thunder:200,dark:75,light:75}},ai:\"greater_slime\",mode:\"greater_slime\",skills:[\"splash\",\"icebolt\"],name:\"Greater Slime\",exp:200,gold:15,drops:[[\"slime_ball\",1e3,5,8]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions. Seems larger and more experienced(?) than most slimes.\"}},lesser_water_klastera:{stats:{base_level:6,max_health:125,atk:60,def:70,matk:70,mdef:70,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:50,evasion:0,max_mana:200,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:150,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:80,earth:80,wind:80,thunder:150,dark:80,light:80}},ai:\"lesser_water_klastera\",mode:\"lesser_water_klastera\",skills:[\"icebolt\",\"arcane_shield\",\"channel_health\",\"splash\"],name:\"Lesser Water Klastera\",exp:350,gold:15,drops:[[\"aquus_cluster\",500,1,3],[\"manasoul\",10,1,1],[\"water_orb\",1,1,1]],desc:\"A being comprised of only water. It's body seems to be some kind of deep blue semi-solid. It's only facial feature is white, oval eyes that convey no sense of emotion. One might infer from its formulaic structure that the same could be said about its battle style.\"}},young_water_lizard:{stats:{base_level:7,max_health:100,atk:60,def:60,matk:40,mdef:50,speed:70,crit_chance:.3,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:100,wind:120,thunder:120,dark:100,light:100}},ai:\"young_water_lizard\",mode:\"young_water_lizard\",skills:[\"attack\",\"rush_attack\",\"camoflague\"],name:\"Young Water Lizard\",exp:400,gold:20,drops:[[\"weak_membrane\",500,1,3],[\"tiny_lizard_tail\",250,1,1],[\"light_absorbant_eye\",10,1,2]],desc:\"A relatively small reptile. It has clearly rough skin, although the abundant tiny spikes all over its body are clearly conscious designs of nature. Perhaps due to the size difference, it seems wary of any attacks.\"}},red_slime:{stats:{base_level:11,max_health:250,atk:70,def:70,matk:70,mdef:70,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:150,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:150,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:50,earth:70,wind:70,thunder:70,dark:60,light:130}},ai:\"red_slime\",mode:\"red_slime\",skills:[\"fireball\",\"guard\",\"engulf\",\"attack\"],name:\"Red Slime\",exp:500,gold:35,drops:[[\"red_slime_ball\",1e3,5,8]],desc:\"A red slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to oppose your own actions.\"}},venomous_wolf:{stats:{base_level:14,max_health:210,atk:80,def:60,matk:70,mdef:55,speed:100,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:170,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"venemous_wolf\",mode:\"venemous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Venemous Wolf\",exp:550,gold:30,drops:[[\"sharp_claw\",500,1,2],[\"venomous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build, although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately.\"}},dark_beast:{stats:{base_level:18,max_health:300,atk:90,def:70,matk:80,mdef:80,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:.1,max_mana:120,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:100,wind:100,thunder:100,dark:120,light:100},defence:{none:100,physical:80,fire:100,water:100,earth:100,wind:100,thunder:100,dark:0,light:150}},ai:\"dark_beast\",mode:\"dark_beast\",skills:[\"attack\",\"rend\",\"rush_attack\",\"nox_curse\",\"dark_howl\",\"hex\"],name:\"Dark Beast\",exp:800,gold:10,drops:[[\"sharp_claw\",500,1,2],[\"venemous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"A creature with a wolf-like structure, but with a larger upper body. It's entire body is shrouded in an oppressive mist that makes you uncomfortable. Little regarding its disposition can be inferred from its movements besides its apparent intelligence compared to its wolf 'bretheren'.\"}}},j={slime:()=>{const e=N.getEnemy().modeBattle;if(\"aggressive\"==e)O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else if(\"defensive\"==e)O.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{Math.random()>.5?O.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}},grey_wolf:()=>{const e=N.getEnemy();D(e,e.skills)},wayward_traveler:()=>{const e=N.getEnemy().modeBattle;console.log(\"this was called\"),console.log(e),\"wary\"==e?O.health_potion.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"desperate\"==e||\"allout\"==e?1==O.rush_attack.cost(N.getEnemy(),N.getPlayerAdd(N.getPlayer()))?O.rush_attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"preparing\"==e&&(1==O.guard_break.cost(N.getEnemy(),N.getPlayerAdd(N.getPlayer()))?O.guard_break.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))},greater_slime:()=>{const e=N.getEnemy().modeBattle;if(\"aggressive\"==e){1==Math.round(2*(Math.random()+.1))?O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.icebolt.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}else if(\"defensive\"==e)O.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{const e=Math.round(3*(Math.random()+.1));1==e?O.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}},lesser_water_klastera:()=>{const e=N.getEnemy(),t=e.modeBattle;\"normal\"==t?1==O.icebolt.cost(e)?O.icebolt.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"heal\"==t?1==O.channel_health.cost(e)?O.channel_health.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"arcane\"==t&&(1==O.arcane_shield.cost(e)?O.arcane_shield.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.splash.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))},young_water_lizard:()=>{const e=N.getEnemy(),t=N.getPlayerAdd(N.getPlayer());if(\"cautious\"==e.modeBattle&&1==O.camoflague.cost(e,t)&&0==N.checkStacks(e.buffs,\"camoflague\"))O.camoflague.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{1==Math.round(3*Math.random()+1)&&1==O.rush_attack.cost(e,t)?O.rush_attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}},red_slime:()=>{const e=N.getEnemy(),t=N.getEnemy().modeBattle,a=(n=N.getPlayer().buffs,s=JSON.parse(JSON.stringify(n)),o=0,s.forEach(e=>{var t=e.name;o+=1;for(var a=0;a<s.length;a++)s[a].name==t&&(s.splice(a,1),a-=1)}),o);var n,s,o;if(\"aggressive\"==t)0==e.actionsTaken&&1==O.engulf.cost(e)&&a>1?O.engulf.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):1==O.fireball.cost(e)?O.fireball.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else if(\"defensive\"==t)if(0==e.actionsTaken&&1==O.engulf.cost(e)&&a>1)O.engulf.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{1==Math.floor(5*Math.random())?1==O.fireball.cost(e)?O.fireball.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.guard.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}else{Math.floor(5*Math.random());if(0==e.actionsTaken&&1==O.engulf.cost(e)&&a>1)O.engulf.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\");else{Math.floor(5*Math.random())>=2&&1==O.fireball.cost(e)?O.fireball.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):O.attack.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\")}}},venemous_wolf:()=>{const e=N.getEnemy();for(var t=!1;0==t;){var a=Math.floor(4*Math.random());console.log(a),console.log(e.skills[a]),1==O[e.skills[a]].cost(e)&&(t=!0,O[e.skills[a]].use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"))}},dark_beast:()=>{const e=N.getEnemy(),t=e.modeBattle;\"dark pact\"==t&&1==O.dark_pact.cost(e)?O.dark_pact.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"hex\"==t&&1==O.hex.cost(e)?O.hex.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):\"nox curse\"==t&&1==O.nox_curse.cost(e)?O.nox_curse.use(N.getEnemy(),N.getPlayerAdd(N.getPlayer()),\"enemy\"):D(e,[\"rend\",\"attack\",\"dark_howl\"])}},F={slime:(e,t,a,n)=>{const s=e[N.turn-1].player;var o=!0,r=C(s,\"guard\"),i=q(s);console.log(\"logging player damage\"),console.log(i),i.forEach(e=>{e<1&&(o=!1)}),r>0?(a.modeBattle=\"defensive\",g([[`<br>${a.name} eyes ${t.name} cautiously...`,1]],\"battle\",n)):o?(a.modeBattle=\"aggressive\",g([[`<br>${a.name} assumes an aggressive stance!`,1]],\"battle\",n)):(a.modeBattle=\"normal\",g([[`<br>${a.name} assumes a normal stance.`,1]],\"battle\",n))},grey_wolf:(e,t,a,n)=>{n()},wayward_traveler:(e,t,a,n)=>{const s=a.health,o=N.checkStacks(t.debuffs,\"guard broken\");console.log(`found ${o} guard broken stacks`),s<a.max_health/2?a.mana>30?(a.modeBattle=\"wary\",g([[`<br>${a.name} is concerned about their condition..`,1]],\"battle\",n)):(a.modeBattle=\"desperate\",g([[`<br>${a.name} is employing a last ditch attempt!`,1]],\"battle\",n)):o<3?(a.modeBattle=\"preparing\",g([[`<br>${a.name} seems to be setting something up..`,1]],\"battle\",n)):(a.modeBattle=\"allout\",g([[`<br>${a.name} is going all out!`,1]],\"battle\",n))},greater_slime:(e,t,a,n)=>{const s=e[N.turn-1].player;var o=!0,r=C(s,\"guard\"),i=q(s);console.log(\"logging player damage\"),console.log(i),i.forEach(e=>{e<1&&(o=!1)}),r>0?(a.modeBattle=\"defensive\",g([[`<br>${a.name} eyes ${t.name} cautiously...`,1]],\"battle\",n)):o?(a.modeBattle=\"aggressive\",g([[`<br>${a.name} assumes an aggressive stance!`,1]],\"battle\",n)):(a.modeBattle=\"normal\",g([[`<br>${a.name} assumes a normal stance.`,1]],\"battle\",n))},lesser_water_klastera:(e,t,a,n)=>{var s=N.checkStacks(a.buffs,\"arcane protection\"),o=0;null!=e[N.turn-1].enemy&&(o=C(e[N.turn-1].enemy,\"channel_health\")),0==s?(a.modeBattle=\"arcane\",g([[`<br>${a.name} would like to enhance themselves with magic...`,1]],\"battle\",n)):N.turn%3==0&&0==o?(a.modeBattle=\"heal\",g([[`<br>${a.name} would like to heal..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",g([[`<br>${a.name} has no particular desire.`,1]],\"battle\",n))},young_water_lizard:(e,t,a,n)=>{0==C(e[N.turn-1].player,\"guard\")?(a.modeBattle=\"cautious\",g([[`<br>${a.name} feels uncomfortable...`,1]],\"battle\",n)):(a.modeBattle=\"normal\",g([[`<br>${a.name} seems to be feeling normal.`,1]],\"battle\",n))},red_slime:(e,t,a,n)=>{const s=e[N.turn-1].player;var o=!0,r=C(s,\"guard\"),i=q(s);console.log(\"logging player damage\"),console.log(i),i.forEach(e=>{e<1&&(o=!1)}),o?(a.modeBattle=\"defensive\",g([[`<br>${a.name} eyes ${t.name} cautiously...`,1]],\"battle\",n)):0==r?(a.modeBattle=\"aggressive\",g([[`<br>${a.name} assumes an aggressive stance!`,1]],\"battle\",n)):(a.modeBattle=\"normal\",g([[`<br>${a.name} assumes a normal stance.`,1]],\"battle\",n))},venemous_wolf:(e,t,a,n)=>{n()},dark_beast:(e,t,a,n)=>{const s=N.checkStacks(a.buffs,\"ATK up\"),o=N.checkStacks(a.buffs,\"MATK up\"),r=N.checkStacks(a.buffs,\"SPEED up\"),i=N.checkStacks(t.debuffs,\"hexed\"),l=(c=t.debuffs,d=JSON.parse(JSON.stringify(c)),m=0,d.forEach(e=>{var t=e.name;m+=1;for(var a=0;a<d.length;a++)if(d[a].name==t){d.splice(a,1),a-=1;break}}),m);var c,d,m;s<3&&o<3&&r<3?(a.modeBattle=\"dark pact\",g([[`<br>${a.name} eyes ${t.name} with a slight glare.`,1]],\"battle\",n)):0==i?(a.modeBattle=\"hex\",g([[`<br>${a.name} eyes ${t.name} with a malicious glare.`,1]],\"battle\",n)):l-N.checkStacks(t.debuffs,\"nox curse\")>1?(a.modeBattle=\"nox curse\",g([[`<br>${a.name} eyes ${t.name} with a malevolent glare.`,1]],\"battle\",n)):(a.modeBattle=\"normal\",g([[`<br>${a.name} eyes ${t.name} with a dry glare.`,1]],\"battle\",n))}},N={battleProcessing(e,t,a,s=!0){h(\"<br>---------------------------------------\"),h(`<br>Battle between ${e.name} and ${t.stats.name} has begun!`);const o=JSON.parse(JSON.stringify(e));this.playerFighter=this.addCombatStats(o.stats,o.name,\"player\",s);const r=JSON.parse(JSON.stringify(t));this.enemy=this.addCombatStats(r.stats,r.stats.name,\"enemy\",s),this.turn=0,this.state=[],this.endFunction=a,z(N.getPlayerAdd(N.playerFighter)),n.first_time.combat&&(n.first_time.combat=!1,h(se.combatIntroduction)),z(N.getPlayerAdd(N.playerFighter)),this.combatLoop()},addCombatStats(e,t,a,s){if(e.name=t,e.health_mod=0,e.atk_mod=0,e.def_mod=0,e.matk_mod=0,e.mdef_mod=0,e.crit_chance_mod=0,e.crit_damage_mod=0,e.effectiveness_mod=0,e.resistance_mod=0,e.evasion_mod=0,e.speed_mod=0,e.actions=0,e.buffs=[],e.debuffs=[],e.mitigation=0,\"player\"==a)e.max_mana=e.max_mana+N.getEquipStat(e,\"max_mana\"),e.mana=e.current_mana,e.max_sp=e.max_sp+N.getEquipStat(e,\"max_sp\"),e.sp=0,e.max_stamina=e.max_stamina+N.getEquipStat(e,\"max_stamina\"),e.stamina=e.max_stamina,e.max_health=this.getMaxHealth(e),e.health=e.current_health;else{e.modeBattle=\"normal\",e.mana=e.max_mana,e.stamina=e.max_stamina,e.health=e.max_health,e.sp=0,e.level=e.base_level,e.actionsTaken=0;const t=e.base_level,a=n.player.level;var o;if(console.log(`changelveel is ${s}`),o=0==s?t:1==s?a:s>a?s:a,console.log(`indetened ${o}`),o>t){const a=o-t;e.level=e.level+a,e.health=e.health+10*a,e.max_health=e.health,e.atk=e.atk+3*a,e.def=e.def+3*a,e.matk=e.matk+3*a,e.mdef=e.mdef+3*a,e.speed=e.speed+3*a,e.exp=e.exp+10*a}delete e.base_level}return e},getEquips(e){const t={atk:0,def:0,matk:0,mdef:0,crit_chance:0,crit_damage:0,effectiveness:0,resistance:0,evasion:0,speed:0,mitigation:0};return Object.keys(e.equips).forEach(a=>{null!=e.equips[a]&&Object.keys(k[e.equips[a]]).forEach(n=>{t.hasOwnProperty(n)&&(t[n]+=k[e.equips[a]][n])})}),t},getEquipStat(e,t){var a=0;return Object.keys(e.equips).forEach(n=>{null!=e.equips[n]&&Object.keys(k[e.equips[n]]).forEach(s=>{s==t&&(a+=k[e.equips[n]][t])})}),a},getMaxHealth(e){const t={health:0};return t.health+=this.getEquipStat(n.player.stats,\"health\"),t.health+=5*n.player.sp_investment.health,e.health+t.health},getEquipsElements(e){const t={offence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}},a=e.equips;return Object.keys(a).forEach(e=>{if(null!=a[e]){const n=k[a[e]];Object.keys(n.elemental.offence).forEach(e=>{t.offence[e]+=n.elemental.offence[e],t.offence[e]=P(t.offence[e],l,c)}),Object.keys(n.elemental.defence).forEach(e=>{t.defence[e]+=n.elemental.defence[e],t.defence[e]=P(t.defence[e],l,c)})}}),t},healthCheck:()=>N.playerFighter.health<=0?(z(N.getPlayerAdd(N.playerFighter)),\"enemy\"):N.enemy.health<=0&&(z(N.getPlayerAdd(N.playerFighter)),\"player\"),uploadChanges(e,t){N.playerFighter.health=e.health,N.enemy.health=t.health,N.playerFighter.mana=e.mana,N.playerFighter.sp=e.sp,N.playerFighter.stamina=e.stamina},calcBuffs(e,t){var a=0;const n=t.buffs;return n.length>0&&Object.keys(n).forEach(t=>{n[t].hasOwnProperty(e)&&(a+=n[t][e])}),a},calcDebuffs(e,t){var a=0;const n=t.debuffs;return Object.keys(n).forEach(t=>{n[t].hasOwnProperty(e)&&(a+=n[t][e])}),a},calcMod(e,t){var a=0;return a+=N.calcBuffs(e,t),a=P(a+=N.calcDebuffs(e,t),-.9,5)},calcElementBuffs(e){const t={offence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}};return e.buffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(a=>{t.offence[a]+=e.elemental.offence[a],t.offence[a]=P(t.offence[a],l,c)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(a=>{t.defence[a]+=e.elemental.defence[a],t.defence[a]=P(t.defence[a],l,c)}))}),e.debuffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(a=>{t.offence[a]+=e.elemental.offence[a],t.offence[a]=P(t.offence[a],l,c)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(a=>{t.defence[a]+=e.elemental.defence[a],t.defence[a]=P(t.defence[a],l,c)}))}),t},applyBuff(e,t,a,n,s){var o,r;n==a||\"buffs\"==s?(o=0,r=0):(o=P(a.effectiveness+N.calcBuffs(\"effectiveness\",a)+N.calcDebuffs(\"effectiveness\",a),0,999),r=P(n.resistance+N.calcBuffs(\"resistance\",n)+N.calcDebuffs(\"resistance\",n),0,999)),t=P(t+o,0,100);const i=Math.round(100*Math.random()),l=t-r;console.log(\"Trying to apply debuff:\"),console.log(i),console.log(t),console.log(r),console.log(l),console.log(i<=t),i<=l?N.checkStacks(n[s],e.name)<e.max_stacks&&(h(`${n.name} ${e.apply_text}`),\"buffs\"==s?n.buffs.push({...e}):n.debuffs.push({...e}),z(N.getPlayerAdd(N.playerFighter))):i<=t&&(console.log(\"effect resisted\"),h('<span style=\"color:#9500D6\">Effect resisted!</span>'))},stripBuff(e,t){var a=!1;return e.forEach((n,s)=>{if(n.name==t){if(n.hasOwnProperty(\"unstrippable\"))return!1;e.splice(s,1),a=!0,h(`${n.name} removed.`)}}),a},buffCheck(e){const t=e.buffs.concat(e.debuffs);for(var a=t.length-1;a>=0;a--){const s=t[a];if(s.hasOwnProperty(\"damage\")){const t=s.damage;var n;\"percentile\"==t[0]&&(n=Math.round(e.max_health*(t[1]/100))),\"flat\"==t[0]&&(n=t[1]),h(`<br>(${s.name}) ${e.name} took damage! <span style=\"color:${Q[t[2]]}\">[${n}, ${t[0]}]</span>`),e.health-=n,h(`${e.name}'s health remaining: ${e.health}/${e.max_health}`)}s.hasOwnProperty(\"heal\")}for(a=e.buffs.length-1;a>=0;a--){const t=e.buffs[a];t.duration-=1,t.duration<=0&&(h(`${t.name} faded. (${e.name})`),e.buffs.splice(a,1))}for(a=e.debuffs.length-1;a>=0;a--){const t=e.debuffs[a];t.duration-=1,t.duration<=0&&(h(`${t.name} faded. (${e.name})`),e.debuffs.splice(a,1))}},turnReset(e){e.actions-=1,e==N.playerFighter&&z(N.getPlayerAdd(N.playerFighter))},combatLoop(){var e=this.healthCheck();N.turn+=1,N.state.push({player:[],enemy:[]}),h(`<br>TURN ${N.turn}`),0==e?(N.playerFighter.actions=N.calcActions(N.getPlayerAdd(N.playerFighter),N.getEnemy()),z(N.getPlayerAdd(N.playerFighter)),N.initShortcuts(),g(N.combatMessage(),\"battle\",()=>\"\"),u(this.selectAttack)):this.endBattle(this.healthCheck())},combatMessage:()=>[[`<br>Health: ${N.playerFighter.health}/${N.playerFighter.max_health}`,0],[`${N.getEnemy().name} (LV${N.getEnemy().level}) Health: ${N.enemy.health}/${N.enemy.max_health}`,0],[`Actions: ${N.playerFighter.actions}`,0],[\"Please select an action\",0]],endTurn(e){const t=\"player\"==e?N.playerFighter:N.enemy;\"player\"==e?N.enemy:N.playerFighter;if(0==this.healthCheck())if(z(N.getPlayerAdd(N.playerFighter)),t.actions>1)t.actions-=1,\"player\"==e?(g(N.combatMessage(),\"battle\",()=>\"\"),N.initShortcuts(),u(this.selectAttack)):(t.actionsTaken+=1,F[N.enemy.mode].call(void 0,N.state,N.getPlayerAdd(N.playerFighter),N.enemy,()=>{j[N.enemy.ai].call()}));else if(\"player\"==e){var a=Math.round(N.playerFighter.max_stamina/10);N.playerFighter.stamina+=a,N.playerFighter.stamina=P(N.playerFighter.stamina,0,N.playerFighter.max_stamina),h(`<br>Regenned ${a} stamina!`),h(\"<br>Player turn end\"),N.turnReset(N.playerFighter),h(\"<br>---------------------------------------\"),N.enemy.actions=N.calcActions(N.getEnemy(),N.getPlayerAdd(N.playerFighter)),N.buffCheck(N.enemy),F[N.enemy.mode].call(void 0,N.state,N.getPlayerAdd(N.playerFighter),N.enemy,()=>{j[N.enemy.ai].call()})}else{h(\"<br>Enemy turn end\"),t.actionsTaken=0;a=Math.round(N.enemy.max_stamina/10);N.enemy.stamina+=a,N.enemy.stamina=P(N.enemy.stamina,0,N.enemy.max_stamina),h(`<br>${N.enemy.name} regenned ${a} stamina!`),N.turnReset(N.enemy),N.buffCheck(N.playerFighter),h(\"<br>---------------------------------------\"),this.combatLoop()}else this.endBattle(this.healthCheck())},displayStatus(e){const t=(e,t)=>e.name>t.name?1:e.name<t.name?-1:0;e.buffs.sort(t),e.debuffs.sort(t),h(`${ee}Displaying status...`),h(`HP: ${e.health}/${e.max_health}`),h(`Mana: ${e.mana}/${e.max_mana}`),h(`Stamina: ${e.stamina}/${e.max_stamina}`),h(`SP: ${e.sp}/${e.max_sp}`),h(\"<br><b>BUFFS</b>\");const a=[];0==e.buffs.length&&h(\"<br>None\"),e.buffs.forEach(t=>{var n={...t},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${Q[n.element]}\">${n.element}</span>`;delete n.element;const i=N.checkStacks(e.buffs,n.name),l=`<br>${i} stack${i>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;var c;delete n.max_stacks,n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\";var d=\"\";if(n.hasOwnProperty(\"damage\")&&(d=\"percentile\"==n.damage[0]?`<br> ➢ ${n.damage[1]}% DOT`:\"\"),n.hasOwnProperty(\"elemental\"))var m=Object.keys(n.elemental.offence).map(e=>{const t=n.elemental.offence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} attack`}),f=Object.keys(n.elemental.defence).map(e=>{const t=n.elemental.defence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} defence`});else m=[],f=[];delete n.elemental;var u,p=Object.keys(n).map(e=>{const t=n[e];if(\"name\"!=e&&\"damage\"!=e)return[\"resistance\",\"effectiveness\"].includes(e)?`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e}`:`<br> ➢ ${t>0?\"+\":\"\"}${100*t}% ${e}`});u=a.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${l}${o}${p.join(\", \")}\\n                `+`${m.join(\", \")}${f.join(\", \")}${c}${d}`,h(u),a.push(n.name)}),h(\"<br><b>DEBUFFS</b>\"),0==e.debuffs.length&&h(\"<br>None\"),e.debuffs.forEach(t=>{var n={...t},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${Q[n.element]}\">${n.element}</span>`;delete n.element;const i=N.checkStacks(e.debuffs,n.name),l=`<br>${i} stack${i>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;delete n.max_stacks;var c,d=\"\";if(n.hasOwnProperty(\"damage\")&&(d=\"percentile\"==n.damage[0]?`<br> ➢ ${n.damage[1]}% DOT`:\"\"),n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\",n.hasOwnProperty(\"elemental\"))var m=Object.keys(n.elemental.offence).map(e=>{const t=n.elemental.offence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} attack`}),f=Object.keys(n.elemental.defence).map(e=>{const t=n.elemental.defence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} defence`});else m=[],f=[];delete n.elemental;var u,p=Object.keys(n).map(e=>{const t=n[e];if(\"name\"!=e&&\"damage\"!=e)return[\"resistance\",\"effectiveness\"].includes(e)?`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e}`:`<br> ➢ ${t>0?\"+\":\"\"}${100*t}% ${e}`});u=a.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${l}${o}${p.join(\", \")}\\n                `+`${m.join(\", \")}${f.join(\", \")}${c}${d}`,h(u),a.push(n.name)}),h(`${ee}Please select an action`)},displayStats(e){const t={atk:\"attack\",def:\"defence\",matk:\"magic attack\",mdef:\"magic defence\",speed:\"speed\",crit_chance:\"critical chance\",crit_damage:\"critical damage\",effectiveness:\"effectiveness\",resistance:\"resistance\"};var a=\"\";[\"atk\",\"matk\",\"def\",\"matk\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\"].forEach(n=>{var s=e[n];\"crit_chance\"!=n&&\"crit_damage\"!=n||(s=(100*s).toString()+\"%\"),a+=`<br> - ${t[n]}: ${s}`}),Object.keys(e.elemental.offence).forEach(t=>{a+=`<br> - ${e.elemental.offence[t]} ${t} attack`}),Object.keys(e.elemental.defence).forEach(t=>{a+=`<br> - ${e.elemental.defence[t]} ${t} defence`}),a+=`<br><br>${e.desc}`,h(a)},initShortcuts(){const e=n.player.stats.skills,t=[\"skills\",\"status\",\"enemy\"];e.forEach(e=>{t.push(O[e].name)}),_(t)},selectAttack(){const e=N.playerFighter,t=N.enemy;p(N.selectAttack);const a=f();N.getEquips(e),\"skills\"==a?(h(`<br> ${e.skills.map(e=>`${O[e].name}: ${O[e].description}`).join(\"<br><br>\")}`),N.initShortcuts(),u(N.selectAttack)):\"status\"==a?(N.displayStatus(e),N.initShortcuts(),u(N.selectAttack)):\"enemy\"==a?(N.displayStatus(t),N.initShortcuts(),u(N.selectAttack)):-1!==e.skills.findIndex(e=>O[e].name==a)?1==O.getSkill(a).cost(e,t)?O.getSkill(a).use(N.getPlayerAdd(e),t,\"player\"):(h(`<br> ${O.getSkill(a).cost(e,t)}`),N.initShortcuts(),u(N.selectAttack)):(N.initShortcuts(),g([[\"\",0],[\"Invalid Input\",0]],\"battle\",u(N.selectAttack)))},getEnemy:()=>N.enemy,getPlayerAdd(e){const t=N.getEquips(n.player.stats),a=N.getEquipsElements(n.player.stats),s=a.offence,o=a.defence,r=JSON.parse(JSON.stringify(e));return Object.keys(n.player.sp_investment).forEach(e=>{\"health\"!=e&&(t[e]+=2*n.player.sp_investment[e])}),Object.keys(r).forEach(e=>{t.hasOwnProperty(e)&&(r[e]+=t[e])}),Object.keys(s).forEach(e=>{r.elemental.offence[e]+=s[e]}),Object.keys(o).forEach(e=>{r.elemental.defence[e]+=o[e]}),r},getPlayer:()=>N.playerFighter,checkStacks(e,t){var a,n=0;for(a in e)console.log(a),e[a].name==t&&n++;return n},calcActions:(e,t)=>(console.log(\"printing object, followed by object2\"),console.log(e),console.log(t),e.speed*(1+N.calcMod(\"speed\",e))>t.speed*(2+N.calcMod(\"speed\",t))?(h(\"<br>The superior speed of the caster grants them an extra action!\"),2):(e.speed,N.calcMod(\"speed\",e),t.speed,N.calcMod(\"speed\",t),1)),endBattle(e){if(console.log(this.enemy),\"enemy\"==e){h(`${N.playerFighter.name} has been defeated!`);const e=[[\"The defeat in battle leaves you disoriented...<br>\",1],[\"Fortuately, you awake in familiar surroundings...\",1]];n.player.stats.current_health=n.player.max_health,n.player.stats.current_mana=n.player.stats.max_mana,g(e,\"battle\",We)}else{h(`${N.playerFighter.name} emerged victorious!<br>`),console.log(`playerfighter hp/mana ${N.playerFighter.health}/${N.playerFighter.mana}`),n.player.stats.current_health=N.playerFighter.health,n.player.stats.current_mana=N.playerFighter.mana,console.log(`data hp/mana = ${n.player.stats.current_health}/${n.player.stats.current_mana}`),n.player.gold+=this.enemy.gold,n.player.exp+=this.enemy.exp,h(`Gained ${this.enemy.gold} gold!<br>`),h(`Gained ${this.enemy.exp} exp!<br>`);const e=this.enemy.drops;var t=0;for(t in e){const a=Math.round(1e3*Math.random()),n=e[t];n[1]>=a&&(null!=n[3]?w(n[0],n[2],n[3]):w(n[0]))}this.endFunction.call(),H()}E(n.player)},heal(e){e.current_health=N.getMaxHealth(e),e.current_mana=e.max_mana}},H=()=>{if(n.player.level<25&&n.player.exp>=i[n.player.level]){const e=\"<br>You can feel yourself becoming stronger...<br>\"+`Levelled up to level ${n.player.level+1}`+\"<br>+2 SP!<br>+2 AP!<br>+20 health!<br>+2 all stats!<br>\";h(e),Y()}},Y=()=>{const e=n.player,t=e.stats;e.exp-=i[e.level],e.level+=1,e.sp+=2,e.ap+=2,t.health+=20,t.current_health+=20,t.max_mana+=5,t.current_mana+=20,t.atk+=2,t.def+=2,t.matk+=2,t.mdef+=2,t.speed+=2,E(e),H()},W=e=>{const t=e.stats,a=e.stats.elemental.offence,n=e.stats.elemental.defence,s=`\\n    ${e.name}'s stats <br>\\n    health: ${t.current_health}/${N.getMaxHealth(e.stats)} <br>\\n    attack: ${t.atk}<br>\\n    defence: ${t.def} <br>\\n    magic attack: ${t.matk}<br>\\n    magic defense: ${t.mdef}<br>\\n    speed: ${t.speed}<br>\\n    critical chance: ${t.crit_chance}<br>\\n    critical damage: ${t.crit_damage}<br>\\n    effectiveness: ${t.effectiveness}<br>\\n    resistance: ${t.resistance}<br>\\n    mana: ${t.current_mana}/${t.max_mana}<br>\\n    max stamina: ${t.max_stamina}<br>\\n    max sp: ${t.max_sp}\\n    `,o=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${a.physical}<br>\\n    fire: ${a.fire}<br>\\n    water: ${a.water}<br>\\n    wind: ${a.wind}<br>\\n    earth: ${a.earth}<br>\\n    thunder: ${a.thunder}<br>\\n    light: ${a.light} <br>\\n    dark: ${a.dark}<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${n.physical}<br>\\n    fire: ${n.fire}<br>\\n    water: ${n.water}<br>\\n    wind: ${n.wind}<br>\\n    earth: ${n.earth}<br>\\n    thunder: ${n.thunder}<br>\\n    light: ${n.light}<br>\\n    dark: ${n.dark}<br>\\n    `;K.mainStats.innerHTML=s,K.elementalStats.innerHTML=o},z=e=>{const t=e.elemental.offence,a=e.elemental.defence,n=N.calcElementBuffs(e),s=n.offence,o=n.defence,r=N.calcMod(\"atk\",e),i=N.calcMod(\"def\",e),l=N.calcMod(\"matk\",e),c=N.calcMod(\"mdef\",e),d=N.calcMod(\"speed\",e),m=N.calcMod(\"crit_chance\",e),h=N.calcMod(\"crit_damage\",e),f=N.calcMod(\"effectiveness\",e),u=N.calcMod(\"resistance\",e),p=` \\n    ${e.name}'s stats <br>\\n    health: ${e.health} (${Math.round(e.health/e.max_health*100)}%)<br>\\n    attack: ${Math.round(e.atk*(r+1))} (${Math.round(100+100*r)}%)<br>\\n    defence: ${Math.round(e.def*(i+1))} (${Math.round(100+100*i)}%)<br>\\n    magic attack: ${Math.round(e.matk*(l+1))} (${Math.round(100+100*l)}%)<br>\\n    magic defense: ${Math.round(e.mdef*(c+1))} (${Math.round(100+100*c)}%)<br>\\n    speed: ${Math.round(e.speed*(d+1))} (${Math.round(100+100*d)}%)<br>\\n    critical chance: ${e.crit_chance+m} (${Math.round(100+100*m)}%)<br>\\n    critical damage: ${e.crit_damage+h} (${Math.round(100+100*h)}%)<br>\\n    effectiveness: ${e.effectiveness+f} (${Math.round(100+100*f)}%)<br>\\n    resistance: ${e.resistance+u} (${Math.round(100+100*u)}%)<br>\\n    mitigation: ${Math.round(100*N.calcMod(\"mitigation\",e))}%<br>\\n    mana: ${e.mana}/${e.max_mana}<br>\\n    stamina: ${e.stamina}/${e.max_stamina}<br>\\n    sp: ${e.sp}/${e.max_sp}\\n    \\n    `,g=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${t.physical+s.physical} (${s.physical<0?\"\":\"+\"}${s.physical})<br>\\n    fire: ${t.fire+s.fire} (${s.fire<0?\"\":\"+\"}${s.fire})<br>\\n    water: ${t.water+s.water} (${s.water<0?\"\":\"+\"}${s.water})<br>\\n    wind: ${t.wind+s.wind} (${s.wind<0?\"\":\"+\"}${s.wind})<br>\\n    earth: ${t.earth+s.earth} (${s.earth<0?\"\":\"+\"}${s.earth})<br>\\n    thunder: ${t.thunder+s.thunder} (${s.thunder<0?\"\":\"+\"}${s.thunder})<br>\\n    light: ${t.light+s.light} (${s.light<0?\"\":\"+\"}${s.light})<br>\\n    dark: ${t.dark+s.dark} (${s.dark<0?\"\":\"+\"}${s.dark})<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${a.physical+o.physical} (${o.physical<0?\"\":\"+\"}${o.physical})<br>\\n    fire: ${a.fire+o.fire} (${o.fire<0?\"\":\"+\"}${o.fire})<br>\\n    water: ${a.water+o.water} (${o.water<0?\"\":\"+\"}${o.water})<br>\\n    wind: ${a.wind+o.wind} (${o.wind<0?\"\":\"+\"}${o.wind})<br>\\n    earth: ${a.earth+o.earth} (${o.earth<0?\"\":\"+\"}${o.earth})<br>\\n    thunder: ${a.thunder+o.thunder} (${o.thunder<0?\"\":\"+\"}${o.thunder})<br>\\n    light: ${a.light+o.light} (${o.light<0?\"\":\"+\"}${o.light})<br>\\n    dark: ${a.dark+o.dark} (${o.dark<0?\"\":\"+\"}${o.dark})<br>\\n    `;K.mainStats.innerHTML=p,K.elementalStats.innerHTML=g},G=e=>{U.returnFunction=e,n.first_time.equip&&(n.first_time.equip=!1,h(se.equipIntroduction)),U.menuLoop()},U={currentItem:null,currentIndex:-1,returnFunction:null,menuLoop(){U.currentIndex=-1,E(n.player),h(`${ee}Entering equip mode. Say the name of an item to view its details and equip it.`+\" Say the name of a slot to unequip the item in that slot.\"),u(U.inventoryMenu)},inventoryMenu(){p(U.inventoryMenu);const e=n.player,t=f().toLowerCase(),a=e.inventory.length>0?e.inventory.findIndex(e=>1==e[1].length?k[e].name.toLowerCase()==t.toLowerCase():k[e[0]].name.toLowerCase()==t.toLowerCase()):-1;if(e.stats.equips.hasOwnProperty(t))null!=e.stats.equips[t]&&U.unequipItem(t),u(U.inventoryMenu);else if(-1!=a){const t=e.inventory[a];k[t];U.currentItem=t,U.itemLoop()}else\"back\"==t||\"b\"==t?(h(\"<br>Returning...\"),U.currentIndex=-1,U.returnFunction()):(h(\"<br>Invalid input\"),u(U.inventoryMenu));E(n.player)},itemLoop(){const e=n.player,t=U.currentItem,a=x(t)?k[t[0]]:k[t];U.currentIndex=e.inventory.findIndex(e=>x(e)?e[0]==U.currentItem[0]:e==U.currentItem);const s=JSON.parse(JSON.stringify(a));s.hasOwnProperty(\"elemental\")&&(JSON.parse(JSON.stringify(s.elemental)),delete s.elemental),h(`<br>${a.name} selected.`),$(a),h(\"<br>say 'e' or 'equip' to equip this item. Otherwise, enter 'b' to return. The item's position in your inventory is marked in <b>bold</b>. Input 'z' to scroll up or 'x' to scroll down.\"),U.currentItem=t,E(n.player),u(U.itemMenu)},itemMenu(){p(U.itemMenu);const e=n.player,t=f().toLowerCase(),a=U.currentItem,s=x(a)?k[a[0]]:k[a];if(\"e\"==t||\"equip\"==t)if(\"reagent\"==s.type)h(\"<br>You cannot equip reagents.\"),u(U.itemMenu);else{const t=e.inventory.findIndex(e=>e==a.toLowerCase());\"misc\"!=s.type?null==e.stats.equips[s.type]?U.equipItem(t):(U.unequipItem(s.type),U.equipItem(t)):(null!=e.stats.equips.misc1&&null!=e.stats.equips.misc2&&U.unequipItem(\"misc1\"),U.equipItem(t)),U.menuLoop()}else if(\"z\"==t||\"x\"==t){U.currentItem;const a=U.currentIndex;var o;if(\"z\"==t)h(`${ee}Scrolling up..`),(o=a-1)<0&&(o=e.inventory.length-1),x(e.inventory[o])?e.inventory[o][0]:e.inventory[o],U.currentItem=e.inventory[o],U.itemLoop();else h(`${ee}Scrolling down..`),(o=a+1)==e.inventory.length&&(o=0),x(e.inventory[o])?e.inventory[o][0]:e.inventory[o],U.currentItem=e.inventory[o],U.itemLoop()}else\"b\"==t||\"back\"==t?(h(`${ee}Returning...`),U.menuLoop()):(h(\"<br>Invalid input.\"),u(U.itemMenu))},unequipItem(e){const t=n.player,a=t.stats.equips[e],s=k[a];t.stats.equips[e]=void 0,t.inventory.push(a),h(`${ee}${s.name} unequipped.`)},equipItem(e){const t=n.player,a=t.inventory[e],s={...k[a]};if(\"misc\"==s.type&&(null==t.stats.equips.misc1?s.type=\"misc1\":null==t.stats.equips.misc2?s.type=\"misc2\":s.type=\"misc1\"),null==t.stats.equips[s.type]){const a=t.inventory[e];delete t.inventory[e],t.stats.equips[s.type]=a,h(`${ee}${s.name} equipped.`)}else h(\"There is already an item equipped in that slot.\");for(var o=0;o<t.inventory.length;o++)null==t.inventory[o]&&t.inventory.splice(o,1);E(t)}},J=e=>{var t=\"\";const a=e.stats.equips;Object.keys(e.stats.equips).forEach(e=>{const n=a[e],s={...k[n]};var o=!1;if(t+=`${e.toUpperCase()}: `,null!=s.name){t+=`${s.name}<br>`,delete s.name;var r=\"\";s.hasOwnProperty(\"elemental\")&&(Object.keys(s.elemental.offence).forEach(e=>{r+=`${e} attack: ${s.elemental.offence[e]}<br>`}),Object.keys(s.elemental.defence).forEach(e=>{r+=`${e} defence: ${s.elemental.defence[e]}<br>`}),delete s.elemental,o=!0),Object.keys(s).forEach(e=>{\"desc\"!=e&&\"sell_value\"!=e&&\"description\"!=e&&(t+=`${e}: ${s[e]}<br>`)}),1==o&&(t+=r)}t+=\"<br>\"});const n=`\\n    Level: ${e.level}<br>\\n    EXP: ${e.exp}/${i[e.level]}<br>\\n    Gold: ${e.gold}<br>\\n    SP: ${e.sp}<br>\\n    AP: ${e.ap}<br><br>\\n    \\n    <b>Equipped items</b><br>\\n    ${t}\\n\\n\\n    `;var s;s=e.inventory.length>0?Object.keys(e.inventory).map((t,a)=>{const n=a==U.currentIndex?\"<b>\":\"\",s=a==U.currentIndex?\"</b>\":\"\";return e.inventory[t][1].length<2?`${n}${k[e.inventory[t]].name}${s}`:`${n}${e.inventory[t][1]} ${k[e.inventory[t][0]].name}${s}`}):[],console.log(`INV STRING IS ${s}`);const o=`\\n    <b>Inventory</b><br>\\n    ${s.join(\"<br>\")}`;K.playerStats.innerHTML=n,K.inventory.innerHTML=o},K={main:document.querySelector(\".main\"),input:document.querySelector(\".main-input\"),form:document.querySelector(\".form-input\"),mainStats:document.getElementById(\"mainstats\"),elementalStats:document.getElementById(\"elemstats\"),playerStats:document.getElementById(\"playerstats\"),inventory:document.getElementById(\"inventory\")},V=[\"skills\",\"sp\",\"back\"],X=[\"gamestart\",\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"combat\",\"combat-complex\",\"back\"],Z=[\"message delay\",\"change shortcut\",\"test message\",\"tutorials\",\"save\",\"back\"],Q={none:\"#FFFFFF\",physical:\"#737373\",fire:\"#FF2D00\",water:\"#000FFF\",earth:\"#7F2C00\",thunder:\"#DAAB00\",dark:\"#2A003D\",light:\"#E8CC3E\",wind:\"#8BF020\"},ee=\"<br> --------------------------------<br><br>\",te={slow:3,medium:2,fast:1},ae={slow:3,medium:2,fast:1},ne={Rshift:\"ShiftRight\",Lshift:\"ShiftLeft\",Lctrl:\"ControlLeft\",Rctrl:\"ControlRight\",Altleft:\"AltLeft\",Altright:\"AltRight\",\"¬\":\"Backquote\"},se={exploreIntroduction:`${ee}Welcome to your first zone! Here you can traverse 'rooms' by moving in any one of`+\" the four cardinal directions. You can also 'explore' which has a chance of finding you items, or an enemy encounter!<br><br>In some places, you can also interact with NPCs. If that's possible, it will be in your menu of options.<br><br>You can access some menus while exploring. But do note that if you leave and return, you will return to the beginning of the zone.<br><br>(This message will only show once.)\",gameIntroduction:`${ee}Welcome to Tower RPG! In this game, the object is to get to the highest floor you can.`+\" You advance floors by defeating the boss of the current floor. Each floor is specifically designed and you can save at any time wherein you can access settings to return to continue your progress (please note that data doesn't save if you clear your cache or restart your device).<br><br>I hope you you enjoy this game I've made! You will be briefed on some things as you explore the menus, but here is some stuff you might want to know:<br><br> - There is no music in this game. I'd recommend playing some music of your own so things don't get dull!<br><br> - The game is focused on the combat and gameplay. Please don't expect a grand story (at least ATM)<br><br> - You can press <b>RIGHT SHIFT</b> to active Input Shorcut, which can help if you forget what to type or if you have a low WPM. The key assigned to Input Shortcut can be changed in the settings. Use it once you've read this to see your options in the main menu. It can't be used everywhere, however.\"+`<br><br> - At the moment, there are ${s} floors.`+\"<br><br> - You can battle the floor boss while in the main menu by typing 'ascend'. There's no penalty for losing, so don't be afraid to try lots of different strategies!<br><br> - Please message iuc#1105 with any feedback or bugs you have/find, no matter how small!<br><br> - This will play everytime you reload the page, but when you load your data, it will stop showing.\",shopIntroduction:`${ee}Shops are pretty self-explanatory. But do note that all shops have inifnite stock!`+\"<br><br>Also, each floor has a shop you can access from the main menu. Remember to check them out!\",equipIntroduction:`${ee}Here, you can equip and unequip items. Just follow the menus!`,statsIntroduction:`${ee}Welcome to the stats menu! Here, you can learn skills and equip them.`+\"<br><br>Skills are learned using AP, which is gained from levelling up. They can also require gold and reagents to unlock.<br><br>Skills are contained within disciplines. You unlock these with gold and reagents. Learning certain skills, disciplines and reaching certain levels may unlock new disciplines!<br><br>You can use SP to increase your stats. SP is gained from levelling up [you get the same amount of SP/AP per level].<br><br>Skills can be unlearned and SP reset, so don't worry too much about being locked into one build forever.<br><br>The menus here can be a little complex, so here's how to find some things you may be looking for:<br><br>To unequip a skill, go (sk/skills) -> (e/equip) -> (e/equipped) and follow the instructions.<br><br>To forget a skill, make sure it isn't equipped. Then go (sk/skills) -> (e/equipped) -> (select the discipline) -> (select the skill) -> (f/forget).\",craftingIntroduction:`${ee}Welcome to the crafting menu! Here, you can use recipes that you've learned to craft`+\" items.<br><br>Recipes use gold and items to create items and are not consumed upon use.<br><br>Recipes are unlocked when you reach a new floor and can be unlocked through other means as well. Make yourself some powerful items!\",settingsIntroduction:`${ee}Welcome to settings! This is pretty self-explanatory. Here, you can adjust various`+\" things to enhance your play experience. You can also save and load your data here and see any of the tutorial messages again if you need to.\",combatIntroduction:`${ee}Your first fight! Don't worry, there isn't much to know. Press your input shortcut key`+\" to see your options. There are a few that will always be present:<br><br> - 'status' will display the buffs and debuffs applied to you.<br><br> - 'enemy' will display the buffs and debuffs applied to the enemy.<br><br> - 'skills' will display all your skills and what they do.<br><br> - Anything else you can see are attacks you can use.<br><br>Also note that enemies have 'modes', which dictate what they will do. These depend on your actions and the state of the battle. Pay attention, and use the way the enemy thinks to your advantage!<br><br>Also, if you die, you will return to the main menu of your floor, no matter where you are. Try not to die!<br><br>Finally, there are a bunch more stats and things you might want to know. If you're interested, a more comprehensive explanation is available in settings.\",combatComplex:`${ee}There are quite a few stats of which the explanation isn't obvious. All that's left to`+\" complete your knowledge of combat is to explain what each of them mean:<br><br> <b>- Elemental defence.</b> For each element, this is the % of damage you take from attacks of that element. So if you have 50 fire defence, you take half damage from fire attacks. 200 fire defence, and you take double damage from fire attacks.<br><br> <b>- Elemental offence.</b> For each element, this is the % of damage you deal when using attacks of that element. So, if you have 50 fire offence, your fire attacks deal half damage. 200 Fire offence, and your fire attacks deal double damage.<br><br><b>- Resistance and Effectiveness.</b> Effectiveness increases your chance of applying debuffs to the enemy. Resistance decreases your chance of receiving debuffs from the enemy. Both are added to are taken away directly from the percentage. So, if you are using an attack with a 50% chance to apply a debuff and you have 50 effectiveness, the chance of applying the debuff is 100%. Likewise, if you had 0 effectiveness and the opponent had 50 resistance, the chance of applying the debuff would be 0%.<br><br><b>-Stamina, mana and SP.</b> All three are resources for using skills but they all work a little differently. <b>Mana</b> does not regenerate and you gain maximum mana after healing. <b>Stamina</b> regenerates at the end of each turn (10%) and you gain 100% stamina at the start of each fight. <b>SP</b> can only be gained through skills and various effects. It does not carry over in battles and starts at 0.<br><br><b>- Critical chance and critical damage.</b> Critical chance is the chance of you dealing a critical hit. Critical damage is the damage modifier applied to your critical hit.<br><br><b>- ATK, DEF, MATK, MDEF, SPD.</b> ATK and DEF increase dealt and decrease taken physical damage respecitvely. MATK and MDEF increase dealt and decrease taken magical damage respectively. SPD doesn't do anything, although if your speed is 2.5x greater than the enemy, then you will have 4 actions and they will have 2, as opposed to the usual 3 each.\"},oe=\"<br>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\",re=e=>{ie.returnFunction=e,n.first_time.stats&&(n.first_time.stats=!1,h(se.statsIntroduction)),ie.statLoop()},ie={returnFunction:void 0,statLoop:()=>{h(\"<br>Entering the stats menu.<br> Say 'sk'/'skills' to enter the skill menu, or 'sp' to enter the sp menu.\"),_(V),u(ie.statLoopResponse)},statLoopResponse:()=>{p(ie.statLoopResponse);n.player;switch(f().toLowerCase()){case\"sk\":case\"skills\":h(`${ee}Entering skills menu. To change skills equipped, say 'e'/equipped', or say 'l'/'learn' to learn new skills.`),_([\"equipped\",\"learn\",\"back\"]),u(fe);break;case\"sp\":h(`${ee}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),h(\"<br>Current SP investments:\"),ce(),_([\"allocate\",\"reset\",\"back\"]),u(le);break;case\"b\":case\"back\":h(`${ee}Returning to main menu...`),ie.returnFunction();break;default:h(\"<br>Invalid input\"),_(V),u(ie.statLoopResponse)}}},le=()=>{p(le);const e=f(),t=n.player;switch(e.toLowerCase()){case\"a\":case\"allocate\":h(`${ee}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),h(`You have ${n.player.sp} SP.`),_([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),u(me);break;case\"r\":case\"reset\":var a=0;Object.keys(t.sp_investment).forEach(e=>{a+=t.sp_investment[e]}),h(`${ee}Are you sure you want to reset your SP? It will cost ${50*a} gold. Type 'y' or 'yes' to confirm. To go back, enter anything else.`),u(de);break;case\"b\":case\"back\":h(`${ee}Returning to status menu..`),ie.statLoop();break;default:h(\"<br>Invalid input\"),h(`${ee}Current SP investments:`),ce(),u(le)}},ce=()=>{const e=n.player;Object.keys(e.sp_investment).map(t=>`${t}: ${e.sp_investment[t]}`).forEach(e=>h(e))},de=()=>{p(de);const e=f().toLowerCase(),t=n.player;var a=0;Object.keys(t.sp_investment).forEach(e=>{a+=t.sp_investment[e]});const s=50*a;\"yes\"!=e&&\"y\"!=e||(t.gold>=s?(h(`${ee}SP has been reset.`),Object.keys(t.sp_investment).forEach(e=>{t.sp+=t.sp_investment[e],t.sp_investment[e]=0}),t.gold-=s):h(`${seprator}You don't have enough gold!`),h(`${ee}You now have ${t.sp} SP.`)),h(`${ee}Returning to SP menu..`),h(`${ee}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),h(\"<br>Current SP investments:\"),ce(),u(le),_([\"allocate\",\"reset\"]),E(n.player)},me=()=>{p(me);const e=f().toLowerCase(),t=n.player;var a=!0;t.sp_investment.hasOwnProperty(e)?t.sp>0?(h(`How many SP points would you like to allocate to ${e}?`),u(he(e)),a=!1):h(\"You don't have any SP!\"):\"back\"==e||\"b\"==e?(a=!1,h(`${ee}Returning to SP menu...`),h(`${ee}Entering SP menu. Say 'a/allocate' to allocate SP, 'r/reset' to reset allocation.`),h(\"Current SP investments:\"),ce(),_([\"allocate\",\"reset\"]),u(le)):h(\"Invalid input.\"),a&&(h(`<br>You currently have ${t.sp} SP.`),u(me)),E(n.player)},he=e=>{p(he);const t=()=>{p(t);const a=f();if(\"NaN\"!=parseInt(a).toString()){const t=n.player;parseInt(a)<=t.sp?(t.sp-=parseInt(a),t.sp_investment[e]+=parseInt(a),h(`${a} SP allocated to ${e}. Returning to allocate mode..`),h(`${ee}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),h(`You have ${n.player.sp} SP.`),_([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),u(me),E(t)):(h(\"You don't have enough SP! Returning to allocate mode..\"),h(`${ee}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),h(`You have ${n.player.sp} SP.`),_([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),u(me))}else h(\"Invalid input.\"),u(he(e))};return t},fe=()=>{p(fe);const e=f().toLowerCase();n.player;switch(e){case\"e\":case\"equipped\":pe.disciplinesMenuLoop();break;case\"l\":case\"learn\":ue.disciplinesMenuLoop();break;case\"b\":case\"back\":h(`${ee}Returning...`),ie.statLoop();break;default:h(\"<br>Invalid input.\"),u(fe)}},ue={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){h(`${ee}Showing all available disciplines. Say the name of a discipline to view the skills it contains if it is unlocked, or to unlock it if it is not unlocked.`);const e=d;Object.keys(e).forEach(t=>{e[t].requirements.level<=n.player.level&&(e[t].visible=!0)}),Object.keys(e).forEach(t=>{const a=e[t];1==a.unlocked?h(` - ${A(a.name)} -- UNLOCKED`):1==a.visible&&h(` - ${A(a.name)} -- LOCKED`)}),ge.showAllDisciplines(e),u(ue.disciplinesMenu)},disciplineMenuLoop(e){const t=ue.currentDiscipline,a=n.player;if(1==e){h(`${ee}Showing all skills in the ${t.name.toUpperCase()} discipline. Say the name of a skill to view its description and unlock it if you haven't done so already.`);var s=0,o=0;t.skills.forEach(e=>{-1!=a.library.indexOf(e.name)&&(s+=1),o+=1}),h(`Skills known in this discipline: ${s}/${o}<br>`),t.skills.forEach(e=>{const t=e.name,n=-1!=a.library.indexOf(e.name)?\"X\":\" \";h(`${O[t].name} - [${n}]`)})}ge.skillsInDiscipline(t),u(ue.disciplineMenu)},disciplineMenu(){p(ue.disciplineMenu);const e=f().toLowerCase(),t=n.player,a=ue.currentDiscipline,s=a.skills.findIndex(t=>O[t.name].name==e);if(-1!=s){const n=O[a.skills[s].name].description,r=a.skills[s];if(h(`${ee}${A(e)} - ${n}`),-1!=t.library.indexOf(e))h(`${ee}This skill is already unlocked.`),ge.skillsInDiscipline(a),ue.disciplineMenuLoop(!1);else{if(h(`${ee}This skill is not learned. In order to unlock it, the following requirements must be met:`),0==ue.checkRequirements(r))h(\"<br>You do not meet the requirements to unlock this skill!\"),ue.disciplinesMenuLoop(!0);else{var o=ue.checkCost(r);h(`Unlocking this skill requires ${r.cost.ap} AP.`),t.ap<r.cost.ap&&(o=!1),0==o?(h(\"<br>You do not have enough items/gold/ap to unlock this skill!\"),ue.disciplinesMenuLoop(!0)):(h(\"Would you like to learn this skill? Say 'y' or 'yes' to learn it, otherwise enter anything else.\"),ue.currentSkill=r,u(ue.unlockSkill))}}}else\"back\"==e||\"b\"==e?ue.disciplinesMenuLoop():(h(\"<br>Invalid input\"),ge.skillsInDiscipline(a),ue.disciplineMenuLoop(!1))},unlockSkill(){p(ue.unlockSkill);const e=f().toLowerCase(),t=n.player,a=ue.currentSkill;\"y\"==e||\"yes\"==e?(t.library.push(a.name),a.unlocked=!0,a.cost.items.forEach(e=>{const a=t.inventory.findIndex(t=>{try{return t.name==e[0]}catch{}}),n=t.inventory[a];n[1]-=e[1],0==n[1]&&delete t.inventory[a]}),t.gold-=a.cost.gold,t.ap-=a.cost.ap,h(\"Skill unlocked!\"),ge.unlockedDisciplines(),ue.disciplineMenuLoop(!0)):(h(`${ee}Returning to discipline menu...`),ge.unlockedDisciplines(),ue.disciplineMenuLoop(!0)),E(t)},disciplinesMenu(){p(ue.disciplinesMenu);const e=f().toLowerCase(),t=(n.player,d);if(t.hasOwnProperty(e)){if(1==t[e].unlocked)ue.currentDiscipline=t[e],ue.disciplineMenuLoop(!0);else if(0==t[e].unlocked&&1==t[e].visible){this.currentDiscipline=t[e];const a=this.currentDiscipline;h(`${ee}This discipline is not unlocked. To unlock it, the following requirements must be met:`);n.player;if(0==ue.checkRequirements(a))h(\"You do not meet the requirements to unlock this discipline!\"),ue.disciplinesMenuLoop();else{0==ue.checkCost(a)?(h(\"You do not have enough items/gold to unlock this discipline!\"),ue.disciplinesMenuLoop()):(h(\"Would you like to unlock this discipline? If so, type 'y' or 'yes'. This action cannot be undone.\"),u(ue.unlockDiscipline))}}}else\"back\"==e||\"b\"==e?(h(`${ee}Returning...`),h(`${ee}Entering skills menu. To change skills equipped, say 'e'/'equipped', or say 'l'/'learn' to learn new skills.`),_([\"equipped\",\"learn\",\"back\"]),u(fe)):(h(\"<br>Invalid input<br>\"),u(ue.disciplinesMenu));E(n.player)},unlockDiscipline(){p(ue.unlockDiscipline);const e=n.player,t=f().toLowerCase();\"y\"==t||\"yes\"==t?(this.currentDiscipline.unlocked=!0,this.currentDiscipline.cost.items.forEach(t=>{const a=e.inventory.findIndex(e=>{try{return e[0]==t[0]}catch{}}),n=e.inventory[a];n[1]-=t[1],0==n[1]&&delete e.inventory[a]}),e.gold-=this.currentDiscipline.cost.gold,h(`${ee}Discipline unlocked!`),this.currentDiscipline=null,ue.disciplinesMenuLoop()):(h(`${ee}Returning to disciplines menu..`),ue.disciplinesMenuLoop()),E(n.player)},checkRequirements(e,t=!0){const a=n.player;var s=!0,o=!1;return a.level>=e.requirements.level?o=!0:s=!1,t&&h(`Be at level ${e.requirements.level} or higher - [${1==o?\"X\":\" \"}]`),e.requirements.skills.forEach(e=>{-1!=a.library.indexOf(e)?o=!0:(o=!1,s=!1),t&&h(`Unlock skill ${e} - [${1==o?\"X\":\" \"}]`)}),e.requirements.flags.forEach(e=>{1==m[e].complete?o=!0:(o=!1,s=!1),t&&h(`${m[e].desc} - [${1==o?\"X\":\" \"}]`)}),s},checkCost(e){const t=n.player;var a=!0;return h(`<br>You will need to pay: ${e.cost.gold} gold.`),e.cost.items.length>0&&(h(\"You will also need the following items:\"),e.cost.items.forEach(e=>{const n=t.inventory.findIndex(t=>{try{return t[0]==e[0]}catch{}});var s=0;s=-1==n?0:t.inventory[n][1],h(`${e[1]} ${e[0]} (${s}/${e[1]})`),e[1]>s&&(a=!1)})),e.cost.gold>t.gold&&(a=!1),a}},pe={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){h(`${ee}Showing all available disciplines. Say the name of a discipline to`+\" view the skills it contains. Or, say 'e' or 'equipped' to view your currently equipped skills.\");const e=d;Object.keys(e).forEach(t=>{e[t].requirements.level<=n.player.level&&(e[t].visible=!0)}),Object.keys(e).forEach(t=>{const a=e[t];1==a.unlocked&&h(` - ${A(a.name)}`)});var t=[\"equipped\"];Object.keys(e).forEach(a=>{const n=e[a];1==n.unlocked&&t.push(n.name)}),t.push(\"back\"),_(t),u(pe.disciplinesMenu)},disciplinesMenu(){p(pe.disciplinesMenu);const e=f().toLowerCase(),t=n.player,a=d;if(a.hasOwnProperty(e)){if(1==a[e].unlocked){pe.currentDiscipline=a[e];var s=[\"equipped\"];Object.keys(a).forEach(e=>{const t=a[e];1==t.unlocked&&s.push(t.name)}),s.push(\"back\"),_(s),pe.disciplineMenuLoop(!0)}}else\"back\"==e||\"b\"==e?(h(`${ee}Returning...`),h(`${ee}Entering skills menu. To change skills equipped, say 'e'/'equipped',`+\" or say 'l'/'learn' to learn new skills.\"),_([\"equipped\",\"learn\",\"back\"]),u(fe)):\"e\"==e||\"equipped\"==e?(h(`${ee}Showing equipped skills. Say the name of an equipped skill to unequip it.`),console.log(\"logging skills\"),console.log(t.stats.skills),t.stats.skills.forEach(e=>{console.log(`current skills is ${e}`);const t=O[e].description;h(`<br>${O[e].name} - ${t}`)}),pe.initShortcuts(),u(pe.unequipSkill)):(h(\"<br>Invalid input<br>\"),u(pe.disciplinesMenu));E(n.player)},unequipSkill(){const e=f().toLowerCase(),t=n.player;p(pe.unequipSkill),-1!=t.stats.skills.indexOf(e.replace(/\\s/g,\"_\"))?t.stats.skills.length>1?(\"attack\"!=e&&\"guard\"!=e?(t.stats.skills.splice([t.stats.skills.indexOf(e)],1),h(`${e} unequipped.`)):h(\"<br>That skill can't be unequipped!\"),pe.initShortcuts(),u(pe.unequipSkill)):(h(\"You can't have 0 skills!\"),pe.initShortcuts(),u(pe.unequipSkill)):\"back\"==e||\"b\"==e?(h(`${ee}Returning to disciplines menu...`),pe.disciplinesMenuLoop()):(h(\"<br>Invalid input.\"),pe.initShortcuts(),u(pe.unequipSkill))},disciplineMenuLoop(e=!1){const t=pe.currentDiscipline,a=n.player;1==e&&(h(`${ee}Showing all known skills in the ${t.name.toUpperCase()} discipline. Say the name of a skill to view its description.`),t.skills.forEach(e=>{const t=e.name;\"X\"==(-1!=a.library.indexOf(e.name)?\"X\":\" \")&&h(` - ${O[t].name}`)}));var s=[];t.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&1==e.unlocked&&s.push(O[e.name].name)}),s.push(\"back\"),_(s),u(pe.disciplineMenu)},disciplineMenu(){p(pe.disciplineMenu);const e=f().toLowerCase(),t=n.player,a=pe.currentDiscipline,s=t.library.map(e=>O[e].name);if(-1!=s.indexOf(e)){const n=O[t.library[s.indexOf(e)]].description,o=ye(a,e.replace(\" \",\"_\"));pe.currentSkill=o,h(`<br>${A(e)} - ${n}`),-1!=t.stats.skills.indexOf(e)?(h(\"This skill is already equipped.\"),pe.disciplineMenuLoop(!1)):(h(\"This skill is not equipped. Say 'e' or 'equip' to equip this skill. You can also say 'f' or 'forget' to unlearn this skill. Input anything else to return.\"),u(pe.skillMenu))}else\"back\"==e||\"b\"==e?pe.disciplinesMenuLoop():(h(\"<br>Invalid input\"),ge.skillsInDiscipline(a),u(pe.disciplineMenu))},skillMenu(){const e=f().toLowerCase(),t=n.player;p(pe.skillMenu),\"e\"!=e&&\"equip\"!=e||(t.stats.skills.length<10?(t.stats.skills.push(pe.currentSkill.name),h(`${ee}Skill equipped.`),pe.disciplineMenuLoop(!0)):(h(`${ee}You have too many skills equipped!`),pe.disciplineMenuLoop(!0))),\"f\"==e||\"forget\"==e?(h(`${ee}Would you like to unlearn this skill? You will get the AP back, but you the reagents and gold will be lost.`),h(\"<br>Input 'y'/'yes' to forget the skill, otherwise input 'b'/'back' to return to the discipline menu.\"),_([\"yes\",\"back\"]),u(pe.unlearnSkillResponse)):(h(`${ee}Returning to discipline menu...`),pe.disciplineMenuLoop(!0))},unlearnSkillResponse(){switch(p(pe.unlearnSkillResponse),f().toLowerCase()){case\"y\":case\"yes\":1==pe.currentSkill.unlearnable?pe.unlearnSkill():(h(\"<br>This skill cannot be forgotten!\"),pe.disciplineMenuLoop(!0));break;case\"b\":case\"back\":h(`${ee}Returning...`),pe.disciplineMenuLoop(!0);break;default:h(\"Invalid input.\"),u(pe.unlearnSkillResponse)}},unlearnSkill(){const e=pe.currentSkill;e.unlocked=!1;const t=n.player.library,a=t.indexOf(e.name);t.splice(a,1),n.player.ap+=e.cost.ap,h(`${ee}Skill unlearned! Gained ${e.cost.ap} AP.`),E(n.player),h(`${ee}Returning...`),pe.disciplineMenuLoop(!0)},getSkills:()=>n.player.stats.skills.map(e=>O[e].name),initShortcuts(){const e=pe.getSkills();e.push(\"back\"),_(e)}},ge={unlockedDisciplines:()=>{const e=d;var t=[\"equipped\"];Object.keys(e).forEach(a=>{const n=e[a];1==n.unlocked&&t.push(n.name)}),t.push(\"back\"),_(t)},skillsInDiscipline:e=>{var t=[];e.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&t.push(O[e.name].name)}),t.push(\"back\"),_(t)},showAllDisciplines:e=>{var t=[];Object.keys(e).forEach(a=>{const n=e[a];1==n.visible&&t.push(n.name)}),t.push(\"back\"),_(t)}},ye=(e,t)=>{var a=-1;return e.skills.forEach(e=>{e.name==t&&(a=e)}),a};a(1);const be=(e,t)=>{we.currentShop=ke[e],we.returnFunction=t,n.first_time.shop&&(n.first_time.shop=!1,h(se.shopIntroduction)),we.shopLoop()},_e={1:\"f1_shop\"},ke=Object.assign({f1_shop:{name:\"Gareth's Wares\",items:[[\"slime_ball\",50]]},old_man:{name:\"Old man's teeth\",items:[[\"old_man_yellow_tooth\",6e3],[\"old_man_white_tooth\",1200]]},f1_docile_slime_shop:{name:\"Docile slime's shop\",items:[[\"slime_ball\",5]]},f1_old_man:{name:\"Old man's shop\",items:[[\"water_orb\",5e4]]},f1_weak_weapons:{name:\"Weapons shop\",items:[[\"simple_sword\",100],[\"silver_axe\",400],[\"metal_stave\",120],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"magisteel_stave\",500]]},f1_strong_weapons:{name:\"Advanced Weapons shop\",items:[[\"crafted_blade\",1e3],[\"crafted_dagger\",1e3],[\"reinforced_silver_axe\",1200],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"enchanted_magisteel_stave\",1400],[\"conduit_orb\",800],[\"magisteel_runic_dagger\",1200]]},f1_weak_armours:{name:\"Armour shop\",items:[[\"silver_helm\",200],[\"silver_armour\",200],[\"silver_legwear\",200],[\"advanced_silver_helm\",320],[\"advanced_silver_armour\",320],[\"advanced_silver_legwear\",320],[\"wizard_headband\",280],[\"light_wizard_robes\",280],[\"light_wizard_leggings\",280],[\"enchanted_wooden_helm\",350]]},f1_strong_armours:{name:\"Advanced armour shop\",items:[[\"silver_knight_helm\",600],[\"silver_knight_armour\",600],[\"silver_knight_legwear\",600],[\"ninja_wrap\",360],[\"ninja_garb\",360],[\"ninja_legwear\",360],[\"tattered_magus_robes\",600]]},f1_misc:{name:\"Misc shop\",items:[[\"steel\",40],[\"leather\",36],[\"wood\",32],[\"fire_rune\",200],[\"water_rune\",200],[\"thunder_rune\",200],[\"vip_card\",400]]},f1_misc_vip:{name:\"VIP Misc shop\",items:[[\"dark_rune\",200],[\"light_rune\",200]]}}),we={currentItem:void 0,currentShop:void 0,returnFunction:void 0,mode:void 0,price:void 0,menuOptions:void 0,shopLoop:(e=!0)=>{const t=we.currentShop;h(`${ee}Currently shopping at ${t.name}`),h(\"Wares available:\"),t.items.forEach(e=>{const a=t.items.findIndex(t=>t[0]==e[0]);h(`${a+1} - ${k[e[0]].name} - ${e[1]}G`)}),h(\"Type the name/number of an item to buy it, or type 's'/'sell' to enter sell mode.\"),u(we.shopResponse)},shopResponse:()=>{p(we.shopResponse);const e=we.currentShop,t=f().toLowerCase();var a=null!=e.items[t-1]?parseInt(t)-1:-1;if(-1==a&&(a=e.items.findIndex(e=>t==k[e[0]].name.toLowerCase())),-1!=a){const t=e.items[a];h(`${ee}${k[t[0]].name} selected.`),$(k[t[0]]),h(\"<br>Type 'b' or 'buy to buy it. Otherwise, type anything else to return.\"),we.currentItem=t,we.mode=\"buy\",_([\"buy\"]),u(we.itemMenu)}else\"sell\"==t||\"s\"==t?(we.mode=\"sell\",h(`${ee}Entering sell mode..`),we.sellLoop()):\"back\"==t||\"b\"==t?(h(`${ee}Returning...`),we.returnFunction()):(h(\"<br>Invalid input.\"),u(we.shopResponse))},sellLoop:(e=!0)=>{const t=n.player;h(`${ee}Currently in sell mode. Type the name/number of an item in the inventory to see\\n        its details and sell it. Type 'b'/'back' to exit sell mode.`),h(\"<br>Inventory:\");var a=[];t.inventory.forEach(e=>{x(e)?a.push(e):a.includes(e)||a.push(e)}),e&&a.forEach((e,a)=>{var n,s;x(e)?(n=k[e[0]],s=e[0]):\"nothing\"==e||(n=k[e],s=e),h(`${a+1} - ${n.name} (x${T(s,t.inventory)}) - ${n.sell_value}${\"unsellable\"==n.sell_value?\"\":\"G\"}`)}),we.menuOptions=a,u(we.sellResponse)},sellResponse:()=>{p(we.sellResponse);const e=f().toLowerCase(),t=we.menuOptions;var a=-1;\"NaN\"!=parseInt(e).toString()?t.length>=parseInt(e)?(h(`<br>${k[I(t[parseInt(e-1)])].name} selected.`),a=e-1):h(\"<br>Number out of range.\"):(t.forEach((t,n)=>{x(t)?k[t[0]].name.toLowerCase()==e&&(a=n):k[t].name.toLowerCase()==e&&(a=n)}),-1!=a&&h(`<br>${k[t[parseInt(a)].name]} selected.`)),-1!=a?($(k[I(t[a])]),we.currentItem=t[a],\"unsellable\"!=k[I(t[a])].sell_value?(h(`${ee}If you would like to sell this item, type 's'/'sell'. Otherwise, type anything else to return.`),u(we.itemMenu)):(h(\"This item cannot be sold.\"),we.sellLoop())):\"b\"==e||\"back\"==e?(h(`${ee}Returning...`),we.shopLoop()):(h(\"<br>Invalid input.\"),u(we.sellResponse))},itemMenu:()=>{p(we.itemMenu);we.currentShop;const e=f().toLowerCase();var t=\"none\";\"b\"==e||\"buy\"==e?t=\"buy\":\"s\"!=e&&\"sell\"!=e||(t=\"sell\"),t==we.mode?(h(\"buy\"==t?`${ee}How many would you like to buy? (Please type a numerical integer value`+\", or type '0' to return)\":`${ee}<br>How many would you like to sell? (Please type a numerical integer value`+\", or type '0' to return\"),u(we.itemConfirmation)):(h(`${ee}Returning...`),\"buy\"==we.mode?we.shopLoop():we.sellLoop())},itemConfirmation:()=>{p(we.itemConfirmation);we.currentShop;const e=f().toLowerCase();var t=!1;if(\"NaN\"!=parseInt(e).toString())if(parseInt(e)>0&&\"buy\"==we.mode){const a=parseInt(e),n=a*we.currentItem[1];h(`${ee}buying ${a} ${k[we.currentItem[0]].name}${a>1?\"s\":\"\"} will cost`+` ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),we.price=n,u(we.itemTransaction),t=!0}else if(parseInt(e)>0&&\"sell\"==we.mode){const s=parseInt(e);var a,n;x(we.currentItem)?(n=s*k[we.currentItem[0]].sell_value,a=k[we.currentItem[0]].name):(n=s*k[we.currentItem].sell_value,a=k[we.currentItem].name),h(`${ee}${s} ${a}${s>1?\"s\":\"\"} will sell for\\n                ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),we.price=n,u(we.itemTransaction),t=!0}else 0==parseInt(e)&&(h(`${ee}Returning..`),t=!0,\"buy\"==we.mode?we.shopLoop():we.sellLoop());0==t&&(h(\"<br>Invalid input\"),u(we.itemConfirmation))},itemTransaction:()=>{p(we.itemTransaction);we.currentShop;const e=f().toLowerCase(),t=n.player,a=we.price;if(\"y\"==e||\"yes\"==e)if(\"buy\"==we.mode)if(t.gold>=a){t.gold-=a;const e=a/we.currentItem[1];h(`${ee}Purchasing...`),w(we.currentItem[0],e,e),h(\"Returning...\"),we.shopLoop()}else h(\"<br>Too expensive!\"),we.sellLoop();else{const e=we.currentItem,n=t.inventory;if((x(e)?T(e[0],n):T(e,n))>=a/k[I(we.currentItem)].sell_value){t.gold+=a;const e=a/k[I(we.currentItem)].sell_value;v(I(we.currentItem),e),h(`${ee}Selling..`),h(\"<br>Returning...\"),we.sellLoop()}else h(`${ee}Not enough of the item in the inventory!`),we.sellLoop()}else h(\"<br>Returning..\"),\"buy\"==we.mode?we.shopLoop():we.sellLoop();E(n.player)}},ve={wolfhide_armour:{name:\"Wolfhide armour\",item:\"wolfhide_armour\",description:\"Allows for the crafting of an item.\",gold:40,items:[[\"grey_wolf_pelt\",10],[\"leather\",1]]},wolfhide_cap:{name:\"Wolfhide cap\",item:\"wolfhide_cap\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",7],[\"leather\",1]]},wolfhide_leggings:{name:\"Wolfhide leggings\",item:\"wolfhide_leggings\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",8],[\"leather\",1]]},slime_bracers:{name:\"Slime bracers\",item:\"slime_bracers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"slime_ball\",10],[\"steel\",1]]},slime_reinforced_sword:{name:\"Slime reinforced sword\",item:\"slime_reinforced_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",10],[\"simple_sword\",1]]},wolfhide_charm:{name:\"Wolfhide charm\",item:\"wolfhide_charm\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"sharp_claw\",2],[\"grey_wolf_pelt\",8]]},lizard_bracelet:{name:\"Lizard bracelet\",item:\"lizard_bracelet\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"tiny_lizard_tail\",2],[\"leather\",3]]},aquus_orb:{name:\"Aquus orb\",item:\"aquus_orb\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5]]},water_infused_armour:{name:\"Water infused armour\",item:\"water_infused_armour\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5],[\"advanced_silver_armour\",1]]},water_infused_helm:{name:\"Water infused helm\",item:\"water_infused_helm\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",3],[\"advanced_silver_helm\",1]]},water_infused_legwear:{name:\"Water infused legwear\",item:\"water_infused_legwear\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",4],[\"advanced_silver_helm\",1]]},luminant_charm:{name:\"Luminant charm\",item:\"luminant_charm\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"steel\",2],[\"leather\",2],[\"light_absorbant_eye\",1]]},wolfhide_dagger:{name:\"Wolfhide dagger\",item:\"wolfhide_dagger\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"simple_dagger\",1],[\"grey_wolf_pelt\",8]]},tear_of_lucia:{name:\"Tear of Lucia\",item:\"tear_of_lucia\",description:\"Allows for the crafting of an item.\",gold:500,items:[[\"steel\",4],[\"conduit_orb\",1],[\"manasoul\",1]]},pickaxe:{name:\"Pickaxe\",item:\"pickaxe\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"wood\",1]]},makeshift_steel_armour:{name:\"Makeshift steel armour\",item:\"makeshift_steel_armour\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_steel_helm:{name:\"Makeshift steel helm\",item:\"makeshift_steel_helm\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",2]]},makeshift_steel_legwear:{name:\"Makeshift steel legwear\",item:\"makeshift_steel_legwear\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},red_slime_bracers:{name:\"Red slime bracers\",item:\"red_slime_bracers\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"red_slime_ball\",10],[\"steel\",2]]},shinobi_armour:{name:\"Shinobi armour\",item:\"shinobi_armour\",description:\"Allows for the crafting of an item.\",gold:300,items:[[\"ninja_garb\",1],[\"grey_wolf_pelt\",10],[\"shadow_pelt\",5]]},shinobi_headcloak:{name:\"Shinobi headcloak\",item:\"shinobi_headcloak\",description:\"Allows for the crafting of an item.\",gold:250,items:[[\"ninja_wrap\",1],[\"grey_wolf_pelt\",7],[\"shadow_pelt\",3]]},shinobi_leggings:{name:\"Shinobi leggings\",item:\"shinobi_leggings\",description:\"Allows for the crafting of an item.\",gold:280,items:[[\"ninja_legwear\",1],[\"grey_wolf_pelt\",8],[\"shadow_pelt\",4]]},earthen_sword:{name:\"Earthen sword\",item:\"earthen_sword\",description:\"Allows for the crafting of an item.\",gold:220,items:[[\"sharpened_sword\",1],[\"venomous_claw\",4],[\"sharp_claw\",3],[\"steel\",3]]},makeshift_sword:{name:\"Makeshift sword\",item:\"makeshift_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"leather\",1]]},wolven_reavers:{name:\"Wolven reavers\",item:\"wolven_reavers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"leather\",1],[\"sharp_claw\",3],[\"grey_wolf_pelt\",3]]},shadow_cloak:{name:\"Shadow cloak\",item:\"shadow_cloak\",description:\"Allows for the crafting of an item.\",gold:400,items:[[\"leather\",3],[\"shadow_pelt\",8],[\"shadow_corona\",1],[\"grey_wolf_pelt\",15]]},bladed_armour:{name:\"Bladed armour\",item:\"bladed_armour\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"makeshift_steel_armour\",1],[\"sharp_claw\",4]]}},$e=e=>{xe.returnFunction=e,n.first_time.crafting&&(n.first_time.crafting=!1,h(se.craftingIntroduction)),xe.recipesLoop()},xe={currentRecipe:void 0,recipesArray:void 0,returnFunction:void 0,recipesLoop:(e=!0)=>{e&&h(`${ee}Currently in the recipes menu. Input 'a' to see them all in alphabetical order, `+\"or input 'r' to see first all recipes that can be crafted.\"),_([\"alphabetical\",\"gold\",\"ready\",\"back\"]),u(xe.displayRecipes)},displayRecipes:()=>{const e=f().toLowerCase();p(xe.displayRecipes);const t=n.player.recipes.map(e=>ve[e]),a=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"];var s=!1;switch(e){case\"alphabetical\":case\"a\":s=!0;for(var o=0;o<t.length;o++)for(var r=1;r<t.length;r++)for(var i=!1,l=0;0==i;){const e=a.indexOf(t[r].name[l].toLowerCase()),n=a.indexOf(t[r-1].name[l].toLowerCase());if(e<n){const e=t[r];t[r]=t[r-1],t[r-1]=e,i=!0}else e>n?i=!0:l+1>=t[r].name.length||l+1>=t[r-1].name.length?i=!0:l++}break;case\"ready\":case\"r\":s=!0;var c=0;for(o=1;o<t.length;o++)if(xe.checkReady(t[o],inventory)){const e={...t[o]};delete t[o],t.unshift(e),o++,++c==t.length&&(o=t.length)}break;case\"back\":case\"b\":h(\"<br>Returning...\"),xe.returnFunction();break;default:h(\"<br>Invalid input.\"),xe.recipesLoop(!1)}if(s){xe.recipesArray=t,h(`${ee}Showing recipes...`),t.forEach(e=>{const a=1==xe.checkReady(e,inventory)?\"[X]\":\"[ ]\";h(`${t.indexOf(e)+1} - ${e.name} (${a})`)}),h(`${ee}Say the name or number of a recipe to access it. From there you can see the`+\" items and gold required, and craft the recipe if you desire as well.\");t.map(e=>e.name);u(xe.recipesMenu)}},recipesMenu:()=>{p(xe.recipesMenu);const e=f().toLowerCase(),t=xe.recipesArray,a=parseInt(e);var n=!1;\"NaN\"!=a.toString()&&t.length>a-1&&(n=!0);var s,o=!1;switch(t.forEach(t=>{t.name.toLowerCase()==e&&(o=!0,s=t)}),!0){case n:t[a-1];xe.currentRecipe=t[a-1],xe.recipeLoop();break;case o:xe.currentRecipe=s,xe.recipeLoop();break;case\"b\"==e:case\"back\"==e:h(`${ee}Returning..`),xe.recipesLoop();break;default:h(`${ee}Invalid input.`),u(xe.recipesMenu)}},recipeLoop:()=>{xe.recipesArr;const e=xe.currentRecipe,t=n.player.inventory;h(`${ee}Currently viewing ${e.name} recipe.`),h(\"The following is required:\"),h(`${e.gold} gold (You have ${n.player.gold})`),e.items.forEach(e=>{h(`${e[1]} ${k[e[0]].name}${e[1]>1?\"s\":\"\"} (You have ${S(e[0],t)})`)}),h(\"<br>The recipe will craft the following item:\"),$(k[e.item],!0,!0,!0,!1,!0),xe.checkReady(e,t)&&h(\"<br>This item can be crafted.\"),h(\"<br>If the item can be crafted, type 'c' to craft it. Otherwise, type 'z' to scroll up, 'x' to scroll down (looking through more recipes), or 'b' to go back. 'l' will reprint the list and your position.\"),_([\"up\",\"down\",\"list\",\"craft\",\"back\"]),u(xe.recipeMenu)},recipeMenu:()=>{p(xe.recipeMenu);const e=f().toLowerCase(),t=xe.recipesArray,a=xe.currentRecipe,s=n.player.inventory;var o=t.findIndex(e=>a.name==e.name);switch(e){case\"up\":case\"z\":h(`${ee}Scrolling back..`),0==o?o=t.length-1:o--,xe.currentRecipe=t[o],xe.recipeLoop();break;case\"down\":case\"x\":h(`${ee}Scrolling forward..`),o==t.length-1?o=0:o++,xe.currentRecipe=t[o],xe.recipeLoop();break;case\"list\":case\"l\":var r;h(`${ee}Displaying recipes...`),t.forEach(e=>{r=e.name==xe.currentRecipe.name?\"<b>\":\"\",h(`${r}${e.name}${\"<b>\"==r?\"</b>\":\"\"}`)}),u(xe.recipeMenu);break;case\"c\":xe.checkReady(xe.currentRecipe,s)?(h(`${ee}How many of this item would you like to craft? Please input the `+\" number you would like to craft, or input '0' if you would like to return.\"),u(xe.inputQuantity)):(h(\"<br>This item cannot be crafted.\"),u(xe.recipeMenu));break;case\"back\":case\"b\":h(\"<br>Returning...\"),xe.recipesLoop();break;default:h(\"<br>Invalid input.\"),u(xe.recipeMenu)}},inputQuantity:()=>{const e=f().toLowerCase();p(xe.inputQuantity);const t=n.player.inventory;if(\"NaN\"==parseInt(e).toString())h(\"<br>Invalid input.\"),u(xe.inputQuantity);else if(0==parseInt(e))h(\"<br>Returning...\"),xe.recipeLoop();else{const a=parseInt(e),n=JSON.parse(JSON.stringify(xe.currentRecipe));n.items.forEach(e=>{e[1]=e[1]*a}),n.gold=n.gold*a;const s=xe.checkReady(n,t);h(`${ee}In order to craft ${e} ${k[xe.currentRecipe.item].name}`+`${a>1?\"s\":\"\"}, You will need the following items:`),n.items.forEach(e=>{const a=e[0],n=e[1],s=S(a,t);h(`${n} ${k[a].name} (You have ${s})`)}),h(`${n.gold} gold`),s?(h(`<br>Are you sure you would like to craft ${a}`+` ${k[xe.currentRecipe.item].name}? Input 'y'/'yes' to confirm, or enter`+\" anything else to return.\"),xe.craftAmount=a,u(xe.craftConfirmation)):(h(\"<br>You cannot craft this much of that item!\"),xe.recipeLoop())}},craftConfirmation:()=>{p(xe.craftConfirmation);const e=f().toLowerCase();p(xe.craftConfirmation);const t=n.player;if(\"y\"==e||\"yes\"==e){const e=xe.currentRecipe,n=xe.craftAmount;for(var a=0;a<n;a++)t.gold-=e.gold,e.items.forEach(e=>{v(e[0],e[1])});w(e.item,n,n),E(t),h(`${ee}Returning to recipe menu...`),xe.recipeLoop()}else h(\"<br>Returning...\"),xe.recipeLoop()},checkReady:(e,t)=>{const a=n.player.inventory,s=e.items;var o=!0;return s.forEach(e=>{S(e[0],a)>=e[1]==0&&(o=!1)}),o}},Ie={old_man:{name:\"Old man\",say:[[\"<i>You approach the old man.\",1],[\"[name]: Hello! How are you faring today?\",1]],options:{\"I'm okay, thanks\":{say:[[\"[name]: That's good. Hope you've been eating your greens.\",1],[\"[name]: Any idea where I am?\",1]],options:{\"no, sorry\":{say:[[\"[name]: Oh, shame. Want to see my teeth?\",1]],options:{no:{say:[[\"[name]: Ok.\",1]],options:{\"ok, goodbye\":{action:[\"end\"]},\"put 'em up old man\":{say:[[\"[name]: Okay brother, you're asking for it.\",1],[\"Here we go!\",.5]],action:[\"battle\",[\"wolf\",[\"waypoint\",\"no, sorry\"]]]}}},yes:{say:[[\"<i>You respond 'yes', and also compliment him on his teeth.</i>\",1]],action:[\"waypoint\",\"You have nice teeth\"]}}}}},\"You have nice teeth\":{say:[[\"I know. Here, have a look\",1],[\"<i>He shows you his teeth</i>\",1],[\"Buy some!\",1]],action:[\"shop\",\"old_man\",[\"waypoint\",\"no, sorry\"]]}},end:[[\"[name]: Ok bye\",1]]},lily:{name:\"Lily\",say:[[\"<i>You approach the child. As you near her, she backs away slightly.\",1]],conditional:{\"level: 0\":{say:[[\"[name]: H-Hello [player]... can you help me?\"]],action:[\"gold\",1e3],action3:[\"exp\",1e3],action2:[\"end\"]},\"item: 1212 slime_ball\":{say:[[\"[name]: Icky! Slime!\"]],action:[\"items\",\"slime_ball\",200],action2:[\"end\"]},\"flag: -beatSlime\":{say:[[\"[name]: You haven't beat the slime? Weakling.\"]],action:[\"recipe\",\"slam_sword\"],action2:[\"end\"]},\"level: 121\":{say:[[\"[name]: I don't have anything interesting to say to you\",1]],action:[\"end\"]}},end:[[\"[name]: Goodbye.\",1]]},f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action5:[\"exp\",500],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},f1_docile_slime:{name:\"Docile slime\",say:[[\"<i>You approach the slime.</i>\",1]],conditional:{\"flag: f1_helped_docile_slime\":{say:[[\"<i>The slime looks happy to see you. It wants to show you something.\",2]],action:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},\"flag: -f1_spoken_to_docile_slime\":{say:[[\"<i>Slimes can't speak, obviously. But it seems to want something from you.</i>\",1],[\"<i>Somehow you gather that it is trying to gesture to the remnants of slime on the ground.. as though it wants some slime for itself.</i>\",2],[\"<i>100 Slime balls might be enough to appease the slime. It seems to have nothing more to say to you.\",2]],action:[\"flag\",\"f1_spoken_to_docile_slime\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_docile_slime\":{conditional:{\"item: 100 slime_ball\":{say:[[\"<i>The slime looks pleased with you, and hopeful. Will you give the sime what it wants?\",2]],options:{yes:{exp:[\"exp\",3e3],say:[[\"<i>You give the slime 100 slime balls. It has way of showing emotion, but you can tell that it's very happy.\",2],[\"<i>It seems to want to show you something..\",1]],action3:[\"items\",\"slime_ball\",-100],action:[\"flag\",\"f1_helped_docile_slime\",\"true\"],action2:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},no:{say:[[\"<i>The slime looks disappointed. It doesn't want to speak to you anymore.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>You don't seem to have what the slime wants. It ignores you.</i>\",1]],action:[\"end\"]}}}},end:[[\"[name]: ...\",1]]},f1_wanderer_statue:{name:\"Unnamed Wanderer\",say:[[\"<i>You approach the statue.</i>\",1],[\"<i>It is well looked after, despite showing clear signs of wear. It seems to be of some kind of goddess, who adorns a benevolent smile with her arms outstreched, as though enveloping many in her embrace.\",2],[\"<i>Below the statue is a tall rectangular stone container. It is filled up about halfway with various items.\",2]],conditional:{\"item: 1 wanderer_memorabilia\":{say:[[\"Some of the items remind you of the wanderer memorabilia that you found off somebody else. Will you add some to the container?\",2]],options:{yes:{say:[[\"<i>You place a piece of wanderer memorabilia into the rectangle. Nothing happens for a short while, but a person eventually emerges. They have ragged clothes and a few weapons and other useful items holstered at their waste. Despite their decrepit appearance there is an aura of experience and knowledge that you interpret from their demeanour.\",4],[\"[name]: Who are you? You don't look like a wanderer.\",1]],action:[\"items\",\"wanderer_memorabilia\",-1],options:{\"wanderer?\":{say:[[\"[name]: You must have happened on somebody else's memorabilia...\",1],[\"<i>The person thinks to themselves for a little.</i>\",1],[\"[name]: Many people have gone on adventures in the past in search for some purpose, or in pursuit of some kind of treasure or reward.\",2],[\"[name]: Regardless of whether they find what they are looking for, at the end of their quest, they almost always find that there is nothing more they want to achieve... these people are called wanderers.\",3],[\"[name]: Not all wanderers believe in the Solace Goddess Lucia, but she is somewhat of an icon for wanderers... hence the statue.\",2],[\"[name]: Wanderers place their memorabilia here in honour of her and other wanderers. if two wanderers meet here, they will often battle to remember their days of adventure and learn of the experiences of others.\",3],[\"[name]: You aren't a wanderer, but you still seem like somebody who can fight. If you would like, we can battle here, right now.\",2]],options:{yes:{action:[\"waypoint\",\"let's fight!\"]},no:{say:[[\"[name]: Alright. Well, now you know the purpose of this area. If you come here again, it's unlikely you will meet the same person. Keep safe, young one.\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}}},\"let's fight!\":{say:[[\"[name]: Very well then. Prepare yourself!\",1]],action:[\"battle\",[\"wayward_traveler\",[\"waypoint\",\"after_battle\"]]]}}},no:{say:[[\"<i>You decide to leave the statue alone.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>There doesn't seem to be much to do here. Nothing you own reminds you of the items that are in your possession. You decide to leave the statue alone.\",2]],action:[\"end\"]}},end:[[\"\",0]],after_battle:{say:[[\"[name]: It was a good fight. I am glad to have met you. Perhaps we will meet again someday...\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}},f1_rude_kid:{name:\"Kid\",conditional:{\"flag: -f1_spoken_to_rude_kid\":{say:[[\"<i>You approach the kid. He has an uninviting look on his face. As you near him, he spits on the floor.\",2],[\"[name]: Pfft. Whaddya want? Loser.\"]],options:{\"<i>kick his shin</i>\":{say:[[\"<i>You kick the kid's shin.</i>\",1],[\"[name]: OW! What the hell, dude?!\",1],[\"<i>The kid's eyes tear up and he runs away.\",1],[\"<i>You notice he left some gold on floor. Hopefully you don't see that kid again.</i>\"]],action:[\"gold\",50],action5:[\"exp\",100],action2:[\"flag\",\"f1_kicked_rude_kids_shin\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]},\"why are you so rude?\":{say:[[\"[name]: Rude? I'm just battle hardened, y'see. Check this out.\",1],[\"<i>The kid holds up a small patch of grey wolf fur.</i>\",1],[\"[name]: Runt attacked me and my li'l sis. We got separated, and I fought off the wolf with my own bare hands. Not a pretty sight for pansy folk like yourself.\",2],[\"[name]: You know what? Keep this pelt. As a reminder of the horrors of war.\",1],[\"<i>He throws the pelt at your feet.</i>\",1],[\"[name]: Not everyone has to go through what I did...\",1],[\"<i>The kid walks away, hands in his pockets. Hopefully you don't see that kid again.\",2]],action:[\"items\",\"grey_wolf_pelt\",3],action5:[\"exp\",300],action2:[\"flag\",\"f1_extended_convo_with_rude_kid\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]}}},\"flag: f1_spoken_to_rude_kid\":{say:[[\"<i>You look for the rude kid, but he isn't there anymore.\",1]],action:[\"end\"]}},end:[[\"\",0]]},f1_wolf_man:{name:\"Lucas\",say:[[\"<i>You approach the man. As you do so, he stands up. He smells a little.\",1.5],[\"[name]: Hi. My name's Lucas. I live in the forest, nearby this area.\",1],[\"[name]: I thought it would be a good idea to let you know that there more wolves in this spot than normal. If you need some wolf pelts, it might be worth hanging around here.\",2],[\"<i>The man closes his eyes. It doesn't seem like he wants to say much else..</i>\",1]],action:[\"end\"],end:[[\"\",0]]},f1_old_man:{name:\"Old Man\",say:[[\"<i>You start to move towards the old man, but before you can approach, he quickly notices you and beckons you over rather enthusiastically.</i>\",1.5],[\"[name]: Helloe there! Not many people come 'round these parts no more.\",1],[\"[name]: It's such a beautifool place.. but a little dangerous for most people, even though it's a little less dangerous than the ruins and forest a li'l far off.\",2],[\"[name]: Must the be rumours of some massive sea serpent, 'though I've never seen nothing like that in my time..\",1.5],[\"[name]: Thanks for listenin' to me ramblin' off about nothing. I have some stuff that could be of use to you, if you're interested...\",2]],options:{yes:{say:[[\"[name]: Ok, then - have yourself a look..\"]],action:[\"shop\",\"f1_old_man\",[\"end\"]]},no:{say:[[\"[name]: Alrighty then - I'll be seeyin' ye around, I suppose.\"]],action:[\"end\"]}},end:[[\"<i>You say goodbye to the old man.</i>\",1]]},f1_little_boy:{name:\"Little boy\",say:[[\"<i>As you begin to approach the kid, you notice his distinctive eyes, a hue of dull red. The dark clothes that he's wearing make him difficult to say, and coalesce with his facial aesthetic into a somewhat edgy demeanour.\",2]],conditional:{\"flag: f1_helped_little_girl\":{conditional:{\"flag: -f1_spoken_to_little_boy\":{say:[[\"[name]: ...\",.5],[\"[name]: I don't wanna speak to a weakling like you. Bring me the Crimson Regalia if you're realling worth my time..\",1],[\"<i>The kid seems reluctant to speak. Perhaps if you bring him 30 or so red slime balls..\",1]],action:[\"flag\",\"f1_spoken_to_little_boy\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_boy\":{conditional:{\"flag: -f1_helped_little_boy\":{conditional:{\"item: 30 red_slime_ball\":{say:[[\"[name]: Is that.. Crimson Reglia?!\",1],[\"<i>The child hesitates a little. It doesn't seem like he thought you'd actually bring him the slime balls.\",2],[\"[name]: I-I bet you stole them from someone. How pathetic--\",1],[\"[player]: What the hell man? What's your problem?\",1],[\"[name]: You can speak?! Crapdude calm down I was just messing around I--\",1],[\"[player]: Kids like you are so annoying.. I'll show you--\",1],[\"[name]: Brocalm down! OK, I found this thing in this forest and I thought it was really cool and since putting it on I haven't been attacked here just leave me alone!!\",2.5],[\"<i>The kid hands you a pendant and runs off. By the time you've processed what has happened the kid is out of earshot. Oh well. There was some money on the floor as well... your lucky day.\",3]],action:[\"gold\",500],action6:[\"exp\",3e3],action2:[\"items\",\"red_slime_ball\",-30],action5:[\"items\",\"shadowwarding_pendant\",1],action3:[\"flag\",\"f1_helped_little_boy\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: I don't see the crimson regalia.. get out of my sight.\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_boy\":{say:[[\"<i>...Is what you would've seen, but the kid is noowhere to be found.\",1]],action:[\"end\"]}}}}},\"level: 0\":{say:[[\"[name]: You aren't worthy.. I can feel it.\",1],[\"<i>The boy refuses to say anything more. It looks like you need to help someone else before him.</i>\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_lost_person:{name:\"Lost person\",say:[[\"[name]: Hi... I'm lost. Do you know where I am?\",1]],options:{yes:{say:[[\"[name]: Sweet! Can you tell me where I am then?\",1]],options:{\"Sorry I was lying, I don't know.\":{say:[[\"[name]: ...\",1],[\"[name]: Godammit.\",1]],action:[\"end\"]},\"The dark forest\":{say:[[\"[name]: Thanks! That's not helpful at all!\",1],[\"[name]: Asshole.\",1]],action:[\"end\"]},\"The twisted trees\":{say:[[\"[name]: I'm pretty sure that's not even a place.\",1]],action:[\"end\"]},Hell:{say:[[\"[name]: Figures. I've raided one too many village I guess..\",1],[\"[name]: But the women were worth it.\",1],[\"[name]: You were joking? UM..\",1]],action:[\"end\"]}}},no:{say:[[\"[name]: Fair enough. Not like I can talk...\",1],[\"[name]: I know a bit about the general area we're in. The Driftwood area has four main sections.\",2],[\"[name]: In the center sort of is the foresty area. To the north-west is a small settlement. I don't know...\",2],[\"...much about the rest but I guess there's one area other than this one..\",1],[\"[name]: This place is kind of well-known because it has a bunch of interesting stuff in such a small area.\",2],[\"[name]: Apparently there's a hydra in a nearby sea, and some evil creature lurking in the forest.. gives me the creeps!\",2],[\"[name]: If you ever find out where this place is, please let me know! I don't wanna stay here any longer...\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_weapons_shop:{name:\"Reiner\",say:[[\"<i>You approach the weapons merchant. He is quite large and muscular, with brown hair and brown facial hair. He flashes a friendly smile your way.</i>\",3],[\"[name]: Hey there, runt! You interested in some weapons?\",1]],options:{\"weapons shop\":{action:[\"shop\",\"f1_weak_weapons\",[\"end\"]]},\"advanced weapons shop\":{action:[\"shop\",\"f1_strong_weapons\",[\"end\"]]},nope:{say:[[\"[name]: No problem! Seeya around!\",1]],action:[\"end\"]}},end:[[\"[name]: See you later, runt! Come again soon!\",1]]},f1_armour_shop:{name:\"Sora\",say:[[\"<i>You approach the armour merchant. They look a little out of place. As you approach him, he scratches his head and watches you as you near.</i>\",3],[\"[name]: Umm... hi. Would you like some armour?\",1]],options:{\"armour shop\":{action:[\"shop\",\"f1_weak_armours\",[\"end\"]]},\"advanced armour shop\":{action:[\"shop\",\"f1_strong_armours\",[\"end\"]]},nope:{say:[[\"[name]: Alright. Um..\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, uh.. see you later, I guess...\",1]]},f1_misc_shop:{name:\"Amy\",say:[[\"<i>You approach the miscellaneous merchant. She has blond hair and an intelligent glare. She watches you silently as you approach, however she has a friendly aura.\",3],[\"[name]: Hello. I have some stuff for sale. Would you like anything?\"]],options:{\"misc shop\":{action:[\"shop\",\"f1_misc\",[\"end\"]]},\"VIP misc shop\":{conditional:{\"item: 1 vip_card\":{action:[\"shop\",\"f1_misc_vip\",[\"end\"]]},\"level: 0\":{say:[[\"[name]: Sorry, you need a VIP card to access the VIP shop.\",1]],action:[\"waypoint\",\"nope\"]}}},nope:{say:[[\"[name]: Ok. Thanks for coming.\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, see you later.\",1]]},f1_man_a:{name:\"Male settler\",say:[[\"<i>You approach the man. He, similar to most other men in the settlement, has a somewhat muscular build.\",1.5],[\"He had no facial hair and messy black hair, complimenting his plain, dark brown eyes. His attire was...\",1.5],[\"...Comparable to most others in the settlement, plain fabric of a dull hue.\",1],[\"[name]: Hey. What's up?\",1]],options:{talk:{say:[[\"[name]: This settlement has existed for a few centuies, I think.. I moved in a few years ago.\",2],[\"[name]: It's fairly dangerous around here, so a lot of the people who stay here are fairly strong.\",2],[\"[name]: But there are tons of animals here, and some of them can be hunted for good reagents, so it's a great place for adventurers to stay.\",3]],conditional:{\"level: 0\":{options:{\"How long are you going to stay here?\":{say:[[\"[name]: Ehh... I don't know. Maybe a few more years.\",1],[\"[name]: Maybe once I've made some more money. There are some safer places nearby.\",1],[\"[name]: I could settle down, get a more stable job and a house.. it's pretty appealing.\",1.5],[\"[name]: But I don't really know right now. It's pretty nice here right now. Gets you in the mood for an adventure..\",2]],action:[\"waypoint\",\"level: 0\"]},\"Do you have a family?\":{say:[[\"[name]: Parents? Yeah. But no wife or kids.\",1],[\"[name]: Women who just want to settle down don't really stay here, it's not a great place unless you wanna adventure. So most of the girls here are single and uninterested.\",3],[\"[name]: It's a real shame. I wish Amy would take some interest in me..\",1]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}}}},bye:{action:[\"end\"]}},end:[[\"[name]: Mk, see you later.\",1]]},f1_hyssha:{name:\"Hyssha\",say:[[\"<i>You approach the woman. She seems stronger than most of the residents. Wavy auburn hair cascades down her a spine.</i>\",2],[\"<i>She has a somewhat tough face, and her blue eyes grant her a piercing gaze. She's wearing brownish hunter garb, accentuated by the intricate wooden bow holstered at her back.\",3],[\"[name]: Hello. I take it you are an adventuerer. My name is Hyssha.\",1]],conditional:{\"level: 0\":{options:{\"What are you doing here?\":{say:[[\"[name]: I have been staying here for some time. I am searching for a legendary beast..\",1.5],[\"[name]: I am trying to hunt powerful beasts. I use each one I slay to improve my adventuring gear.\",2]],options:{\"How many beasts have you slain?\":{say:[[\"[name]: Three. Rokusha, an earth anima, whose magical scales I used to enhance my bow.\",1.5],[\"[name]: Ignia, a fire wyvern. It's wings and scales I used to enhance my armour. With it's heart, I enhanced my bow.\",2],[\"[name]: The final was a beast in this area.. I don't know it's name, but it escaped before I could slay it. From a poison-tipped claw it had I enhanced many of my arrows.\",3],[\"[name]: I cannnot simply slay all beasts I come across. I must consider the consequences.\",1.5],[\"[name]: Otherwise, I would have slain many more creatures..\",1]],action:[\"waypoint\",\"level: 0\"]},\"Where's the legendary beast that you're hunting?\":{say:[[\"[name]: I don't know. It is a type of water beast, however to this point is has eluded me.\",2],[\"[name]: Perhaps it is absent, or must be summoned.. I must do more research.\",1.5],[\"(BOSS NOT ADDED YET)\"]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}},bye:{say:[[\"<i>You say goodbye to Hyssha.\",1]],action:[\"end\"]}}}},end:[[\"[name]: Until next, adventurer.\",1]]},f1_worried_woman:{name:\"Worried woman\",say:[[\"<i>You approach the worried woman. She has short hair and a friendly face, although right now it is warped into a worried expression.\",2],[\"[name]: Hello.. have you seen my kids?\",1],[\"[name]: They both seem to like slimes a lot.. but they ran off into the forest and I haven't seem them since!\",2],[\"[name]: I can't go out to find them on my own.. I wouldn't be able to fend for myself.\",1.5]],action:[\"end\"],end:[[\"[name]: I hope they're ok... if they were hurt, I..\",1]]}},Se=Object.assign(Ie),Pe={currentNpc:void 0,currentBranch:void 0,returnFunction:void 0,initNpc(e,t){this.currentNpc=JSON.parse(JSON.stringify(Se[e])),this.currentBranch=this.currentNpc,this.returnFunction=t,this.runBranch(Object.keys(this.currentBranch))},runBranch(e){const t=this.currentBranch;console.log(\"CURRENTLY RUNNING ON THE FOLLOWING BRANCH\"),console.log(t),console.log(\"RESPONSE ARRAY IS AS FOLLOWS\"),console.log(e);for(var a,s=!1,o=0;o<Object.keys(t).length;o++){const d=e[o];switch(d){case\"say\":{s=!0;const a=Pe.parseDialogue(t.say);g(a,\"outside\",()=>{var t=e;delete t[t.indexOf(\"say\")],this.runBranch(t)});break}case\"action6\":case\"action5\":case\"action4\":case\"action3\":case\"action2\":case\"action\":if(!s){const e=Pe.currentBranch;Pe.currentNpc;switch(e[d][0]){case\"end\":Pe.runBranch([\"end\"]);break;case\"waypoint\":{const t=e[d][1],a=M(Pe.currentNpc,t);Pe.currentBranch=a,Pe.runBranch(Object.keys(a));break}case\"shop\":{const t=e[d][1];var i=e[d][2];switch(i[0]){case\"end\":i=()=>{const e={action:[\"end\"]};Pe.currentBranch=e,Pe.runBranch(Object.keys(e))};break;case\"waypoint\":i=()=>{const t={action:e[d][2]};Pe.currentBranch=t,Pe.runBranch(Object.keys(t))}}be(t,i);break}case\"battle\":N.battleProcessing(n.player,(a=e[d][1][0],B[a]),()=>{const t={action:e[d][1][1]};Pe.currentBranch=t,Pe.runBranch(Object.keys(t))});break;case\"gold\":{const t=e[d][1];h(`<br>Obtained ${t} gold!`),n.player.gold+=t,E(n.player);break}case\"exp\":{const t=e[d][1];h(`<br>Obtained ${t} EXP!`),n.player.exp+=t,H(),E(n.player);break}case\"items\":{const t=e[d][1],a=e[d][2];a>0?w(t,a,a):v(t,-1*a),E(n.player);break}case\"flag\":{const t=e[d][1],a=e[d][2];m[t].complete=\"true\"==a;break}case\"recipe\":{const t=e[d][1];unlockRecipes([t]);break}}}break;case\"end\":if(!s&&\"end\"==e[0]){Pe.currentBranch;const e=r.messageDelay,t=Pe.currentNpc,a=Pe.returnFunction;g(Pe.parseDialogue(t.end),e,a)}break;case\"options\":s||(Object.keys(t.options).forEach((e,t)=>{h(`${t+1} - ${e}`)}),u(this.branchResponse));break;case\"conditional\":if(!s){const e=Pe.currentBranch.conditional;var l=void 0,c=!1;const t=n.player;Object.keys(e).forEach(a=>{if(!c){const o=a.split(\" \");switch(console.log(\"CHECKING THE FOLLOWING CONDITION\"),console.log(o),o[0]){case\"item:\":{const n=o[2],s=o[1];S(n,t.inventory)>=s&&(c=!0,l=e[a]);break}case\"level:\":{const n=o[1];t.level>=n&&(c=!0,l=e[a]);break}case\"flag:\":{console.log(`CHECKING FLAG CONDITION ${o[1]}`);var n=o[1],s=\"t\";\"-\"==o[1][0]&&(s=\"f\",n=n.slice(1));const t=m[n];console.log(\"LOGGING FLAG IN DATA\"),console.log(t),\"f\"==s&&0==t.complete?(c=!0,l=e[a]):\"t\"==s&&1==t.complete&&(c=!0,l=e[a]);break}}}}),console.log(`RESULT: ${c}`),c&&(Pe.currentBranch=l,Pe.runBranch(Object.keys(l)))}}}},branchResponse(){p(Pe.branchResponse);const e=f().toLowerCase(),t=Pe.currentBranch,a=Object.keys(t.options);if(\"Nan\"!=parseInt(e).toString()&&\"\"!=e)if(null!=a[e-1]){const n=a[e-1];Pe.currentBranch=t.options[n],Pe.runBranch(Object.keys(Pe.currentBranch))}else h(\"<br>Input out of range\"),u(Pe.branchResponse);else h(\"<br>Invalid input.\"),u(Pe.branchResponse)},parseDialogue:e=>(e.forEach(e=>{e[0]=e[0].replace(\"[name]\",`${Pe.currentNpc.name}`),e[0]=e[0].replace(\"[player]\",`${n.player.name}`),e[0]=\"<br>\"+e[0]}),e),end(){Pe.runBranch([\"end\"])}},Ae=e=>{Ee.returnFunction=e,n.first_time.settings&&(n.first_time.settings=!1,h(se.settingsIntroduction)),Ee.mainLoop()},Ee={returnFunction:void 0,mainLoop:()=>{h(`${ee}Currently in settings. You can do the following things:`),h(\"<br> - Change the message delay for battle and outside of battle (input 'md')\"),h(\"<br> - Change the input shortcut key ('ci')\"),h(\"<br> - Test your current message delay settings ('tc')\"),h(\"<br> - View or re-view any tutorial messages ('rv')\"),h(\"<br> - To save or reset your data, type 'save'.\"),_(Z),u(Ee.mainLoopResponse)},mainLoopResponse:()=>{switch(p(Ee.mainLoopResponse),f().toLowerCase()){case\"message delay\":case\"md\":Ee.messageDelayLoop();break;case\"change shortcut\":case\"ci\":Ee.changeShortcutLoop();break;case\"test message\":case\"tc\":Ee.testMessageLoop();break;case\"sa\":case\"save\":Ee.saveLoop();break;case\"rv\":case\"tutorials\":Ee.tutorialLoop();break;case\"b\":case\"back\":h(`${ee}Returning...`),Ee.returnFunction();break;default:h(`${ee}Invalid input.`),_(Z),u(Ee.mainLoopResponse)}},tutorialLoop:()=>{h(`${ee}Currently in the tutorial menu. State a topic to view the corresponding tutorial:`),h(\" - Gamestart\"),h(\" - Explore\"),h(\" - Shop\"),h(\" - Equip\"),h(\" - Stats\"),h(\" - Crafting\"),h(\" - Settings\"),h(\" - Combat\"),h(\" - Combat-complex\"),_(X),u(Ee.tutorialLoopResponse)},tutorialLoopResponse:()=>{p(Ee.tutorialLoopResponse);const e=f().toLowerCase();switch(e){case\"gamestart\":h(se.gameIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"explore\":h(se.exploreIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"shop\":h(se.shopIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"equip\":h(se.equipIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"stats\":h(se.statsIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"crafting\":h(se.craftingIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"settings\":h(se.settingsIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"combat\":h(se.combatIntroduction),_(X),u(Ee.tutorialLoopResponse);break;case\"combat-complex\":h(se.combatComplex),_(X),u(Ee.tutorialLoopResponse);break;case\"b\":case\"back\":h(`${ee}Returning...`),Ee.mainLoop();break;default:h(\"<br>Invalid input.\"),u(Ee.tutorialLoopResponse),\"b\"!=e&&\"back\"!=e&&h(\"<br>Currently in tutorial menu. Use inputshortcut to see your options.\")}},saveLoop:()=>{h(`${ee}Entering the save menu. Data saved can be loaded if you refresh the page, but`+\" not if you clear the cache or restart your device. Saving will overwrite previously saved data. Type 's'/'save' to save, and 'r'/'reset' to reset your data.\"),_([\"save\",\"load\",\"back\"]),u(Ee.saveLoopResponse)},saveLoopResponse:()=>{switch(p(Ee.saveLoopResponse),f().toLowerCase()){case\"s\":case\"save\":h(`${ee}Saved data. Returning...`),Te(\"save1\",n),Me(\"save1\",r),Oe(\"save1\",m),Le(\"save1\",d),Ee.mainLoop();break;case\"r\":case\"reset\":h(`${ee}Data reset. Refresh the page to restart.`),localStorage.clear(),Ee.mainLoop();break;case\"b\":case\"back\":h(`${ee}Returning...`),Ee.mainLoop();break;default:h(\"<br>Invalid input.\"),u(Ee.saveLoopResponse);case!0:E(n.player)}},testMessageLoop:()=>{h(`${ee}Four messages of different length will play in order to show you approximately\\n        the speed of the text in the settings you have selected. Please choose whether you would like to test your battle\\n        display speed or your display speed outside of battle.`),h(\"<br>Please type 'ba'/'battle' to see text speed in battle and 'ou'/'outside' to see text speed outside of battle.\"),h(`<br>Your battle message delay is currently ${r.battleMessageDelay} seconds.`),h(`<br>Your general message delay is currently ${r.messageDelay} seconds.`),_([\"battle\",\"outside\",\"back\"]),u(Ee.testMessage)},testMessage:()=>{p(Ee.testMessage);var e=!1,t=\"outside\";switch(f().toLowerCase()){case\"ba\":case\"battle\":e=!0,t=\"battle\";break;case\"ou\":case\"outside\":e=!0,t=\"outside\";break;case\"b\":case\"back\":e=!1,h(`${ee}Returning...`),Ee.mainLoop();break;default:h(\"<br>Invalid input.\"),u(Ee.testMessage)}if(e){g([[\"This is a short message. Hi!\",.5],[\"This message is a little bit longer... Hello there. Lovely weather today.\",1],[\"This message is pretty long. Longer than the previous, and the one before it. Memento mori. Praise the sun? Weather is ok.\",1.5],[\"This is the longest message in this test. I hope you enjoy reading this one. Um. Have you seen Vinland Saga? It's a pretty good anime. I'd watch it if I were you. Or don't, I don't really care.\",3]],t,Ee.postTestMessage)}},postTestMessage:()=>{h(`${ee}Message testing has concluded. Returning...`),Ee.mainLoop()},changeShortcutLoop:()=>{h(`${ee}Currently changing the input shortcut toggle key. Because most of the keyboard is`+\" required for gameplay, there are a limited number of keys that can be used. Input the name of a key as seen to change input shortcut to that key:\"),h(\"<br>\"),Object.keys(ne).forEach(e=>{h(` - ${e}`)}),h(`<br>Your current key is ${ne[r.toggleShortcut]}`),_([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"AltLeft\",\"AltRight\",\"¬\",\"back\"]),u(Ee.changeShortcutResponse)},changeShortcutResponse:()=>{p(Ee.changeShortcutResponse);const e=A(f().toLowerCase());-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(h(`${ee}Input shortcut toggle changed to <b>${e}</b>.`),r.toggleShortcut=e,_([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),u(Ee.changeShortcutResponse)):\"Back\"==e||\"B\"==e?(h(`${ee}Returning...`),Ee.mainLoop()):(h(\"<br>Invalid input\"),_([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),u(Ee.changeShortcutResponse))},messageDelayLoop:()=>{h(`${ee}There are two types of message delay you can change. Would you like to change`+\" the message delay in battle or outside of battle?\"),h(\"<br>Type 'ba'/'battle' to change the message delay in battle and 'ou'/'outside' to change the message delay outside of battle.\"),h(`<br>Your battle message delay is currently ${r.battleMessageDelay} seconds.`),h(`<br>Your general message delay is currently ${r.messageDelay} seconds.`),_([\"battle\",\"outside\",\"back\"]),u(Ee.messageDelayResponse)},messageDelayResponse:()=>{switch(p(Ee.messageDelayResponse),f().toLowerCase()){case\"ba\":case\"battle\":Ee.battleMessageDelayLoop();break;case\"ou\":case\"outside\":Ee.outsideMessageDelayLoop();break;case\"b\":case\"back\":h(`${ee}Returning...`),Ee.mainLoop();break;default:h(\"<br>Invalid input.\"),_([\"battle\",\"outside\",\"back\"]),u(Ee.messageDelayResponse)}},battleMessageDelayLoop:()=>{const e=te;h(`${ee}Currently changing battle message delay loop. You can type any integer from 0-9, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),u(Ee.battleMessageDelayResponse)},battleMessageDelayResponse:()=>{p(Ee.battleMessageDelayResponse);const e=f().toLowerCase(),t=te;switch(!0){case\"s\"==e||\"slow\"==e:{const e=t.slow;r.battleMessageDelay=e,h(`${ee}Changed battle message delay to ${e} seconds.`),u(Ee.battleMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=t.medium;r.battleMessageDelay=e,h(`${ee}Changed battle message delay to ${e} seconds.`),u(Ee.battleMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=t.fast;r.battleMessageDelay=e,h(`${ee}Changed battle message delay to ${e} seconds.`),u(Ee.battleMessageDelayResponse);break}case\"NaN\"!=parseInt(e).toString():{const t=parseInt(e);t<10&&t>=0?(r.battleMessageDelay=t,h(`${ee}Changed battle message delay to ${t} seconds.`)):h(\"<br>That number is out of range!\"),u(Ee.battleMessageDelayResponse);break}case\"b\"==e||\"back\"==e:h(`${ee}Returning...`),Ee.messageDelayLoop();break;default:h(\"<br>Invalid input.\"),u(Ee.battleMessageDelayResponse)}},outsideMessageDelayLoop:()=>{const e=ae;h(`${ee}Currently changing outside message delay. You can type any integer from 0-9, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),u(Ee.outsideMessageDelayResponse)},outsideMessageDelayResponse:()=>{p(Ee.outsideMessageDelayResponse);const e=f().toLowerCase(),t=ae;switch(!0){case\"s\"==e||\"slow\"==e:{const e=t.slow;r.messageDelay=e,h(`${ee}Changed message delay to ${e} seconds.`),u(Ee.outsideMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=t.medium;r.messageDelay=e,h(`${ee}Changed message delay to ${e} seconds.`),u(Ee.outsideMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=t.fast;r.messageDelay=e,h(`${ee}Changed message delay to ${e} seconds.`),u(Ee.outsideMessageDelayResponse);break}case\"NaN\"!=parseInt(e).toString():{const t=parseInt(e);t<10&&t>=0?(r.messageDelay=t,h(`${ee}Changed message delay to ${t} seconds.`)):h(\"<br>That number is out of range!\"),u(Ee.outsideMessageDelayResponse);break}case\"b\"==e||\"back\"==e:h(`${ee}Returning...`),Ee.messageDelayLoop();break;default:h(\"<br>Invalid input.\"),u(Ee.outsideMessageDelayResponse)}}},Te=(e,t)=>{localStorage.setItem(e+\"Player\",JSON.stringify(t))},Me=(e,t)=>{localStorage.setItem(e+\"Settings\",JSON.stringify(t))},Le=(e,t)=>{localStorage.setItem(e+\"Disciplines\",JSON.stringify(t))},Oe=(e,t)=>{localStorage.setItem(e+\"Flags\",JSON.stringify(t))},Re=(e,t)=>{Object.keys(e).forEach(a=>{null!=t[a]&&(!L(e[a])||Array.isArray(e[a])?e[a]=t[a]:Re(e[a],t[a]))})},Ce=(e,t)=>{Object.keys(e).forEach(a=>{null!=t[a]&&(\"unlocked\"==a||\"visible\"==a||\"complete\"==a?e[a]=t[a]:L(e[a])&&Re(e[a],t[a]))})};setInterval(()=>{Te(\"save1\",n),Me(\"save1\",r),Oe(\"save1\",m),Le(\"save1\",d),h('<span style=\"color: gold\">Data saved</span>')},3e4);const qe={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"slime\",60],[\"grey_wolf\",35],[\"wayward_traveler\",5]],finds:[[\"slime_ball\",65,1,3],[\"grey_wolf_pelt\",30,1,1],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[],interacts:[]},De={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"greater_slime\",40],[\"lesser_water_klastera\",30],[\"young_water_lizard\",30]],finds:[[\"slime_ball\",40,2,5],[\"weak_membrane\",20,1,2],[\"tiny_lizard_tail\",20,1,1],[\"aquus_cluster\",17,1,2],[\"water_orb\",3,1,1]],ambushes:[[\"greater_slime\",15],[\"lesser_water_klastera\",15]],interacts:[]},Be={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"red_slime\",35,!0],[\"venomous_wolf\",30,!0],[\"grey_wolf\",25,16],[\"dark_beast\",10,!0]],finds:[[\"red_slime_ball\",40,3,4],[\"grey_wolf_pelt\",30,2,4],[\"sharp_claw\",20,1,1],[\"shadow_pelt\",10,2,3]],ambushes:[[\"grey_wolf\",15,16],[\"venemous_wolf\",15,!0],[\"red_slime\",15,!0]],interacts:[]},je={explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]],interacts:[]},Fe={1:\"floor1\"},Ne={currentZone:void 0,currentRoom:void 0,justEnteredRoom:!0,ambushed:!1,roomLoop:()=>{var e=!1;if(0==Ne.ambushed){Ne.ambushed=!0;const s=Ne.currentRoom.ambushes,o=Math.floor(100*Math.random());var t=0;for(t in s){const r=0==t?0:s[t-1][1];if(o>r&&o<=s[t][1]+r){e=!0,h(`${ee}AMBUSH!!`);const o=B[s[t][0]];var a=!0;null!=s[t][2]&&(a=s[t][2]),N.battleProcessing(n.player,o,Ne.roomLoop,a)}}}e||(Ne.roomLoop2(Ne.justEnteredRoom),u(Ne.roomResponse))},roomLoop2:(e=!1)=>{const t=Ne.currentRoom;e&&h(`${ee}${t.entrance}`),Ye.forEach(e=>{h(e)}),t.extraOptions.forEach(e=>{h(e)}),Ne.justEnteredRoom=!1,u(Ne.roomResponse)},roomResponse:()=>{p(Ne.roomResponse);const e=f().toLowerCase(),t=Ne.currentRoom;switch(!0){case\"e\"==e:case\"explore\"==e:{const e=t.explores,r=Math.floor(100*Math.random());console.log(`Random is ${r}`);var a=0;for(a in e){const i=0==a?0:e[a-1][1];if(r>=i&&r<=e[a][1]+i)if(\"encounter\"==e[a][0]){a=0;const e=t.encounters,r=Math.floor(100*Math.random());var s=0;for(a in console.log(`Encounter random is ${r}`),e){if(r>(s+=0==a?0:e[a-1][1])&&r<=e[a][1]+s){h(\"<br>You survey the area....\"),h(\"<br>An enemy approaches!\");const t=B[e[a][0]];var o=!0;console.log(`encounters s d  d ${e[a][2]}`),null!=e[a][2]&&(o=e[a][2]),N.battleProcessing(n.player,t,Ne.roomLoop,o);break}}}else if(\"find\"==e[a][0]){a=0;const e=t.finds,n=Math.floor(100*Math.random());s=0;for(a in console.log(`Find random is ${n}`),e){if(n>(s+=0==a?0:e[a-1][1])&&n<=e[a][1]+s){h(\"<br>You survey the area....\"),h(\"<br>You find something while looking around!\"),null!=e[a][3]?w(e[a][0],e[a][2],e[a][3]):w(e[a][0]);break}}u(Ne.roomResponse)}}break}case\"i\"==e:case\"inventory\"==e:G(Ne.roomLoop);break;case\"st\"==e:case\"stats\"==e:re(Ne.roomLoop);break;case\"set\"==e:case\"settings\"==e:Ae(Ne.roomLoop);break;case\"c\"==e:case\"crafting\"==e:$e(Ne.roomLoop);break;case null!=Ne.currentRoom.interacts[parseInt(e-1)]:r=Ne.currentRoom.interacts[parseInt(e-1)],i=Ne.roomLoop,Pe.initNpc(r,i);break;case\"leave\"==e:h(\"<br>Leaving area...\"),Ne.currentZone=void 0,Ne.currentRoom=void 0,Ne.justEnteredRoom=!0,We();break;case\"s\"==e:case\"south\"==e:\"nothing\"==Ne.currentRoom.south?(h(\"<br>There is nothing in that direction.\"),Ne.roomLoop()):g([[\"<br>You travel to the south...\",1]],\"outside\",()=>{Ne.currentRoom=Ne.currentZone[Ne.currentRoom.south],Ne.justEnteredRoom=!0,Ne.ambushed=!1,Ne.roomLoop()});break;case\"n\"==e:case\"north\"==e:\"nothing\"==Ne.currentRoom.north?(h(\"<br>There is nothing in that direction.\"),Ne.roomLoop()):g([[\"<br>You travel to the north...\",1]],\"outside\",()=>{Ne.currentRoom=Ne.currentZone[Ne.currentRoom.north],Ne.justEnteredRoom=!0,Ne.ambushed=!1,Ne.roomLoop()});break;case\"l\"==e:case\"left\"==e:\"nothing\"==Ne.currentRoom.left?(h(\"<br>There is nothing in that direction.\"),Ne.roomLoop()):g([[\"<br>You travel to the west...\",1]],\"outside\",()=>{Ne.currentRoom=Ne.currentZone[Ne.currentRoom.left],Ne.justEnteredRoom=!0,Ne.ambushed=!1,Ne.roomLoop()});break;case\"r\"==e:case\"right\"==e:\"nothing\"==Ne.currentRoom.right?(h(\"<br>There is nothing in that direction.\"),Ne.roomLoop()):g([[\"<br>You travel to the east..\",1]],\"outside\",()=>{Ne.currentRoom=Ne.currentZone[Ne.currentRoom.right],Ne.justEnteredRoom=!0,Ne.ambushed=!1,Ne.roomLoop()});break;default:h(\"Invalid input\"),u(Ne.roomResponse)}var r,i;E(n.player)}},He={floor1:{start:{entrance:\"Copious green grass stretches in all directions. Although in some places it is flattened and twisted, the lively shade stays consistent as far as the eye can see - or at least as far as the shadows of the trees will allow you to perceive. Overhead are fairly large arborous towers, high enough to not be an obstruction but still low enough to touch. The profuse branches stretching out from them from which swathes of leaves emerge blot out enough light for the shades of green covering the floor to be cloaked in shadow, but not enough to inhibit vision a fair distance away. In the northeast, the faint splashing of water can be heard. To the northwest, a murmur of human voices and ocassinal glimmers of movements inbetween the labrynthine trunks. In southeast, the trees grow visibly darker and more ominous, however from both that direction and the southeast, where the trees seem to begin to fade at a point into a clearing that is no brighter, no sound can be heard. However, you note that from all four directions there is some indication of a different envrionment to the one you are currently standing in. This area, whatever it contains, must be quite small.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:[\"f1_worried_woman\"],left:\"nothing\",right:\"forest_d\",north:\"forest_b\",south:\"forest_f\"},forest_a:{entrance:\"Straight ahead, a clearing can be seen with some small basic buildings. Besides that, the environment is unchanged. There is a kid nearby leaning on a tree. He looks preoccupied staring at his hands.\",extraOptions:[\"1 - Speak to kid\"],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:[\"f1_rude_kid\"],left:\"nothing\",right:\"forest_b\",north:\"settlement_d\",south:\"forest_c\"},forest_b:{entrance:\"The sound of water splashing is considerably stronger and to the right. Human sounds are also faintly stronger and coming in from the opposite direction. Straight ahead, the path seems slightly more dangerous. To the opposite direction of the human sounds, you notice a somewhat small statue.\",extraOptions:[\"1 - Check out small statue\"],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:[\"f1_wanderer_statue\"],left:\"forest_a\",right:\"watery_g\",south:\"start\",north:\"forest_l\"},forest_c:{entrance:\"In this direction, most sounds have faded save from the faint human noises. To the south-west however, some extremely faint chattering and the shifting of rock can be heard.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:qe.interacts,left:\"nothing\",right:\"nothing\",south:\"forest_e\",north:\"forest_a\"},forest_d:{entrance:\"Splashing can be heard to the north, and below your feet you can feel the ground growing softer and slightly mushy.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:qe.interacts,left:\"start\",right:\"nothing\",south:\"forest_g\",north:\"watery_g\"},forest_e:{entrance:\"There is a slightly insidious aspect to the chattering noises emerging fom the west. Slightly ahead, the forebodign sound of the stealthy movement of an assortment of creatures can be heard.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:qe.interacts,left:\"forest_k\",right:\"nothing\",south:\"nothing\",north:\"forest_c\"},forest_f:{entrance:\"Sounds from the east and west meld together into a calm cacophony. The ground is somewhat stale compared to the relatively lively earth to the north. There is a young girl sitting by a tree, humming to herself.\",extraOptions:[\"1 - Speak to little girl\"],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:[\"f1_little_girl\"],left:\"nothing\",right:\"forest_g\",south:\"nothing\",north:\"start\"},forest_g:{entrance:\"It is difficult to explain the feeling that emanates from the south. A foreboding aura of stifling baleful intent overwhelms one's senses. This feeling, enhanced by the sound of low howls and growls makes it uncomfortable to proceed any further.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:qe.interacts,left:\"forest_f\",right:\"nothing\",south:\"forest_h\",north:\"forest_d\"},forest_h:{entrance:\"The feeling grows. From all directions except north, there is a feeling that one is in great danger. There is a man nearby , knelt over doing something. His back is to you, so you can't exactly see what it is.\",extraOptions:[\"1 - Speak to man\"],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:[[\"grey_wolf\",70]],interacts:[\"f1_wolf_man\"],left:\"nothing\",right:\"forest_i\",south:\"forest_j\",north:\"forest_g\"},forest_i:{entrance:\"The air is stifling and although the grass appears more dead, its increased length makes it feel as though tendrils are wrapping around your feet. The trees have grown a darker shade of green, with some adopting faint dark purple hues.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:qe.interacts,left:\"forest_h\",right:\"nothing\",south:\"darkforest_a\",north:\"nothing\"},forest_j:{entrance:\"The air feels poisonous and although the grass appears more dead, its increased length makes it feel as though tendrils are wrapping around your feet. The trees have grown a darker shade of green, with some adopting faint dark purple hues.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:qe.ambushes,interacts:qe.interacts,left:\"nothing\",right:\"darkforest_a\",south:\"darkforest_b\",north:\"forest_h\"},forest_k:{entrance:\"It is clear there is great danger if one continues to the southwest. Despite this, the aura feels devoid of emotion or baleful intent. There is a low droning reminiscent of the shifting and sliding of stone, and faint chattering.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:[[\"grey_wolf\",80]],interacts:qe.interacts,left:\"forestruins_b\",right:\"forest_e\",south:\"forestruins_c\",north:\"nothing\"},forest_l:{entrance:\"The forest is beginning to give way to a more watery environment. There are a few slimes here; the thin light diffusing in their translucent bodies makes them appear slightly beautiful. They seem to be minding their own business.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:[[\"slime\",30],[\"grey_wolf\",30]],interacts:qe.interacts,left:\"settlement_a\",right:\"nothing\",south:\"forest_b\",north:\"forest_m\"},forest_m:{entrance:\"The earth to the east is a little marshy, but in general, the ground here feels good to tread upon. Not for to both the east and west there are clearings, however to the west there seems to be some kind of small settlement and to the east, a watery plain. Considerable danger can be sensed to the east.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:[[\"slime\",50],[\"grey_wolf\",50]],interacts:qe.interacts,left:\"settlement_b\",right:\"forest_n\",south:\"forest_l\",north:\"nothing\"},forest_n:{entrance:\"There is less water below and more marsh, however there is a clear gradient to the east of a more dry area littered with puddles. The sheleter of the forest trees have also eased up, giving way to a bright clearing up ahead. There are a few slimes littered about the area, but they seem to be minding their own business.\",extraOptions:[\"1 - Interact with docile slime\"],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:[[\"greater_slime\",80]],interacts:[\"f1_docile_slime\"],left:\"forest_m\",right:\"watery_b\",south:\"nothing\",north:\"forest_o\"},forest_o:{entrance:\"The area is slightly marshy, however there is a clear gradient to the east of a more dry area littered with puddles. The sheleter of the forest trees have also eased up greatly, giving way to a bright clearing up ahead.\",extraOptions:[],explores:qe.explores,encounters:qe.encounters,finds:qe.finds,ambushes:[[\"greater_slime\",80]],interacts:qe.interacts,left:\"nothing\",right:\"watery_a\",south:\"forest_n\",north:\"nothing\"},watery_a:{entrance:\"The forest has fully given way to an open area - the sun's light directly incident on the grass below grants it a brighter green hue which along with the frequent and reflectant pools of water give the area an idyllic appearance despite the constant puddles. Straight onwards is a large expanse of water, and to the south you can see more space similar to that which you are currently standing on, although you cannot reach it due to an impassable river blocking the way.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"forest_o\",right:\"watery_h\",south:\"nothing\",north:\"nothing\"},watery_b:{entrance:\"The forest has fully given way to an open area - the sun's light directly incident on the grass below grants it a brighter green hue which along with the frequent and reflectant pools of water give the area an idyllic appearance despite the constant puddles. Straight onwards is a large expanse of water, and to the north you can see more space similar to that which you are currently standing on, although you cannot reach it due to an impassable river blocking the way. However to the north and east, a fair amount of the plains seems very reachable.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"forest_n\",right:\"watery_i\",south:\"watery_c\",north:\"nothing\"},watery_c:{entrance:\"Unlike the forest, which had a constantly shifting atmosphere dependent on the sway of the leaves above the open space ahead of you has an unchanging demeanour, the same as all directions. An opening returning to the forest can be seen to the south-west.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"nothing\",right:\"watery_d\",south:\"watery_f\",north:\"watery_b\"},watery_d:{entrance:\"A large sea, forbidding in spite of its tranquility blocks any further advance east.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"watery_c\",right:\"nothing\",south:\"watery_e\",north:\"watery_i\"},watery_e:{entrance:\"A large sea, forbidding in spite of its tranquility blocks any further advance to the east or south.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"watery_f\",right:\"nothing\",south:\"nothing\",north:\"watery_d\"},watery_f:{entrance:\"The forest can be seen to the west. In the other direction, a vast, unmoving sea.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"watery_g\",right:\"watery_e\",south:\"nothing\",north:\"watery_c\"},watery_g:{entrance:\"The grass is less mushy and more firm, although patches of (now brighter) greenery and punctuated fairly heavily with frequent puddles. However even they, in their still clarity look somewhat inviting. The lack of cover from the sun allows the ensuing landscape to be seen in all its pictureque glory - although, characteristic of a painting, the unvenetful-looking plains is invariant to the north and east.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"forest_b\",right:\"watery_f\",south:\"forest_d\",north:\"nothing\"},watery_h:{entrance:\"A forbidding sea stands before you. There is something oppressive about it's obstinate silence.\",extraOptions:[],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:De.interacts,left:\"watery_a\",right:\"nothing\",south:\"nothing\",north:\"nothing\"},watery_i:{entrance:\"A silent barrier of hue comparable to the sky is present directly to the east. There is little to do except to turn back and observe the occasional creature roaming the area, and... an old man?\",extraOptions:[\" 1 - Talk to old man\"],explores:De.explores,encounters:De.encounters,finds:De.finds,ambushes:De.ambushes,interacts:[\"f1_old_man\"],left:\"watery_b\",right:\"nothing\",south:\"watery_d\",north:\"nothing\"},darkforest_a:{entrance:\"The forest continues its descent along a gradient towards a move evil look. Grass length is inconsistent but actually a bit lower than before. The trees seem to be growing larger, and the leaves are becoming purple and in some cases black. Any movement in thickets previously heard has become much quieter.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"forest_j\",right:\"nothing\",south:\"darkforest_c\",north:\"forest_i\"},darkforest_b:{entrance:\"There is an oppressive silence in the area that compels one not to make involuntary noise, even though there are no apparent signs of danger. Only the tiniest amount of light is allowed through the labrynthine cloud of foliage supported by blackened or very dark brown trunks.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"nothing\",right:\"nothing\",south:\"darkforest_e\",north:\"forest_j\"},darkforest_c:{entrance:\"The grass is short and almost black. There are no outbursts of verdant life like foliage. Only the constant great trees plotted about the area keep it from being a flat plain. There is a kid nearby, who looks preoccupied but is clearly doing nothing.\",extraOptions:[\"1 - Speak to kid\"],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:[\"f1_little_boy\"],left:\"nothing\",right:\"darkforest_d\",south:\"darkforest_f\",north:\"darkforest_a\"},darkforest_d:{entrance:\"There is no mist but the atmosphere is stifling. Even the sound of your breath is noticeable.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"darkforest_c\",right:\"nothing\",south:\"nothing\",north:\"nothing\"},darkforest_e:{entrance:\"The area is relatively open with room for manoeuvre in all cardinal directions.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"darkforest_k\",right:\"darkforest_f\",south:\"darkforest_h\",north:\"darkforest_b\"},darkforest_f:{entrance:\"Despite the area being a relatively open space, one feels inclined to stay still and not move, lest they accidentally observe the perfect silence being observed. It is almost serene, however the simultaneously apparent and invisible danger ruins any notion of peace.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"darkforest_e\",right:\"darkforest_g\",south:\"darkforest_i\",north:\"darkforest_c\"},darkforest_g:{entrance:\"Besides the thick gathering of trees blotting out nearly all light, there is nothing in this area.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"darkforest_f\",right:\"nothing\",south:\"nothing\",north:\"nothing\"},darkforest_h:{entrance:\"Besides the thick gathering of trees blotting out a great deal of light, there is nothing in this area.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"nothing\",right:\"nothing\",south:\"nothing\",north:\"darkforest_e\"},darkforest_i:{entrance:\"Between this area, the previous and the next there is barely any noticeable difference. The unlife of leafage continues in all perceivable directions.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"nothing\",right:\"darkforest_j\",south:\"nothing\",north:\"darkforest_f\"},darkforest_j:{entrance:\"...\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"darkforest_i\",right:\"nothing\",south:\"nothing\",north:\"nothing\"},darkforest_k:{entrance:\"There seem to be far more purple leaves in this area. The stringent allowance of light passing through these leaves gives the area a light purple glow.\",extraOptions:[],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:Be.interacts,left:\"darkforest_l\",right:\"darkforest_e\",south:\"nothing\",north:\"nothing\"},darkforest_l:{entrance:\"Despite the lack of apparent life, the very short grass being tinted a faint purple, along with the extremely small allotment of white light in the space makes it appear relatively beautiful. There is a woman nearby, who, judging by her facial expression and the way she is looking back and forth, seems unsure about a lot of things.\",extraOptions:[\"1 - Speak to lost person\"],explores:Be.explores,encounters:Be.encounters,finds:Be.finds,ambushes:Be.ambushes,interacts:[\"f1_lost_person\"],left:\"forestruins_e\",right:\"darkforest_k\",south:\"nothing\",north:\"nothing\"},settlement_a:{entrance:\"There is a somewhat idyllic atmosphere. The area is lined with small, basic houses. In front of one of the houses is a small stand, at which stands a blonde woman. From the sign on a banner atom the stand you infer that it is a small shop selling miscallaneous items.\",extraOptions:[\"1 - Misc shop\"],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:[\"f1_misc_shop\"],left:\"nothing\",right:\"settlement_b\",south:\"settlement_c\",north:\"nothing\"},settlement_b:{entrance:\"There are a few houses in this area, but mostly it is the beginning of a gradient into a small village settlement. There is little of note, however the complete absence of trees overhead lets one appreciate the brightness and warmth of the sun.\",extraOptions:[],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:[],left:\"settlement_a\",right:\"forest_m\",south:\"settlement_d\",north:\"nothing\"},settlement_c:{entrance:\"This section of the settlement has a clearly commerical vibe, with what looks like a weapons vendor and armour vendor, judging by the various items next to their stalls. There are a few items but it can be inferred that it is mostly artisans and dealers residing in this section.\",extraOptions:[\"1 - Weapons shop\",\"2 - Armour shop\"],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:[\"f1_weapons_shop\",\"f1_armour_shop\"],left:\"nothing\",right:\"settlement_d\",south:\"nothing\",north:\"settlement_a\"},settlement_d:{entrance:\"There was a good distance to walk between where you are now and the forest area, but there is still some foliage around this point. It seems to serve more as a transition into the settlement as opposed to being a part of the settlement itself. However, there are a small number of houses , increasing in frequency as one looks to the west.\",extraOptions:[],explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:[],left:\"settlement_c\",right:\"nothing\",south:\"forest_a\",north:\"settlement_b\"}}},Ye=[`${ee} - e/Explore`,\" - l/left\",\" - r/right\",\" - n/north\",\" - s/south\",\" - i/inventory\",\" - st/Stats\",\" - c/crafting\",\" - set/settings\",\" - Leave\"];a.d(t,\"mainLoop\",(function(){return We}));const We=()=>{N.heal(n.player.stats),h(`${ee}You are currently on floor ${n.current_floor}`);const e={...n.player};e.stats=N.getPlayerAdd(e.stats),W(e),J(n.player),_([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),u(Ue)},ze=()=>{p(ze),name=f(),n.player.name=name,[\"wolfhide_armour\",\"wolfhide_cap\",\"wolfhide_leggings\",\"slime_bracers\",\"slime_reinforced_sword\",\"wolfhide_charm\",\"lizard_bracelet\",\"aquus_orb\",\"water_infused_armour\",\"water_infused_helm\",\"water_infused_legwear\",\"luminant_charm\",\"wolfhide_dagger\",\"tear_of_lucia\",\"pickaxe\",\"makeshift_steel_armour\",\"makeshift_steel_helm\",\"makeshift_steel_legwear\",\"red_slime_bracers\",\"shinobi_armour\",\"shinobi_headcloak\",\"shinobi_leggings\",\"earthen_sword\",\"makeshift_sword\",\"wolven_reavers\",\"shadow_cloak\",\"bladed_armour\"].forEach(e=>{console.log(e),null!=ve[e]?(n.player.recipes.push(e),h(`<br>Unlocked recipe [${ve[e].name}]`)):console.log(\"recipe does not exist\")}),Ge()},Ge=()=>{h(`${name}? That's a nice name. Nice to meet you!`);const e=[[\"Starting game...\",0],[se.gameIntroduction,0]];g(e,\"outisde\",We)},Ue=()=>{p(Ue);const e=f().toLowerCase();if(\"ascend\"==e.toLowerCase()){const e=B[o.boss];console.log(e.name),N.battleProcessing(n.player,e,We)}else if(\"equip\"==e||\"eq\"==e)G(We);else if(\"stats\"==e||\"st\"==e)re(We);else if(\"explore\"==e||\"ex\"==e){((e,t=\"start\")=>{Ne.currentZone=He[e],Ne.currentRoom=Ne.currentZone[t],n.first_time.explore&&(n.first_time.explore=!1,h(se.exploreIntroduction)),Ne.roomLoop()})(Fe[n.current_floor])}else if(\"shop\"==e||\"sh\"==e){const e=_e[n.current_floor];be(e,We)}else\"crafting\"==e||\"c\"==e?$e(We):\"settings\"==e||\"se\"==e?Ae(We):\"gold\"==e?(n.player.gold=9999999999,_([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),u(Ue),E(n.player)):\"lv\"==e?(n.player.exp=i[n.player.level],H(),_([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),u(Ue)):\"gold\"==e?(n.player.gold=99999999999,_([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),u(Ue)):\"battle\"==e?N.battleProcessing(n.player,B.dark_beast,We):(h(\"<br>Invalid input\"),_([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),u(Ue))};h(\"Welcome to Tower RPG!\"),null==localStorage.getItem(\"save1Player\")?(h(\"Please enter your name\"),u(ze)):((e=>{const t=n,a=JSON.parse(localStorage.getItem(e+\"Player\"));console.log(a),Re(t,a),E(n.player)})(\"save1\"),(e=>{const t=r,a=JSON.parse(localStorage.getItem(e+\"Settings\"));Re(t,a),E(n.player)})(\"save1\"),(e=>{const t=m,a=JSON.parse(localStorage.getItem(e+\"Flags\"));Re(t,a),E(n.player)})(\"save1\"),(e=>{const t=d,a=JSON.parse(localStorage.getItem(e+\"Disciplines\"));Ce(t,a),E(n.player)})(\"save1\"),We())}]);","extractedComments":[]}