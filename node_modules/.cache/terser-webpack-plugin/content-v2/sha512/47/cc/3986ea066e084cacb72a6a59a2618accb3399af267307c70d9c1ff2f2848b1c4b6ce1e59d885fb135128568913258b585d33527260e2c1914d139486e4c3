{"code":"!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&t&&\"string\"!=typeof e)for(var s in e)a.d(n,s,function(t){return e[t]}.bind(null,s));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,\"a\",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p=\"\",a(a.s=5)}([function(e,t,a){(function(e){function a(e,t){for(var a=0,n=e.length-1;n>=0;n--){var s=e[n];\".\"===s?e.splice(n,1):\"..\"===s?(e.splice(n,1),a++):a&&(e.splice(n,1),a--)}if(t)for(;a--;a)e.unshift(\"..\");return e}function n(e,t){if(e.filter)return e.filter(t);for(var a=[],n=0;n<e.length;n++)t(e[n],n,e)&&a.push(e[n]);return a}t.resolve=function(){for(var t=\"\",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var r=o>=0?arguments[o]:e.cwd();if(\"string\"!=typeof r)throw new TypeError(\"Arguments to path.resolve must be strings\");r&&(t=r+\"/\"+t,s=\"/\"===r.charAt(0))}return(s?\"/\":\"\")+(t=a(n(t.split(\"/\"),(function(e){return!!e})),!s).join(\"/\"))||\".\"},t.normalize=function(e){var o=t.isAbsolute(e),r=\"/\"===s(e,-1);return(e=a(n(e.split(\"/\"),(function(e){return!!e})),!o).join(\"/\"))||o||(e=\".\"),e&&r&&(e+=\"/\"),(o?\"/\":\"\")+e},t.isAbsolute=function(e){return\"/\"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e})).join(\"/\"))},t.relative=function(e,a){function n(e){for(var t=0;t<e.length&&\"\"===e[t];t++);for(var a=e.length-1;a>=0&&\"\"===e[a];a--);return t>a?[]:e.slice(t,a-t+1)}e=t.resolve(e).substr(1),a=t.resolve(a).substr(1);for(var s=n(e.split(\"/\")),o=n(a.split(\"/\")),r=Math.min(s.length,o.length),i=r,l=0;l<r;l++)if(s[l]!==o[l]){i=l;break}var c=[];for(l=i;l<s.length;l++)c.push(\"..\");return(c=c.concat(o.slice(i))).join(\"/\")},t.sep=\"/\",t.delimiter=\":\",t.dirname=function(e){if(\"string\"!=typeof e&&(e+=\"\"),0===e.length)return\".\";for(var t=e.charCodeAt(0),a=47===t,n=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?a?\"/\":\".\":a&&1===n?\"/\":e.slice(0,n)},t.basename=function(e,t){var a=function(e){\"string\"!=typeof e&&(e+=\"\");var t,a=0,n=-1,s=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!s){a=t+1;break}}else-1===n&&(s=!1,n=t+1);return-1===n?\"\":e.slice(a,n)}(e);return t&&a.substr(-1*t.length)===t&&(a=a.substr(0,a.length-t.length)),a},t.extname=function(e){\"string\"!=typeof e&&(e+=\"\");for(var t=-1,a=0,n=-1,s=!0,o=0,r=e.length-1;r>=0;--r){var i=e.charCodeAt(r);if(47!==i)-1===n&&(s=!1,n=r+1),46===i?-1===t?t=r:1!==o&&(o=1):-1!==t&&(o=-1);else if(!s){a=r+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===a+1?\"\":e.slice(t,n)};var s=\"b\"===\"ab\".substr(-1)?function(e,t,a){return e.substr(t,a)}:function(e,t,a){return t<0&&(t=e.length+t),e.substr(t,a)}}).call(this,a(2))},function(e,t,a){\"use strict\";t.decode=t.parse=a(3),t.encode=t.stringify=a(4)},function(e,t){var a,n,s=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function i(e){if(a===setTimeout)return setTimeout(e,0);if((a===o||!a)&&setTimeout)return a=setTimeout,setTimeout(e,0);try{return a(e,0)}catch(t){try{return a.call(null,e,0)}catch(t){return a.call(this,e,0)}}}!function(){try{a=\"function\"==typeof setTimeout?setTimeout:o}catch(e){a=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var l,c=[],f=!1,d=-1;function m(){f&&l&&(f=!1,l.length?c=l.concat(c):d=-1,c.length&&h())}function h(){if(!f){var e=i(m);f=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function u(e,t){this.fun=e,this.array=t}function p(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new u(e,t)),1!==c.length||f||i(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title=\"browser\",s.browser=!0,s.env={},s.argv=[],s.version=\"\",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error(\"process.binding is not supported\")},s.cwd=function(){return\"/\"},s.chdir=function(e){throw new Error(\"process.chdir is not supported\")},s.umask=function(){return 0}},function(e,t,a){\"use strict\";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,a,o){t=t||\"&\",a=a||\"=\";var r={};if(\"string\"!=typeof e||0===e.length)return r;var i=/\\+/g;e=e.split(t);var l=1e3;o&&\"number\"==typeof o.maxKeys&&(l=o.maxKeys);var c=e.length;l>0&&c>l&&(c=l);for(var f=0;f<c;++f){var d,m,h,u,p=e[f].replace(i,\"%20\"),g=p.indexOf(a);g>=0?(d=p.substr(0,g),m=p.substr(g+1)):(d=p,m=\"\"),h=decodeURIComponent(d),u=decodeURIComponent(m),n(r,h)?s(r[h])?r[h].push(u):r[h]=[r[h],u]:r[h]=u}return r};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,t,a){\"use strict\";var n=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e:\"\";default:return\"\"}};e.exports=function(e,t,a,i){return t=t||\"&\",a=a||\"=\",null===e&&(e=void 0),\"object\"==typeof e?o(r(e),(function(r){var i=encodeURIComponent(n(r))+a;return s(e[r])?o(e[r],(function(e){return i+encodeURIComponent(n(e))})).join(t):i+encodeURIComponent(n(e[r]))})).join(t):i?encodeURIComponent(n(i))+a+encodeURIComponent(n(e)):\"\"};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};function o(e,t){if(e.map)return e.map(t);for(var a=[],n=0;n<e.length;n++)a.push(t(e[n],n));return a}var r=Object.keys||function(e){var t=[];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.push(a);return t}},function(e,t,a){\"use strict\";a.r(t);const n={player:{name:name,gold:100,exp:0,level:1,sp:0,ap:0,sp_investment:{health:0,mana:0,atk:0,def:0,matk:0,mdef:0,speed:0},stats:{health:60,current_health:60,max_sp:100,max_mana:100,current_mana:100,max_stamina:100,current_stamina:100,atk:30,def:30,matk:30,mdef:30,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100}},skills:[\"attack\",\"guard\"],equips:{weapon:void 0,head:void 0,body:void 0,legs:void 0,misc1:void 0,misc2:void 0},pouch:[]},inventory:[],library:[\"attack\",\"guard\"],recipes:[],maps:{floor1:[...Array(45)].map(e=>Array(40).fill(void 0))}},max_floor:1,current_floor:1,first_time:{explore:!0,equip:!0,stats:!0,crafting:!0,game:!0,combat:!0},version:.11},s=1,o={messageDelay:.8,battleMessageDelay:.6,toggleShortcut:\"\",scrollLimit:200,mainTextSize:\"17px\",miscTextSize:\"17px\",statsTextSize:\"16px\"},r={1:100,2:400,3:800,4:1100,5:1500,6:2e3,7:3e3,8:3500,9:4e3,10:4500,11:5e3,12:5500,13:6100,14:6700,15:7500,16:8500,17:9600,18:10700,19:12e3,20:14e3,21:16500,22:19e3,23:23e3,24:26e3,25:3e4},i={1:2,2:2,3:3,4:4,5:5,6:6,7:7,8:7,9:8,9:8,10:9,11:9,12:9,13:9,14:10,15:10,16:10,17:11,18:11,19:11,20:12,21:12,22:12,23:13,24:14,25:15},l=-99,c=500,f=3,d={adventurer:{name:\"adventurer\",requirements:{skills:[],level:1,flags:[]},cost:{gold:0,items:[]},skills:[{name:\"boost\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-0\",unlocked:!1,unlearnable:!0},{name:\"check\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:25,items:[],ap:1},code:\"adventurer-1\",unlocked:!1,unlearnable:!0},{name:\"brutal_swipe\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-2\",unlocked:!1,unlearnable:!0},{name:\"dagger_throw\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-3\",unlocked:!1,unlearnable:!0},{name:\"piercing_dagger_throw\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-4\",unlocked:!1,unlearnable:!0},{name:\"smokescreen\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:40,items:[],ap:2},code:\"adventurer-5\",unlocked:!1,unlearnable:!0},{name:\"hex\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:25,items:[],ap:1},code:\"adventurer-6\",unlocked:!1,unlearnable:!0}],unlocked:!0,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},mage:{name:\"mage\",desc:\"A magic-based discipline that has access to elemental attacks of the Fire, Water and Earth elements. Using one grants the user an 'elemental charge', which can be consumed using 'Enforce Energy' or 'Imbue Energy' in order to apply certain effects. Charges can be fused by using different elemental attacks while having certain charges already applied. By using skills in certain orders to create special charges, the mage can induce powerful effects and deal high damage.\",requirements:{skills:[],level:4,flags:[]},cost:{gold:100,items:[]},skills:[{name:\"fireball\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-0\",unlocked:!1,unlearnable:!0},{name:\"icebolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-1\",unlocked:!1,unlearnable:!0},{name:\"lesser_quake\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-2\",unlocked:!1,unlearnable:!0},{name:\"imbue_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-3\",unlocked:!1,unlearnable:!0},{name:\"enforce_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-4\",unlocked:!1,unlearnable:!0},{name:\"blood_pact\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:50,items:[],ap:2},code:\"mage-5\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},guardian:{name:\"guardian\",desc:\"A primarily defensive discipline that focuses on lasting and keeping itself alive with by increasing its defence, removing debuffs from themselves and removing buffs from the enemy. When needed, they can use the powerful 'Sentinel Blow'  which deals damage based on the user's defence stat instead of attack to deal high amounts of damage.\",requirements:{skills:[],level:4,flags:[]},cost:{gold:100,items:[]},skills:[{name:\"sentinel_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-0\",unlocked:!1,unlearnable:!0},{name:\"stalwart_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-1\",unlocked:!1,unlearnable:!0},{name:\"debilitate\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-2\",unlocked:!1,unlearnable:!0},{name:\"enduring_fortress\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-3\",unlocked:!1,unlearnable:!0},{name:\"sacred_shield\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-4\",unlocked:!1,unlearnable:!0},{name:\"guard_conversion\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:2},code:\"guardian-5\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},ninja:{name:\"ninja\",desc:\"Probably the most complex of the starter disciplines, the ninja uses skills that apply certain buffs and debuffs, which can be 'chained' into other skills while those buffs or debuffs are applied for special effects. When the ninja has applied a sufficient number of buffs or debuffs, they can fuse them into one powerful buff or debuff using the 'Enforce Infliction' and 'Imbue Infliction' skills, so that they can stack them all over again. 'Shadow Strike' serves as a powerful attack that when used right, can grant SP to further extend the user's turn to deal greater damage.\",requirements:{skills:[],level:4,flags:[]},cost:{gold:100,items:[]},skills:[{name:\"swift_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-0\",unlocked:!1,unlearnable:!0},{name:\"shinobi_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-1\",unlocked:!1,unlearnable:!0},{name:\"crippling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-2\",unlocked:!1,unlearnable:!0},{name:\"enfeebling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-3\",unlocked:!1,unlearnable:!0},{name:\"imbue_infliction\",requirements:{skills:[],level:3,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-4\",unlocked:!1,unlearnable:!0},{name:\"enforce_infliction\",requirements:{skills:[],level:4,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-5\",unlocked:!1,unlearnable:!0},{name:\"shadow_strike\",requirements:{skills:[],level:4,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:2},code:\"ninja-6\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!0,complete:!1,conditions:{level:1,discplines:[]}}},m={f1_spoken_to_tutorial_man:{desc:\"Speak to the tutorial man on floor one.\",complete:!1},beatSlime:{desc:\"Defeat the slime on floor one.\",complete:!1},f1_spoken_to_little_girl:{desc:\"Speak to a little girl on floor one about her slime problem.\",complete:!1},f1_helped_little_girl:{desc:\"Help a little girl on floor one with her slime problem.\",complete:!1},f1_spoken_to_docile_slime:{desc:\"Interact with a docile slime on floor one.\",complete:!1},f1_helped_docile_slime:{desc:\"Help a docile slime on floor one gather their bretheren.\",complete:!1},f1_spoken_to_rude_kid:{desc:\"Speak to a rude kid on floor one.\",complete:!1},f1_kicked_rude_kids_shin:{desc:\"Kick the shin of a rude kid on floor one.\",complete:!1},f1_extended_convo_with_rude_kid:{desc:\"Have an extended conversation with a rude kid on floor one.\",complete:!1},f1_spoken_to_little_boy:{desc:\"Speak to a young boy in the dark forest of floor one.\",complete:!1},f1_helped_little_boy:{desc:\"Help the young boy in the dark forest of floor one.\",complete:!1},f1_spoken_to_wanderer_collector:{desc:\"Speak to the collector of wanderer memorabilia on floor one.\",complete:!1},f1_helped_wanderer_collector:{desc:\"Help out the collector of wanderer memorabilia on floor one.\",complete:!1},f1_met_wanderer_at_statue:{desc:\"Meet a wanderer at the statue of Lucia, the Solace Goddess on floor one.\",complete:!1},f1_spoken_to_lost_teenager:{desc:\"Speak to a lost teenager in the forest on floor one.\",complete:!1},f1_spoken_to_traveller_woman:{desc:\"Speak to a travelling woman with a green backpack on floor one.\",complete:!1},f1_helped_alchemist_lady:{desc:\"Help an alchemist lady on floor one and in return, be taught how to make crafted health potions.\",complete:!1},f1_spoken_to_alchemist_lady:{desc:\"Speak to an alchemist lady on floor one.\",complete:!1},f1_gotten_beginner_recipes:{desc:\"Receive beginner recipes from the craftswomen in the settlement at floor one.\",complete:!1},f1_gotten_advanced_recipes:{desc:\"Received advanced recipes from the artisan in the settlement at floor one.\",complete:!1},f1_spoken_to_hermit:{desc:\"Speak to the travelling hermit on floor one.\",complete:!1},f1_spoken_to_person_looking_for_settlement:{desc:\"Speak to the person looking for the settlement on floor one.\",complete:!1},f1_helped_person_looking_for_settlement:{desc:\"Help the person looking for the settlement on floor one.\",complete:!1},f1_taken_crafted_sword:{desc:\"Successfully taken a crafted sword in the forest on floor one.\",complete:!1},f1_bought_from_teenage_mage:{desc:\"Buy a cheat sheet from a teenage mage on floor one.\",complete:!1},f1_spoken_to_forest_craftsman:{desc:\"Speak to the craftsman in the forest settlement on floor one.\",complete:!1},f1_spoken_to_aina:{desc:\"Speak to Aina in the forest settlement on the floor one\",complete:!1},f1_spoken_to_sora:{desc:\"Speak to Sora in the forest settlement on floor one.\",complete:!1},f1_spoken_to_daryl:{desc:\"Speak to the teenage mage in the forest area on floor one.\",complete:!1},f1_picked_up_hydra_staff:{desc:\"Pick up a hydra staff on floor one.\",complete:!1},f1_picked_up_crown_of_darkness:{desc:\"Pick up a crown of darkness on floor one.\",complete:!1},f1_picked_up_simple_sword:{desc:\"Pick up a simple sword on floor one.\",complete:!1},f1_picked_up_damaged_helm:{desc:\"Pick up a damaged helm on floor one.\",complete:!1},f1_picked_up_metal_stave:{desc:\"Pick up a metal stave on floor one.\",complete:!1},f1_picked_up_silver_axe:{desc:\"Pick up a silver axe on floor one.\",complete:!1},f1_picked_up_silver_dagger:{desc:\"Pick up a silver dagger on floor one.\",complete:!1},f1_picked_up_pickaxe:{desc:\"Pick up a pickaxe on floor one.\",complete:!1},f1_picked_up_feathervine_sword:{desc:\"Pick up a feathervine sword on floor one.\",complete:!1},f1_picked_up_silver_helm:{desc:\"Pick up a silver helm on floor one.\",complete:!1},f1_picked_up_wolfhide_cap:{desc:\"Pick up a wolfhide cap on floor one.\",complete:!1},f1_picked_up_vine_helmet:{desc:\"Pick up a vine helmet on floor one.\",complete:!1},f1_picked_up_ninja_headcloak:{desc:\"Pick up a ninja headcloak on floor one.\",complete:!1},f1_picked_up_makeshift_steel_armour:{desc:\"Pick up a makeshift steel armour on floor one.\",complete:!1},f1_picked_up_vine_armour:{desc:\"Pick up a vine armour on floor one.\",complete:!1},f1_picked_up_vine_pantaloons:{desc:\"Pick up a vine pantaloons on floor one.\",complete:!1},f1_picked_up_silver_legwear:{desc:\"Pick up a silver legwear on floor one.\",complete:!1},f1_picked_up_slime_ball:{desc:\"Pick up a slime ball on floor one.\",complete:!1},f1_picked_up_weak_vine:{desc:\"Pick up a weak vine on floor one.\",complete:!1},f1_picked_up_hempweed_ligament:{desc:\"Pick up a hempweed ligament on floor one.\",complete:!1},f1_picked_up_wood:{desc:\"Pick up a wood on floor one.\",complete:!1},f1_picked_up_steel:{desc:\"Pick up a steel on floor one.\",complete:!1},f1_picked_up_health_potion:{desc:\"Pick up a health potion on floor one.\",complete:!1},f1_picked_up_greater_health_potion:{desc:\"Pick up a greater health potion on floor one.\",complete:!1},f1_picked_up_crafted_health_potion:{desc:\"Pick up a crafted health potion on floor one.\",complete:!1},f1_picked_up_greater_mana_potion:{desc:\"Pick up a crafted mana potion on floor one.\",complete:!1},f1_picked_up_mana_potion:{desc:\"Pick up a mana potion on floor one.\",complete:!1},f1_picked_up_earthen_shield_potion:{desc:\"Pick up an earthen shield potion on floor one.\",complete:!1},f1_picked_up_brown_pelt:{desc:\"Pick up some brown pelt on floor one.\",complete:!1},f1_picked_up_venomous_claw:{desc:\"Pick up a venomous claw on floor one.\",complete:!1},f1_picked_up_crafted_mana_potion:{desc:\"Pick up a crafted mana potion on floor one.\",complete:!1},f1_picked_up_forest_explorer_daggers:{desc:\"Pick up a forest explorer daggers on floor one.\",complete:!1},f1_picked_up_forest_explorer_cap:{desc:\"Pick up a forest explorer cap on floor one.\",complete:!1},f1_picked_up_forest_explorer_armour:{desc:\"Pick up a forest explorer armour on floor one.\",complete:!1},f1_picked_up_forest_explorer_pants:{desc:\"Pick up a forest explorer pants on floor one.\",complete:!1},f1_picked_up_forest_explorer_pendant:{desc:\"Pick up a forest explorer pendant on floor one.\",complete:!1},f1_picked_up_forest_explorer_charm:{desc:\"Pick up a forest explorer charm on floor one.\",complete:!1}},h={mainBox:document.querySelector(\".main\"),main:document.querySelector(\".mainText\"),input:document.querySelector(\".main-input\"),form:document.querySelector(\".form-input\"),mainStats:document.querySelector(\"#mainstats\"),elementalStats:document.querySelector(\"#elemstats\"),playerStats:document.querySelector(\"#playerstats\"),inventory:document.querySelector(\"#inventory\"),minimap:document.querySelector(\"#minimapview\"),miscView:document.querySelector(\"#miscview\")},u=[\"skills\",\"sp\",\"back\"],p=[\"gamestart\",\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"combat\",\"combat-complex\",\"back\"],g=[\"message delay\",\"change shortcut\",\"test message\",\"tutorials\",\"save\",\"back\"],y=[\"explore\",\"shop\",\"inventory\",\"stats\",\"crafting\",\"settings\",\"ascend\"],_=[\"health\",\"mana\",\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"],b={none:\"#FFFFFF\",physical:\"#737373\",fire:\"#FF2D00\",water:\"#000FFF\",earth:\"#7F2C00\",thunder:\"#DAAB00\",dark:\"#2A003D\",light:\"#E8CC3E\",wind:\"#8BF020\"},k=\"<br> --------------------------------<br><br>\",w={slow:.8,medium:.6,fast:.4},v={slow:.8,medium:.6,fast:.4},x={Rshift:\"ShiftRight\",Lshift:\"ShiftLeft\",Lctrl:\"ControlLeft\",Rctrl:\"ControlRight\",Altleft:\"AltLeft\",Altright:\"AltRight\",\"¬\":\"Backquote\"},S={exploreIntroduction:[`${k}Welcome to your first zone! You will spend a lot of time here compared to other menus. <i>(Press enter to continue..)</i>`,\"<br>If you choose to <b>explore</b>, you will either run into an enemy or find some items. If you need some reagents, it may be a good idea to forage around. <i>(Press enter to continue..)</i>\",\"<br>While travelling, you may be ambushed by enemies. Don't let your guard down! Also note that HP, Stamina and Mana will not regenerate while exploring. They will automatically refill when in the main menu. <i>(Press enter to continue..)</i>\",\"<br>You may find enemies grow stronger as you do. Their levels do not scale infinitely, so don't worry. <i>(Press enter to continue..)</i>\",\"<br>There is no death penalty, but if you die you will return to the main menu and will have to re-tread any ground to return to where you were previously. An exception to this is if you own a teleportation stone. Different TP stones can take you to different parts of a map. <i>(Press enter to continue..)</i>\",\"<br>You can type <b>sm/show minimap</b> to replace the display of your inventory/equipped items with a minimap, and you can repeat the input to turn it off. It will turn off automatically in some menus. You can also use the super command <b>sc-minimap</b> to see it at any time. <i>(Press enter to continue..)</i>\",\"<br>You can <b>Leave</b> at any time to stop exploring, but when you return, you will be at whatever beginning point is set for the area. If you want to explore outwards, it is recommended that you stock up on potions. <i>(Press enter to continue..)</i>\",\"<br>Often you will find you can interact with the place you're in by inputting numbers. If this is possible, it will be one of the options printed onscreen. I'm not saying you SHOULD do anything, but if you see someone being attacked by slimes, it MIGHT POSSIBLY be a good idea to help them out.. <i>(Press enter to continue..)</i>\"],gameIntroduction:[`${k}Welcome to Tower RPG (TRPG!) This is an entirely text-based game focused around combat. <i>(Press enter to continue..)</i>`+\"\",\"<br>The game is centered around <u>Floors.</u> The goal of the game is to defeat the boss on each floor in order to advance to the next. <i>(Press enter to continue..)</i>\",\"<br>Upon starting a floor however, you may be ill-equipped to do so.. there are facilities on each floor to help you get strong enough to advance. <i>(Press enter to continue..)</i>\",\"<br>I hope you enjoy this game I've made! Before you begin, here are a few more notes: <i>(Press enter to continue..)</i>\",`<br>Currently, there are ${s} floors. There are no plans to add any additional floors. <i>(Press enter to continue..)</i>`,\"<br>If you find a bug or have a suggestion, please let me know! You can put all of these things in the following discord server: <b>https://discord.com/invite/w73Z44z</b> - just be sure to read the pins (if there are any) before adding something to a channel. <i>(Press enter to continue..)</i>\",'<br>As you play, you may want to make use of <b>Super Commands</b> to ease your experience. They can be activated at any time to customise your gameplay, similar to the options in settings. You can resize text with super commands, as well as clear the main display and a few other things. To see how, input \"sc-help\" after this tutorial. <i>(Press enter to continue..)</i>',\"<br><b>Do not have more than one tab of this game open at a time. Doing so may risk your data. Additionally, always use the same browser to play and do not do so in incognito.</b> <i>(Press enter to continue..)</i>\",\"<br>If you get stuck, you can input 'help'/'sc-help' to open the help module. It has lots of useful information.\",\"<br>I don't own the music in this game (please excuse the poor looping, I do plan on fixing it but music is not a priority right now). Check the super commands menu in help/sc-help to see how to mute it.\",\"<br>Lastly, in tutorials, you may find this (Press enter to continue..) prompt. But a significant majority of the game will scroll through text automatically. If it's too fast or too slow, you can change the speed in settings. <i>(Press enter to continue..)</i>\",\"<br>That's all! Again, thank you for playing and I hope you enjoy TRPG! <i>(Press enter to continue..)</i>\"],equipIntroduction:[`${k}Here, you can equip and unequip items. The instructions should explain everything. <i>(Press enter to continue..)</i>`,\"<br>You can also use items that have use effects, and add items that can be used during combat to your pouch. <i>(Press enter to continue..)</i>\",\"<br>Your pouch is a collection of items that you can use during battle (where the rest of your inventory is inaccessible). <i>(Press enter to continue..)</i>\",\"<br>Pouch items can be helpful when in a pinch, but keep in mind an item can be in your pouch or your inventory - but not both. An item in your pouch will appear to not be in your inventory. <i>(Press enter to continue..)</i>\"],statsIntroduction:[`${k}Here, you can equip and unequip skills, and also allocate and reset your SP`+\" (skill points, not the SP used in battle!) <i>(Press enter to continue..)</i>\",\"<br>When customizing your skills, go to <b>equipped</b> to equip skills, unequip skills, and forget skills. Go to <b>learn</b> to unlock disciplines (which contain skills) and to unlock skills. Skills cost AP to unlock, which is earned through levelling up. <i>(Press enter to continue..)</i>\",\"<br>Skills are contained within <b>Disciplines</b>, which also have to be unlocked. You may find new disciplines available\"+` as you level up. Currently, there are a total of ${Object.keys(d).length} disciplines. <i>(Press enter to continue..)</i>`,\"<br>If you get confused or lost, just use the Help Module (input 'help' or 'sc-help)\"],craftingIntroduction:[`${k}Welcome to the crafting menu! Here, you can use recipes that you've learned in order to craft`+\" items. <i>(Press enter to continue..)</i>\",\"<br>Recipes use gold and items to create items and are not consumed upon use. <i>(Press enter to continue..)</i>\",\"<br>Different floors have different recipes, and you can also collect recipes to carry with you wherever you go. <i>(Press enter to continue..)</i>\",\"<br>Make yourself some powerful items! <i>(Press enter to continue..)</i>\"],combatIntroduction:[`${k}Your first battle! Don't panic, this should be an easy ride. Just remember the`+\" following things: <i>(Press enter to continue..)</i>\",\"<br><u>You will probably find it very helpful to use Input Shortcut when battling.</u> <i>(Press enter to continue..)</i>\",\"<br><b>Pouch</b> (or 'p' as a shortcut) will open your Pouch. You can store certain items from your inventory in your pouch to be used in combat, like health potions. However note that using a pouch item costs an action, and there is a limit to how many unique items you can store in your pouch, and each individual item has a strict stack limit.\",\"<br><b>Skills</b> will display all the skills you have access to and their effects. You will always be able to attack and guard. <i>(Press enter to continue..)</i>\",\"<br><b>Status</b> will display all buffs and debuffs applied to your character, and <b>Enemy</b> will do the same for your opponent. <i>(Press enter to continue..)</i>\",\"<br><b>Flee</b> will end a fight immediately, but it will be your loss and you will return to the main menu. Don't be a pussy! <i>(Press enter to continue..)</i>\",\"<br>All battles in TRPG are one-on-one. Don't worry about being ambushed by multiple enemies. <i>(Press enter to continue..)</i>\",\"<br>If you need more information such as what certain stats do, you can find it in the help module (input 'help'/'sc-help'). <i>(Press enter to continue..)</i>\"]},P=(e,t)=>{switch(e){case\"main\":h.main.style.fontSize=t;break;case\"stat\":h.mainStats.style.fontSize=t,h.elementalStats.style.fontSize=t;break;case\"misc\":h.miscView.style.fontSize=t;break;default:console.log(\"invalid input for resizing text\")}},I=e=>{const t=e.stats,a=e.stats.elemental.offence,n=e.stats.elemental.defence,s=`\\n    ${e.name}'s stats <br>\\n    health: ${t.current_health}/${G.getMaxHealth(e.stats)} <br>\\n    attack: ${t.atk}<br>\\n    defence: ${t.def} <br>\\n    magic attack: ${t.matk}<br>\\n    magic defense: ${t.mdef}<br>\\n    speed: ${t.speed}<br>\\n    critical chance: ${100*t.crit_chance}%<br>\\n    critical damage: ${100*t.crit_damage}%<br>\\n    effectiveness: ${t.effectiveness}%<br>\\n    resistance: ${t.resistance}%<br>\\n    evasion: ${100*t.evasion}%<br>\\n    mana: ${t.current_mana}/${t.max_mana}<br>\\n    stamina: ${t.current_stamina}/${t.max_stamina}<br>\\n    max sp: ${t.max_sp}\\n    `,o=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${a.physical}<br>\\n    fire: ${a.fire}<br>\\n    water: ${a.water}<br>\\n    wind: ${a.wind}<br>\\n    earth: ${a.earth}<br>\\n    thunder: ${a.thunder}<br>\\n    light: ${a.light} <br>\\n    dark: ${a.dark}<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${n.physical}<br>\\n    fire: ${n.fire}<br>\\n    water: ${n.water}<br>\\n    wind: ${n.wind}<br>\\n    earth: ${n.earth}<br>\\n    thunder: ${n.thunder}<br>\\n    light: ${n.light}<br>\\n    dark: ${n.dark}<br>\\n    `;h.mainStats.innerHTML=s,h.elementalStats.innerHTML=o},$=e=>{const t=e.elemental.offence,a=e.elemental.defence,n=G.calcElementBuffs(e),s=n.offence,o=n.defence,r=G.calcMod(\"atk\",e),i=G.calcMod(\"def\",e),l=G.calcMod(\"matk\",e),c=G.calcMod(\"mdef\",e),f=G.calcMod(\"speed\",e),d=G.calcMod(\"crit_chance\",e),m=G.calcMod(\"crit_damage\",e),u=G.calcMod(\"effectiveness\",e),p=G.calcMod(\"resistance\",e),g=G.calcMod(\"evasion\",e),y=` \\n    ${e.name}'s stats <br>\\n    health: ${e.health} (${Math.round(e.health/e.max_health*100)}%)<br>\\n    attack: ${Math.round(e.atk*(r+1))} (${Math.round(100+100*r)}%)<br>\\n    defence: ${Math.round(e.def*(i+1))} (${Math.round(100+100*i)}%)<br>\\n    magic attack: ${Math.round(e.matk*(l+1))} (${Math.round(100+100*l)}%)<br>\\n    magic defense: ${Math.round(e.mdef*(c+1))} (${Math.round(100+100*c)}%)<br>\\n    speed: ${Math.round(e.speed*(f+1))} (${Math.round(100+100*f)}%)<br>\\n    critical chance: ${100*(e.crit_chance+d)}% (${d<0?\"\":\"+\"}${Math.round(100*d)}%)<br>\\n    critical damage: ${100*(e.crit_damage+m)}% (${m<0?\"\":\"+\"}${Math.round(100*m)}%)<br>\\n    effectiveness: ${e.effectiveness+u}% (${u<0?\"\":\"+\"}${Math.round(u)}%)<br>\\n    resistance: ${e.resistance+p}% (${p<0?\"\":\"+\"}${Math.round(p)}%)<br>\\n    evasion: ${100*(e.evasion+g)}% (${g<0?\"\":\"+\"}${Math.round(100*g)}%)<br>\\n    mitigation: ${Math.round(100*G.calcMod(\"mitigation\",e))}%<br>\\n    mana: ${e.mana}/${e.max_mana}<br>\\n    stamina: ${e.stamina}/${e.max_stamina}<br>\\n    sp: ${e.sp}/${e.max_sp}\\n    \\n    `,_=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${t.physical+s.physical} (${s.physical<0?\"\":\"+\"}${s.physical})<br>\\n    fire: ${t.fire+s.fire} (${s.fire<0?\"\":\"+\"}${s.fire})<br>\\n    water: ${t.water+s.water} (${s.water<0?\"\":\"+\"}${s.water})<br>\\n    wind: ${t.wind+s.wind} (${s.wind<0?\"\":\"+\"}${s.wind})<br>\\n    earth: ${t.earth+s.earth} (${s.earth<0?\"\":\"+\"}${s.earth})<br>\\n    thunder: ${t.thunder+s.thunder} (${s.thunder<0?\"\":\"+\"}${s.thunder})<br>\\n    light: ${t.light+s.light} (${s.light<0?\"\":\"+\"}${s.light})<br>\\n    dark: ${t.dark+s.dark} (${s.dark<0?\"\":\"+\"}${s.dark})<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${a.physical+o.physical} (${o.physical<0?\"\":\"+\"}${o.physical})<br>\\n    fire: ${a.fire+o.fire} (${o.fire<0?\"\":\"+\"}${o.fire})<br>\\n    water: ${a.water+o.water} (${o.water<0?\"\":\"+\"}${o.water})<br>\\n    wind: ${a.wind+o.wind} (${o.wind<0?\"\":\"+\"}${o.wind})<br>\\n    earth: ${a.earth+o.earth} (${o.earth<0?\"\":\"+\"}${o.earth})<br>\\n    thunder: ${a.thunder+o.thunder} (${o.thunder<0?\"\":\"+\"}${o.thunder})<br>\\n    light: ${a.light+o.light} (${o.light<0?\"\":\"+\"}${o.light})<br>\\n    dark: ${a.dark+o.dark} (${o.dark<0?\"\":\"+\"}${o.dark})<br>\\n    `;h.mainStats.innerHTML=y,h.elementalStats.innerHTML=_};a(0);const T={slime:()=>{const e=G.getEnemy();1==G.turn&&0==e.actionsTaken?K.monster_soul.use(e,G.getPlayer(),\"enemy\"):ne(e,e.skills)},grey_wolf:()=>{const e=G.getEnemy();1==G.turn&&0==e.actionsTaken?K.wolven_soul.use(e,G.getPlayer(),\"enemy\"):ne(e,e.skills)},brown_bear:()=>{const e=G.getEnemy();1==G.turn&&0==e.actionsTaken?K.monster_soul.use(e,G.getPlayer(),\"enemy\"):1==K.boost.cost(e,G.getPlayer())?K.boost.use(e,G.getPlayer(),\"enemy\"):G.turn%3==0&&1==K.brutal_swipe.cost(e,G.getPlayer())?K.brutal_swipe.use(e,G.getPlayer(),\"enemy\"):ne(e,e.skills)},lesser_treant:()=>{const e=G.getEnemy(),t=e.modeBattle;if(1==G.turn&&0==e.actionsTaken)K.kindred_soul.use(e,G.getPlayer(),\"enemy\");else if(\"anima bark\"==t)K.anima_bark.use(e,G.getPlayer(),\"enemy\");else if(\"heal\"==t){Math.floor(100*Math.random())+1<=75&&1==K.nature_healing.cost(e,G.getPlayer())?K.nature_healing.use(e,G.getPlayer(),\"enemy\"):ne(e,e.skills)}else ne(e,e.skills)},treant:()=>{const e=G.getEnemy(),t=e.modeBattle;if(1==G.turn&&0==e.actionsTaken)K.anima_soul.use(e,G.getPlayer(),\"enemy\");else if(1==K.boost.cost(e,G.getPlayer()))K.boost.use(e,G.getPlayer(),\"enemy\");else if(\"anima bark\"==t)K.anima_bark.use(e,G.getPlayer(),\"enemy\");else if(\"heal\"==t){Math.floor(100*Math.random())+1<=75&&1==K.lesser_anima_healing.cost(e,G.getPlayer())?K.lesser_anima_healing.use(e,G.getPlayer(),\"enemy\"):ne(e,e.skills)}else ne(e,e.skills)},lesser_ent:()=>{const e=G.getEnemy(),t=e.modeBattle;if(console.log(`MODE IF ${t}`),1==G.turn&&0==e.actionsTaken)K.anima_soul.use(e,G.getPlayer(),\"enemy\");else if(1==K.boost.cost(e,G.getPlayer()))K.boost.use(e,G.getPlayer(),\"enemy\");else if(\"anima bark\"==t)K.anima_bark.use(e,G.getPlayer(),\"enemy\");else if(\"greater anima bark\"==t)K.greater_anima_bark.use(e,G.getPlayer(),\"enemy\");else if(\"threshold-one\"==t)console.log(\"THRESHOLD ONE REACHED\"),e.passedThresholds.push(\"one\"),K.forest_rupture.use(e,G.getPlayer(),\"enemy\");else if(\"threshold-three\"==t)e.passedThresholds.push(\"three\"),K.forest_rupture.use(e,G.getPlayer(),\"enemy\");else if(\"threshold-two\"==t)e.passedThresholds.push(\"two\"),K.forest_rupture.use(e,G.getPlayer(),\"enemy\");else if(\"heal\"==t){Math.floor(100*Math.random())+1<=75&&1==K.lesser_anima_healing.cost(e,G.getPlayer())?K.lesser_anima_healing.use(e,G.getPlayer(),\"enemy\"):1==K.constrict.cost(e,G.getPlayer())&&K.forest_curse.cost(e,1==G.getPlayer())?ne(e,e.skills):K.guard.use(e,G.getPlayer(),\"enemy\")}else 1==K.constrict.cost(e,G.getPlayer())&&K.forest_curse.cost(e,1==G.getPlayer())?ne(e,e.skills):K.guard.use(e,G.getPlayer(),\"enemy\")},wayward_traveler:()=>{const e=G.getEnemy().modeBattle;console.log(\"this was called\"),console.log(e),\"wary\"==e?K.health_potion.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):\"desperate\"==e||\"allout\"==e?1==K.rush_attack.cost(G.getEnemy(),G.getPlayerAdd(G.getPlayer()))?K.rush_attack.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.attack.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):\"preparing\"==e&&(1==K.guard_break.cost(G.getEnemy(),G.getPlayerAdd(G.getPlayer()))?K.guard_break.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.attack.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"))},greater_slime:()=>{const e=G.getEnemy().modeBattle;if(\"aggressive\"==e){1==Math.round(2*(Math.random()+.1))?K.splash.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.icebolt.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\")}else if(\"defensive\"==e)K.guard.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\");else{const e=Math.round(3*(Math.random()+.1));1==e?K.guard.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.splash.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\")}},lesser_water_klastera:()=>{const e=G.getEnemy(),t=e.modeBattle;\"normal\"==t?1==K.icebolt.cost(e)?K.icebolt.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.splash.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):\"heal\"==t?1==K.channel_health.cost(e)?K.channel_health.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.splash.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):\"arcane\"==t&&(1==K.arcane_shield.cost(e)?K.arcane_shield.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.splash.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"))},young_water_lizard:()=>{const e=G.getEnemy(),t=G.getPlayerAdd(G.getPlayer());if(\"cautious\"==e.modeBattle&&1==K.camoflague.cost(e,t)&&0==G.checkStacks(e.buffs,\"camoflague\"))K.camoflague.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\");else{1==Math.round(3*Math.random()+1)&&1==K.rush_attack.cost(e,t)?K.rush_attack.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.attack.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\")}},red_slime:()=>{const e=G.getEnemy(),t=G.getEnemy().modeBattle,a=ee(G.getPlayer().buffs);console.log(`PLAYERBUFFCOUNT ${a}`),\"normal\"==t&&(0==e.actionsTaken&&1==K.engulf.cost(e)&&a>1?K.engulf.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):1==K.fireball.cost(e)?K.fireball.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):K.attack.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"))},venomous_wolf:()=>{const e=G.getEnemy(),t=G.getPlayer(),a=st(e.skills);1==G.checkStacks(t.debuffs,\"bleed\")&&a.splice(a.indexOf(\"rend\"),1),1==G.checkStacks(t.debuffs,\"viridian toxin\")&&a.splice(a.indexOf(\"poison_claws\"),1),ne(e,a)},young_venomous_wolf:()=>{const e=G.getEnemy(),t=G.getPlayer(),a=st(e.skills);1==G.checkStacks(t.debuffs,\"bleed\")&&a.splice(a.indexOf(\"rend\"),1),1==G.checkStacks(t.debuffs,\"viridian toxin\")&&a.splice(a.indexOf(\"poison_claws\"),1),1==G.turn&&0==e.actionsTaken?K.wolven_soul.use(e,G.getPlayer(),\"enemy\"):ne(e,a)},dark_beast:()=>{const e=G.getEnemy(),t=e.modeBattle;\"dark pact\"==t&&1==K.dark_pact.cost(e)?K.dark_pact.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):\"hex\"==t&&1==K.hex.cost(e)?K.hex.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):\"nox curse\"==t&&1==K.nox_curse.cost(e)?K.nox_curse.use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):ne(e,[\"rend\",\"attack\",\"dark_howl\"])},flame_minotaur:()=>{const e=G.getEnemy(),t=e.modeBattle;\"normal\"!=t?K[t].use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\"):ne(e,[\"boar_strike\",\"boar_rush\"])},lesser_teravalum:()=>{const e=G.getEnemy(),t=e.modeBattle;1==G.turn&&0==e.actionsTaken?K.kindred_soul.use(e,G.getPlayer(),\"enemy\"):\"normal\"!=t&&K[t].use(G.getEnemy(),G.getPlayerAdd(G.getPlayer()),\"enemy\")},lesser_forest_scourge:()=>{const e=G.getEnemy(),t=G.getPlayer(),a=G.checkStacks(t.debuffs,\"viridian toxin\"),n=G.checkStacks(t.debuffs,\"constricted\"),s=G.checkStacks(e.buffs,\"prepared\");G.checkStacks(t.debuffs,\"forest curse\")>0?K.killing_blow.use(e,t,\"enemy\"):s>0&&1==A(e,t,\"forest_curse\")?K.forest_curse.use(e,t,\"enemy\"):n>0&&1==A(e,t,\"deep_envenom\")?K.deep_envenom.use(e,t,\"enemy\"):a>0&&1==A(e,t,\"constrict\")?K.constrict.use(e,t,\"enemy\"):1==A(e,t,\"poison_claws\")?K.poison_claws.use(e,t,\"enemy\"):K.attack.use(e,t,\"enemy\")},mobile_lesser_ent:()=>{const e=G.getEnemy();1==G.turn&&0==e.actionsTaken?K.kindred_soul.use(e,G.getPlayer(),\"enemy\"):ne(e,e.skills)}},A=(e,t,a)=>K[a].cost(e,t),M={slime:{stats:{base_level:1,max_health:40,atk:30,def:30,matk:30,mdef:30,speed:16,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:50,wind:50,thunder:150,dark:75,light:75}},ai:\"slime\",mode:\"slime\",skills:[\"splash\",\"boost\"],name:\"Slime\",baseLevel:1,exp:100,gold:10,drops:[[\"slime_ball\",1e3,2,5],[\"slime_ball\",500,2,5]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. They seem sentient, however not very intelligent - as though unlikely to have any particular strategy.\"}},lesser_teravalum:{stats:{base_level:2,max_health:35,atk:0,def:25,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:150,water:50,earth:50,wind:120,thunder:40,dark:100,light:100}},ai:\"lesser_teravalum\",mode:\"lesser_teravalum\",skills:[\"constrict\",\"guard\"],name:\"Lesser Teravalum\",baseLevel:1,exp:150,gold:10,drops:[[\"weak_vine\",1e3,2,5],[\"weak_vine\",500,2,5],[\"hempweed_ligament\",300,1,2],[\"vine_helmet\",200,1,1]],desc:\"A mass of tangled green vines that somehow has sentience. There is no indication of facial features or emotion, although the creature is clearly sentient. It seems suited only for constricting enemies and defending itself.\"}},grey_wolf:{stats:{base_level:3,max_health:45,atk:25,def:30,matk:30,mdef:20,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:80,wind:100,thunder:100,dark:100,light:100}},ai:\"grey_wolf\",mode:\"grey_wolf\",skills:[\"attack\",\"boost\",\"rend\"],name:\"Grey Wolf\",baseLevel:1,exp:200,gold:15,drops:[[\"grey_wolf_pelt\",1e3,2,4],[\"grey_wolf_pelt\",500,3,6],[\"sharp_claw\",300,1,2]],desc:\"A wolf with bristling grey fur. Despite its aggression, the wolf has a sort of rough beauty about it. Seems to attack indiscriminately. It has a desperate fury about it - as though it will grow faster as it becomes weaker.\"}},brown_bear:{stats:{base_level:3,max_health:55,atk:20,def:25,matk:20,mdef:20,speed:17,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:90,earth:75,wind:105,thunder:105,dark:100,light:100}},ai:\"brown_bear\",mode:\"brown_bear\",skills:[\"attack\",\"rend\"],name:\"Brown Bear\",baseLevel:4,exp:250,gold:20,drops:[[\"brown_fur\",1e3,1,7],[\"brown_fur\",500,2,5],[\"sharp_claw\",300,1,2]],desc:\"A simple-looking (or as simple looking as they come) brown bear. It has a somewhat calm demeanour but clearly does not appreciate your presence. Even when on all fours it is taller than you, and when it jumps up to deliver a powerful blow, its stature has an effect comparable to blotting out the sun. It seems to only have the energy to do this occasionally, however. You infer that it does so in regular periods, and also boosts whenever possible.\"}},lesser_treant:{stats:{base_level:7,max_health:230,atk:45,def:45,matk:50,mdef:50,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:25,evasion:0,max_mana:50,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:140,water:70,earth:40,wind:115,thunder:90,dark:100,light:100}},ai:\"lesser_treant\",mode:\"lesser_treant\",skills:[\"attack\",\"constrict\"],name:\"Lesser Treant\",exp:450,gold:50,drops:[[\"wood\",500,2,3],[\"magic_bark\",450,1,2],[\"special_sap\",250,1,2],[\"magic_bark\",1e3,1,2],[\"special_sap\",1e3,1,1]],desc:\"A fairly large tree. It isn't really mobile, but is capable of moving it's branches around like appendages. It has a semblance of a face, with grooves resembling eyes and a mouth that move about arthritically, but no actual facial features. It seems to be of moderate intelligence, but not much useful information can be gleaned from its appearance.\"}},treant:{stats:{base_level:12,max_health:400,atk:65,def:80,matk:65,mdef:80,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:40,evasion:0,max_mana:75,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:75,fire:130,water:60,earth:30,wind:105,thunder:80,dark:90,light:105}},ai:\"treant\",mode:\"treant\",skills:[\"attack\",\"constrict\",\"forest_curse\"],name:\"Treant\",baseLevel:4,exp:700,gold:85,drops:[[\"wood\",500,5,7],[\"magic_bark\",450,3,4],[\"special_sap\",250,3,4],[\"magic_bark\",1e3,3,4],[\"special_sap\",1e3,2,4]],desc:\"A fairly large tree. It isn't really mobile, but is capable of moving it's branches around like appendages. It has a semblance of a face, with grooves resembling eyes and a mouth that move about eloquently, but no actual facial features. It seems to be of moderate intelligence, but not much useful information can be gleaned from its appearance. It radiates an energy that is at once sinister and serene.\"}},lesser_ent:{stats:{base_level:17,max_health:650,atk:80,def:100,matk:80,mdef:120,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:40,resistance:60,evasion:0,max_mana:120,max_stamina:200,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:65,fire:120,water:60,earth:20,wind:100,thunder:70,dark:80,light:105}},ai:\"lesser_ent\",mode:\"lesser_ent\",passedThresholds:[],skills:[\"constrict\",\"forest_curse\"],name:\"Lesser Ent\",baseLevel:4,exp:1e3,gold:120,drops:[[\"wood\",500,10,15],[\"magic_bark\",650,6,8],[\"special_sap\",500,6,9],[\"magic_bark\",1e3,6,8],[\"special_sap\",1e3,4,8]],desc:\"A large tree. Unlike other trees and treants, this tree has a venerate aura about it. It's attacks are almost absentminded, as though it is focusing on something else completely, and yet they are still so dangerous. Its facial features are equally indescriptive as other treefolk, however here they are also faded and more immobile. The almost automatic defences it puts up makes you wonder if it has some pre-prepared responses to certain scenarios or danger levels.\"}},lesser_forest_scourge:{stats:{base_level:10,max_health:240,atk:70,def:70,matk:70,mdef:50,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:0,evasion:0,max_mana:200,max_stamina:200,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:80,wind:110,thunder:100,dark:100,light:100}},ai:\"lesser_forest_scourge\",mode:\"lesser_forest_scourge\",skills:[\"attack\",\"constrict\",\"deep_envenom\",\"forest_curse\",\"killing_blow\"],name:\"Lesser Forest Scourge\",baseLevel:4,exp:320,gold:40,drops:[[\"forest_scourge_scale\",750,3,5],[\"venomous_claw\",500,1,2]],desc:\"It is difficult to see exactly what this creature is due to how quickly it moves, but it seems to be some kind of snake. It's scales are coloured similarly to the grass, with green scales of different hues interlocking seamlessly and shifting silently and the creature sifts around the surroundings. Like an experienced killer, it seems to have some kind of routine technique.\"}},young_venomous_wolf:{stats:{base_level:7,max_health:185,atk:40,def:50,matk:40,mdef:55,speed:50,crit_chance:.3,crit_damage:1.25,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"young_venomous_wolf\",mode:\"young_venomous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Young Venemous Wolf\",exp:300,gold:20,drops:[[\"sharp_claw\",500,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build with a similarly rugged appearence. although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately. Due to its youth, it seems unlikely that it would be possible to glean any of its venom.\"}},mobile_lesser_ent:{stats:{base_level:12,max_health:250,atk:120,def:80,matk:120,mdef:100,speed:15,crit_chance:0,crit_damage:1,effectiveness:0,resistance:20,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:75,fire:130,water:60,earth:30,wind:105,thunder:80,dark:90,light:105}},ai:\"mobile_lesser_ent\",mode:\"mobile_lesser_ent\",skills:[\"forest_rupture\"],name:\"Mobile Lesser Ent\",baseLevel:4,exp:400,gold:85,drops:[[\"wood\",500,5,7],[\"magic_bark\",350,2,3],[\"special_sap\",200,2,3],[\"magic_bark\",800,2,3],[\"special_sap\",800,1,3]],desc:\"A very tall bipedal... tree? It looks more like a treant than an ent, with a less fixed 'face', and a fluidity of motion that surpasses both species. However, it seems notably less intelligent than either.\"}},wayward_traveler:{stats:{max_health:500,base_level:10,atk:65,def:55,matk:50,mdef:60,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:10,resistance:10,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{physical:80,fire:110,water:110,earth:110,wind:110,thunder:110,dark:110,light:110}},ai:\"wayward_traveler\",mode:\"wayward_traveler\",skills:[\"attack\",\"guard_break\",\"rush_attack\",\"healing_potion\"],name:\"Wayward Traveler\",exp:500,gold:50,drops:[[\"damaged_sword\",50,1,1],[\"damaged_armour\",50,1,1],[\"damaged_pantaloons\",50,1,1],[\"damaged_helm\",50,1,1],[\"wanderer_memorabilia\",1e3,2,3]],desc:\"A traveler who seems to have lost their way. From their responsive battle style and analytic glances, you infer that they seem to have some kind of specific strategy in mind.\"}},greater_slime:{stats:{base_level:5,max_health:150,atk:60,def:60,matk:70,mdef:60,speed:22,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:70,fire:0,water:10,earth:50,wind:50,thunder:200,dark:75,light:75}},ai:\"greater_slime\",mode:\"greater_slime\",skills:[\"splash\",\"icebolt\"],name:\"Greater Slime\",exp:300,gold:15,drops:[[\"slime_ball\",1e3,5,8]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions. Seems larger and more experienced(?) than most slimes.\"}},lesser_water_klastera:{stats:{base_level:6,max_health:125,atk:60,def:70,matk:70,mdef:70,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:50,evasion:0,max_mana:200,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:150,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:80,earth:80,wind:80,thunder:150,dark:80,light:80}},ai:\"lesser_water_klastera\",mode:\"lesser_water_klastera\",skills:[\"icebolt\",\"arcane_shield\",\"channel_health\",\"splash\"],name:\"Lesser Water Klastera\",exp:350,gold:15,drops:[[\"aquus_cluster\",500,1,3],[\"manasoul\",10,1,1],[\"water_orb\",1,1,1]],desc:\"A being comprised of only water. It's body seems to be some kind of deep blue semi-solid. It's only facial feature is white, oval eyes that convey no sense of emotion. One might infer from its formulaic structure that the same could be said about its battle style.\"}},young_water_lizard:{stats:{base_level:7,max_health:100,atk:60,def:60,matk:40,mdef:50,speed:50,crit_chance:.3,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:100,wind:120,thunder:120,dark:100,light:100}},ai:\"young_water_lizard\",mode:\"young_water_lizard\",skills:[\"attack\",\"rush_attack\",\"camoflague\"],name:\"Young Water Lizard\",exp:400,gold:20,drops:[[\"weak_membrane\",500,1,3],[\"tiny_lizard_tail\",250,1,1],[\"light_absorbant_eye\",100,1,2]],desc:\"A relatively small reptile. It has clearly rough skin, although the abundant tiny spikes all over its body are clearly conscious designs of nature. Perhaps due to the size difference, it seems wary of any attacks.\"}},red_slime:{stats:{base_level:11,max_health:250,atk:70,def:70,matk:70,mdef:70,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:150,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:150,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:50,earth:70,wind:70,thunder:70,dark:60,light:130}},ai:\"red_slime\",mode:\"red_slime\",skills:[\"fireball\",\"guard\",\"engulf\",\"attack\"],name:\"Red Slime\",exp:500,gold:35,drops:[[\"red_slime_ball\",1e3,5,8]],desc:\"A red slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Seems to be wary of boons you grant yourself.\"}},venomous_wolf:{stats:{base_level:14,max_health:210,atk:80,def:60,matk:70,mdef:55,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:170,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"venemous_wolf\",mode:\"venemous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Venemous Wolf\",exp:550,gold:30,drops:[[\"sharp_claw\",500,1,2],[\"venomous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build, although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately.\"}},dark_beast:{stats:{base_level:18,max_health:300,atk:90,def:70,matk:80,mdef:80,speed:70,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:.1,max_mana:120,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:100,wind:100,thunder:100,dark:120,light:100},defence:{none:100,physical:80,fire:100,water:100,earth:100,wind:100,thunder:100,dark:0,light:150}},ai:\"dark_beast\",mode:\"dark_beast\",skills:[\"attack\",\"rend\",\"rush_attack\",\"nox_curse\",\"dark_howl\",\"hex\"],name:\"Dark Beast\",exp:800,gold:10,drops:[[\"sharp_claw\",500,1,2],[\"venemous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"A creature with a wolf-like structure, but with a larger upper body. It's entire body is shrouded in an oppressive mist that makes you uncomfortable. Little regarding its disposition can be inferred from its movements besides its apparent intelligence compared to its wolf 'bretheren'.\"}},flame_minotaur:{stats:{base_level:30,max_health:5e3,atk:110,def:80,matk:80,mdef:80,speed:65,crit_chance:0,crit_damage:1.5,effectiveness:30,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:120,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:0,water:130,earth:90,wind:120,thunder:80,dark:110,light:90}},ai:\"flame_minotaur\",mode:\"flame_minotaur\",mode2:\"phase one\",skills:[\"boar_strike\",\"boar_rush\",\"flame_impact\",\"ignis_destroyer\",\"boar_haste\",\"engulf\",\"true_cleanse\"],name:\"Flame Minotaur\",exp:5e3,gold:2500,drops:[[\"flamme_kaiser\",1e3,1,1]],desc:\"A tall beast of extremely muscular built. It is difficult to fully appreciate the stature of the minotaur, as it is several times taller than you. However you can feel it's scorching breath, and see it's giant, rune-encrusted axe. Nothing can about it's mannerisms can be inferred from its appearance besides its great power.\"}}},E=T,B={slime:(e,t,a,n)=>{n()},grey_wolf:(e,t,a,n)=>{n()},brown_bear:(e,t,a,n)=>{n()},lesser_treant:(e,t,a,n)=>{console.log(\"mode called\");const s=G.checkStacks(a.buffs,\"anima bark\");a.health<=.3*a.max_health&&0==s?(a.modeBattle=\"anima bark\",yt([[`<br>${a.name} feels mystical energy welling within..`,1]],\"battle\",n)):a.health<=a.max_health/2?(a.modeBattle=\"heal\",yt([[`<br>${a.name} is wary of their condition..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",n())},treant:(e,t,a,n)=>{console.log(\"mode called\");const s=G.checkStacks(a.buffs,\"anima bark\");a.health<=.3*a.max_health&&0==s?(a.modeBattle=\"anima bark\",yt([[`<br>${a.name} feels mystical energy welling within..`,1]],\"battle\",n)):a.health<=a.max_health/2?(a.modeBattle=\"heal\",yt([[`<br>${a.name} is wary of their condition..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",n())},lesser_ent:(e,t,a,n)=>{console.log(\"mode called\");const s=G.checkStacks(a.buffs,\"anima bark\"),o=G.checkStacks(a.buffs,\"greater anima bark\");console.log(`INDEX OF ${a.passedThresholds.indexOf(\"one\")}`),console.log(a.health),console.log(.8*a.max_health),console.log(a.health<=.8*a.max_health),console.log(-1==a.passedThresholds.indexOf(\"one\")),a.health<=.8*a.max_health&&-1==a.passedThresholds.indexOf(\"one\")?(a.modeBattle=\"threshold-one\",n()):a.health<=.5*a.max_health&&-1==a.passedThresholds.indexOf(\"two\")?(a.modeBattle=\"threshold-two\",n()):a.health<=.2*a.max_health&&-1==a.passedThresholds.indexOf(\"three\")?(a.modeBattle=\"threshold-three\",n()):a.health<=.4*a.max_health&&0==o?(a.modeBattle=\"greater anima bark\",yt([[`<br>${a.name} feels great mystical energy welling within..`,1]],\"battle\",n)):a.health<=.6*a.max_health&&0==s?(a.modeBattle=\"anima bark\",yt([[`<br>${a.name} feels mystical energy welling within..`,1]],\"battle\",n)):a.health<=.6*a.max_health?(a.modeBattle=\"heal\",yt([[`<br>${a.name} is wary of their condition..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",n())},wayward_traveler:(e,t,a,n)=>{const s=a.health,o=G.checkStacks(t.debuffs,\"guard broken\");console.log(`found ${o} guard broken stacks`),s<a.max_health/2?a.mana>30?(a.modeBattle=\"wary\",yt([[`<br>${a.name} is concerned about their condition..`,1]],\"battle\",n)):(a.modeBattle=\"desperate\",yt([[`<br>${a.name} is employing a last ditch attempt!`,1]],\"battle\",n)):o<3?(a.modeBattle=\"preparing\",yt([[`<br>${a.name} seems to be setting something up..`,1]],\"battle\",n)):(a.modeBattle=\"allout\",yt([[`<br>${a.name} is going all out!`,1]],\"battle\",n))},greater_slime:(e,t,a,n)=>{const s=e[G.turn-1].player;var o=!0,r=Z(s,\"guard\"),i=Q(s);console.log(\"logging player damage\"),console.log(i),i.forEach(e=>{e<1&&(o=!1)}),r>0?(a.modeBattle=\"defensive\",yt([[`<br>${a.name} eyes ${t.name} cautiously...`,1]],\"battle\",n)):o?(a.modeBattle=\"aggressive\",yt([[`<br>${a.name} assumes an aggressive stance!`,1]],\"battle\",n)):(a.modeBattle=\"normal\",yt([[`<br>${a.name} assumes a normal stance.`,1]],\"battle\",n))},lesser_water_klastera:(e,t,a,n)=>{var s=G.checkStacks(a.buffs,\"arcane protection\"),o=0;null!=e[G.turn-1].enemy&&(o=Z(e[G.turn-1].enemy,\"channel_health\")),0==s?(a.modeBattle=\"arcane\",yt([[`<br>${a.name} would like to enhance themselves with magic...`,1]],\"battle\",n)):G.turn%3==0&&0==o?(a.modeBattle=\"heal\",yt([[`<br>${a.name} would like to heal..`,1]],\"battle\",n)):(a.modeBattle=\"normal\",yt([[`<br>${a.name} has no particular desire.`,1]],\"battle\",n))},young_water_lizard:(e,t,a,n)=>{0==Z(e[G.turn-1].player,\"guard\")?(a.modeBattle=\"cautious\",yt([[`<br>${a.name} feels uncomfortable...`,1]],\"battle\",n)):(a.modeBattle=\"normal\",yt([[`<br>${a.name} seems to be feeling normal.`,1]],\"battle\",n))},red_slime:(e,t,a,n)=>{a.modeBattle=\"normal\",n()},venemous_wolf:(e,t,a,n)=>{n()},young_venomous_wolf:(e,t,a,n)=>{n()},dark_beast:(e,t,a,n)=>{const s=G.checkStacks(a.buffs,\"ATK up\"),o=G.checkStacks(a.buffs,\"MATK up\"),r=G.checkStacks(a.buffs,\"SPEED up\"),i=G.checkStacks(t.debuffs,\"hexed\"),l=te(t.debuffs);s<3&&o<3&&r<3?(a.modeBattle=\"dark pact\",yt([[`<br>${a.name} eyes ${t.name} with a slight glare.`,1]],\"battle\",n)):0==i?(a.modeBattle=\"hex\",yt([[`<br>${a.name} eyes ${t.name} with a malicious glare.`,1]],\"battle\",n)):l-G.checkStacks(t.debuffs,\"nox curse\")>1?(a.modeBattle=\"nox curse\",yt([[`<br>${a.name} eyes ${t.name} with a malevolent glare.`,1]],\"battle\",n)):(a.modeBattle=\"normal\",yt([[`<br>${a.name} eyes ${t.name} with a dry glare.`,1]],\"battle\",n))},flame_minotaur:(e,t,a,n)=>{const s=G.turn,o=ee(a.debuffs),r=ee(t.buffs),i=G.checkStacks(a.buffs,\"boar haste\");var l=a.mode2,c=5;\"phase two\"==l&&(c=3),a.health<a.max_health/2&&\"phase one\"==l&&(mt('<span style=\"color:red\"><b>The minotaur grows evermore furious..</span></b>'),a.mode2=\"phase two\",l=\"phase two\"),\"phase two\"==l&&0==i?(a.modeBattle=\"boar_haste\",n()):s%c==0?(a.modeBattle=\"ignis_destroyer\",n()):1==K.flare_impact.cost(a)?(a.modeBattle=\"flare_impact\",n()):o>2?1==K.true_cleanse.cost(a)?(a.modeBattle=\"true_cleanse\",n()):(a.modeBattle=\"ignis_destroyer\",n()):r>2?1==K.engulf.cost(a)?(a.modeBattle=\"engulf\",n()):(a.modeBattle=\"ignis_destroyer\",n()):(a.modeBattle=\"normal\",n())},lesser_teravalum:(e,t,a,n)=>{1==K.constrict.cost(a)?(a.modeBattle=\"constrict\",yt([[`<br>${a.name} is in the mood to constrict..`,1]],\"battle\",n)):(a.modeBattle=\"guard\",yt([[`<br>${a.name} assumes a defensive stance.`,1]],\"battle\",n))},lesser_forest_scourge:(e,t,a,n)=>{n()},mobile_lesser_ent:(e,t,a,n)=>{n()}};a(1);const L=(e,t)=>{D.currentShop=O[e],D.returnFunction=t,D.shopLoop()},C={1:\"f1_shop\"},O=Object.assign({f1_shop:{name:\"Floor one shop\",items:[[\"special_armband\",500],[\"health_potion\",15],[\"greater_health_potion\",35],[\"mana_potion\",15],[\"greater_mana_potion\",35],[\"stamina_vial\",15],[\"wood\",20]]},old_man:{name:\"Old man's teeth\",items:[[\"old_man_yellow_tooth\",6e3],[\"old_man_white_tooth\",1200]]},f1_docile_slime_shop:{name:\"Docile slime's shop\",items:[[\"water_energy\",100]]},f1_old_man:{name:\"Old man's shop\",items:[[\"fishing_rod\",100],[\"fishers_lucky_charm\",250]]},f1_weak_weapons:{name:\"Weapons shop\",items:[[\"simple_sword\",100],[\"silver_axe\",400],[\"metal_stave\",120],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"magisteel_stave\",500],[\"thunder_rod\",500]]},f1_strong_weapons:{name:\"Advanced Weapons shop\",items:[[\"crafted_blade\",1e3],[\"crafted_dagger\",1e3],[\"reinforced_silver_axe\",1200],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"enchanted_magisteel_stave\",1400],[\"conduit_orb\",800],[\"magisteel_runic_dagger\",1200]]},f1_weak_armours:{name:\"Armour shop\",items:[[\"silver_helm\",200],[\"silver_armour\",200],[\"silver_legwear\",200],[\"advanced_silver_helm\",320],[\"advanced_silver_armour\",320],[\"advanced_silver_legwear\",320],[\"wizard_headband\",280],[\"light_wizard_robes\",280],[\"light_wizard_leggings\",280],[\"enchanted_wooden_helm\",350]]},f1_strong_armours:{name:\"Advanced armour shop\",items:[[\"silver_knight_helm\",600],[\"silver_knight_armour\",600],[\"silver_knight_legwear\",600],[\"ninja_wrap\",360],[\"ninja_garb\",360],[\"ninja_legwear\",360],[\"tattered_magus_robes\",600]]},f1_misc:{name:\"Misc shop\",items:[[\"steel\",40],[\"leather\",36],[\"wood\",15],[\"water_rune\",200],[\"vip_card\",400],[\"f1_settlement_teleportation_stone\",20]]},f1_misc_vip:{name:\"VIP Misc shop\",items:[[\"steel\",25],[\"leather\",24],[\"wood\",10]]},f1_forest_cleric_shop:{name:\"Aina's TP stones\",items:[[\"f1_forest_settlement_teleportation_stone\",20]]}}),D={currentItem:void 0,currentShop:void 0,returnFunction:void 0,mode:void 0,price:void 0,menuOptions:void 0,shopLoop:(e=!0)=>{const t=D.currentShop;mt(`${k}Currently shopping at ${t.name}`),mt(\"Wares available:\"),t.items.forEach(e=>{const a=t.items.findIndex(t=>t[0]==e[0]);mt(`${a+1} - ${se[e[0]].name} - ${e[1]}G`)}),mt(\"Type the name/number of an item to buy it, or type 's'/'sell' to enter sell mode.\"),mt(\"<br>Input <b>'b'/'back'</b> to return.\"),ut(D.shopResponse)},shopResponse:()=>{pt(D.shopResponse);const e=D.currentShop,t=ht().toLowerCase();var a=null!=e.items[t-1]?parseInt(t)-1:-1;if(-1==a&&(a=e.items.findIndex(e=>t==se[e[0]].name.toLowerCase())),-1!=a){const t=e.items[a];mt(`${k}${se[t[0]].name} selected.`),ie(se[t[0]]),mt(\"<br>Type 'b' or 'buy to buy it. Otherwise, type anything else to return.\"),D.currentItem=t,D.mode=\"buy\",kt([\"buy\"]),ut(D.itemMenu)}else\"sell\"==t||\"s\"==t?(D.mode=\"sell\",mt(`${k}Entering sell mode..`),D.sellLoop()):\"back\"==t||\"b\"==t?(mt(`${k}Returning...`),D.returnFunction()):(mt(\"<br>Invalid input.\"),ut(D.shopResponse))},sellLoop:(e=!0)=>{const t=n.player;mt(`${k}Currently in sell mode. Type the name/number of an item in the inventory to see\\n        its details and sell it. Type 'b'/'back' to exit sell mode.`),mt(\"<br>Inventory:\");var a=[];t.inventory.forEach(e=>{le(e)?a.push(e):a.includes(e)||a.push(e)}),e&&a.forEach((e,a)=>{var n,s;le(e)?(n=se[e[0]],s=e[0]):\"nothing\"==e||(n=se[e],s=e),mt(`${a+1} - ${n.name} (x${tt(s,t.inventory)}) - ${n.sell_value}${\"unsellable\"==n.sell_value?\"\":\"G\"}`)}),D.menuOptions=a,ut(D.sellResponse)},sellResponse:()=>{pt(D.sellResponse);const e=ht().toLowerCase(),t=D.menuOptions;var a=-1;\"NaN\"!=parseInt(e).toString()?t.length>=parseInt(e)?(mt(`<br>${se[ce(t[parseInt(e-1)])].name} selected.`),a=e-1):mt(\"<br>Number out of range.\"):(t.forEach((t,n)=>{le(t)?se[t[0]].name.toLowerCase()==e&&(a=n):se[t].name.toLowerCase()==e&&(a=n)}),-1!=a&&mt(`<br>${se[t[parseInt(a)].name]} selected.`)),-1!=a?(ie(se[ce(t[a])]),D.currentItem=t[a],\"unsellable\"!=se[ce(t[a])].sell_value?(mt(`${k}If you would like to sell this item, type 's'/'sell'. Otherwise, type anything else to return.`),ut(D.itemMenu)):(mt(\"This item cannot be sold.\"),D.sellLoop())):\"b\"==e||\"back\"==e?(mt(`${k}Returning...`),D.shopLoop()):(mt(\"<br>Invalid input.\"),ut(D.sellResponse))},itemMenu:()=>{pt(D.itemMenu);D.currentShop;const e=ht().toLowerCase();var t=\"none\";\"b\"==e||\"buy\"==e?t=\"buy\":\"s\"!=e&&\"sell\"!=e||(t=\"sell\"),t==D.mode?(mt(\"buy\"==t?`${k}How many would you like to buy? (Please type a numerical integer value`+\", or type '0' to return)\":`${k}<br>How many would you like to sell? (Please type a numerical integer value`+\", or type '0' to return. If you want to sell the maximum amount of this item input 'a'/'all'.\"),ut(D.itemConfirmation)):(mt(`${k}Returning...`),\"buy\"==D.mode?D.shopLoop():D.sellLoop())},itemConfirmation:()=>{pt(D.itemConfirmation);const e=n.player,t=(D.currentShop,ht().toLowerCase());var a=!1;if(\"NaN\"!=parseInt(t).toString()||\"a\"==t||\"all\"==t)if(parseInt(t)>0&&\"buy\"==D.mode){const e=parseInt(t),n=e*D.currentItem[1];mt(`${k}buying ${e} ${se[D.currentItem[0]].name}${e>1?\"s\":\"\"} will cost`+` ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),D.price=n,ut(D.itemTransaction),a=!0}else if(parseInt(t)>0||\"a\"==t||\"all\"==t&&\"sell\"==D.mode){var s,o,r=parseInt(t);\"a\"!=t&&\"all\"!=t||(r=le(D.currentItem)?fe(D.currentItem[0],e.inventory):fe(D.currentItem,e.inventory)),le(D.currentItem)?(o=r*se[D.currentItem[0]].sell_value,s=se[D.currentItem[0]].name):(o=r*se[D.currentItem].sell_value,s=se[D.currentItem].name),mt(`${k}${r} ${s}${r>1?\"s\":\"\"} will sell for\\n                ${o}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),D.price=o,ut(D.itemTransaction),a=!0}else 0==parseInt(t)&&(mt(`${k}Returning..`),a=!0,\"buy\"==D.mode?D.shopLoop():D.sellLoop());0==a&&(mt(\"<br>Invalid input\"),ut(D.itemConfirmation))},itemTransaction:()=>{pt(D.itemTransaction);D.currentShop;const e=ht().toLowerCase(),t=n.player,a=D.price;if(\"y\"==e||\"yes\"==e)if(\"buy\"==D.mode)if(t.gold>=a){t.gold-=a;const e=a/D.currentItem[1];mt(`${k}Purchasing...`),oe(D.currentItem[0],e,e),mt(\"Returning...\"),D.shopLoop()}else mt(\"<br><b>Too expensive!</b>\"),D.shopLoop();else{const e=D.currentItem,n=t.inventory;if((le(e)?tt(e[0],n):tt(e,n))>=a/se[ce(D.currentItem)].sell_value){t.gold+=a;const e=a/se[ce(D.currentItem)].sell_value;re(ce(D.currentItem),e),mt(`${k}Selling..`),mt(\"<br>Returning...\"),D.sellLoop()}else mt(`${k}Not enough of the item in the inventory!`),D.sellLoop()}else mt(\"<br>Returning..\"),\"buy\"==D.mode?D.shopLoop():D.sellLoop();et(n.player)}},q={wooden_sword:{name:\"Wooden sword\",item:\"wooden_sword\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",2]]},vine_wrapped_wooden_sword:{name:\"Vine wrapped wooden sword\",item:\"vine_wrapped_wooden_sword\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"wooden_sword\",1],[\"weak_vine\",6]]},wooden_stave:{name:\"Wooden stave\",item:\"wooden_stave\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",2]]},vine_wrapped_wooden_stave:{name:\"Vine wrapped wooden stave\",item:\"vine_wrapped_wooden_stave\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"wooden_stave\",1],[\"weak_vine\",6]]},vine_armour:{name:\"Vine armour\",item:\"vine_armour\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",12]]},strong_vine_chestplate:{name:\"Strong vine chestplate\",item:\"strong_vine_chestplate\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"vine_armour\",1],[\"weak_vine\",3],[\"hempweed_ligament\",3]]},vine_pantaloons:{name:\"Vine pantaloons\",item:\"vine_pantaloons\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",8]]},feathervine_sword:{name:\"Feathervine sword\",item:\"feathervine_sword\",description:\"Allows for the crafting of an item.\",gold:25,items:[[\"wood\",3],[\"grey_wolf_pelt\",10],[\"weak_vine\",7]]},wolf_hermit_staff:{name:\"Wolf hermit staff\",item:\"wolf_hermit_staff\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"wooden_stave\",1],[\"grey_wolf_pelt\",10],[\"sharp_claw\",2]]},wooden_armour:{name:\"Wooden armour\",item:\"wooden_armour\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",4]]},wooden_trousers:{name:\"Wooden trousers\",item:\"wooden_trousers\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",3]]},vine_membrane_bracers:{name:\"Vine membrane bracers\",item:\"vine_membrane_bracers\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"hempweed_ligament\",4],[\"weak_vine\",10]]},blue_vine_charm:{name:\"Blue vine charm\",item:\"blue_vine_charm\",description:\"Allows for the crafting of an item.\",gold:35,items:[[\"slime_ball\",10],[\"hempweed_ligament\",4],[\"weak_vine\",8]]},leather_pants:{name:\"Leather pants\",item:\"leather_pants\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"leather\",2]]},leather_cap:{name:\"Leather cap\",item:\"leather_cap\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"leather\",1]]},leather_armour:{name:\"Leather armour\",item:\"leather_armour\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"leather\",3]]},wolfhide_armour:{name:\"Wolfhide armour\",item:\"wolfhide_armour\",description:\"Allows for the crafting of an item.\",gold:40,items:[[\"grey_wolf_pelt\",8],[\"leather\",1]]},wolfhide_cap:{name:\"Wolfhide cap\",item:\"wolfhide_cap\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",5],[\"leather\",1]]},wolfhide_leggings:{name:\"Wolfhide leggings\",item:\"wolfhide_leggings\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",6],[\"leather\",1]]},slime_bracers:{name:\"Slime bracers\",item:\"slime_bracers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"slime_ball\",10],[\"steel\",1]]},slime_reinforced_sword:{name:\"Slime reinforced sword\",item:\"slime_reinforced_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",10],[\"simple_sword\",1]]},wolfhide_charm:{name:\"Wolfhide charm\",item:\"wolfhide_charm\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"sharp_claw\",2],[\"grey_wolf_pelt\",8]]},lizard_bracelet:{name:\"Lizard bracelet\",item:\"lizard_bracelet\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"tiny_lizard_tail\",2],[\"leather\",3]]},aquus_orb:{name:\"Aquus orb\",item:\"aquus_orb\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5]]},water_infused_armour:{name:\"Water infused armour\",item:\"water_infused_armour\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5],[\"advanced_silver_armour\",1]]},water_infused_helm:{name:\"Water infused helm\",item:\"water_infused_helm\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",3],[\"advanced_silver_helm\",1]]},water_infused_legwear:{name:\"Water infused legwear\",item:\"water_infused_legwear\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",4],[\"advanced_silver_helm\",1]]},luminant_charm:{name:\"Luminant charm\",item:\"luminant_charm\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"steel\",2],[\"leather\",2],[\"light_absorbant_eye\",1]]},wolfhide_dagger:{name:\"Wolfhide dagger\",item:\"wolfhide_dagger\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"simple_dagger\",1],[\"grey_wolf_pelt\",8]]},pickaxe:{name:\"Pickaxe\",item:\"pickaxe\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"wood\",1]]},makeshift_steel_armour:{name:\"Makeshift steel armour\",item:\"makeshift_steel_armour\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_steel_helm:{name:\"Makeshift steel helm\",item:\"makeshift_steel_helm\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",2]]},makeshift_steel_legwear:{name:\"Makeshift steel legwear\",item:\"makeshift_steel_legwear\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_sword:{name:\"Makeshift sword\",item:\"makeshift_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"leather\",1]]},wolven_reavers:{name:\"Wolven reavers\",item:\"wolven_reavers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"leather\",1],[\"sharp_claw\",3],[\"grey_wolf_pelt\",3]]},bladed_armour:{name:\"Bladed armour\",item:\"bladed_armour\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"makeshift_steel_armour\",1],[\"sharp_claw\",4]]},friendly_greater_slime:{name:\"Friendly greater slime\",item:\"friendly_greater_slime\",description:\"Strengthen your slime buddy!\",gold:0,items:[[\"friendly_slime\",1],[\"water_rune\",1],[\"water_energy\",1],[\"slime_bracers\",1]]},crafted_health_potion:{name:\"Crafted health potion\",item:\"crafted_health_potion\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"greater_health_potion\",1],[\"health_potion\",1],[\"slime_ball\",3]]},tear_of_lucia:{name:\"Tear of Lucia\",item:\"tear_of_lucia\",description:\"Allows for the crafting of an item.\",gold:500,items:[[\"steel\",4],[\"conduit_orb\",1],[\"manasoul\",1]]},shadow_cloak:{name:\"Shadow cloak\",item:\"shadow_cloak\",description:\"Allows for the crafting of an item.\",gold:400,items:[[\"leather\",3],[\"shadow_pelt\",8],[\"shadow_corona\",1],[\"grey_wolf_pelt\",15]]},earthen_sword:{name:\"Earthen sword\",item:\"earthen_sword\",description:\"Allows for the crafting of an item.\",gold:220,items:[[\"sharpened_sword\",1],[\"venomous_claw\",4],[\"sharp_claw\",3],[\"steel\",3]]},red_slime_bracers:{name:\"Red slime bracers\",item:\"red_slime_bracers\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"red_slime_ball\",10],[\"steel\",2]]},shinobi_armour:{name:\"Shinobi armour\",item:\"shinobi_armour\",description:\"Allows for the crafting of an item.\",gold:300,items:[[\"ninja_garb\",1],[\"grey_wolf_pelt\",10],[\"shadow_pelt\",5]]},shinobi_headcloak:{name:\"Shinobi headcloak\",item:\"shinobi_headcloak\",description:\"Allows for the crafting of an item.\",gold:250,items:[[\"ninja_wrap\",1],[\"grey_wolf_pelt\",7],[\"shadow_pelt\",3]]},shinobi_leggings:{name:\"Shinobi leggings\",item:\"shinobi_leggings\",description:\"Allows for the crafting of an item.\",gold:280,items:[[\"ninja_legwear\",1],[\"grey_wolf_pelt\",8],[\"shadow_pelt\",4]]},water_orb_necklace:{name:\"Water orb necklace\",item:\"water_orb_necklace\",description:\"Allows for the crafting of an item.\",gold:200,items:[[\"water_orb\",1],[\"steel\",5],[\"aquus_cluster\",12]]},vinewarding_charm:{name:\"Vinewarding charm\",item:\"vinewarding_charm\",description:\"Allows for the crafting of an item.\",gold:25,items:[[\"weak_vine\",3],[\"hempweed_ligament\",2]]},bearkiller_charm:{name:\"Bearkiller charm\",item:\"bearkiller_charm\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"sharp_claw\",2],[\"brown_fur\",5]]},canine_charm:{name:\"Canine charm\",item:\"canine_charm\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"grey_wolf_pelt\",6],[\"sharp_claw\",3]]},earthen_shield_potion:{name:\"Earthen shield potion\",item:\"earthen_shield_potion\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",3],[\"hempweed_ligament\",1]]},weak_slingshot:{name:\"Weak slingshot\",item:\"weak_slingshot\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",3],[\"sharp_claw\",1],[\"leather\",1]]},leather:{name:\"Leather\",item:\"leather\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"brown_fur\",2]]},invigorating_flower:{name:\"Invigorating flower\",item:\"invigorating_flower\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"brown_fur\",4],[\"slime_ball\",2]]},desperate_flower:{name:\"Desperate flower\",item:\"desperate_flower\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"grey_wolf_pelt\",4],[\"sharp_claw\",2]]},monster_essence:{name:\"Monster essence\",item:\"monster_essence\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"brown_fur\",3],[\"slime_ball\",3],[\"hempweed_ligament\",2],[\"sharp_claw\",2],[\"grey_wolf_pelt\",3],[\"special_sap\",3]]},kindred_essence:{name:\"Kindred essence\",item:\"kindred_essence\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"monster_essence\",1],[\"special_sap\",3],[\"magic_bark\",3]]}},R={1:[\"wooden_sword\",\"wooden_stave\",\"wooden_armour\",\"wooden_trousers\",\"leather_cap\",\"leather_armour\",\"leather_pants\",\"wolven_reavers\",\"leather\",\"pickaxe\",\"blue_vine_charm\",\"vinewarding_charm\",\"bearkiller_charm\",\"canine_charm\",\"vine_armour\"]},j=(e,t)=>{F.returnFunction=e,F.recipesAvailable=t,n.first_time.crafting?(n.first_time.crafting=!1,it(S.craftingIntroduction,F.recipesLoop)):F.recipesLoop()},F={recipesAvailable:void 0,currentRecipe:void 0,recipesArray:void 0,returnFunction:void 0,craftingFromNpc:void 0,recipesLoop:(e=!0)=>{null==F.recipesAvailable?(mt(`${k}Currently in the recipes menu. Input 'f'/'floor' to use the recipes allocated`+\" to your floor. If you have any personal recipes, input 'p'/'personal' in order to access them.\"),mt(\"Input <b>'b'</b> or <b>back</b> to return.\"),ut(F.recipesLoopResponse),kt([\"floor\",\"personal\",\"back\"]),F.craftingFromNpc=!1):(mt(\"Currently crafting using recipes you do not own...\"),F.craftingFromNpc=!0,F.recipesLoop2())},recipesLoopResponse(){pt(F.recipesLoopResponse);const e=ht().toLowerCase();if(\"f\"==e||\"floor\"==e)mt(\"<br>Using floor recipes..\"),F.recipesAvailable=R[n.current_floor],F.recipesLoop2();else if(\"p\"==e||\"personal\"==e){0==n.player.recipes.length?(mt(\"<br>You don't have any personal recipes!\"),F.recipesLoop()):F.recipesLoop2()}else\"b\"==e||\"back\"==e?(mt(\"<br>Returning...\"),F.recipesAvailable=void 0,F.currentRecipe=void 0,F.recipesArray=void 0,F.craftingFromNpc=void 0,F.returnFunction(),F.returnFunction=void 0):(mt(\"<br>Invalid input.\"),ut(F.recipesLoopResponse))},recipesLoop2:(e=!0)=>{et(n.player,\"normal\"),e&&(mt(`${k}Input 'a' to see them all in alphabetical order, `+\"or input 'r' to see first all recipes that can be crafted.\"),mt(\"<br>Input <b>'b'/'back'</b> to return.\")),kt([\"alphabetical\",\"ready\",\"back\"]),ut(F.displayRecipes)},displayRecipes:()=>{const e=ht().toLowerCase();pt(F.displayRecipes);const t=n.player;var a;a=null==F.recipesAvailable?t.recipes.map(e=>q[e]):F.recipesAvailable.map(e=>q[e]);const s=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"];var o=!1;switch(e){case\"alphabetical\":case\"a\":o=!0;for(var r=0;r<a.length;r++)for(var i=1;i<a.length;i++)for(var l=!1,c=0;0==l;){const e=s.indexOf(a[i].name[c].toLowerCase()),t=s.indexOf(a[i-1].name[c].toLowerCase());if(e<t){const e=a[i];a[i]=a[i-1],a[i-1]=e,l=!0}else e>t?l=!0:c+1>=a[i].name.length||c+1>=a[i-1].name.length?l=!0:c++}break;case\"ready\":case\"r\":o=!0;var f=0;for(r=1;r<a.length;r++)if(F.checkReady(a[r],inventory)){const e={...a[r]};delete a[r],a.unshift(e),r++,++f==a.length&&(r=a.length)}a=a.filter((function(e){return void 0!==e}));break;case\"back\":case\"b\":mt(\"<br>Returning...\"),1==F.craftingFromNpc?(F.recipesAvailable=void 0,F.currentRecipe=void 0,F.recipesArray=void 0,F.craftingFromNpc=void 0,F.returnFunction(),F.returnFunction=void 0):(F.recipesAvailable=void 0,F.recipesLoop());break;default:mt(\"<br>Invalid input.\"),F.recipesLoop2(!1)}if(o){F.recipesArray=a,mt(`${k}Showing recipes...`),a.forEach(e=>{const t=1==F.checkReady(e,inventory)?\"[X]\":\"[ ]\";mt(`${a.indexOf(e)+1} - ${e.name} (${t})`)}),mt(`${k}Say the name or number of a recipe to access it. From there you can see the`+\" items and gold required, and craft the recipe if you desire as well.\"),mt(\"Input <b>'b'</b> or <b>'back'</b> to return.\");a.map(e=>e.name);ut(F.recipesMenu)}},recipesMenu:()=>{pt(F.recipesMenu);const e=ht().toLowerCase(),t=F.recipesArray,a=parseInt(e);var n=!1;\"NaN\"!=a.toString()&&t.length>a-1&&(n=!0);var s,o=!1;switch(t.forEach(t=>{t.name.toLowerCase()==e&&(o=!0,s=t)}),!0){case n:t[a-1];F.currentRecipe=t[a-1],F.recipeLoop();break;case o:F.currentRecipe=s,F.recipeLoop();break;case\"b\"==e:case\"back\"==e:mt(`${k}Returning..`),F.recipesLoop();break;default:mt(`${k}Invalid input.`),ut(F.recipesMenu)}},recipeLoop:()=>{F.recipesArr;const e=F.currentRecipe,t=n.player.inventory;mt(`${k}Currently viewing ${e.name} recipe.`),mt(\"The following is required:\"),mt(`${e.gold} gold (You have ${n.player.gold})`),e.items.forEach(e=>{mt(`${e[1]} ${se[e[0]].name}${e[1]>1?\"s\":\"\"} (You have ${fe(e[0],t)})`)}),mt(\"<br>The recipe will craft the following item:\"),ie(se[e.item],!0,!0,!0,!1,!0),F.checkReady(e,t)&&mt(\"<br>This item can be crafted.\"),mt(\"<br>If the item can be crafted, type 'c' to craft it. Otherwise, type 'z' to scroll up, 'x' to scroll down (looking through more recipes), or 'b' to go back. 'l' will reprint the list and your position.\"),kt([\"up\",\"down\",\"list\",\"craft\",\"back\"]),ut(F.recipeMenu)},recipeMenu:()=>{pt(F.recipeMenu);const e=ht().toLowerCase(),t=F.recipesArray,a=F.currentRecipe,s=n.player.inventory;var o=t.findIndex(e=>a.name==e.name);switch(e){case\"up\":case\"z\":mt(`${k}Scrolling back..`),0==o?o=t.length-1:o--,F.currentRecipe=t[o],F.recipeLoop();break;case\"down\":case\"x\":mt(`${k}Scrolling forward..`),o==t.length-1?o=0:o++,F.currentRecipe=t[o],F.recipeLoop();break;case\"list\":case\"l\":var r;mt(`${k}Displaying recipes...`),t.forEach(e=>{r=e.name==F.currentRecipe.name?\"<b>\":\"\",mt(`${r}${e.name}${\"<b>\"==r?\"</b>\":\"\"}`)}),ut(F.recipeMenu);break;case\"c\":F.checkReady(F.currentRecipe,s)?(mt(`${k}How many of this item would you like to craft? Please input the `+\" number you would like to craft, or input '0' if you would like to return.\"),ut(F.inputQuantity)):(mt(\"<br>This item cannot be crafted.\"),ut(F.recipeMenu));break;case\"back\":case\"b\":mt(\"<br>Returning...\"),F.recipesLoop();break;default:mt(\"<br>Invalid input.\"),ut(F.recipeMenu)}},inputQuantity:()=>{const e=ht().toLowerCase();pt(F.inputQuantity);const t=n.player.inventory;if(\"NaN\"==parseInt(e).toString())mt(\"<br>Invalid input.\"),ut(F.inputQuantity);else if(0==parseInt(e))mt(\"<br>Returning...\"),F.recipeLoop();else{const a=parseInt(e),n=JSON.parse(JSON.stringify(F.currentRecipe));n.items.forEach(e=>{e[1]=e[1]*a}),n.gold=n.gold*a;const s=F.checkReady(n,t);mt(`${k}In order to craft ${e} ${se[F.currentRecipe.item].name}`+`${a>1?\"s\":\"\"}, You will need the following items:`),n.items.forEach(e=>{const a=e[0],n=e[1],s=fe(a,t);mt(`${n} ${se[a].name} (You have ${s})`)}),mt(`${n.gold} gold`),s?(mt(`<br>Are you sure you would like to craft ${a}`+` ${se[F.currentRecipe.item].name}? Input 'y'/'yes' to confirm, or enter`+\" anything else to return.\"),F.craftAmount=a,ut(F.craftConfirmation)):yt([[\"<br>You cannot craft this much of that item!\",2]],\"outside\",()=>{F.recipeLoop()})}},craftConfirmation:()=>{pt(F.craftConfirmation);const e=ht().toLowerCase();pt(F.craftConfirmation);const t=n.player;if(\"y\"==e||\"yes\"==e){const e=F.currentRecipe,n=F.craftAmount;for(var a=0;a<n;a++)t.gold-=e.gold,e.items.forEach(e=>{re(e[0],e[1])});oe(e.item,n,n),et(t,\"normal\"),yt([[`${k}Returning to recipe menu...`,2]],\"outside\",()=>{F.recipeLoop()})}else mt(\"<br>Returning...\"),F.recipeLoop()},checkReady:(e,t)=>{const a=n.player.inventory,s=e.items;var o=!0;return s.forEach(e=>{fe(e[0],a)>=e[1]==0&&(o=!1)}),n.player.gold<e.gold&&(o=!1),o}},Y=(e,t=!0)=>{1==e[0].length&&(e=[e]),e.forEach(e=>{null!=q[e]&&-1==n.player.recipes.indexOf(e)&&(n.player.recipes.push(e),t&&mt(`<br>Unlocked recipe [${q[e].name}]`))})},H={currentlyPlaying:\"none\",currentAudio:void 0,basePath:\"../music/\",forest:\"../music/forest.ogg\",find:\"../music/find.ogg\",lobby:\"../music/lobby.ogg\",volume:.5,volumeFX:.5,playMusic:e=>{if(e!=H.currentlyPlaying)if(null!=H.currentAudio&&document.body.removeChild(H.currentAudio),\"$\"==e[e.length-1]){H.currentlyPlaying=e;var t=new Audio;const a=H.basePath+e.replace(\"$\",\"\")+\"start.ogg\";t.setAttribute(\"src\",a),t.setAttribute(\"hidden\",\"true\"),t.volume=H.volume,document.body.appendChild(t),H.currentAudio=t,t.addEventListener(\"timeupdate\",(function(){if(this.currentTime>this.duration-.1){const a=H.currentAudio;var t=new Audio;const n=H.basePath+e.replace(\"$\",\"\")+\"full.ogg\";t.setAttribute(\"src\",n),t.addEventListener(\"timeupdate\",(function(){this.currentTime>this.duration-.2&&(this.currentTime=0,this.play())})),t.setAttribute(\"hidden\",\"true\"),t.volume=H.volume,document.body.appendChild(t),H.currentAudio=t,t.play(),document.body.removeChild(a)}})),t.play()}else{H.currentlyPlaying=e,(t=new Audio).setAttribute(\"src\",H[e]),t.setAttribute(\"loop\",\"true\"),t.setAttribute(\"hidden\",\"true\"),t.volume=H.volume,document.body.appendChild(t),H.currentAudio=t,t.play()}else H.currentAudio.play()},pauseMusic:()=>{null!=H.currentAudio&&H.currentAudio.pause()},stopMusic:()=>{null!=H.currentAudio&&(document.body.removeChild(H.currentAudio),H.currentAudio=void 0,H.currentlyPlaying=\"none\")},changeVolume:(e,t)=>!(e>1||e<0)&&((\"volume\"==t||\"volumeFX\"==t)&&(null!=H.currentAudio&&\"volume\"==t&&(H.currentAudio.volume=e),H[t]=e,!0)),playFX:e=>{var t=new Audio;t.setAttribute(\"src\",H[e]),t.setAttribute(\"hidden\",\"true\"),t.volume=H.volumeFX,document.body.appendChild(t),t.addEventListener(\"ended\",e=>{document.body.removeChild(e.path[0])}),t.play()}},N={lily:{name:\"Lily\",say:[[\"<i>You approach the child. As you near her, she backs away slightly.\",1]],conditional:{\"level: 0\":{say:[[\"[name]: H-Hello [player]... can you help me?\"]],action:[\"gold\",1e3],action3:[\"exp\",1e3],action2:[\"end\"]},\"item: 1212 slime_ball\":{say:[[\"[name]: Icky! Slime!\"]],action:[\"items\",\"slime_ball\",200],action2:[\"end\"]},\"flag: -beatSlime\":{say:[[\"[name]: You haven't beat the slime? Weakling.\"]],action:[\"recipe\",\"slam_sword\"],action2:[\"end\"]},\"level: 121\":{say:[[\"[name]: I don't have anything interesting to say to you\",1]],action:[\"end\"]}},end:[[\"[name]: Goodbye.\",1]]},f1_little_girl:{name:\"Little girl\",conditional:{f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>She takes the slime balls off you without waiting or asking for permission--</i>\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",250],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl seems preoccupied playing with slimes. Best leave her alone..\",1.3]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action5:[\"exp\",500],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},f1_docile_slime:{name:\"Docile slime\",say:[[\"<i>You approach the slime.</i>\",1]],conditional:{\"flag: f1_helped_docile_slime\":{say:[[\"<i>The slime looks happy to see you. It wants to show you something.\",2]],action:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},\"flag: -f1_spoken_to_docile_slime\":{say:[[\"<i>Slimes can't speak, obviously. But it seems to want something from you.</i>\",1],[\"<i>Somehow you gather that it is trying to gesture to the remnants of slime on the ground.. as though it wants some slime for itself.</i>\",2],[\"<i>100 Slime balls might be enough to appease the slime. It seems to have nothing more to say to you.\",2]],action:[\"flag\",\"f1_spoken_to_docile_slime\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_docile_slime\":{conditional:{\"item: 100 slime_ball\":{say:[[\"<i>The slime looks pleased with you, and hopeful. Will you give the sime what it wants?\",2]],options:{yes:{exp:[\"exp\",3e3],say:[[\"<i>You give the slime 100 slime balls. It has way of showing emotion, but you can tell that it's very happy.\",2],[\"<i>It seems to want to show you something..\",1]],action3:[\"items\",\"slime_ball\",-100],action:[\"flag\",\"f1_helped_docile_slime\",\"true\"],action4:[\"items\",\"friendly_slime\",1],action5:[\"recipe\",\"friendly_greater_slime\"],action2:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},no:{say:[[\"<i>The slime looks disappointed. It doesn't want to speak to you anymore.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>You don't seem to have what the slime wants. It ignores you.</i>\",1]],action:[\"end\"]}}}},end:[[\"[name]: ...\",1]]},f1_wanderer_statue:{name:\"Unnamed Wanderer\",say:[[\"<i>You approach the statue.</i>\",1],[\"<i>It is well looked after, despite showing clear signs of wear. It seems to be of some kind of goddess, who adorns a benevolent smile with her arms outstreched, as though enveloping many in her embrace.\",2],[\"<i>Below the statue is a tall rectangular stone container. It is filled up about halfway with various items.\",2]],conditional:{\"item: 1 wanderer_memorabilia\":{say:[[\"Some of the items remind you of the wanderer memorabilia that you found off somebody else. Will you add some to the container?\",2]],options:{yes:{say:[[\"<i>You place a piece of wanderer memorabilia into the rectangle. Nothing happens for a short while, but a person eventually emerges. They have ragged clothes and a few weapons and other useful items holstered at their waste. Despite their decrepit appearance there is an aura of experience and knowledge that you interpret from their demeanour.\",4],[\"[name]: Who are you? You don't look like a wanderer.\",1]],action:[\"items\",\"wanderer_memorabilia\",-1],options:{\"wanderer?\":{say:[[\"[name]: You must have happened on somebody else's memorabilia...\",1],[\"<i>The person thinks to themselves for a little.</i>\",1],[\"[name]: Many people have gone on adventures in the past in search for some purpose, or in pursuit of some kind of treasure or reward.\",2],[\"[name]: Regardless of whether they find what they are looking for, at the end of their quest, they almost always find that there is nothing more they want to achieve... these people are called wanderers.\",3],[\"[name]: Not all wanderers believe in the Wandering Goddess Lucia, but she is somewhat of an icon for wanderers... hence the statue.\",2],[\"[name]: Wanderers place their memorabilia here in honour of her and other wanderers. if two wanderers meet here, they will often battle to remember their days of adventure and learn of the experiences of others.\",3],[\"[name]: You aren't a wanderer, but you still seem like somebody who can fight. If you would like, we can battle here, right now.\",2]],action:[\"flag\",\"f1_met_wanderer_at_statue\",\"true\"],options:{yes:{action:[\"waypoint\",\"let's fight!\"]},no:{say:[[\"[name]: Alright. Well, now you know the purpose of this area. If you come here again, it's unlikely you will meet the same person. Keep safe, young one.\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}}},\"let's fight!\":{say:[[\"[name]: Very well then. Prepare yourself!\",1]],action:[\"battle\",[[\"wayward_traveler\",{changeLevel:!1,levelCap:!1,addLevels:!1}],[\"waypoint\",\"after_battle\"]]]}}},no:{say:[[\"<i>You decide to leave the statue alone.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>There doesn't seem to be much to do here. Nothing you own reminds you of the items that are in your possession. You decide to leave the statue alone.\",2]],action:[\"end\"]}},end:[[\"\",0]],after_battle:{say:[[\"[name]: It was a good fight. I am glad to have met you. Perhaps we will meet again someday...\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}},f1_rude_kid:{name:\"Kid\",conditional:{\"flag: -f1_spoken_to_rude_kid\":{say:[[\"<i>You approach the kid. He has an uninviting look on his face. As you near him, he spits on the floor.\",2],[\"[name]: Pfft. Whaddya want? Loser.\",1]],options:{\"<i>kick his shin</i>\":{say:[[\"<i>You kick the kid's shin.</i>\",1],[\"[name]: OW! What the hell, dude?!\",1],[\"<i>The kid's eyes tear up and he runs away.\",1],[\"<i>You notice he left some gold on floor. Hopefully you don't see that kid again.</i>\",1.5]],action:[\"gold\",50],action5:[\"exp\",100],action2:[\"flag\",\"f1_kicked_rude_kids_shin\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]},\"why are you so rude?\":{say:[[\"[name]: Rude? I'm just battle hardened, y'see. Check this out.\",1],[\"<i>The kid holds up a small patch of grey wolf fur.</i>\",1],[\"[name]: Runt attacked me and my li'l sis. We got separated, and I fought off the wolf with my own bare hands. Not a pretty sight for pansy folk like yourself.\",2],[\"[name]: You know what? Keep this pelt. As a reminder of the horrors of war.\",1],[\"<i>He throws the pelt at your feet.</i>\",1],[\"[name]: Not everyone has to go through what I did...\",1],[\"<i>The kid walks away, hands in his pockets. Hopefully you don't see that kid again.\",2]],action:[\"items\",\"grey_wolf_pelt\",3],action5:[\"exp\",300],action2:[\"flag\",\"f1_extended_convo_with_rude_kid\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]}}},\"flag: f1_spoken_to_rude_kid\":{say:[[\"<i>You look for the rude kid, but he isn't there anymore.\",1]],action:[\"end\"]}},end:[[\"\",0]]},f1_wolf_man:{name:\"Lucas\",say:[[\"<i>You approach the man. As you do so, he stands up. He smells a little.\",1.5],[\"[name]: Hi. My name's Lucas. I live in the forest, nearby this area.\",1],[\"[name]: I thought it would be a good idea to let you know that there more wolves in this spot than normal. If you need some wolf pelts, it might be worth hanging around here.\",2],[\"<i>The man closes his eyes. It doesn't seem like he wants to say much else..</i>\",1]],action:[\"end\"],end:[[\"\",0]]},f1_old_man:{name:\"Old Man\",say:[[\"<i>You start to move towards the old man, but before you can approach, he quickly notices you and beckons you over rather enthusiastically.</i>\",1.5],[\"[name]: Helloe there! Not many people come 'round these parts no more.\",1],[\"[name]: It's such a beautifool place.. but a little dangerous for most people, even though it's a little less dangerous than the ruins and forest a li'l far off.\",2],[\"[name]: Must the be rumours of some massive sea serpent, 'though I've never seen nothing like that in my time..\",1.5],[\"[name]: Thanks for listenin' to me ramblin' off about nothing. I have some stuff that could be of use to you, if you're interested...\",2]],options:{yes:{say:[[\"[name]: Ok, then - have yourself a look..\"]],action:[\"shop\",\"f1_old_man\",[\"end\"]]},no:{say:[[\"[name]: Alrighty then - I'll be seeyin' ye around, I suppose.\"]],action:[\"end\"]}},end:[[\"<i>You say goodbye to the old man.</i>\",1]]},f1_little_boy:{name:\"Little boy\",say:[[\"<i>As you begin to approach the kid, you notice his distinctive eyes, a hue of dull red. The dark clothes that he's wearing make him difficult to say, and coalesce with his facial aesthetic into a somewhat edgy demeanour.\",2]],conditional:{\"flag: f1_helped_little_girl\":{conditional:{\"flag: -f1_spoken_to_little_boy\":{say:[[\"[name]: ...\",.5],[\"[name]: I don't wanna speak to a weakling like you. Bring me the Crimson Regalia if you're realling worth my time..\",1],[\"<i>The kid seems reluctant to speak. Perhaps if you bring him 30 or so red slime balls..\",1]],action:[\"flag\",\"f1_spoken_to_little_boy\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_boy\":{conditional:{\"flag: -f1_helped_little_boy\":{conditional:{\"item: 30 red_slime_ball\":{say:[[\"[name]: Is that.. Crimson Reglia?!\",1],[\"<i>The child hesitates a little. It doesn't seem like he thought you'd actually bring him the slime balls.\",2],[\"[name]: I-I bet you stole them from someone. How pathetic--\",1],[\"[player]: What the hell man? What's your problem?\",1],[\"[name]: You can speak?! Crapdude calm down I was just messing around I--\",1],[\"[player]: Kids like you are so annoying.. I'll show you--\",1],[\"[name]: Brocalm down! OK, I found this thing in this forest and I thought it was really cool and since putting it on I haven't been attacked here just leave me alone!!\",2.5],[\"<i>The kid hands you a pendant and runs off. By the time you've processed what has happened the kid is out of earshot. Oh well. There was some money on the floor as well... your lucky day.\",3]],action:[\"gold\",500],action6:[\"exp\",3e3],action2:[\"items\",\"red_slime_ball\",-30],action5:[\"items\",\"shadowwarding_pendant\",1],action3:[\"flag\",\"f1_helped_little_boy\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: I don't see the crimson regalia.. get out of my sight.\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_boy\":{say:[[\"<i>...Is what you would've seen, but the kid is noowhere to be found.\",1]],action:[\"end\"]}}}}},\"level: 0\":{say:[[\"[name]: You aren't worthy.. I can feel it.\",1],[\"<i>The boy refuses to say anything more. It looks like you need to help someone else before him.</i>\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_lost_person:{name:\"Lost person\",say:[[\"[name]: Hi... I'm lost. Do you know where I am?\",1]],options:{yes:{say:[[\"[name]: Sweet! Can you tell me where I am then?\",1]],options:{\"Sorry I was lying, I don't know.\":{say:[[\"[name]: ...\",1],[\"[name]: Godammit.\",1]],action:[\"end\"]},\"The dark forest\":{say:[[\"[name]: Thanks! That's not helpful at all!\",1],[\"[name]: Asshole.\",1]],action:[\"end\"]},\"The twisted trees\":{say:[[\"[name]: I'm pretty sure that's not even a place.\",1]],action:[\"end\"]},Hell:{say:[[\"[name]: Figures. I've raided one too many village I guess..\",1],[\"[name]: But the women were worth it.\",1],[\"[name]: You were joking? UM..\",1]],action:[\"end\"]}}},no:{say:[[\"[name]: Fair enough. Not like I can talk...\",1],[\"[name]: I know a bit about the general area we're in. The Driftwood area has four main sections.\",2],[\"[name]: In the center sort of is the foresty area. To the north-west is a small settlement. I don't know...\",2],[\"...much about the rest but I guess there's one area other than this one..\",1],[\"[name]: This place is kind of well-known because it has a bunch of interesting stuff in such a small area.\",2],[\"[name]: Apparently there's a hydra in a nearby sea, and some evil creature lurking in the forest.. gives me the creeps!\",2],[\"[name]: If you ever find out where this place is, please let me know! I don't wanna stay here any longer...\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_weapons_shop:{name:\"Reiner\",say:[[\"<i>You approach the weapons merchant. He is quite large and muscular, with brown hair and brown facial hair. He flashes a friendly smile your way.</i>\",3],[\"[name]: Hey there, runt! You interested in some weapons?\",1]],options:{\"weapons shop\":{action:[\"shop\",\"f1_weak_weapons\",[\"end\"]]},\"advanced weapons shop\":{action:[\"shop\",\"f1_strong_weapons\",[\"end\"]]},nope:{say:[[\"[name]: No problem! Seeya around!\",1]],action:[\"end\"]}},end:[[\"[name]: See you later, runt! Come again soon!\",1]]},f1_armour_shop:{name:\"Sora\",say:[[\"<i>You approach the armour merchant. They look a little out of place. As you approach him, he scratches his head and watches you as you near.</i>\",3],[\"[name]: Umm... hi. Would you like some armour?\",1]],options:{\"armour shop\":{action:[\"shop\",\"f1_weak_armours\",[\"end\"]]},\"advanced armour shop\":{action:[\"shop\",\"f1_strong_armours\",[\"end\"]]},nope:{say:[[\"[name]: Alright. Um..\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, uh.. see you later, I guess...\",1]]},f1_misc_shop:{name:\"Amy\",say:[[\"<i>You approach the miscellaneous merchant. She has blond hair and an intelligent glare. She watches you silently as you approach, however she has a friendly aura.\",3],[\"[name]: Hello. I have some stuff for sale. Would you like anything?\"]],options:{\"misc shop\":{action:[\"shop\",\"f1_misc\",[\"end\"]]},\"VIP misc shop\":{conditional:{\"item: 1 vip_card\":{action:[\"shop\",\"f1_misc_vip\",[\"end\"]]},\"level: 0\":{say:[[\"[name]: Sorry, you need a VIP card to access the VIP shop.\",1]],action:[\"waypoint\",\"nope\"]}}},nope:{say:[[\"[name]: Ok. Thanks for coming.\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, see you later.\",1]]},f1_man_a:{name:\"Male settler\",say:[[\"<i>You approach the man. He, similar to most other men in the settlement, has a somewhat muscular build.\",1.5],[\"He had no facial hair and messy black hair, complimenting his plain, dark brown eyes. His attire was...\",1.5],[\"...Comparable to most others in the settlement, plain fabric of a dull hue.\",1],[\"[name]: Hey. What's up?\",1]],options:{talk:{say:[[\"[name]: This settlement has existed for a few centuies, I think.. I moved in a few years ago.\",2],[\"[name]: It's fairly dangerous around here, so a lot of the people who stay here are fairly strong.\",2],[\"[name]: But there are tons of animals here, and some of them can be hunted for good reagents, so it's a great place for adventurers to stay.\",3]],conditional:{\"level: 0\":{options:{\"How long are you going to stay here?\":{say:[[\"[name]: Ehh... I don't know. Maybe a few more years.\",1],[\"[name]: Maybe once I've made some more money. There are some safer places nearby.\",1],[\"[name]: I could settle down, get a more stable job and a house.. it's pretty appealing.\",1.5],[\"[name]: But I don't really know right now. It's pretty nice here right now. Gets you in the mood for an adventure..\",2]],action:[\"waypoint\",\"level: 0\"]},\"Do you have a family?\":{say:[[\"[name]: Parents? Yeah. But no wife or kids.\",1],[\"[name]: Women who just want to settle down don't really stay here, it's not a great place unless you wanna adventure. So most of the girls here are single and uninterested.\",3],[\"[name]: It's a real shame. I wish Amy would take some interest in me..\",1]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}}}},bye:{action:[\"end\"]}},end:[[\"[name]: Mk, see you later.\",1]]},f1_hyssha:{name:\"Hyssha\",say:[[\"<i>You approach the woman. She seems stronger than most of the residents. Wavy auburn hair cascades down her spine.</i>\",2],[\"<i>She has a somewhat tough face, and her blue eyes grant her a piercing gaze. She's wearing brownish hunter garb, accentuated by the intricate wooden bow holstered at her back.\",3],[\"[name]: Hello. I take it you are an adventuerer. My name is Hyssha.\",1]],conditional:{\"level: 0\":{options:{\"What are you doing here?\":{say:[[\"[name]: I have been staying here for some time. I am searching for a legendary beast..\",1.5],[\"[name]: I am trying to hunt powerful beasts. I use each one I slay to improve my adventuring gear.\",2]],options:{\"How many beasts have you slain?\":{say:[[\"[name]: Three. Rokusha, an earth anima, whose magical scales I used to enhance my bow.\",1.5],[\"[name]: Ignia, a fire wyvern. It's wings and scales I used to enhance my armour. With it's heart, I enhanced my bow.\",2],[\"[name]: The final was a beast in this area.. I don't know it's name, but it escaped before I could slay it. From a poison-tipped claw it had I enhanced many of my arrows.\",3],[\"[name]: I cannnot simply slay all beasts I come across. I must consider the consequences.\",1.5],[\"[name]: Otherwise, I would have slain many more creatures..\",1]],action:[\"waypoint\",\"level: 0\"]},\"Where's the legendary beast that you're hunting?\":{say:[[\"[name]: I don't know. It is a type of water beast, however to this point is has eluded me.\",2],[\"[name]: Perhaps it is absent, or must be summoned.. I must do more research.\",1.5],[\"(BOSS NOT ADDED YET)\"]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}},bye:{say:[[\"<i>You say goodbye to Hyssha.\",1]],action:[\"end\"]}}}},end:[[\"[name]: Until next, adventurer.\",1]]},f1_worried_woman:{name:\"Worried woman\",say:[[\"<i>You approach the worried woman. She has short hair and a friendly face, although right now it is warped into a worried expression.\",2],[\"[name]: Hello.. have you seen my kids?\",1],[\"[name]: They both seem to like slimes a lot.. but they ran off into the forest and I haven't seem them since!\",2],[\"[name]: I can't go out to find them on my own.. I wouldn't be able to fend for myself.\",1.5]],action:[\"end\"],end:[[\"[name]: I hope they're ok... if they were hurt, I..\",1]]},f1_tutorial_man:{name:\"Pel\",say:[[\"<i>You approach the person being attacked by a slime. Despite his body cowering in fear, his facial expression shows no signs of trepidation.\",2.2],[\"[name]: aah a slime please help me aah noo please\",1.5],[\"<i>He doesn't sound like he's in danger. Regardless, probably a good idea to help him out;\",2]],action:[\"battle\",[[\"slime\",{}],[\"waypoint\",\"afterBattle\"]]],afterBattle:{action3:[\"music\",\"forest\"],say:[[\"<i>The man dusts himself off briefly and smiles at you.</i>\",1.5],[\"[name]: Whew!\",1],[\"[name]: That was a close one. Thanks for saving me, stranger!\",1.5],[\"[name]: As thanks, I'll give you a little tip:\",1.3],[\"[name]: You might've seen that slime boost just now. Slimes can't do it consistently because they're pretty stupid!\",2],[\"[name]: I'd recommend you learn how to <b>Boost</b>, I think most people who train to become <b>Adventurers</b> can use this skill.\",3],[\"[name]: Many enemies can do things like that too, so I'd recommend you be wary of their resources and options.\",2],[\"[name]: Oh! And <b>Check</b> as well, if you're struggling to beat an enemy. You might be able to glean some information.\"],[\"[name]: Anyways, you seem to have found yourself in a pretty unforgiving place...\",1.5],[\"[name]: I'd recommend you look for the small forest camp in the area. You'll find some people there to speak to.\",2.5],[\"[name]: I think it's... somewhere to the north-east?\",1.5],[\"[name]: Anyways, I'll see you around, probably. Bye!\",1.5],[\"[name]: Oh-- one more thing. <i>The man stops walking and turns around.</i>\",2],[\"[name]: Don't wander too far out in any direction. The outskirts of the forest are a little dangerous..\",2.5],[\"<i>And with that, the man disappears into the distance.\",1.5],[\"<i>It seems like he was recommending you learn a skill called <b>Boost</b>. Maybe check it out..\",2],[\"<i>Skills can learned via the <b>Stats</b> menu. Input <b>st/stats</b> while in the main menu or while exploring.\",2.3]],action:[\"flag\",\"f1_spoken_to_tutorial_man\",\"true\"],action2:[\"end\"]},end:[[\"\",0]]},f1_wanderer_collector:{name:\"Man who enjoys collecting\",say:[[\"<i>You approach a rather friendly-looking person. He is male and of average build. He has simple black hair and no facial hair, along with simple villager clothes.\",3]],conditional:{\"flag: f1_helped_wanderer_collector\":{say:[[\"Hato: Yo. I haven't got much for you RN, sorry.\",1]],action:[\"end\"]},\"flag: f1_spoken_to_wanderer_collector\":{say:[[\"[name]: Hi there. Do you have the memorabilia?\",1]],conditional:{\"item: 100 wanderer_memorabilia\":{say:[[\"[name]: Cool! Now, just give it here...\",1]],options:{\"give him the memorabilia\":{action:[\"items\",\"wanderer_memorabilia\",-100],say:[[\"[name]: Thank you for your patronage! As promised, I will reward you for your troubles..\",2],[\"Hato: My name's Hato, by the way. Maybe I'll see you again later. Seeya for now!\",2]],action2:[\"items\",\"barren_sword\",1],action3:[\"gold\",2500],action4:[\"exp\",5e3],action6:[\"flag\",\"f1_helped_wanderer_collector\",\"true\"],action5:[\"end\"]},\"don't give him the memorabilia\":{say:[[\"[name]: Man. Ok. Whatever.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Doesn't look like it. Come back another time.\",1.5]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Hello! Do you know what wanderers are?\"]],options:{yes:{conditional:{\"flag: f1_met_wanderer_at_statue\":{say:[[\"[name]: Alright! Cool. I collect wanderer memorabilia. Interpreting the adventures and pasts of various adventurers... it's really interesting to me. Therefore!\",3],[\"[name]: If you can get me some, let's say, <i>100</i>, I'll take it off your hands and ensure you're rewarded handsomely. What do you say?\",2],[\"[name]: Well, I won't listen anyways. Come back if you have them and want me to take them off your hands.\",2],[\"<i>The man doesn't look like he'll say any more. Best to come back if you have what he wants.\",2]],action:[\"flag\",\"f1_spoken_to_wanderer_collector\",\"true\"],action2:[\"end\"]},\"level: 0\":{say:[[\"[name]: Really? What are they then?\",1],[\"[player]: Uhh...\",1],[\"<i>The man frowns disappointedly.</i>\",1],[\"[name]: Not cool, dude.. come back when you know a little more.\",1.5]],action:[\"end\"]}}},no:{say:[[\"[name]: Ah, ok. Nevermind - I'll see you around.\"]],action:[\"end\"]}}}},end:[[\"\",0]]},f1_lost_teenager:{name:\"Lost teenager\",conditional:{\"flag: -f1_spoken_to_lost_teenager\":{say:[[\"<i>You approach the lost teenager. They don't look particularly worried as you approach. In fact, they don't look like they're feeling anything at all.\",3.5],[\"[name]: Hi. I've been here for a while now, I'm not really sure what's going on.\",1.5],[\"[name]: One thing's for sure, I'm probably not getting out of this forest. I've been wandering for ages.\",2],[\"[name]: You can have these potions. I'm not gonna need them where I'm going...\",1.5]],action:[\"items\",\"health_potion\",3],action2:[\"items\",\"greater_health_potion\",1],action3:[\"flag\",\"f1_spoken_to_lost_teenager\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"<i>You look for the lost teenager, but they aren't there anymore.\",1.5]],action:[\"end\"]}},end:[[\"\",0]]},f1_traveller_woman:{name:\"Traveller woman\",say:[[\"<i>You approach the traveler woman. Once distinctive feature you notice is her kale-green backpack, something people seem to not have around here.\",2.5]],conditional:{\"flag: -f1_spoken_to_traveller_woman\":{say:[[\"[name]: Hey.. as you might be able to tell, I'm not from 'round here.\",1.5],[\"[name]: I enjoy seeing what's up about different places. This place is sorta dangerous, there's only one tiny settlement in the forest that I've found!\",3],[\"[name]: It's hard to stock up on supplies. I know there are some places outside this main forest, but I can't get to the end of them without turning back... I wonder if there's something there.\",3],[\"[name]: Oh well! I guess I'll never know. This looks like a nice place to take a nap..\",2],[\"<i>The woman looks sleepy. You don't want to bother her, so you say goodbye.</i>\",1.5],[\"[name]: Oh! I was attacked by some monster as well. I don't need this stuff, so you can have it.\",2],[\"<i>The woman hands you some items. You decide to leave afterwards.</i>\",1.5]],action:[\"items\",\"weak_vines\",5],action2:[\"items\",\"hempweed_ligament\",2],action3:[\"items\",\"sharp_claw\",1],action4:[\"items\",\"venomous_claw\",1],action5:[\"flag\",\"f1_spoken_to_traveller_woman\",\"true\"],action6:[\"end\"]},\"level: 0\":{say:[[\"<i>She's currently asleep. Looks like she can fend for herself - probably shouldn't bother her.\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_alchemist_woman:{name:\"Alchemist woman\",say:[[\"<i>You approach the alchemist.</i>\",1]],conditional:{\"flag: f1_helped_alchemist_lady\":{say:[[\"Skyla: Hey, [player]! Is there something you need? I owe you after all..\",2.2]],options:{\"help me craft reagents\":{say:[[\"Skyla: Alright. If you've gathered things from this area, I can help you make some useful items with them - have a look..\",2.2]],action:[\"crafting\",[\"earthen_shield_potion\",\"weak_slingshot\",\"invigorating_flower\",\"desperate_flower\",\"monster_essence\",\"kindred_essence\"],[\"waypoint\",\"goodbye\"]]},\"can you use magic?\":{say:[[\"Skyla: Well, I'm a mage not an alchemist; but it is helpful to know some magic..\",2],[\"Skyla: I can use some enchantment and trance spells, which are very helpful. Although a tad immoral!\",2.2],[\"Skyla: That said, I would never use them to do bad things.. sometimes I just really need help, you know?\",2.2]],action:[\"waypoint\",\"flag: f1_helped_alchemist_lady\"]},nope:{say:[[\"Skyla: Aw, that's a shame..\",1.2]],action:[\"waypoint\",\"goodbye\"]}}},\"flag: f1_spoken_to_alchemist_lady\":{say:[[\"[name]: Hi, adventurer! Have you got the items?\",1.25]],options:{\"give her the items\":{conditional:{\"item: 10 grey_wolf_pelt\":{conditional:{\"item: 1 special_sap\":{say:[[\"[name]: You got the items!\",1],[\"<i>She smiles brightly at you. Something about her joyous face makes you feel very pleased.\",2],[\"[name]: As promised, I'll give you something in return. Come a little closer..\",2],[\"<i>You approach her, slowly..</i>\",4],[\"<i>She hands you a piece of paper. It has some writing about potions on it.</i>\",2],[\"[name]: It's a crafting recipe for good health potions. It should help you on your adventures..\",2.25],[\"[name]: Was it what you expected? Hehe.\",1],[\"[name]: You can have some gold as well. My name's Skyla, by the way. I'll remember the help you gave me today. Come back if you need anything!\",2.6],[\"<i>She smiles again and waves goodbye.</i>\",1]],action:[\"recipe\",\"crafted_health_potion\"],action2:[\"gold\",300],action3:[\"flag\",\"f1_helped_alchemist_lady\",\"true\"],action5:[\"items\",\"grey_wolf_pelt\",-10],action6:[\"items\",\"special_sap\",-1],action4:[\"end\"]},\"level: 0\":{say:[[\"<i>You don't have all the items you need. You have no choice but to inform her, a little remorsefully, you notice.\",2]],action:[\"waypoint\",\"tell her you don't have the items\"]}}},\"level: 0\":{say:[[\"<i>You don't have all the items you need. You have no choice but to inform her, a little remorsefully, you notice.\",2]],action:[\"waypoint\",\"tell her you don't have the items\"]}}},\"tell her you don't have the items\":{say:[[\"<i>Oh, alright.. just come back when you do, okay? I'll be waiting..\",2],[\"<i>She seems a little sad but smiles and waves goodbye.</i>\",1.5]],action:[\"end\"]},\"ask where to find the items\":{say:[[\"[name]: You should be able to get pelt from wolves in the forest.\",1.2],[\"[name]: You can find special sap from lesser treants in the forest.\",2.5],[\"[name]: Just make sure you're strong enough to catch their attention and defeat them - but I'm sure for you it won't be a problem! There should be one around the coordinates <b>13, 29</b>.\",3],[\"[name]: Good luck, [player]! I'll be waiting..\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>She has a large dark blue witch hat which should look silly, but she seems to make it work. It compliments her brown hair nicely, which is medium length and somewhat messy.</i>\",3.5],[\"<i>Her clothes seem to be a modified version of plainish blue robes on top, and on the bottom, robe bottoms fashioned into a skirt to aid movement. Her attire in general seems to be a modified wizard's robe to enable efficient movement and accentuate her female features.\",4.5],[\"<i>As you approach, she greets you with an inviting smile.</i>\",1.5],[\"[name]: Oh, an adventurer? Just my luck, I needed some help.\",1.5],[\"[name]: What's your name, adventurer?\",1.2],[\"<i>You have a sudden, uncontrollable urge to answer her question.</i>\",1.7],[\"[player]:  [player].\",1],[\"[name]: [player]? That's a nice name...\",1.2],[\"[name]: Hey, [player].. I need some items for some alchemy I'm doing, but I can't really be bothered to get them myself..\",2],[\"[name]: Could you help me? All I need is 10 grey wolf pelts and 1 special sap, nothing that hard to get..\",2.5],[\"[name]: Of course, I'll make it worth your while..\",1.25]],options:{yes:{say:[[\"<i>The woman smiles at you. Having her smile at you makes you feel really good for some reason.\",2.5],[\"[name]: Thank you!\",1],[\"[name]: In case you didn't know, you can find special sap from lesser treants in the forest.\",2.5],[\"[name]: Just make sure you're strong enough to catch their attention and defeat them - but I'm sure for you it won't be a problem! There should be one around the coordinates <b>13, 29</b>...\",3],[\"[name]: Just bring the things back to me whenever you're ready. I'll be waiting..\",2]],action:[\"flag\",\"f1_spoken_to_alchemist_lady\",\"true\"],action2:[\"end\"]},no:{say:[[\"<i>The woman frowns slightly, in a disappointed, not angry manner.</i>\",1.5],[\"[name]: Just think about it, please? If you get the items and want to give them to me, just come over. I'll be waiting.\",2.5]],action:[\"flag\",\"f1_spoken_to_alchemist_lady\",\"true\"],action2:[\"end\"]}}}},end:[[\"\",0]],\"tell her you don't have the items\":{say:[[\"[name]: Oh, alright.. just come back when you do, okay? I'll be waiting..\",2],[\"<i>She seems a little sad but smiles and waves goodbye.\",1.5]],action:[\"end\"]},goodbye:{say:[[\"Skyla: Come back later, okay?\",1.2]],action:[\"end\"]}},f1_forest_craftsman:{name:\"Lucas\",say:[[\"<i>You approach the craftsman, who is currently sitting behind a table that has some kind of schematics on it.</i>\",2]],conditional:{\"flag: f1_spoken_to_forest_craftsman\":{action:[\"waypoint\",\"loop\"]},\"level: 0\":{say:[[\"<i>They're wearing a brown apron and have a somewhat bored expression, which does not help the dull impression given by his brown bowl-shaped hair and matching dreary brown eyes.\",3],[\"<i>His clothes, too, are plain, but considering the various stains and small patches rips it has sustained, it can be assumed that this is a 'work pair' not to be valued greatly.\",3],[\"[name]: Man, nothing ever happens here...\",1.5],[\"<i>He looks up and notices you.\",1],[\"[name]: Oh.\",1]],action:[\"flag\",\"f1_spoken_to_forest_craftsman\",\"true\"],action2:[\"waypoint\",\"loop\"]}},loop:{say:[[\"[name]: What's up?\",1]],options:{\"help me craft some items\":{say:[[\"[name]: Sure, if you've got the gold.\",1.5]],action:[\"crafting\",[\"vine_wrapped_wooden_sword\",\"vine_wrapped_wooden_stave\",\"strong_vine_chestplate\",\"wolfhide_armour\",\"wolfhide_cap\",\"wolfhide_leggings\",\"bladed_armour\",\"feathervine_sword\",\"wolf_hermit_staff\"],[\"end\"]]},bored:{say:[[\"[name]: Yeah. This settlement is a useful place to stay if you need to go into the forest often..\",2.2],[\"[name]: But nothing ever happens in this area. People say it can be dangerous but if you have any adventuring experience you'll be completely fine for the most part.\",2.7],[\"[name]: I settled here so that I could craft simple items for new adventurers and make an easy living, but it's gotten old way too fast. I might start adventuring again myself..\",3]],action:[\"waypoint\",\"loop\"]},cya:{action:[\"end\"]}}},end:[[\"[name]: Cya around.\",1]]},f1_forest_cleric:{name:\"Aina\",say:[[\"<i>You approach the cleric.\",1]],conditional:{\"flag: f1_spoken_to_aina\":{action:[\"waypoint\",\"loop\"]},\"level: 0\":{say:[[\"<i>They seem fairly young, likely in their mid-late teens.</i>\",1.2],[\"<i>Her purple attentive eyes match well with her straight black hair that  seems to have been cut short just at her shoulders. Her outfit is a mostly dark one, with black bermuda shorts and a grey belt. Holstered at her side is a small curved dagger and a few knives.</i>\",3.5],[\"<i>Her shirt is similarly dark; what looks a bit like a military fatigues t-shirt of various grey hues is under a basic black military vest that has several unique potions and other items holstered across it.</i>\",3],[\"<i>Were it not for her cleric's tome (easily identifiable due to the large cross on the cover), it would probably be impossible to infer her role.</i>\",2.5],[\"<i>She smiles frendily at you as you approach her.</i>\",1]],action:[\"flag\",\"f1_spoken_to_aina\",\"true\"],action2:[\"waypoint\",\"loop\"]}},loop:{say:[[\"[name]: Hi, what's up?\",1]],options:{\"can you heal me?\":{say:[[\"[name]: Sure! No problem. Just gimme a second...\",1.2],[\"<i>She must be a fairly competent healer, because she doesn't even remove the tome from where it is holstered at her waist. You feel your wounds disappear..\",2]],action:[\"heal\"],action2:[\"waypoint\",\"loop\"]},\"ask about her outfit\":{say:[[\"[name]: Yeah, not very healer-like is it? Haha..\",1.2],[\"[name]: I wanted to wear something a little more pure-looking, but my brother told me that it would just get dirty in the forest, and he said I should wear something a little more practical..\",3],[\"[name]: But to be honest, this is nice too. It's comfortable and looks kinda cool!\",1.7],[\"<i>She removes the dagger from the holseter at her waist and twirls it around dangerously before seamlessly putting it back\",2.2]],action:[\"waypoint\",\"loop\"]},\"ask what she's doing here\":{say:[[\"[name]: You probably know this already, but I'm a cleric in practice-\",1.5],[\"<i>She slaps the cleric tome at her hip.</i>\",1],[\"[name]: My brother was helping me get some practice with support - since he's a mage, he would do most of the fighting and I would help out, as well as fight a little bit.\",2.5],[\"[name]: He's out right now, though... in the north of the forest I think. I've gone out on my own a bit but I don't want to go too far... so I'm here waiting for him.\",2.5]],action:[\"waypoint\",\"loop\"]},\"ask about teleprotation stones\":{say:[[\"[name]: Yeah! There's one that goes straight here.\",1.2],[\"[name]: It'll cost you a little, but it's really helpful to be able to come back whenever.\",2],[\"[name]: I've got a few, if you want some:\",1]],action:[\"shop\",\"f1_forest_cleric_shop\",[\"end\"]]},\"say goodbye\":{action:[\"end\"]}}},end:[[\"[name]: Alright, bye!\",1]]},f1_ninja_trainer:{name:\"Sora\",say:[[\"<i>You approach the ninja. He is sat down leaning against a tree with one knee bent.\",1.5]],conditional:{\"flag: f1_spoken_to_sora\":{action:[\"waypoint\",\"loop\"]},\"level: 0\":{say:[[\"<i>You can't see his facial expression to the cloth covering most of his face, but his eyes look a little tired.</i>\",2],[\"<i>His clothes are at once conspicuous and innocuous; plain black trousers and a plain black shirt. The fabric looks silky and the clothes light and loose, given how easily they sway in the wind.\",2.5],[\"<i>He has a physique which looks at once agile and muscular; lean yet strong. He tilts his head in your direction as you near him.\",1.5]],action:[\"flag\",\"f1_spoken_to_sora\",\"true\"],action2:[\"waypoint\",\"loop\"]}},loop:{say:[[\"[name]: ..?\",1]],options:{\"ask about his outfit\":{say:[[\"[name]: ..Oh, this..? It's standard ninja, uhm.. attire.\",1],[\"[name]: It lets you move around quickly and silently, which is really helpful. You don't really need the headscarf thing unless you're doing something shady and to be honest it's a little inconvenient. But I wear it since I think it looks cool.\",3],[\"[name]: I have to take it off during missions, though.. it's just too inconvenient.\",1.5]],action:[\"waypoint\",\"loop\"]},\"ask about being a ninja\":{say:[[\"[name]: Being a ninja doesn't really mean much. It's just a battle style.\",1.5],[\"[name]: It's nice to have the ability to be stealthy because it means you can avoid fights.\",2],[\"[name]: I went out with a mage recently to do some hunting and it was just constant battling.. I don't have the stamina for that sort of stuff.\",2]],options:{\"ask for advice\":{say:[[\"[name]: Well, if you're a ninja, usually you use techniques that sorta combo into eachother - that way you can get the best out of your actions.\",2.5],[\"[name]: If you've learned a lot of techniques it can get kind of confusing, so it might be worth writing down on paper what techniques you have combo into what other techniques - so you know what to do to achieve certain effects.\",3.5],[\"[name]: I'd show you the ropes by sparring, but I'm just not in the mood right now.. maybe another time.\",2]],action:[\"waypoint\",\"loop\"]},\"...\":{action:[\"waypoint\",\"loop\"]}}},\"say goodbye\":{action:[\"end\"]}}},end:[[\"<i>Sora waves at you before tilting his head back to its original position.\",2]]},f1_forest_settlement_sign_north:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",1],[\"<i>It reads: Small forest settlement to the NORTH.\",1],[\"<i>Nothing else to see here...</i>\",1]]},f1_forest_settlement_sign_east:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",1],[\"<i>It reads: Small forest settlement to the EAST.\",1],[\"<i>Nothing else to see here...</i>\",1]]},f1_forest_settlement_sign_west:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",1],[\"<i>It reads: Small forest settlement to the WEST.\",1],[\"<i>Nothing else to see here...</i>\",1]]},f1_forest_settlement_sign_south:{name:\"Sign\",action:[\"end\"],end:[[\"<i>You read the sign.</i>\",1],[\"<i>It reads: Small forest settlement to the SOUTH.\",1],[\"<i>Nothing else to see here...</i>\",1]]},f1_lesser_treant:{name:\"Lesser treant\",say:[[\"<i>You notice that there one of the trees in the area seems to have some kind of.. facial expression?</i>\",2.2],[\"<i>Besides that, it looks just like the other trees.</i>\",1]],options:{\"attack it\":{conditional:{\"level: 5\":{say:[[\"<i>You strike the tree.</i>\",1],[\"<i>Very slowly, it begins to move - it's 'face' points in the same direction but you can tell that it can see all around itself.</i>\",2.2],[\"<i>The ground trembles slightly as what looks like roots emerge from the ground..\",2],[\"<i>And fly in your direction!</i>\",1]],action:[\"battle\",[[\"lesser_treant\",{changeLevel:7,levelCap:!1,addLevels:!1}],[\"waypoint\",\"afterBattle\"]]]},\"level: 0\":{say:[[\"<i>You strike the tree.</i>\",1],[\"<i>...the tree seems completely unfazed. Maybe if you were stronger..</i>\",1.5]],action:[\"end\"]}}},\"leave it alone\":{say:[[\"<i>You decide to leave the tree alone.</i>\",1]],action:[\"end\"]}},afterBattle:{say:[[\"<i>The tree, clearly quite damaged, becomes still again. Perhaps it is repairing itself..\",2],[\"<i>Regardless, it no longer responds to your attacks. Best to leave it alone.</i>\",1.5]],action:[\"end\"]},end:[[\"\",0]]},f1_treant:{name:\"Treant\",say:[[\"<i>You notice that there one of the trees in the area seems to have some kind of.. facial expression?</i>\",2.2],[\"<i>Besides that, it looks similar to the other trees - you notice that it has a greater girth and a greater abundance of leaves.</i>\",2.5]],options:{\"attack it\":{conditional:{\"level: 10\":{say:[[\"<i>You strike the tree.</i>\",1],[\"<i>Very slowly, it begins to move - it's 'face' points in the same direction but you can tell that it can see all around itself.</i>\",2.2],[\"<i>The ground trembles as what looks like roots emerge from the ground..\",2],[\"<i>And fly in your direction!</i>\",1]],action:[\"battle\",[[\"treant\",{changeLevel:12,levelCap:!1,addLevels:!1}],[\"waypoint\",\"afterBattle\"]]]},\"level: 0\":{say:[[\"<i>You strike the tree.</i>\",1],[\"<i>...the tree seems completely unfazed. Maybe if you were stronger..</i>\",1.5]],action:[\"end\"]}}},\"leave it alone\":{say:[[\"<i>You decide to leave the tree alone.</i>\",1]],action:[\"end\"]}},afterBattle:{say:[[\"<i>The tree, clearly quite damaged, becomes still again. Perhaps it is repairing itself..\",2],[\"<i>Regardless, it no longer responds to your attacks. Best to leave it alone.</i>\",1.5]],action:[\"end\"]},end:[[\"\",0]]},f1_lesser_ent:{name:\"Lesser ent\",say:[[\"<i>You notice that there one of the trees in the area seems to have some kind of.. facial expression?</i>\",2.2],[\"<i>Besides that, it looks similar to the other trees - you notice that it has a greater girth and a greater abundance of leaves. Furthermore, it radiates some kind of aura that demands both awe and veneration..</i>\",2.5],[\"<i>You notice that creatures in the forest tend to steer clear of this tree somewhat. It's branches sway as though the have lives of their own.\",2.2]],options:{\"attack it\":{conditional:{\"level: 17\":{say:[[\"<i>You strike the tree.</i>\",1],[\"<i>Very slowly, it begins to move - it's 'face' points in the same direction but you can tell that it can see all around itself.</i>\",2.2],[\"<i>The ground quakes as what looks like roots emerge from the ground..\",2],[\"<i>And fly in your direction!</i>\",1]],action:[\"battle\",[[\"lesser_ent\",{changeLevel:17,levelCap:!1,addLevels:!1}],[\"waypoint\",\"afterBattle\"]]]},\"level: 0\":{say:[[\"<i>You strike the tree.</i>\",1],[\"<i>...the tree seems completely unfazed. Maybe if you were stronger..</i>\",1.5]],action:[\"end\"]}}},\"leave it alone\":{say:[[\"<i>You decide to leave the tree alone.</i>\",1]],action:[\"end\"]}},afterBattle:{say:[[\"<i>The tree, clearly quite damaged, becomes still again. Perhaps it is repairing itself..\",2],[\"<i>Regardless, it no longer responds to your attacks. Best to leave it alone.</i>\",1.5]],action:[\"end\"]},end:[[\"\",0]]},f1_travelling_hermit:{name:\"Old traveller\",say:[[\"<i>You approach the old traveller.</i>\",1],[\"<i>One would assume he is in his seventies or eighties, given his fairly shrivelled skin and hunched back. He uses a walking stick that is a little lighter than the trees surrounding the steady himself as he walks.\",3],[\"<i>His clothes are very plain; a grey top that seems a little large for his shrunken self, and plan brown trousers that fit the same criteria. He doesn't react as you near him, but he emanates a friendly aura.\",3],[\"[name]: Hello there.\",1]],options:{\"What are you doing?\":{say:[[\"[name]: I'm looking for a statue. I think it is somewhere around the outskirts of this forest...\",2],[\"[name]: It is a statue of Lucia, the wandering Goddess. I am not a wanderer myself, but the statues are a centerpiece of their lifestyle. Somewhat of a spectacle to behold, in my opinion.\",3]],options:{\"wanderer?\":{say:[[\"[name]: Yes, wanderer. Maybe if you can meet a wanderer at the statue they will tell you a bit more. I'm no expert, unfortunately.\",2],[\"[name]: Anyways, I should be on my way. I'll never find the statue at this rate!\",1.5],[\"<i>The old man begins to walk away. You notice that he moves very quickly for someone who needs a walking stick. Very quickly, his image fades in between the trees.\",2]],action:[\"flag\",\"f1_spoken_to_hermit\",\"true\"],action2:[\"end\"]},\"oh, ok. Bye\":{say:[[\"[name]: I think I'll rest around here for a little while, so perhaps I will see you around. Until then, traveller!\",1.5]],action:[\"end\"]}}},bye:{say:[[\"<i>The old man looks a little confused by your sudden approach and retreat.</i>\",1.5],[\"[name]: Ah, okay then.. I'm going to rest here for a little bit, so perhaps I will see you around. Until then, traveller!\",1.5]],action:[\"end\"]}},end:[[\"\",0]]},f1_person_looking_for_settlement:{name:\"Lost person\",say:[[\"<i>You approach the random person. They seem a little lost.</i>\",1.25],[\"[name]: Hello!! I know there is a settlement around here.. do you know where it is??\",1.5],[\"[name]: Please!!! I'm running out of resources and I'm too scared to go without direction! Can you tell me??\",2]],options:{\"north-east\":{say:[[\"North east?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"north-west\":{say:[[\"North west?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action3:[\"flag\",\"f1_helped_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"straight south\":{say:[[\"Straight south?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"south-east\":{say:[[\"South east?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]}},end:[[\"[name]: Thank you!! Bye!\",1],[\"<i>The person runs off into the distance. Hopefully you told them the right direction..\",1.5]]},f1_owned_crafted_sword:{name:\"Wolves\",say:[[\"<i>You notice something interesting on the floor.\",1],[\"<i>It's a sword; it looks quite elegantly-made and surprisingly pristine for something left on the floor.</i>\",1.5],[\"<i>Will you take it?</i>\",1]],options:{yes:{say:[[\"<i>You reach for the sword and pick it up.\",2.5],[\"<i>As you move to walk away, you can hear growling from all directions..\",1.5],[\"<i>Suddenly, a group of grey wolves emerge! Their hides are bristling with fury, their eyes fixated on the sword. They emerge from thickets in all directions, blocking off any escape.\",2.5],[\"<i>Before you can absorb the situation, they start to attack--\",1]],action:[\"battle\",[[\"grey_wolf\",{changeLevel:10,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleOne\"]]]},no:{say:[[\"You decide to leave the sword alone.\",1]],action:[\"end\"]}},postBattleOne:{say:[[\"Another wolf attacks!\",1]],action:[\"battle\",[[\"grey_wolf\",{changeLevel:12,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleTwo\"]]]},postBattleTwo:{say:[[\"Most of the wolves back down after seeing you defeat two in a row.\",1.5],[\"However, a few remain. A wolf whose claws are dripping with a dangerous-looking substance approaches..\",2]],action:[\"battle\",[[\"young_venomous_wolf\",{changeLevel:13,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleThree\"]]]},postBattleThree:{say:[[\"By this point, all of the wolves have left. You take the sword and leave, feeling a little startled.\",2]],action:[\"flag\",\"f1_taken_crafted_sword\",\"true\"],action2:[\"gold\",250],action3:[\"exp\",3e3],action4:[\"items\",\"crafted_blade\",1],action5:[\"end\"]},end:[[\"\",1]]},f1_explorer_woman:{name:\"Explorer woman\",say:[[\"<i>You approach the woman. She has a friendly smile, along with black hair and blue eyes.\",1.5],[\"<i>Her clothes are clearly geared for exploration - a jacket, trousers and (somewhat long) boots various hues of brown.\",2],[\"<i>Two pouches holstered at her waist allow for easy storage without the compromise of maneouvrability that comes with a large backpack.\",2],[\"[name]: Hey! I'm currently exploring this area, looking for rare things.\",1.5],[\"[name]: Sometimes brazen creatures attack me as I travel, but I think there are some creatures that won't ambush you and that you'll only find if you go exploring looking for them. Usually, those are the rare ones!\",2],[\"[name]: Did you know that? It shocked me when I found out!\",1]],options:{yes:{say:[[\"[name]: Oh.. you did? I feel a little silly now, haha!\",1]],action:[\"end\"]},no:{say:[[\"[name]: There you go then! Hopefully my infomration was helpful!!\",1]],action:[\"end\"]}},end:[[\"[name]: I'm going to stay here for a while. I've been running around exploring for so long, I need a break! Seeya around!\",1.5]]},f1_person_on_toilet:{name:\"Person 'using the toilet'\",say:[[\"<i>You can see someone in the distance, covered by an outburst of leaves.</i>\",1.5],[\"<i>It's difficult to see what they're doing. You move some leaves to get a closer look..</i>\",1.5],[\"[name]: HEY!! What the hell are you doing?! Go away!!\",1],[\"<i>The person throws some leaves in your direction, obviously to no avail. You decide it's best to leave them alone.</i>\",2]],action:[\"end\"],end:[[\"\",0]]},f1_mage_trainer:{name:\"Teenage mage\",say:[[\"<i>You approach the mage. Physically, he isn't very powerful-looking, but perhaps that can be expected from his profession.</i>\",2]],conditional:{\"flag: f1_spoken_to_daryl\":{say:[[\"[name]: Uh, hi. Do you need something?\",1]],action:[\"waypoint\",\"opts\"]},\"level: 0\":{say:[[\"<i>His clothes seem to be classic mage attire somewhat crudely cut and shaped to be suited to quick movement and close combat. His robes, a dark blue has been fashioned into an open jacket that shows the light grey shirt underneath, over which a strap carrying various potions is observed.</i>\",4],[\"<i>His pants are simple adventurer's wear; slightly baggy brown trousers with fairly long black boots.</i>\",2],[\"<i>The mage's hood, the same design as his jacket, is the giveaway of his discipline. He looks quite tired, and seems to be resting while leaning against a tree.\",2.5],[\"[name]: Uh, hi. Do you need something?\",1]],action:[\"flag\",\"f1_spoken_to_daryl\",\"true\"],action2:[\"waypoint\",\"opts\"]}},opts:{options:{\"ask for advice about being a mage\":{say:[[\"[name]: Uhm, well..\",1],[\"<i>The mage thinks for a little.\",1],[\"[name]: Learning to cast spells is hard part. Everything else isn't too hard.\",2],[\"[name]: I guess sometimes you can combine spells for new effects, but that's more of a creativity thing..\",2.3],[\"[name]: Tell you what - I have this sheet of some magic combinations I found out. If you give me 500 gold, I'll give it to you; I've got them memorised anyways, and I need some gold to buy more potions.\",3]],options:{\"'yes'\":{conditional:{\"gold: 500\":{say:[[\"Alright! Here you go:\",1]],action:[\"gold\",-500],action2:[\"items\",\"mage_cheat_sheet\",1],action3:[\"waypoint\",\"afterSale\"],action4:[\"flag\",\"f1_bought_from_teenage_mage\",\"true\"],afterSale:{say:[[\"[name]: I guess now I can head back to the settlement. I won't get Aina mad after I tell her I lost all our gold... <i>He mumbles to himself.</i>\",2.5],[\"<i>The mage walks off.</i>\",1]],action:[\"end\"]}},\"level: 0\":{say:[[\"<i>You try to get the gold out but you don't have enough. You tell him that you can't pay.\",2],[\"[name]: Wh-\",1],[\"[name]: *sigh*\",1],[\"[name]: It's fine, just come back when you can pay.\",1.5],[\"<i>The mage remains where he is. Maybe come back later.</i>\"]],action:[\"end\"]}}},\"'no'\":{say:[[\"[name]: Alright, that's fine. Come see me if you change your mind.\",2]],action:[\"end\"]}}},nope:{say:[[\"[name]: Um.. Ok.\",1],[\"<i>The mage stops looking at you. Maybe come and see him again another time.</i>\",2]],action:[\"end\"]}}},end:[[\"\",0]]},gold_test:{say:[[\"hey\",1]],action:[\"gold\",1e3],end:[[\"bye\",1]]},f1_hydra_staff_on_floor:{interesting_item:[\"f1_picked_up_hydra_staff\",[\"hydra_staff\",1]],end:[[\"\",0]]},f1_crown_of_darkness_on_floor:{interesting_item:[\"f1_picked_up_crown_of_darkness\",[\"crown_of_darkness\",1]],end:[[\"\",0]]},f1_simple_sword_on_floor:{interesting_item:[\"f1_picked_up_simple_sword\",[\"simple_sword\",1]],end:[[\"\",0]]},f1_damaged_helm_on_floor:{interesting_item:[\"f1_picked_up_damaged_helm\",[\"damaged_helm\",1]],end:[[\"\",0]]},f1_metal_stave_on_floor:{interesting_item:[\"f1_picked_up_metal_stave\",[\"metal_stave\",1]],end:[[\"\",0]]},f1_silver_axe_on_floor:{interesting_item:[\"f1_picked_up_silver_axe\",[\"silver_axe\",1]],end:[[\"\",0]]},f1_silver_dagger_on_floor:{interesting_item:[\"f1_picked_up_silver_dagger\",[\"silver_dagger\",1]],end:[[\"\",0]]},f1_pickaxe_on_floor:{interesting_item:[\"f1_picked_up_pickaxe\",[\"pickaxe\",1]],end:[[\"\",0]]},f1_feathervine_sword_on_floor:{interesting_item:[\"f1_picked_up_feathervine_sword\",[\"feathervine_sword\",1]],end:[[\"\",0]]},f1_silver_helm_on_floor:{interesting_item:[\"f1_picked_up_silver_helm\",[\"silver_helm\",1]],end:[[\"\",0]]},f1_wolfhide_cap_on_floor:{interesting_item:[\"f1_picked_up_wolfhide_cap\",[\"wolfhide_cap\",1]],end:[[\"\",0]]},f1_vine_helmet_on_floor:{interesting_item:[\"f1_picked_up_vine_helmet\",[\"vine_helmet\",1]],end:[[\"\",0]]},f1_ninja_headcloak_on_floor:{interesting_item:[\"f1_picked_up_ninja_headcloak\",[\"ninja_headcloak\",1]],end:[[\"\",0]]},f1_makeshift_steel_armour_on_floor:{interesting_item:[\"f1_picked_up_makeshift_steel_armour\",[\"makeshift_steel_armour\",1]],end:[[\"\",0]]},f1_greater_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_greater_mana_potion\",[\"greater_mana_potion\",1]],end:[[\"\",0]]},f1_vine_armour_on_floor:{interesting_item:[\"f1_picked_up_vine_armour\",[\"vine_armour\",1]],end:[[\"\",0]]},f1_vine_pantaloons_on_floor:{interesting_item:[\"f1_picked_up_vine_pantaloons\",[\"vine_pantaloons\",1]],end:[[\"\",0]]},f1_silver_legwear_on_floor:{interesting_item:[\"f1_picked_up_silver_legwear\",[\"silver_legwear\",1]],end:[[\"\",0]]},f1_slime_ball_on_floor:{interesting_item:[\"f1_picked_up_slime_ball\",[\"slime_ball\",8]],end:[[\"\",0]]},f1_weak_vine_on_floor:{interesting_item:[\"f1_picked_up_weak_vine\",[\"weak_vine\",6]],end:[[\"\",0]]},f1_hempweed_ligament_on_floor:{interesting_item:[\"f1_picked_up_hempweed_ligament\",[\"hempweed_ligament\",2]],end:[[\"\",0]]},f1_wood_on_floor:{interesting_item:[\"f1_picked_up_wood\",[\"wood\",4]],end:[[\"\",0]]},f1_steel_on_floor:{interesting_item:[\"f1_picked_up_steel\",[\"steel\",4]],end:[[\"\",0]]},f1_brown_pelt_on_floor:{interesting_item:[\"f1_picked_up_brown_pelt\",[\"brown_pelt\",6]],end:[[\"\",0]]},f1_venomous_claw_on_floor:{interesting_item:[\"f1_picked_up_venomous_claw\",[\"venomous_claw\",1]],end:[[\"\",0]]},f1_earthen_shield_potion_on_floor:{interesting_item:[\"f1_picked_up_earthen_shield_potion\",[\"earthen_shield_potion\",2]],end:[[\"\",0]]},f1_health_potion_on_floor:{interesting_item:[\"f1_picked_up_health_potion\",[\"health_potion\",4]],end:[[\"\",0]]},f1_greater_health_potion_on_floor:{interesting_item:[\"f1_picked_up_greater_health_potion\",[\"greater_health_potion\",2]],end:[[\"\",0]]},f1_crafted_health_potion_on_floor:{interesting_item:[\"f1_picked_up_crafted_health_potion\",[\"crafted_health_potion\",1]],end:[[\"\",0]]},f1_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_mana_potion\",[\"mana_potion\",4]],end:[[\"\",0]]},f1_crafted_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_crafted_mana_potion\",[\"crafted_mana_potion\",2]],end:[[\"\",0]]},f1_forest_explorer_daggers_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_daggers\",[\"forest_explorer_daggers\",1]],end:[[\"\",0]]},f1_forest_explorer_cap_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_cap\",[\"forest_explorer_cap\",1]],end:[[\"\",0]]},f1_forest_explorer_armour_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_armour\",[\"forest_explorer_armour\",1]],end:[[\"\",0]]},f1_forest_explorer_pants_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_pants\",[\"forest_explorer_pants\",1]],end:[[\"\",0]]},f1_forest_explorer_pendant_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_pendant\",[\"forest_explorer_pendant\",1]],end:[[\"\",0]]},f1_forest_explorer_charm_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_charm\",[\"forest_explorer_charm\",1]],end:[[\"\",0]]}},z=Object.assign(N),W={currentNpc:void 0,currentBranch:void 0,returnFunction:void 0,music:void 0,initNpc(e,t){this.currentNpc=JSON.parse(JSON.stringify(z[e])),this.currentBranch=this.currentNpc,this.returnFunction=t,this.runBranch(Object.keys(this.currentBranch))},runBranch(e){const t=this.currentBranch;var a,s=!1;e.forEach((t,a)=>{null==t&&e.splice(a,1)});for(var r=0;r<Object.keys(t).length;r++){const f=e[r];switch(f){case\"say3\":case\"say2\":case\"say\":{s=!0;const a=W.parseDialogue(st(t.say));yt(a,\"outside\",()=>{var t=e;delete t[t.indexOf(f)],this.runBranch(t)});break}case\"action6\":case\"action5\":case\"action4\":case\"action3\":case\"action2\":case\"action\":if(!s){const t=W.currentBranch;W.currentNpc;switch(t[f][0]){case\"end\":W.runBranch([\"end\"]);break;case\"waypoint\":{const e=t[f][1],a=at(W.currentNpc,e);W.currentBranch=a,W.runBranch(Object.keys(a));break}case\"shop\":{const e=t[f][1];var i=t[f][2];switch(i[0]){case\"end\":i=()=>{const e={action:[\"end\"]};W.currentBranch=e,W.runBranch(Object.keys(e))};break;case\"waypoint\":i=()=>{const e={action:t[f][2]};W.currentBranch=e,W.runBranch(Object.keys(e))}}L(e,i);break}case\"battle\":{const e=t[f][1][0];G.battleProcessing(n.player,(a=t[f][1][0][0],M[a]),()=>{const e={action:t[f][1][1]};W.currentBranch=e,W.runBranch(Object.keys(e))},e[1]);break}case\"gold\":{s=!0;const a=t[f][1];yt([[`<br>${a>0?\"Obtained\":\"Lost\"} ${Math.abs(a)} gold!`,1]],\"oustide\",()=>{n.player.gold+=a,et(n.player);var t=[...e];delete t[t.indexOf(f)],this.runBranch(t)});break}case\"exp\":{s=!0;const a=t[f][1];yt([[`<br>Obtained ${a} EXP!`,1]],\"oustide\",()=>{n.player.exp+=a,et(n.player),J();var t=[...e];delete t[t.indexOf(f)],this.runBranch(t)});break}case\"items\":{s=!0;const a=t[f][1],r=t[f][2];r>0?oe(a,r,r):re(a,-1*r),et(n.player),setTimeout(()=>{var t=[...e];delete t[t.indexOf(f)],this.runBranch(t)},1e3*o.messageDelay);break}case\"flag\":{const e=t[f][1],a=t[f][2];m[e].complete=\"true\"==a;break}case\"recipe\":{const e=t[f][1];Y(e);break}case\"music\":if(\"stop\"!=t[f][1]){const e=t[f][1];W.music=e,H.playMusic(e)}else H.music=void 0,H.stopMusic();break;case\"crafting\":t[f];j(()=>{const e={action:t[f][2]};W.currentBranch=e,W.runBranch(Object.keys(e))},t[f][1]);break;case\"heal\":G.heal(n.player.stats),et(n.player)}}break;case\"end\":if(!s&&\"end\"==e[0]){W.currentBranch;const e=o.messageDelay,t=W.currentNpc,a=W.returnFunction;yt(W.parseDialogue(st(t.end)),e,()=>{W.music=void 0,a()})}break;case\"options\":s||(mt(\"\"),Object.keys(t.options).forEach((e,t)=>{mt(`${t+1} - ${e}`)}),ut(this.branchResponse));break;case\"conditional\":if(!s){const e=W.currentBranch.conditional;var l=void 0,c=!1;n.player;Object.keys(e).forEach(t=>{c||1==ot([t])&&(c=!0,l=e[t])}),c&&(W.currentBranch=l,W.runBranch(Object.keys(l)))}break;case\"interesting_item\":yt([[\"<br>You notice something interesting on the floor. You decide to pick it up and take it with you.\",2]],\"outisde\",()=>{const e={action:[\"items\",t[f][1][0],t[f][1][1]],action3:[\"flag\",t[f][0],\"true\"],action2:[\"end\"]};W.currentBranch=e,W.runBranch(Object.keys(e))})}}},branchResponse(){pt(W.branchResponse);const e=ht().toLowerCase(),t=W.currentBranch,a=Object.keys(t.options);if(\"Nan\"!=parseInt(e).toString()&&\"\"!=e)if(null!=a[e-1]){const n=a[e-1];W.currentBranch=t.options[n],W.runBranch(Object.keys(W.currentBranch))}else mt(\"<br>Input out of range\"),ut(W.branchResponse);else mt(\"<br>Invalid input.\"),ut(W.branchResponse)},parseDialogue:e=>(e.forEach(e=>{e[0]=e[0].replace(/\\[name\\]/gi,`${W.currentNpc.name}`),e[0]=e[0].replace(/\\[player\\]/gi,`${n.player.name}`),e[0]=\"<br>\"+e[0]}),e),end(){W.runBranch([\"end\"])}},U=()=>({currentNpc:W.currentNpc,currentBranch:W.currentBranch,returnFunction:W.returnFunction,music:W.music}),G={battleProcessing(e,t,a,s={changeLevel:!0,levelCap:!1,addLevels:!1}){mt(\"<br>---------------------------------------\"),mt(`<br>Battle between ${e.name} and ${t.stats.name} has begun!`);const o=JSON.parse(JSON.stringify(e));this.playerFighter=this.addCombatStats(o.stats,o.name,\"player\",s);const r=JSON.parse(JSON.stringify(t));this.enemy=this.addCombatStats(r.stats,r.stats.name,\"enemy\",s),this.turn=0,this.state=[],this.endFunction=a,$(G.getPlayerAdd(G.playerFighter));var i=\"battle$\";null!=s.battleMusic&&(i=s.battleMusic),null!=U().music&&1==s.overlayMusic&&(i=U().music),H.playMusic(i),n.first_time.combat?(n.first_time.combat=!1,it(S.combatIntroduction,G.combatLoop)):this.combatLoop()},addCombatStats(e,t,a,s={changeLevel:!0,levelCap:!1,addLevels:!1}){if(e.name=t,e.health_mod=0,e.atk_mod=0,e.def_mod=0,e.matk_mod=0,e.mdef_mod=0,e.crit_chance_mod=0,e.crit_damage_mod=0,e.effectiveness_mod=0,e.resistance_mod=0,e.evasion_mod=0,e.speed_mod=0,e.actions=0,e.buffs=[],e.debuffs=[],e.mitigation=0,\"player\"==a)e.mana=e.current_mana,e.sp=0,e.stamina=e.current_stamina,e.max_health=this.getMaxHealth(e),e.health=e.current_health,e.actionsTaken=0,e.skillsList=e.skills.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var t=e.split(\"-\"),a=t[0],n=t[1];return d[a].skills[n].name}return e}),e.type=\"player\";else{e.modeBattle=\"normal\",e.mana=e.max_mana,e.stamina=e.max_stamina,e.health=e.max_health,e.sp=0,e.level=e.base_level,e.actionsTaken=0,e.type=\"enemy\";const t=e.base_level,a=n.player.level;var o;const r=null==s.changeLevel||s.changeLevel,i=null!=s.levelCap&&s.levelCap,l=null!=s.addLevels&&s.addLevels;if(o=0==r?t:1==r?a:r,0!=l&&o<a+l&&(o=a+l),0!=i&&o>i&&(o=i),o>t){const a=o-t;e.level=e.level+a,e.health=e.health+10*a,e.max_health=e.health,e.atk=e.atk+3*a,e.def=e.def+3*a,e.matk=e.matk+3*a,e.mdef=e.mdef+3*a,e.speed=e.speed+3*a,e.exp=e.exp+10*a}delete e.base_level}return e},getEquips(e){const t={atk:0,def:0,matk:0,mdef:0,crit_chance:0,crit_damage:0,effectiveness:0,resistance:0,evasion:0,speed:0,mitigation:0,max_mana:0,max_sp:0,max_stamina:0};return Object.keys(e.equips).forEach(a=>{null!=e.equips[a]&&Object.keys(se[e.equips[a]]).forEach(n=>{t.hasOwnProperty(n)&&(t[n]+=se[e.equips[a]][n])})}),t},getEquipStat(e,t){var a=0;return Object.keys(e.equips).forEach(n=>{null!=e.equips[n]&&Object.keys(se[e.equips[n]]).forEach(s=>{s==t&&(a+=se[e.equips[n]][t])})}),a},getMaxHealth(e){const t={health:0};return t.health+=this.getEquipStat(n.player.stats,\"health\"),t.health+=20*n.player.sp_investment.health,t.health+=20*(n.player.level-1),e.health+t.health},getEquipsElements(e){const t={offence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}},a=e.equips;return Object.keys(a).forEach(e=>{if(null!=a[e]){const n=se[a[e]];Object.keys(n.elemental.offence).forEach(e=>{t.offence[e]+=n.elemental.offence[e],t.offence[e]=Xe(t.offence[e],l,c)}),Object.keys(n.elemental.defence).forEach(e=>{t.defence[e]+=n.elemental.defence[e],t.defence[e]=Xe(t.defence[e],l,c)})}}),t},healthCheck:()=>G.playerFighter.health<=0?($(G.getPlayerAdd(G.playerFighter)),\"enemy\"):G.enemy.health<=0&&($(G.getPlayerAdd(G.playerFighter)),\"player\"),uploadChanges(e,t){G.playerFighter.health=e.health,G.enemy.health=t.health,G.playerFighter.mana=e.mana,G.playerFighter.sp=e.sp,G.playerFighter.stamina=e.stamina},calcBuffs(e,t){var a=0;const n=t.buffs;return n.length>0&&Object.keys(n).forEach(t=>{n[t].hasOwnProperty(e)&&(a+=n[t][e])}),a},calcDebuffs(e,t){var a=0;const n=t.debuffs;return Object.keys(n).forEach(t=>{n[t].hasOwnProperty(e)&&(a+=n[t][e])}),a},calcMod(e,t){var a=0;return a+=G.calcBuffs(e,t),a=Xe(a+=G.calcDebuffs(e,t),-.9,5)},calcElementBuffs(e){const t={offence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}};return e.buffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(a=>{t.offence[a]+=e.elemental.offence[a],t.offence[a]=Xe(t.offence[a],l,c)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(a=>{t.defence[a]+=e.elemental.defence[a],t.defence[a]=Xe(t.defence[a],l,c)}))}),e.debuffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(a=>{t.offence[a]+=e.elemental.offence[a],t.offence[a]=Xe(t.offence[a],l,c)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(a=>{t.defence[a]+=e.elemental.defence[a],t.defence[a]=Xe(t.defence[a],l,c)}))}),t},applyBuff(e,t,a,n,s,o={}){var r,i,l=!1;null!=o.ignoreRes&&(l=o.ignoreRes),n==a||\"buffs\"==s?(r=0,i=0):(r=Xe(a.effectiveness+G.calcBuffs(\"effectiveness\",a)+G.calcDebuffs(\"effectiveness\",a),0,999),i=Xe(n.resistance+G.calcBuffs(\"resistance\",n)+G.calcDebuffs(\"resistance\",n),0,999)),1==l&&(i=0),t=Xe(t+r,0,100);const c=Math.round(100*Math.random());c<=t-i?G.checkStacks(n[s],e.name)<e.max_stacks&&(mt(`${n.name} ${e.apply_text}`),\"buffs\"==s?n.buffs.push({...e}):n.debuffs.push({...e}),$(G.getPlayerAdd(G.playerFighter))):mt(c<=t?'<span style=\"color:#9500D6\">Effect resisted!</span>':\"Effect not applied.\")},stripBuff(e,t){for(var a=!1,n=0;n<e.length;n++){const s=e[n];if(s.name==t){if(s.hasOwnProperty(\"unstrippable\"))return!1;e.splice(n,1),a=!0,mt(`${s.name} removed.`),n--}}return a},buffCheck(e,t){const a=e.buffs.concat(e.debuffs);for(var n=a.length-1;n>=0;n--){const t=a[n];if(t.hasOwnProperty(\"damage\")){const a=t.damage;var s;\"percentile\"==a[0]&&(s=Math.round(e.max_health*(a[1]/100))),\"flat\"==a[0]&&(s=a[1]);const n=`<br>(${t.name}) ${e.name} ${s>0?\"lost\":\"gained \"} health! <span style=\"color:${b[a[2]]}\">[${Math.abs(s)}, ${a[0]}]</span>`;K.pushMessagesToState([n],!0,\"push\"),K.dealDamage(e.type,s,\"self\",!1,!1,G.getPlayer(),G.getEnemy())}t.hasOwnProperty(\"heal\"),t.hasOwnProperty(\"onTick\")&&t.onTick(e.type,e,G.getPlayer(),G.getEnemy())}for(n=e.buffs.length-1;n>=0;n--){const t=e.buffs[n];0!=t.fade&&(t.duration-=1),t.duration<=0&&(K.pushMessagesToState([`<br>${t.name} faded. (${e.name})`],!0,\"push\"),e.buffs.splice(n,1))}for(n=e.debuffs.length-1;n>=0;n--){const t=e.debuffs[n];0!=t.fade&&(t.duration-=1),t.duration<=0&&(K.pushMessagesToState([`<br>${t.name} faded. (${e.name})`],!0,\"push\"),e.debuffs.splice(n,1))}K.skillStack.stack.push([\"continue\",t,!0]),K.runSkillStack()},turnReset(e){e.actions-=1,e==G.playerFighter&&$(G.getPlayerAdd(G.playerFighter))},combatLoop(){$(G.getPlayer());var e=G.healthCheck();G.turn+=1,G.state.push({player:[],enemy:[]}),mt(`<br>TURN ${G.turn}`),0==e?(G.playerFighter.actions=G.calcActions(G.getPlayerAdd(G.playerFighter),G.getEnemy()),$(G.getPlayerAdd(G.playerFighter)),G.initShortcuts(),G.combatMessage().forEach(e=>{mt(e)}),ut(G.selectAttack)):G.endBattle(G.healthCheck())},combatMessage:()=>[`<br>Health: ${G.playerFighter.health}/${G.playerFighter.max_health}`,`${G.getEnemy().name} (LV${G.getEnemy().level}) Health: ${G.enemy.health}/${G.enemy.max_health}`,`Actions: ${G.playerFighter.actions}`,\"Please select an action\"],endTurn(e){const t=\"player\"==e?G.playerFighter:G.enemy;\"player\"==e?G.enemy:G.playerFighter;if(0==this.healthCheck())if($(G.getPlayerAdd(G.playerFighter)),t.actions>1)t.actions-=1,\"player\"==e?(t.actionsTaken+=1,G.combatMessage().forEach(e=>{mt(e)}),G.initShortcuts(),ut(this.selectAttack)):(t.actionsTaken+=1,B[G.enemy.mode].call(void 0,G.state,G.getPlayerAdd(G.playerFighter),G.enemy,()=>{E[G.enemy.ai].call()}));else if(\"player\"==e){t.actionsTaken=0;var a=Math.round(G.getPlayerAdd(G.playerFighter).max_stamina/10);G.playerFighter.stamina+=a,G.playerFighter.stamina=Xe(G.playerFighter.stamina,0,G.playerFighter.max_stamina),mt(`<br>Regenned ${a} stamina!`),mt(\"<br>Player turn end\"),G.turnReset(G.playerFighter),mt(\"<br>---------------------------------------\"),G.enemy.actions=G.calcActions(G.getEnemy(),G.getPlayerAdd(G.playerFighter)),G.buffCheck(G.enemy,()=>{B[G.enemy.mode].call(void 0,G.state,G.getPlayerAdd(G.playerFighter),G.enemy,()=>{E[G.enemy.ai].call()})})}else{mt(\"<br>Enemy turn end\"),t.actionsTaken=0;a=Math.round(G.enemy.max_stamina/10);G.enemy.stamina+=a,G.enemy.stamina=Xe(G.enemy.stamina,0,G.enemy.max_stamina),mt(`<br>${G.enemy.name} regenned ${a} stamina!`),G.turnReset(G.enemy),mt(\"<br>---------------------------------------\"),G.buffCheck(G.playerFighter,()=>{this.combatLoop()})}else this.endBattle(this.healthCheck())},displayStatus(e){const t=(e,t)=>e.name>t.name?1:e.name<t.name?-1:0;if(e.buffs.sort(t),e.debuffs.sort(t),mt(`${k}Displaying status...`),mt(`HP: ${e.health}/${e.max_health}`),mt(`Mana: ${e.mana}/${e.max_mana}`),mt(`Stamina: ${e.stamina}/${e.max_stamina}`),mt(`SP: ${e.sp}/${e.max_sp}`),\"enemy\"==e.type){mt(\"<br><b>Total Stat Modifiers</b>\");var a=!1;[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"effectiveness\",\"resistance\",\"evasion\",\"mitigation\"].forEach(t=>{const n=G.calcMod(t,e);0!=n&&(a=!0,mt(` - ${t}: ${[\"effectiveness\",\"resistance\"].includes(t)?n:100*n}%`))}),a||mt(\"--\")}mt(\"<br><b>BUFFS</b>\");0==e.buffs.length&&mt(\"<br>None\"),G.displayBuffs(e.buffs),mt(\"<br><b>DEBUFFS</b>\"),0==e.debuffs.length&&mt(\"<br>None\"),G.displayBuffs(e.debuffs),mt(`${k}Please select an action`)},displayBuffs(e){const t=[];e.forEach(a=>{var n={...a},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${b[n.element]}\">${n.element}</span>`;delete n.element;const i=G.checkStacks(e,n.name),l=`<br>${i} stack${i>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;var c;delete n.max_stacks,n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\";var f=\"\";if(n.hasOwnProperty(\"damage\")&&(\"percentile\"==n.damage[0]?f=`<br> ➢ ${Math.abs(n.damage[1])}% ${n.damage[1]>0?\"DoT\":\"HoT\"}`:\"flat\"==n.damage[0]&&(f=`<br> ➢ ${Math.abs(n.damage[1])}DMG ${n.damage[1]>0?\"DoT\":\"HoT\"}`)),n.hasOwnProperty(\"elemental\"))var d=Object.keys(n.elemental.offence).map(e=>{const t=n.elemental.offence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} attack`}),m=Object.keys(n.elemental.defence).map(e=>{const t=n.elemental.defence[e];return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e} defence`});else d=[],m=[];delete n.elemental;var h,u=Object.keys(n).map(e=>{const t=n[e];if(![\"name\",\"damage\",\"onTick\"].includes(e)){if([\"resistance\",\"effectiveness\"].includes(e))return`<br> ➢ ${t>0?\"+\":\"\"}${t} ${e}`;if(\"fade\"==e){if(0==n.fade)return\"<br> ➢ Does not fade with time\"}else{if(\"unstrippable\"!=e)return`<br> ➢ ${t>0?\"+\":\"\"}${100*t}% ${e}`;if(1==n.unstrippable)return\"<br> ➢ Unstrippable\"}}});h=t.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${l}${o}${u.join(\"\")}\\n                `+`${d.join(\"\")}${m.join(\"\")}${c}${f}`,mt(h),t.push(n.name)})},displayStats(e){const t={atk:\"attack\",def:\"defence\",matk:\"magic attack\",mdef:\"magic defence\",speed:\"speed\",crit_chance:\"critical chance\",crit_damage:\"critical damage\",effectiveness:\"effectiveness\",resistance:\"resistance\"};var a=\"\";[\"atk\",\"matk\",\"def\",\"matk\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\"].forEach(n=>{var s=e[n];\"crit_chance\"!=n&&\"crit_damage\"!=n||(s=(100*s).toString()+\"%\"),a+=`<br> - ${t[n]}: ${s}`}),Object.keys(e.elemental.offence).forEach(t=>{a+=`<br> - ${e.elemental.offence[t]} ${t} attack`}),Object.keys(e.elemental.defence).forEach(t=>{a+=`<br> - ${e.elemental.defence[t]} ${t} defence`}),a+=`<br><br><b>Observations: </b>${e.desc}`,mt(a)},initShortcuts(){n.player;const e=G.getPlayer().skillsList,t=[\"skills\",\"status\",\"enemy\",\"pouch\",\"flee\"];e.forEach(e=>{t.push(K[e].name)}),kt(t,{combat:!0})},selectAttack(){const e=G.playerFighter,t=G.enemy;pt(G.selectAttack);const a=ht();if(G.getEquips(e),\"skills\"==a)mt(`<br> ${G.getPlayer().skillsList.map(e=>`${K[e].name}: ${K[e].description}`).join(\"<br><br>\")}`),G.initShortcuts(),ut(G.selectAttack);else if(\"status\"==a)G.displayStatus(e),G.initShortcuts(),ut(G.selectAttack);else if(\"enemy\"==a)G.displayStatus(t),G.initShortcuts(),ut(G.selectAttack);else if(\"flee\"==a)G.getPlayer().health=0,G.endBattle(G.healthCheck());else if(-1!==e.skillsList.findIndex(e=>e.replace(/_/g,\" \")==a))1==K.getSkill(a).cost(e,t)?K.getSkill(a).use(G.getPlayerAdd(e),t,\"player\"):(mt(`<br> ${K.getSkill(a).cost(e,t)}`),G.initShortcuts(),ut(G.selectAttack));else if(\"p\"==a||\"pouch\"==a){0==n.player.stats.pouch.length?(mt(\"Your pouch is empty!\"),ut(G.selectAttack),G.initShortcuts()):G.pouchMenuLoop()}else mt(\"<br>Invalid Input\"),ut(G.selectAttack),G.initShortcuts()},pouchMenuLoop(){const e=n.player;mt(\"Currently in the pouch menu. Options:\"),mt(\"<br> - Type the name of an item to use it.\"),mt(\" - b/back (to return)\"),mt(\"<br>Items currently in pouch:<br>\"),e.stats.pouch.forEach(e=>{mt(`${e[1]} ${se[e[0]].name} - ${se[e[0]].desc}`)}),ut(G.pouchMenuResponse)},pouchMenuResponse(){pt(G.pouchMenuResponse);const e=ht().toLowerCase(),t=n.player;if(-1!=t.stats.pouch.findIndex(t=>de(e)==t[0])){const a=t.stats.pouch.findIndex(t=>de(e)==t[0]),n=t.stats.pouch[a][0],s=(se[n].name,se[n].use.battleEffect);t.stats.pouch[a][1]-=1,0==t.stats.pouch[a][1]&&t.stats.pouch.splice(a,1),s()}else\"b\"==e||\"back\"==e?(mt(\"Returning..\"),G.combatMessage().forEach(e=>{mt(e)}),ut(G.selectAttack),G.initShortcuts()):(mt(\"Invalid input\"),ut(G.pouchMenuResponse))},getEnemy:()=>G.enemy,getPlayerAdd(e){const t=G.getEquips(n.player.stats),a=G.getEquipsElements(n.player.stats),s=a.offence,o=a.defence,r=JSON.parse(JSON.stringify(e));Object.keys(n.player.sp_investment).forEach(e=>{\"health\"!=e&&\"mana\"!=e&&(t[e]+=2*n.player.sp_investment[e]),\"mana\"==e&&(t.max_mana+=15*n.player.sp_investment[e])}),Object.keys(r).forEach(e=>{t.hasOwnProperty(e)&&(r[e]+=t[e])});const i=n.player.level-1;return r.atk+=2*i,r.def+=2*i,r.matk+=2*i,r.mdef+=2*i,r.speed+=2*i,Object.keys(s).forEach(e=>{r.elemental.offence[e]+=s[e]}),Object.keys(o).forEach(e=>{r.elemental.defence[e]+=o[e]}),r},getPlayer:()=>G.playerFighter,checkStacks(e,t){var a,n=0;for(a in e)e[a].name==t&&n++;return n},calcActions:(e,t)=>e.speed*(1+G.calcMod(\"speed\",e))>t.speed*(2+G.calcMod(\"speed\",t))?(mt(\"<br>The superior speed of the caster grants them an extra action!\"),2):(e.speed,G.calcMod(\"speed\",e),t.speed,G.calcMod(\"speed\",t),1),endBattle(e){if(et(n.player),\"enemy\"==e){mt(`${G.playerFighter.name} has been defeated!`);const e=[[\"The defeat in battle leaves you disoriented...<br>\",1],[\"Fortuately, you awake in familiar surroundings...\",1]];n.player.stats.current_health=n.player.max_health,n.player.stats.current_mana=n.player.stats.max_mana,n.player.stats.current_stamina=n.player.stats.max_stamina,yt(e,\"battle\",wt)}else{mt(`<br>${G.playerFighter.name} emerged victorious!`),n.player.stats.current_health=G.getPlayer().health,n.player.stats.current_mana=G.getPlayer().mana,n.player.stats.current_stamina=G.getPlayer().stamina,n.player.gold+=this.enemy.gold,n.player.exp+=this.enemy.exp,mt(`<br>Gained ${this.enemy.gold} gold!`),mt(`<br>Gained ${this.enemy.exp} exp!`);const e=this.enemy.drops;var t=0;for(t in e){const a=Math.round(1e3*Math.random()),n=e[t];n[1]>=a&&(null!=n[3]?oe(n[0],n[2],n[3]):oe(n[0]))}J(),this.endFunction.call()}et(n.player)},heal(e){e.current_health=G.getMaxHealth(e),e.current_mana=G.getPlayerAdd(e).max_mana,e.current_stamina=G.getPlayerAdd(e).max_stamina}},J=()=>{if(n.player.level<25&&n.player.exp>=r[n.player.level]){const e=\"<b><br>You can feel yourself becoming stronger...</b><br>\"+`Levelled up to level ${n.player.level+1}`+\"<br>+2 SP!<br>+2 AP!<br>+20 health!<br>+2 all stats!<br>\";mt(e),V()}},V=()=>{const e=n.player;e.stats;e.exp-=r[e.level],e.level+=1,e.sp+=2,e.ap+=2,et(e),J()},K={calcDamage(e,t,a,n,s,o,r,i,l,c={canEvade:!0,canCrit:!0}){\"weapon\"==s&&(s=K.getWeaponElement(e)),\"weapon\"==o&&(o=K.getWeaponElement(e));const f=G.calcElementBuffs(e),d=G.calcElementBuffs(t),m=e.elemental.offence[s]+f.offence[s],h=t.elemental.defence[o]+d.defence[o],u=e[a]*(1+G.calcMod(a,e)),p=t[n]*(1+G.calcMod(n,t));var g=Math.random()<e.crit_chance+e.crit_chance_mod?e.crit_damage+e.crit_damage_mod:1,y=Math.random()<t.evasion+G.calcMod(\"evasion\",t)?0:1,_=1-Xe(G.calcMod(\"mitigation\",t),0,.8);0==(null==c.canEvade||c.canEvade)&&(y=1),0==(null==c.canCrit||c.canCrit)&&(g=1);var b=(Math.pow(u,2)*r+250)/(p*i+100)*(m/100)*(h/100)*g*y*_*l;return{damage:Xe(b=Math.round(b*(.1*Math.random()+.9)),0,99999999),crit:1!==g,eva:0==y,element:s,offElement:m,defElement:h,mitigation:_,type:\"atk\"==a?\"physical\":\"magical\"}},prepareAttackMessage(e,t,a,n,s=\"unshift\",o=!1){const r=`${n.crit?\"<b>\":\"\"}<span style=\"color:${b[n.element]}\">`+`${n.damage} damage! (${Math.round(n.defElement*n.offElement*n.mitigation)/100}% ${n.type}) [${n.element}]</span>${n.crit?\"</b>\":\"\"}`,i=`${o?\"[]\":\"\"}${a}${n.crit?\"[]CRITICAL HIT!!\":\"\"}${n.eva?`[]${t} evaded the attack!`:\"\"}[]${r}`.split(\"[]\");K.pushMessagesToState(i,!0,s)},pushMessagesToState(e,t=!0,a=\"unshift\"){const n=t?\"preAtkMsg\":\"msg\";\"unshift\"==a?e.slice().reverse().forEach(e=>{K.skillStack.stack.unshift([n,()=>{mt(e)},!0])}):e.slice().forEach(e=>{K.skillStack.stack.push([n,()=>{mt(e)},!0])})},pushBeforeCombatMessage(e){K.skillStack.stack},pushEffect(e,t=!1){const a=K.skillStack.stack;a.push(e),0!=t&&(K.skillStack.finalAdded=!0,a.push(t),K.runSkillStack())},pushToState(e,t,a){G.state[G.state.length-1][a].push({skill:e,damage:t,user:a})},getSkill(e){var t=-1;return Object.keys(K).forEach(a=>{K[a].hasOwnProperty(\"name\")&&K[a].name.toLowerCase()==e&&(t=K[a])}),t},finish(e,t,a){K.pushToState(e,t,a)},getWeaponElement(e){var t=\"physical\";return e.hasOwnProperty(\"equips\")&&null!=e.equips.weapon&&(t=se[e.equips.weapon].element),t},gainActions(e,t,a=\"self\",n=!1,s=!1,o,r,i=!0){var l=\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy(),c=()=>{};i&&(c=t>0?()=>{mt(`Gained ${t} actions! (${l.name})`)}:()=>{mt(`Lost ${Math.abs(t)} actions! (${l.name})`)});var f=!1;if(0!=n||1==s)f=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const d=[\"effect\",()=>{l.actions+=t,c()},i];0!=f&&(f=[\"finish\",f,!0]),K.pushEffect(d,f)},gainHealth(e,t,a=\"self\",n=!1,s=!1,o,r,i=!0){var l=\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy(),c=()=>{};i&&(c=t>0?()=>{mt(`Gained ${t} HP! (${l.name})`)}:()=>{mt(`Lost ${Math.abs(t)} HP! (${l.name})`)});var f=!1;if(0!=n||1==s)f=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const d=[\"effect\",()=>{l.health+=t,l.health>l.max_health&&(l.health=l.max_health),c()},i];0!=f&&(f=[\"finish\",f,!0]),K.pushEffect(d,f)},dealDamage(e,t,a=\"self\",n=!1,s=!1,o,r){var i=\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy(),l=!1;if(0!=n||1==s)l=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const c=[\"effect\",()=>{i.health-=t,i.health>i.max_health&&(i.health=i.max_health)},!1];0!=l&&(l=[\"finish\",l,!0]),K.pushEffect(c,l)},gainMana(e,t,a=\"self\",n=!1,s=!1,o,r,i=!0){var l=\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy(),c=()=>{};i&&(c=t>0?()=>{mt(`Gained ${t} MP! (${l.name})`)}:()=>{mt(`Lost ${Math.abs(t)} MP! (${l.name})`)});var f=!1;if(0!=n||1==s)f=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const d=[\"effect\",()=>{l.mana+=t,l.mana>l.max_mana&&(l.mana=l.max_mana),c()},i];0!=f&&(f=[\"finish\",f,!0]),K.pushEffect(d,f)},gainSP(e,t,a=\"self\",n=!1,s=!1,o,r,i=!0){var l=\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy(),c=()=>{};i&&(c=t>0?()=>{mt(`Gained ${t} SP! (${l.name})`)}:()=>{mt(`Lost ${Math.abs(t)} SP! (${l.name})`)});var f=!1;if(0!=n||1==s)f=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const d=[\"effect\",()=>{l.sp+=t,l.sp>l.max_sp&&(l.sp=l.max_sp),c()},i];0!=f&&(f=[\"finish\",f,!0]),K.pushEffect(d,f)},gainStamina(e,t,a=\"self\",n=!1,s=!1,o,r,i=!0){var l=\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy(),c=()=>{};i&&(c=t>0?()=>{mt(`Gained ${t} stamina! (${l.name})`)}:()=>{mt(`Lost ${Math.abs(t)} stamina! (${l.name})`)});var f=!1;if(0!=n||1==s)f=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const d=[\"effect\",()=>{l.stamina+=t,l.stamina>l.max_stamina&&(l.stamina=l.max_stamina),c()},i];0!=f&&(f=[\"finish\",f,!0]),K.pushEffect(d,f)},pushCustomFunc(e,t,a=\"self\",n=!1,s=!1,o,r,i=!1){var l=t,c=!1;if(0!=n||1==s)c=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const f=[\"effect\",()=>{l()},i];0!=c&&(c=[\"finish\",c,!0]),K.pushEffect(f,c)},pushWaitForInput(e,t,a){var n=!1;if(0!=t||1==a)n=()=>{0!=t&&K.finish(t[0],t[1],t[2]),1==a&&G.endTurn(e)};0!=n&&(n=[\"finish\",n,!0]),K.pushEffect(\"waitForInput\",n)},applyBuff(e,t,a=\"self\",n=!1,s=!1,o,r){\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy();var i=!1;if(0!=n||1==s)i=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const l=[\"effect\",t,!0];0!=i&&(i=[\"finish\",i,!0]),K.pushEffect(l,i)},stripBuff(e,t,a=\"self\",n=!1,s=!1,o,r){\"player\"==K.getTarget(e,a)?G.getPlayer():G.getEnemy();var i=!1;if(0!=n||1==s)i=()=>{0!=n&&K.finish(n[0],n[1],n[2]),1==s&&G.endTurn(e)};const l=[\"effect\",t,!0];0!=i&&(i=[\"finish\",i,!0]),K.pushEffect(l,i)},getTarget(e,t=\"self\"){var a=e;return\"self\"!=t&&(a=\"player\"==a?\"enemy\":\"player\"),a},skillStack:{stack:[],playing:!1,finalAdded:!1},runSkillStack(){const e=K.skillStack;e.playing=!0;G.getPlayer(),G.getEnemy();const t=()=>{if(!(e.stack.length>0&&1==e.playing))return e.playing=!1,0==e.stack.length&&(e.finalAdded=!1),!0;e.stack;if(\"waitForInput\"==e.stack[0]){mt(\"<br><i>Press enter to continue...</i>\"),e.playing=!1;const a=()=>{pt(a),e.playing=!0,t()};e.stack.splice(0,1),ut(a)}else{const n=o.battleMessageDelay,s=st(e.stack[0]);if(e.stack.splice(0,1),e.stack.length>0){var a=1e3;0==e.stack[0][2]&&(a=0),setTimeout(t,n*a)}else e.playing=!1,e.finalAdded=!1;s[1](),$(G.getPlayerAdd(G.getPlayer()))}};t()},pushBeforeFinish(e){const t=K.skillStack;1==t.finalAdded?t.stack.splice(-2,0,e):t.stack.push(e)},attack:{name:\"attack\",description:\"Strike the enemy, dealing moderate physical damage. Attack element is based on the element of the equipped weapon.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{const n=K.attack,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy! [Attack]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:s,type:[\"attack\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>!0},guard:{name:\"guard\",description:\"Take a defensive stance, applying <u>Guard</u> [50% migiation, unstrippable] to the user, along with granting them 10 SP. This  can only be used as the first action of a turn, and will consume up to two actions when used.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={name:\"guard\",mitigation:.5,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is guarding..\",unstrippable:!0,max_stacks:1},s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[\"guard\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];K.gainActions(a,-1,\"self\",!1,!1,s,o,!1),K.gainSP(a,10,\"self\",!1,!1,s,o),K.applyBuff(a,()=>{G.applyBuff(n,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,t)=>!(e.actionsTaken>0)||\"Cannot be used this turn!\"},check:{name:\"check\",description:\"Reveals the stats of an enemy upon use.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,o=[\"check\",{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a];K.pushMessagesToState([\"Analysing...\"]),K.pushCustomFunc(a,()=>{G.displayStats(t)},t,!1,!1,n,s),K.pushWaitForInput(a,o,!0)},cost:(e,t)=>!0},boost:{name:\"boost\",description:\"<b>Cost: 10 SP</b> - The user focuses their energy into granting them an extra spurt of power. Grants two additional actions. Cannot be used more than twice in one turn.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{K.boost;const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;K.gainSP(a,-10,\"self\",!1,!1,n,s,!1),K.pushMessagesToState([`<br>${e.name} is boosting!`],!0,\"unshift\");const o=[\"boost\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];K.gainActions(a,2,\"self\",o,!0,n,s,!0)},cost:(e,t)=>{const a=e.hasOwnProperty(\"pouch\")?\"player\":\"enemy\";return ae(a,\"boost\")<2?e.sp>=10||\"Insufficient SP!\":\"This skill has already been used twice this turn!\"}},hex:{name:\"hex\",description:\"<b>Cost: 7 mana</b> - The user curses the enemy, applying <u>Hexed</u> [-30% Resistance, 3T duration] to them. This skill ignores resistance.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.hex,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainMana(a,-7,\"self\",!1,!1,s,o,!1),K.pushMessagesToState([`${e.name} attempts to curse their enemy! [Hex]`],!0,\"push\");const r=[n.name,{damage:0,type:[\"debuff\"],target:\"opponent\"},a],i={name:\"hexed\",duration:3,resistance:-30,element:\"dark\",types:[\"debuff\"],apply_text:\" is hexed!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\",{ignoreRes:!0})},\"opponent\",r,!0,s,o)},cost:(e,t)=>e.mana>=7||\"insufficient mana!\"},dagger_throw:{name:\"dagger throw\",description:\"<b>Cost: 5 SP</b> - The user quickly throws a dagger at their enemy, dealing low physical damage and granting themselves an extra action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1.2,dmg_mod:.59,use:(e,t,a)=>{const n=K.dagger_throw,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainSP(a,-5,\"self\",!1,!1,o,r,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} throws a dagger at their enemy! [Dagger Throw]`,s);const i={damage:s,type:[\"attack\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",!1,!1,o,r),K.gainActions(a,1,\"self\",[n.name,i,a],!0,o,r,!0)},cost:(e,t)=>e.sp>=5||\"Insufficient SP!\"},smokescreen:{name:\"smokescreen\",description:\"<b>Cost: 10 mana</b> - The user throws up a smokescreen, making it hard to both hit and be hit by the enemy. Applies <u>Smokescreen</u> [+30% evasion, unstrippable, 2T duration] to both the user and their opponent.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.smokescreen,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainMana(a,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,type:[\"buff\"],target:\"all\"},a],i={name:\"smokescreen\",duration:2,evasion:.3,element:\"physical\",types:[\"buff\"],apply_text:\" is shrouded by smoke!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"buffs\")},\"opponent\",!1,!1,s,o);K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():G.getEnemy(),\"buffs\")},\"self\",r,!0,s,o)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},piercing_dagger_throw:{name:\"piercing dagger throw\",description:\"<b>Cost: 20 Stamina</b> - The user throws a particularly sharp dagger at their opponent. Deals low physical damage that ignores the enemy's defence.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:.75,def_mod:0,dmg_mod:.54,use:(e,t,a)=>{const n=K.piercing_dagger_throw,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.prepareAttackMessage(e.name,t.name,`<br>${e.name} throws a piercing dagger at their enemy! [Piercing Dagger Throw]`,s),K.gainStamina(a,-20,\"self\",!1,!1,o,r,!1);const i={damage:s,type:[\"attack\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>e.stamina>=20||\"Insufficient Stamina!\"},brutal_swipe:{name:\"brutal swipe\",description:\"<b>Cost: 30 Stamina</b> - The user enhances their strength temporarily and attacks, dealing high weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:.9,dmg_mod:1.54,use:(e,t,a)=>{const n=K.brutal_swipe,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-30,\"self\",!1,!1,o,r,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} swiped at the enemy brutally! [Brutal Swipe]`,s);const i={damage:s,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>e.stamina>=30||\"Insufficient Stamina!\"},fireball:{name:\"fireball\",description:\"<b>Cost: 10 MP</b> - The user fires a fireball at the enemy, dealing below average magical fire damage. Applies  <u>Fire Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,o=K.fireball,r=K.calcDamage(e,t,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);K.gainMana(a,-10,\"self\",!1,!1,n,s,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} shot a fireball at the enemy! [Fireball]`,r);const i=G.checkStacks(n.buffs,\"earth charge\"),l=G.checkStacks(n.buffs,\"ice charge\"),c=G.checkStacks(n.buffs,\"water charge\");switch(1){case i:{K.pushMessagesToState([\"The earth charge and fire charge coalesced into a magma charge!\"]);const t={name:\"magma charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with magma energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"earth charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case l:{K.pushMessagesToState([\"The ice charge and fire charge coalesced into a water charge!\"]);const t={name:\"water charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with water energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"ice charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case c:{K.pushMessagesToState([\"The water charge and fire charge coalesced into a steam charge!\"]);const t={name:\"steam charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with steam energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"water charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}default:{const t={name:\"fire charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with fire energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s)}}const f={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};K.dealDamage(a,r.damage,\"opponent\",[o.name,f,a],!0,n,s)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},icebolt:{name:\"icebolt\",description:\"<b>Cost: 10 MP</b> - The user fires a bolt of ice at the enemy, dealing below average magical water damage. Applies  <u>Ice Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,o=K.icebolt,r=K.calcDamage(e,t,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} Fired a bolt of ice at the enemy! [Icebolt]`,r),K.gainMana(a,-10,\"self\",!1,!1,n,s,!1);const i=G.checkStacks(n.buffs,\"fire charge\"),l=G.checkStacks(n.buffs,\"earth charge\"),c=G.checkStacks(n.buffs,\"magma charge\");switch(1){case i:{K.pushMessagesToState([\"The ice charge and fire charge coalesced into a water charge!\"]);const t={name:\"water charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with water energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"fire charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case l:{K.pushMessagesToState([\"The ice charge and earth charge coalesced into a frozen earth charge!\"]);const t={name:\"frozen earth charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with frozen earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"earth charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case c:{K.pushMessagesToState([\"The ice charge and magma charge coalesced into an obsidian charge!\"]);const t={name:\"obsidian charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with obsidian energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"magma charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}default:{const t={name:\"ice charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with ice energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s)}}const f={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};K.dealDamage(a,r.damage,\"opponent\",[o.name,f,a],!0,n,s)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},lesser_quake:{name:\"lesser quake\",description:\"<b>Cost: 10 MP</b> - The user causes the earth at the enemy to quake, dealing below average magical earth damage. Applies  <u>Earth Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,o=K.lesser_quake,r=K.calcDamage(e,t,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} caused the earth to quake! [Lesser Quake]`,r),K.gainMana(a,-10,\"self\",!1,!1,n,s,!1);const i=G.checkStacks(n.buffs,\"fire charge\"),l=G.checkStacks(n.buffs,\"ice charge\"),c=G.checkStacks(n.buffs,\"magma charge\"),f=G.checkStacks(n.buffs,\"water charge\");switch(1){case i:{K.pushMessagesToState([\"The earth charge and fire charge coalesced into a magma charge!\"]);const t={name:\"magma charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with magma energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"fire charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case l:{K.pushMessagesToState([\"The ice charge and earth charge coalesced into a frozen earth charge!\"]);const t={name:\"frozen earth charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with frozen earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"ice charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case c:{K.pushMessagesToState([\"The earth charge and magma charge coalesced into a volcano charge!\"]);const t={name:\"volcano charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with volcano energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"magma charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}case f:{K.pushMessagesToState([\"The water charge and earth charge coalesced into a soil charge!\"]);const t={name:\"soil charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with soil energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s);const r=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"water charge\")};K.stripBuff(a,r,\"self\",!1,!1,n,s);break}default:{const t={name:\"earth charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,o,\"self\",!1,!1,n,s)}}const d={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};K.dealDamage(a,r.damage,\"opponent\",[o.name,d,a],!0,n,s)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},imbue_energy:{name:\"imbue energy\",description:\"<b>Cost: 20 stamina</b>. The user absorbs nearby energy into themselves fully. Consumes all elemental charges applied to the user and causes a positive effect (for the user) for each one. Also grants 5 SP for each charge absorbed. If at least one charge is absorbed, the user gains an extra action.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;K.gainStamina(a,-20,\"self\",!1,!1,n,s,!1);K.imbue_energy;K.pushMessagesToState([`<br>${e.name} reabsorbed energy into themselves! [Imbue Energy]`],!0,\"push\");var o=!1;const r=G.checkStacks(n.buffs,\"fire charge\"),i=G.checkStacks(n.buffs,\"ice charge\"),l=G.checkStacks(n.buffs,\"earth charge\"),c=G.checkStacks(n.buffs,\"volcano charge\"),f=G.checkStacks(n.buffs,\"soil charge\"),d=G.checkStacks(n.buffs,\"obsidian charge\"),m=G.checkStacks(n.buffs,\"magma charge\"),h=G.checkStacks(n.buffs,\"water charge\"),u=G.checkStacks(n.buffs,\"frozen earth charge\"),p=G.checkStacks(n.buffs,\"steam charge\");if(1==r){K.pushMessagesToState([\"Fire charge absorbed!\"],!1);const t={name:\"fire imbued\",atk:.2,matk:.2,elemental:{offence:{fire:20},defence:{}},duration:3,element:\"fire\",types:[\"buff\"],apply_text:\" has fire energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"fire charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==i){K.pushMessagesToState([\"Ice charge absorbed!\"],!1);const t={name:\"ice imbued\",def:.25,mdef:.52,duration:3,element:\"water\",types:[\"buff\"],apply_text:\" has ice energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"ice charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==l){K.pushMessagesToState([\"earth charge absorbed!\"],!1);const t={name:\"earth imbued\",mitigation:.5,duration:3,element:\"earth\",types:[\"buff\"],apply_text:\" has earth energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"earth charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainActions(a,-1,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==c){K.pushMessagesToState([\"Volcano charge absorbed!\"],!1);const t={name:\"volcano imbued\",atk:.35,matk:.35,duration:2,element:\"fire\",types:[\"buff\"],apply_text:\" has volcano energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"volcano charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainActions(a,1,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==f){K.pushMessagesToState([\"Soil charge absorbed!\"],!1);const t={name:\"soil imbued\",def:.15,def:.15,eva:.2,duration:3,element:\"earth\",types:[\"buff\"],apply_text:\" has soil energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"soil charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==d){K.pushMessagesToState([\"Obsidian charge absorbed!\"],!1);const t={name:\"obsidian imbued\",mitigation:.8,duration:1,element:\"earth\",types:[\"buff\"],apply_text:\" has obsidian energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"obsidian charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainSP(a,15,\"self\",!1,!1,n,s),K.gainActions(a,-999,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==m){K.pushMessagesToState([\"Magma charge absorbed!\"],!1);const t={name:\"magma imbued\",atk:.2,matk:.2,elemental:{offence:{fire:15,earth:15},defence:{}},duration:4,element:\"earth\",types:[\"buff\"],apply_text:\" has magma energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"magma charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==h){K.pushMessagesToState([\"Water charge absorbed!\"],!1);const t=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"water charge\")};K.stripBuff(a,t,\"self\",!1,!1,n,s);const r=K.calcDamage(e,e,\"mdef\",\"mdef\",\"none\",\"none\",.45,0,1.3,{canEvade:!1,canCrit:!1});K.gainHealth(a,r.damage,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==u){K.pushMessagesToState([\"Frozen earth charge absorbed!\"],!1);const t={name:\"frozen earth imbued\",mitigation:.2,def:.1,mdef:.1,duration:3,element:\"water\",types:[\"buff\"],apply_text:\" has frozen earth energy within!\",max_stacks:1},r=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"frozen earth charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s),K.applyBuff(a,r,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}if(1==p){K.pushMessagesToState([\"Steam charge absorbed!\"],!1);const e=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"steam charge\")};K.stripBuff(a,e,\"self\",!1,!1,n,s),K.gainActions(a,2,\"self\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),o=!0}o&&K.gainActions(a,1,\"self\",!1,!1,n,s);const g=[\"imbue energy\",{damage:0,additionalInfo:{type:[\"buff\",\"debuff\",\"attack\"],target:\"self\"}},a];K.pushCustomFunc(a,()=>{},\"self\",g,!0,n,s)},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina\"},enforce_energy:{name:\"enforce energy\",description:\"<b>Cost: 20 stamina</b>. The user uses nearby elemental energy to strike the opponent. Consumes all elemental charges and applies a negative effect to and/or damages the enemy for each one. Also grants 5 SP for each charge consumed. If at least one charge is consumed, also grants an extra action to the user.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;K.gainStamina(a,-20,\"self\",!1,!1,n,s,!1);const o=K.enforce_energy;K.pushMessagesToState([`<br>${e.name} fired elemental energy at the enemy! [Enforce Energy]`],!0,\"push\");var r=!1;const i=G.checkStacks(n.buffs,\"fire charge\"),l=G.checkStacks(n.buffs,\"ice charge\"),c=G.checkStacks(n.buffs,\"earth charge\"),f=G.checkStacks(n.buffs,\"volcano charge\"),d=G.checkStacks(n.buffs,\"soil charge\"),m=G.checkStacks(n.buffs,\"obsidian charge\"),h=G.checkStacks(n.buffs,\"magma charge\"),u=G.checkStacks(n.buffs,\"water charge\"),p=G.checkStacks(n.buffs,\"frozen earth charge\"),g=G.checkStacks(n.buffs,\"steam charge\");if(1==i){K.pushMessagesToState([\"Fire energy enforced!\"],!1,\"push\");const i={name:\"fire enforced\",elemental:{offence:{},defence:{fire:20}},duration:3,element:\"fire\",types:[\"debuff\"],apply_text:\" has had fire energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"fire charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.7,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==l){K.pushMessagesToState([\"Ice energy enforced!\"],!1,\"push\");const i={name:\"ice enforced\",speed:-.2,duration:3,element:\"water\",types:[\"debuff\"],apply_text:\" has had ice energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"ice charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"water\",\"water\",.95,1.05,.7,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==c){K.pushMessagesToState([\"Earth energy enforced!\"],!1,\"push\");const i={name:\"earth enforced\",atk:-.2,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had earth energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"earth charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.7,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==h){K.pushMessagesToState([\"Magma energy enforced!\"],!1,\"push\");const i={name:\"magma enforced\",elemental:{offence:{},defence:{fire:15,earth:15}},damage:[\"flat\",K.calcDamage(e,t,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.25,!0).damage],duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had magma energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"magma charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.5,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\");const d=K.calcDamage(e,t,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.5,!0);K.dealDamage(a,d.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",d,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==u){K.pushMessagesToState([\"Water energy enforced!\"],!1,\"push\");const i={name:\"water enforced\",elemental:{offence:{},defence:{water:20}},duration:3,element:\"water\",types:[\"debuff\"],apply_text:\" has had water energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"water charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"water\",\"water\",.95,1.05,.7,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\");const d=K.calcDamage(e,t,\"mdef\",\"mdef\",\"none\",\"none\",1,0,.5,{canCrit:!1,canEvade:!1});K.gainHealth(a,d.damage,\"self\",!1,!1,n,s),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==p){K.pushMessagesToState([\"Frozen earth energy enforced!\"],!1,\"push\");const i={name:\"frozen earth enforced\",speed:-.15,atk:-.15,def:-.15,resistance:-10,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had frozen earth energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"frozen earth charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.6,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\");const d=K.calcDamage(e,t,o.off_stat,o.def_stat,\"water\",\"water\",.95,1.05,.6,!0);K.dealDamage(a,d.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",d,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==f){K.pushMessagesToState([\"Volcano energy enforced!\"],!1,\"push\");const i={name:\"volcano enforced\",def:-.25,mdef:-.25,damage:[\"flat\",K.calcDamage(e,t,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.9,!0).damage],duration:2,element:\"fire\",types:[\"debuff\"],apply_text:\" has had volcano energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"volcano charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.8,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\");const d=K.calcDamage(e,t,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.5,!0);K.dealDamage(a,d.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",d,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==d){K.pushMessagesToState([\"Soil energy enforced!\"],!1,\"push\");const i={name:\"soil enforced\",speed:-.4,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had soil energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"soil charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"physical\",\"physical\",.95,1.05,.7,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==m){K.pushMessagesToState([\"Obsidian energy enforced!\"],!1,\"push\");const i={name:\"obsidian enforced\",speed:-.3,atk:-.3,def:-.3,mitigation:.1,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had obsidian energy forced upon them!\",max_stacks:1},l=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},c=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"obsidian charge\")};K.stripBuff(a,c,\"self\",!1,!1,n,s);const f=K.calcDamage(e,t,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.7,!0);K.dealDamage(a,f.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",f,\"push\"),K.applyBuff(a,l,\"opponent\",!1,!1,n,s),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}if(1==g){K.pushMessagesToState([\"Steam energy enforced!\"],!1,\"push\");const i=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"steam charge\")};K.stripBuff(a,i,\"self\",!1,!1,n,s);const l=K.calcDamage(e,t,o.off_stat,o.def_stat,\"water\",\"water\",1.1,1.05,1.15,!0);K.dealDamage(a,l.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",l,\"push\");const c=K.calcDamage(e,t,o.off_stat,o.def_stat,\"fire\",\"fire\",1.1,1.05,1.15,!0);K.dealDamage(a,c.damage,\"opponent\",!1,!1,n,s),K.prepareAttackMessage(e,t,\"\",c,\"push\"),K.gainSP(a,5,\"self\",!1,!1,n,s),r=!0}r&&K.gainActions(a,1,\"self\",!1,!1,n,s);const y=[\"enforce energy\",{damage:0,additionalInfo:{type:[\"buff\",\"debuff\",\"attack\"],target:\"opponent\"}},a];K.pushCustomFunc(a,()=>{},\"self\",y,!0,n,s)},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina\"},blood_pact:{name:\"blood pact\",description:\"<b>Cost: 20 SP, 15% max health</b> - The user uses converts special energy and their own blood into mana, gaining 20% of their mana in exchange for 20 SP and 15% of their max health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.blood_pact,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.pushMessagesToState([`${e.name} formed a blood pact! [Blood Pact]`]),K.gainSP(a,-20,\"self\",!1,!1,s,o,!1),K.gainHealth(a,-.15*e.max_health,\"self\",!1,!1,s,o,!0);K.gainMana(a,.2*e.max_mana,\"self\",[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a],!0,s,o,!0)},cost:(e,t)=>e.sp>=20?e.health>.15*e.max_health||\"Insufficient HP!\":\"Insufficient SP!\"},stalwart_strike:{name:\"stalwart strike\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy while bolstering their defences. Deals low physical weapon element damage and applies <u>Stalwart</u> [+20% DEF/MDEF, 3T duration]. Also removes one debuff at random from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.65,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,o=K.stalwart_strike,r=K.calcDamage(e,t,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);K.gainStamina(a,-35,\"self\",!1,!1,n,s,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy! [Stalwart Strike]`,r);const i=JSON.parse(JSON.stringify(e.debuffs));for(var l=!1;i.length>0&&0==l;){var c=Math.round(Math.random()*i.length-1);if(c<0&&(c=0),i[c].hasOwnProperty(\"unstrippable\"))i.splice(c,1);else{l=!0;const e=()=>{G.stripBuff(\"player\"==a?G.getPlayer().debuffs:G.getEnemy().debuffs,i[c].name)};K.stripBuff(a,e,\"self\",!1,!1,n,s)}}const f={name:\"stalwart\",duration:3,def:.2,mdef:.2,element:\"physical\",types:[\"buff\"],apply_text:\" is stalwart!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(f,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,n,s);const d={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};K.dealDamage(a,r.damage,\"opponent\",[o.name,d,a],!0,n,s)},cost:(e,t)=>e.stamina>=35||\"Insufficient stamina!\"},debilitate:{name:\"debilitate\",description:\"<b>Cost: 25 SP</b> - The user strikes the enemy in a way that removes a portion of their power, dealing low physical weapon element damage and removing one random buff from the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t,o=K.debilitate,r=K.calcDamage(e,t,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);if(K.gainSP(a,-25,\"self\",!1,!1,n,s,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy! [Debilitate]`,r),0==r.eva){const e=JSON.parse(JSON.stringify(t.buffs));for(var i=!1;e.length>0&&0==i;){var l=Math.round(Math.random()*e.length-1);if(e[l].hasOwnProperty(\"unstrippable\"))e.splice(l,1);else{i=!0;const t=()=>{G.stripBuff(\"player\"==a?G.getEnemy().buffs:G.getPlayer().buffs,e[l].name)};K.stripBuff(a,t,\"self\",!1,!1,n,s)}}}const c={damage:r,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};K.dealDamage(a,r.damage,\"opponent\",[o.name,c,a],!0,n,s)},cost:(e,t)=>e.sp>=25||\"Insufficient SP!\"},enduring_fortress:{name:\"enduring fortress\",description:\"<b>Cost: 5 stamina</b> - The user grants a physical form to their endurance, applying the buff <u>Fortress</u> [+5% DEF/MDEF, 999T duration, stacks to 100], and granting the user an extra acition.This skill can only be used once per turn.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.enduring_fortress,s={name:\"fortress\",def:.05,mdef:.05,duration:999,element:\"physical\",types:[\"buff\"],apply_text:\"strengthens their resolve!\",max_stacks:100},o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-5,\"self\",!1,!1,o,r,!1);const i=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];K.applyBuff(a,()=>{G.applyBuff(s,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r),K.gainActions(a,1,\"self\",i,!0,o,r,!0)},cost:(e,t)=>{const a=e.hasOwnProperty(\"pouch\")?\"player\":\"enemy\";G.state;return 0==ae(a,\"enduring fortress\")?e.stamina>=5||\"Insufficient stamina!\":\"This skill has been used this turn!\"}},guard_conversion:{name:\"guard conversion\",description:'<b>Cost: 10 stamina</b> - The user converts all defensive energy into pure energy. Removes all buffs\" +\\n        \" that increase DEF or MDEF from the user. For each one removed, the user gains SP equal to the DEF/MDEF (higher\" +\\n        \" one is taken) percentage increase. Then, grants an additional action if at least one buff was removed',off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.guard_conversion,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainStamina(a,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];var i=0,l=!1;const c=st(e.buffs);for(;c.length>0;){var f=Math.round(Math.random()*c.length-1);if(f<0&&(f=0),c[f].hasOwnProperty(\"unstrippable\"))c.splice(f,1);else if(c[f].hasOwnProperty(\"def\")||c[f].hasOwnProperty(\"mdef\")){if(c[f].def>0||c[f.mdef>0]){var d=null!=c[f].def?100*c[f].def:0,m=null!=c[f].mdef?100*c[f].def:0;m>d&&(d=m),i+=d;const e=c[f].name,t=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,e)};K.stripBuff(a,t,\"self\",!1,!1,s,o),c.splice(f,1),l=!0}}else c.splice(f,1)}l?(K.gainSP(a,i,\"self\",!1,!1,s,o,!0),K.gainActions(a,1,\"self\",r,!0,s,o,!0)):K.pushCustomFunc(a,()=>{},\"self\",r,!0,s,o)},cost:(e,t)=>e.stamina>=10||\"Insufficient stamina!\"},sacred_shield:{name:\"sacred shield\",description:\"<b>Cost: 10 SP</b> - The user condenses special energy such that it takes physical form and uses it as a shield. Consumes 999 actions (ending user turn) after applying <u>Sacred Shield</u> [+75% DEF/MDEF, 2T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.sacred_shield,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainSP(a,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a],i={name:\"sacred shield\",def:.75,mdef:.75,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is protected by sacred energy!\",max_stacks:1};K.gainActions(a,-999,\"self\",!1,!1,s,o,!0),K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,t)=>e.sp>=10||\"Insufficient SP!\"},sentinel_blow:{name:\"sentinel blow\",description:\"<b>Cost: 25 stamina</b> - The user strikes in a way that utilises their defensive prowess. Deals considerable weapon element physical damage. Damage is based on the user's DEF stat.\",off_stat:\"def\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:.9,def_mod:1,dmg_mod:1.25,use:(e,t,a)=>{const n=K.sentinel_blow,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-25,\"self\",!1,!1,o,r,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy like a sentinel! [Sentinel Blow]`,s);const i={damage:s,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>e.stamina>=25||\"Insufficient stamina!\"},swift_strike:{name:\"swift strike\",description:\"<b>Cost: 25 stamina</b> - The user strikes the enemy quickly, dealing below average weapon element physical damage. Applies <u>Swift</u> [+20% SPD, 4T duration] to the user. Also, if <u>Feeble</u> is applied to the enemy, consumes it and grants the user mana (5% max mana), and 5 SP. If <u>Stealth</u> is applied to the user and they have at least 10 SP, consumes both <u>Stealth</u> and 10 SP in exchange for 2 extra actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1.01,def_mod:.99,dmg_mod:.78,use:(e,t,a)=>{const n=K.swift_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy quickly! [Swift Strike]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-25,\"self\",!1,!1,o,r,!1);const i=G.checkStacks(t.debuffs,\"feeble\"),l=G.checkStacks(e.buffs,\"stealth\");if(1==i){const t=()=>{G.stripBuff(\"player\"==a?G.getEnemy().debuffs:G.getPlayer().debuffs,\"feeble\")};K.stripBuff(a,t,\"opponent\",!1,!1,o,r),K.gainSP(a,5,\"self\",!1,!1,o,r,!0),K.gainMana(a,.05*e.max_mana,\"self\",!1,!1,o,r)}if(1==l&&e.sp>=10){const e=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"stealth\")};K.stripBuff(a,e,\"self\",!1,!1,o,r),K.gainSP(a,-10,\"self\",!1,!1,o,r,!0),K.gainActions(a,2,\"self\",!1,!1,o,r,!0)}const c={name:\"swift\",duration:4,speed:.2,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is swift!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(c,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r);const f={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"mana_gain\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,f,a],!0,o,r)},cost:(e,t)=>e.stamina>=25||\"Insufficient stamina!\"},shinobi_strike:{name:\"shinobi strike\",description:\"<b>Cost: 10 mana</b> - The user strikes the enemy before immediately blending into the shadows. Deals low weapon element physical damage and applies <u>Stealth</u> [+10% SPD, +10% crit rate, 4T duration] to the user. If <u>Weakened</u> is applied to the enemy, consumes it and grants the user stamina (5% max stamina), and 5 SP. If <u>Swift</u> is applied to the user and they have at least 10 SP, consumes both <u>Swift</u> and 10 SP to grant the player 2 additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.55,use:(e,t,a)=>{const n=K.swift_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} struck the enemy before blending into the shadows... [Shinobi Strike]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainMana(a,-10,\"self\",!1,!1,o,r,!1);const i=G.checkStacks(t.debuffs,\"weakened\"),l=G.checkStacks(e.buffs,\"swift\");if(1==i){const t=()=>{G.stripBuff(\"player\"==a?G.getEnemy().debuffs:G.getPlayer().debuffs,\"weakened\")};K.stripBuff(a,t,\"opponent\",!1,!1,o,r),K.gainSP(a,5,\"self\",!1,!1,o,r,!0),K.gainStamina(a,.05*e.max_stamina,\"self\",!1,!1,o,r)}if(1==l&&e.sp>=10){const e=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"swift\")};K.stripBuff(a,e,\"self\",!1,!1,o,r),K.gainSP(a,-10,\"self\",!1,!1,o,r,!0),K.gainActions(a,2,\"self\",!1,!1,o,r,!0)}const c={name:\"stealth\",duration:4,speed:.1,crit_chance:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has blended into the shadows!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(c,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r);const f={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"stamina_gain\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,f,a],!0,o,r)},cost:(e,t)=>e.mana>=10||\"Insufficient mana!\"},crippling_blow:{name:\"crippling blow\",description:\"<b>Cost: 15 mana</b> - The user strikes the enemy with a special technique that cripples them somewhat. Deals moderate physical weapon element damage and applies <u>Weakened</u> [-20% DEF/MDEF, 4T duration] to the enemy. If <u>Stealth</u> is applied to the user, consumes it and applies <u>Footwork</u> [+10% evasion chance, 4T duration] to the user, and grant them 5 SP. If <u>Feeble</u> is applied to the enemy, consumes it and applies <u>Dull Soul</u> [-20 resistance, 4T duraton] to the enemy, and grants the user 5 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.95,use:(e,t,a)=>{const n=K.swift_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} strikes the enemy with a special technique! [Crippling Blow]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainMana(a,-15,\"self\",!1,!1,o,r,!1);const i=G.checkStacks(t.debuffs,\"feeble\"),l=G.checkStacks(e.buffs,\"stealth\");if(1==i){const e=()=>{G.stripBuff(\"player\"==a?G.getEnemy().debuffs:G.getPlayer().debuffs,\"feeble\")};K.stripBuff(a,e,\"opponent\",!1,!1,o,r);const t={name:\"dull soul\",duration:4,element:\"physical\",resistance:-20,types:[\"buff\",\"ninja\"],apply_text:\"'s soul has been dulled!\",max_stacks:1},n=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():G.getEnemy(),\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.gainSP(a,5,\"self\",!1,!1,o,r,!0),K.applyBuff(a,n,\"opponent\",!1,!1,o,r)}if(1==l){const t=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"stealth\")};K.stripBuff(a,t,\"self\",!1,!1,o,r);const n={name:\"footwork\",duration:4,evasion:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has enhanced footwork!\",max_stacks:1},s=()=>{G.applyBuff(n,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.gainSP(a,5,\"self\",!1,!1,o,r,!0),K.applyBuff(a,s,\"self\",!1,!1,o,r)}const c={name:\"weakened\",def:-.2,mdef:-.2,duration:4,element:\"physical\",types:[\"debuff\",\"ninja\"],apply_text:\" is weakened!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(c,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},\"opponent\",!1,!1,o,r);const f={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"debuff\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,f,a],!0,o,r)},cost:(e,t)=>e.mana>=15||\"Insufficient mana!\"},enfeebling_blow:{name:\"enfeebling blow\",description:\"<b>Cost: 25 stamina</b> - The user strikes with a special technique that worsens the target's offensive capabilities. Deals moderate physical damage and applies <u>Feeble</u> [-20% ATK/MATK] to the enemy. If <u>Swift</u> is applied to the user, consumes it and applies <u>Sharp Mind</u> [+10% crit chance] to the user, and grants them 5 SP If <u>Weakened</u> is applied to the enemy, consumes it and applies <u>Dull Mind</u> [-10% crit chance] to the enemy, and grants the user 5 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.95,use:(e,t,a)=>{const n=K.swift_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} strikes the enemy with a special technique! [Enfeebling Blow]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-25,\"self\",!1,!1,o,r,!1);const i=G.checkStacks(t.debuffs,\"weakened\"),l=G.checkStacks(e.buffs,\"swift\");if(1==i){const e=()=>{G.stripBuff(\"player\"==a?G.getEnemy().debuffs:G.getPlayer().debuffs,\"weakened\")};K.stripBuff(a,e,\"opponent\",!1,!1,o,r);const t={name:\"dull mind\",duration:4,element:\"physical\",crit_chance:-.1,types:[\"buff\",\"ninja\"],apply_text:\"'s mind has been dulled!\",max_stacks:1},n=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():G.getEnemy(),\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.gainSP(a,5,\"self\",!1,!1,o,r,!0),K.applyBuff(a,n,\"opponent\",!1,!1,o,r)}if(1==l){const t=()=>{G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,\"swift\")};K.stripBuff(a,t,\"self\",!1,!1,o,r);const n={name:\"sharp mind\",duration:4,crit_chance:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\"'s mind is sharp!\",max_stacks:1},s=()=>{G.applyBuff(n,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.gainSP(a,5,\"self\",!1,!1,o,r,!0),K.applyBuff(a,s,\"self\",!1,!1,o,r)}const c={name:\"feeble\",atk:-.2,matk:-.2,duration:4,element:\"physical\",types:[\"debuff\",\"ninja\"],apply_text:\" is feeble!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(c,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")},\"opponent\",!1,!1,o,r);const f={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"debuff\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,f,a],!0,o,r)},cost:(e,t)=>e.stamina>=25||\"Insufficient stamina!\"},imbue_infliction:{name:\"imbue infliction\",description:\"<b>Cost: 20 SP</b>- The user focuses all their strength into one point, fusing all buffs from the <b><u>NINJA</b></u> discipline into one buff (this will not interfere with the stacking limits of these buffs from their origin skills). Up to three of these fusion buffs can be applied at one time. If this occurs, also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{K.imbue_infliction;const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;K.gainSP(a,-20,\"self\",!1,!1,n,s,!1),K.pushMessagesToState([`${e.name} is focusing their energy.. [Imbue Infliction]`]);var o=!1;const r=JSON.parse(JSON.stringify(e.buffs));const i={name:0==G.checkStacks(r,\"imbued infliction I\")?\"imbued infliction I\":0==G.checkStacks(r,\"imbued infliction II\")?\"imbued infliction II\":\"imbued infliction III\",element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has focused their energy!\",max_stacks:1,duration:0},l=[\"atk\",\"matk\",\"def\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"resistance\",\"effectiveness\",\"evasion\"];for(var c=0;c<r.length;c++)if(-1!=r[c].types.indexOf(\"ninja\")){o=!0;const e=r[c];e.duration>i.duration&&(i.duration=e.duration),Object.keys(r[c]).forEach(t=>{-1!=l.indexOf(t)&&(i.hasOwnProperty(t)?i[t]+=e[t]:i[t]=e[t])})}const f=[\"imbue infliction\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},a];if(o){const t=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.gainActions(a,1,\"self\",!1,!1,n,s,!0),K.applyBuff(a,t,\"self\",f,!0,n,s)}else K.pushMessagesToState([\"No buffs to fuse!\"],!1,\"push\"),K.pushCustomFunc(a,()=>{},\"self\",f,!0,n,s)},cost:(e,t)=>e.sp>=20?0==G.checkStacks(e.buffs,\"imbued infliction I\")||0==G.checkStacks(e.buffs,\"imbued infliction II\")||0==G.checkStacks(e.buffs,\"imbued infliction III\")||\"Imbue limit reached!\":\"Insufficient SP!\"},enforce_infliction:{name:\"enforce infliction\",description:\"<b>Cost: 20 SP</b>- The user focuses all of the enemie's ailments into one point, fusing all debuffs from the <b><u>NINJA</b></u> discipline into one buff (this will not interfere with the stacking limits of these debuffs from their origin skills). Up to three of these fusion debuffs can be applied at one time. If this occurs, also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{K.enforce_infliction;const n=\"enemy\"==a?t:e,s=\"enemy\"==a?e:t;K.gainSP(a,-20,\"self\",!1,!1,n,s,!1),K.pushMessagesToState([`${e.name} is focusing inflictions applied to the enemy! [Enforce Infliction]`]);const o=JSON.parse(JSON.stringify(t.debuffs));const r={name:0==G.checkStacks(o,\"enforced infliction I\")?\"enforced infliction I\":0==G.checkStacks(o,\"enforced infliction II\")?\"enforced infliction II\":\"enforced infliction III\",element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has been afflicted with 'Enforced infliction!'\",max_stacks:1,duration:0},i=[\"atk\",\"matk\",\"def\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"resistance\",\"effectiveness\",\"evasion\"];for(var l=0;l<o.length;l++)if(-1!=o[l].types.indexOf(\"ninja\")){imbued=!0;const e=o[l];e.duration>r.duration&&(r.duration=e.duration),Object.keys(o[l]).forEach(t=>{-1!=i.indexOf(t)&&(r.hasOwnProperty(t)?r[t]+=e[t]:r[t]=e[t])})}const c=[\"enforce infliction\",{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a];K.pushMessagesToState([\"No debuffs to fuse!\"],!1,\"push\"),K.pushCustomFunc(a,()=>{},\"self\",c,!0,n,s)},cost:(e,t)=>e.sp>=20?0==G.checkStacks(t.debuffs,\"enforced infliction I\")||0==G.checkStacks(t.debuffs,\"enforced infliction II\")||0==G.checkStacks(t.debuffs,\"enforced infliction III\")||\"Enforce limit reached!\":\"Insufficient SP!\"},shadow_strike:{name:\"shadow strike\",description:\"<b>Cost: 50 stamina</b> - The user strikes the enemy from an indetectable angle, dealing high weapon element physical damage and causing the following effects:<br>If <u>Swift</u> is applied to the user, grants the user some mana (10% max mana), 10 SP and an additional action.<br>If <u>Stealth</u> is applied to the user, grants the user some stamina (10% max stamina), 10 SP and an additional action<br>If <u>Feeble</u> is applied to the enemy, applies <u>Emboldened</u> [+25% DEF/MDEF, 4T duration] to the user, then grants 10 SP and an additional action.<br>If <u>Weakened</u> is applied to the enemy, applies <u>Strengthened</u> [+25% ATK/MATK, 4T duration] to the user, then grants 10 SP and an additional action.<br>Otherwise, grants the user two additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1.1,def_mod:.9,dmg_mod:1.6,use:(e,t,a)=>{const n=K.shadow_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-50,\"self\",!1,!1,o,r,!1),K.prepareAttackMessage(e.name,t.name,`<br>${e.name} emerged from shadows and struck the enemy! [Shadow Strike]`,s);var i=!1;const l=G.checkStacks(e.buffs,\"swift\"),c=G.checkStacks(e.buffs,\"stealth\"),f=G.checkStacks(t.debuffs,\"feeble\"),d=G.checkStacks(t.debuffs,\"weakened\");if(1==l&&(i=!0,K.gainMana(a,e.max_mana/10,\"self\",!1,!1,o,r,!0),K.gainSP(a,10,\"self\",!1,!1,o,r,!0),K.gainActions(a,1,\"self\",!1,!1,o,r,!0)),1==c&&(i=!0,K.gainStamina(a,e.max_stamina/10,\"self\",!1,!1,o,r,!0),K.gainSP(a,10,\"self\",!1,!1,o,r,!0),K.gainActions(a,1,\"self\",!1,!1,o,r,!0)),1==f){i=!0;const t={name:\"emboldened\",def:.25,mdef:.25,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is emboldened!\",max_stacks:1},n=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,n,\"self\",!1,!1,o,r),K.gainSP(a,10,\"self\",!1,!1,o,r,!0),K.gainActions(a,1,\"self\",!1,!1,o,r,!0)}if(1==d){i=!0;const t={name:\"strengthened\",atk:.25,matk:.25,duration:4,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is strengthened!\",max_stacks:1},n=()=>{G.applyBuff(t,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")};K.applyBuff(a,n,\"self\",!1,!1,o,r),K.gainSP(a,10,\"self\",!1,!1,o,r,!0),K.gainActions(a,1,\"self\",!1,!1,o,r,!0)}i||K.gainActions(a,2,\"self\",!1,!1,o,r,!0);const m={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"stamina_gain\",\"mana_gain\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,m,a],!0,o,r)},cost:(e,t)=>e.stamina>=50||\"Insufficient mana!\"},splash:{name:\"splash\",description:\"The user splashes at the enemy with high-pressure liquid, dealing low physical water damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,t,a)=>{const n=K.splash,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} splashed the enemy! [Splash]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:s,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>!0},monster_soul:{name:\"monster soul\",description:\"The user's monster soul allows them to constantly regenerate special energy. Applies <u>Monster Soul</u>, an unstrippable 5 SP regen buff that does not fade with time. Also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.monster_soul,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"monster soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{K.pushMessagesToState([\"<br>The afflicted's monster soul radiates energy!\"],!0,\"push\"),K.gainSP(e,5,\"self\",!1,!1,a,n,!0)},apply_text:\"'s monster soul radiates energy!\",max_stacks:1,desc:\"The soul of a monster resides within this creature. Grants continuous SP regen.\"};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),K.gainActions(a,1,\"self\",r,!0,s,o,!0)},cost:(e,t)=>!0},wolven_soul:{name:\"wolven soul\",description:\"The user's monster soul allows them to constantly regenerate special energy. Applies <u>Wolven Soul</u>, an unstrippable 5 SP regen buff that does not fade with time, and grants actions to the afflicted depending on how low their health is. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.wolven_soul,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"wolven soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{K.pushMessagesToState([\"<br>The afflicted's wolven soul radiates energy!\"],!0,\"push\"),K.gainSP(e,5,\"self\",!1,!1,a,n,!0),t.health/t.max_health<.2?K.gainActions(e,2,\"self\",!1,!1,a,n,!0):t.health/t.max_health<.5&&K.gainActions(e,1,\"self\",!1,!1,a,n,!0)},apply_text:\"'s wolven soul radiates energy!\",max_stacks:1,desc:\"The soul of a wolf resides within this creature. Grants continuous SP regen, and strengthens the creature as their situation grows dire.\"};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),K.gainActions(a,1,\"self\",r,!0,s,o,!0)},cost:(e,t)=>!0},kindred_soul:{name:\"kindred soul\",description:\"The user's kindred soul allows them to constantly regenerate health. Applies <u>Kindred Soul</u>, an unstrippable 3% HP regen buff that does not fade with time. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.kindred_soul,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"kindred soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(t,a,n,s)=>{K.pushMessagesToState([\"<br>The afflicted's kindred soul radiates energy!\"],!0,\"push\"),K.gainHealth(t,Math.round(.03*e.max_health),\"self\",!1,!1,n,s,!0)},apply_text:\"'s kindred soul radiates energy!\",max_stacks:1,desc:\"A kindred soul resides within this creature. Grants continuous HP regen.\"};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),K.gainActions(a,1,\"self\",r,!0,s,o,!0)},cost:(e,t)=>!0},anima_soul:{name:\"anima soul\",description:\"The user's kindred soul allows them to constantly regenerate health and energy. Applies <u>Anima Soul</u>, an unstrippable 5% HP regen/5 SP regen buff that does not fade with time. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.anima_soul,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},a],i={name:\"anima soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(t,a,n,s)=>{K.pushMessagesToState([\"<br>The afflicted's anima soul radiates energy!\"],!0,\"push\"),K.gainHealth(t,Math.round(.05*e.max_health),\"self\",!1,!1,n,s,!0),K.gainSP(t,5,\"self\",!1,!1,n,s,!0)},apply_text:\"'s anima soul radiates energy!\",max_stacks:1,desc:\"An anima soul resides within this creature. Grants continuous HP and SP regen.\"};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),K.gainActions(a,1,\"self\",r,!0,s,o,!0)},cost:(e,t)=>!0},rend:{name:\"rend\",description:\"<b>Cost: 20 stamina</b> -  The user slashes at the enemy viciously, dealing moderate physical damage and possibly (50%) applying <u>Bleed</u> [-10% ATK, 10% HP DOT, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=K.swift_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} claws at the enemy viciously! [Rend]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-20,\"self\",!1,!1,o,r,!1);const i={name:\"bleed\",atk:-.1,duration:3,element:\"physical\",types:[\"debuff\"],apply_text:\" is bleeding!\",max_stacks:1,damage:[\"percentile\",10]};if(0==s.eva){const t=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.applyBuff(a,t,\"opponent\",!1,!1,o,r)}const l={damage:s,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,l,a],!0,o,r)},cost:(e,t)=>e.stamina>=20||\"Insufficient stamina!\"},constrict:{name:\"contstrict\",description:\"<b>Cost: 40 stamina</b> - The user uses vines to constrict the opponent. Deals moderate physical earth damage and applies <u>Constricted</u> [-10% SPD/ATK/MATK, 4T duration, 5% HP DOT, stacks to 3] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:1.12,use:(e,t,a)=>{const n=K.constrict,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} attempts to constrict the enemy with vines! [Constrict]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.gainStamina(a,-40,\"self\",!1,!1,o,r,!1);const i={name:\"constricted\",duration:4,matk:-.1,atk:-.1,speed:-.1,element:\"earth\",types:[\"debuff\"],damage:[\"percentile\",5],apply_text:\" is constricted!\",max_stacks:3};if(0==s.eva){const t=()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.applyBuff(a,t,\"opponent\",!1,!1,o,r)}const l={damage:s,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};K.dealDamage(a,s.damage,\"opponent\",[n.name,l,a],!0,o,r)},cost:(e,t)=>e.stamina>=40||\"Insufficient stamina!\"},nature_healing:{name:\"nature healing\",description:\"<b>Cost: 25 MP</b> - The user employs simple healing magic to recover from damage. Heals the user slightly based on their MDEF.\",off_stat:\"mdef\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:.7,def_mod:0,dmg_mod:1.2,use:(e,t,a)=>{const n=K.nature_healing,s=K.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canCrit:!1,canEvade:!1}),o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;K.pushMessagesToState([`${e.name} enveloped themselves in healing magic! [Nature Healing]`],!0,\"unshift\"),K.gainMana(a,-25,\"self\",!1,!1,o,r,!1);const i=[n.name,{damage:s,additionalInfo:{type:[\"heal\"],target:\"self\"}},a];K.gainHealth(a,s.damage,\"self\",i,!0,o,r,!0)},cost:(e,t)=>e.mana>=25||\"Insufficient Mana!\"},lesser_anima_healing:{name:\"lesser anima healing\",description:\"<b>Cost: 15 MP</b> - The user employs fairly powerful healing magic to recover from damage. Heals the user slightly based on their MDEF, and applies <u>Lower Anima</u> [+20% ATK/DEF/MATK/MDEF, stacks to 3, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:.62,def_mod:0,dmg_mod:1,use:(e,t,a)=>{const n=K.lesser_anima_healing,s=K.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canCrit:!1,canEvade:!1});K.pushMessagesToState([`${e.name} enveloped themselves in healing magic! [Lesser Anima Healing]`],!0,\"unshift\");const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={name:\"lower anima\",duration:3,def:.2,mdef:.2,matk:.2,mdef:.2,element:\"earth\",types:[\"buff\"],apply_text:\" is blessed by healing magic!\",max_stacks:2};K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r);const l=[n.name,{damage:s,additionalInfo:{type:[\"heal\"],target:\"self\"}},a];K.gainHealth(a,s.damage,\"self\",l,!0,o,r,!0)},cost:(e,t)=>!0},forest_curse:{name:\"forest curse\",description:\"<b>Cost: 40 Stamina</b> - The user turns the mystic energy of the forest against their enemy and uses it to strike them while afflicting them with several curses. Deals moderate magical dark damage and attemps to apply <u>Forest Curse</u> [-10% ATK/MATK/DEF/MDEF/SPD, stacks to 10, 5T duration] five times at a 25% chance each attempt. This skill cannot miss.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1.093,def_mod:1.02,dmg_mod:.98,use:(e,t,a)=>{const n=K.forest_curse,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canEvade:!1});K.prepareAttackMessage(e.name,t.name,`<br>${e.name} afflicts the enemy with the curse of the forest! [Forest Curse]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={name:\"forest curse\",duration:5,matk:-.1,atk:-.1,speed:-.1,def:-.1,mdef:-.1,element:\"dark\",types:[\"debuff\"],apply_text:\" has been cursed by the forest!\",max_stacks:10};if(0==s.eva)for(var l=0;l<5;l++){const t=()=>{G.applyBuff(i,25,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.applyBuff(a,t,\"opponent\",!1,!1,o,r)}const c={damage:s,type:[\"attack\",\"debuff\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",[n.name,c,a],!0,o,r)},cost:(e,t)=>!0},anima_bark:{name:\"anima bark\",description:\"The user enforces their body with mystical energy, applying <u>Anima Bark</u> [+30% DEF/MDEF, -10 all elemental defences, unstrippable and does not fade with time, 999T duraton] to themselves. Also grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.anima_bark,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{target:\"self\",type:[\"buff\"]}},a],i={name:\"anima bark\",def:.3,mdef:.3,duration:999,fade:!1,unstrippable:!0,element:\"earth\",elemental:{offence:{},defence:{fire:-10,earth:-10,water:-10,wind:-10,tunder:-10,light:-10,dark:-10,physical:-10}},types:[\"buff\"],apply_text:\"'s bark is reinforced mystically!'\",max_stacks:1};K.gainActions(a,1,\"self\",!1,!1,s,o,!0),K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,t)=>!0},greater_anima_bark:{name:\"greater anima bark\",description:\"The user enforces their body with mystical energy, applying <u>Greater Anima Bark</u> [+65% DEF/MDEF, -15 all elemental defences, unstrippable and does not fade with time, 999T duraton] to themselves. Also grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.greater_anima_bark,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=[n.name,{damage:0,additionalInfo:{target:\"self\",type:[\"buff\"]}},a],i={name:\"greater anima bark\",def:.65,mdef:.65,duration:999,fade:!1,unstrippable:!0,element:\"earth\",elemental:{offence:{},defence:{fire:-15,earth:-15,water:-15,wind:-15,tunder:-15,light:-15,dark:-15,physical:-15}},types:[\"buff\"],apply_text:\"'s bark is reinforced mystically!'\",max_stacks:1};K.gainActions(a,1,\"self\",!1,!1,s,o,!0),K.applyBuff(a,()=>{G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,t)=>!0},absolute_purge:{name:\"absolute purge\",description:\"<b>Cost: 10 mana</b> - The user attempts to purge all power from the enemy, removing all strippable buffs from them.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.absolute_purge,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainMana(a,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a],i=JSON.parse(JSON.stringify(t.buffs));for(;i.length>0;){var l=Math.round(Math.random()*i.length)-1;if(l<0&&(l=0),i[l].hasOwnProperty(\"unstrippable\"))i.splice(l,1);else{const e=()=>{G.stripBuff(\"player\"==a?G.getEnemy().buffs:G.getPlayer().buffs,i[l].name)};K.stripBuff(a,e,\"self\",!1,!1,s,o),i.splice(l,1)}}K.pushCustomFunc(a,()=>{},\"self\",r,!0,s,o)},cost:(e,t)=>e.mana>=10},absolute_cleanse:{name:\"absolute cleanse\",description:\"<b>Cost: 10 mana</b> - The user attempts to purge all weaknesses from themselves, removing from themselves all strippable debuffs.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n=K.absolute_cleanse,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainMana(a,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},a],i=JSON.parse(JSON.stringify(e.debuffs));for(;i.length>0;){var l=Math.round(Math.random()*i.length)-1;if(l<0&&(l=0),i[l].hasOwnProperty(\"unstrippable\"))i.splice(l,1);else{const e=()=>{G.stripBuff(\"player\"==a?G.getPlayer().debuffs:G.getEnemy().debuffs,i[l].name)};K.stripBuff(a,e,\"self\",!1,!1,s,o),i.splice(l,1)}}K.pushCustomFunc(a,()=>{},\"self\",r,!0,s,o)},cost:(e,t)=>e.mana>=10},forest_rupture:{name:\"forest rupture\",description:\"The user calls upon the forest to destroy the enemy, dealing very high physical earth damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"earth\",def_element:\"earth\",off_mod:1.12,def_mod:.87,dmg_mod:1.9,use:(e,t,a)=>{const n=K.forest_rupture,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} called upon the forest to destroy their enemy! [Forest Rupture]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:s,type:[\"attack\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>!0},poison_claws:{name:\"poison claws\",description:\"<b>Cost: 12 mana</b> - The user creates a wound with sharp poisonous claws. The poison seeps into the enemy, applying <u>Viridian Toxin</u> [-15% SPD, 10% HP DOT, 3T duration, stacks to 3]\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,t,a)=>{const n=K.poison_claws,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} lashes out with poisonous claws! [Poison Claws]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:s,type:[\"attack\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",!1,!1,!0,o,r);const l={name:\"viridian toxin\",speed:-.15,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" is envenomed!\",max_stacks:3,damage:[\"percentile\",10]};if(0==s.eva){const t=()=>{G.applyBuff(l,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.applyBuff(a,t,\"opponent\",[n.name,i,a],!0,o,r)}},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},deep_envenom:{name:\"deep_envenom\",description:\"<b>Cost: 7 mana</b> - The user uses a special liquid to enhance the potency of venoms in the body of the target. Deals moderate physical damage and applies an additional stack of any DOT debuffs the enemy has applied (where possible) and extends their duration by 3 turns (buff copy application has base 999% apply chance). Also applies <u>Prepared</u> [+25% ATK, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.7,use:(e,t,a)=>{const n=K.deep_envenom,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} attempts to deeply envenom their enemy! [Deep Envenom]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:s,type:[\"attack\",\"debuff\"],target:\"opponent\"};if(K.dealDamage(a,s.damage,\"opponent\",!1,!1,!0,o,r),0==s.eva){t.debuffs.forEach(t=>{if(t.hasOwnProperty(\"damage\")&&t.damage[1]>0){const n=()=>{t.duration+=3};K.pushMessagesToState([`Debuff ${t.name} extended by 3 turns!`],!1,\"push\"),K.pushCustomFunc(a,n,\"opponent\",!1,!1,o,r,!1);const s=st(t),i=()=>{G.applyBuff(s,999,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.applyBuff(a,i,\"opponent\",!1,!1,o,r)}})}const l={name:\"prepared\",duration:3,atk:.25,element:\"physical\",types:[\"buff\"],apply_text:\" is prepared!\",max_stacks:1};K.applyBuff(a,()=>{G.applyBuff(l,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r),K.pushCustomFunc(a,()=>{},\"self\",[n.name,i,a],!0,o,r,!1)},cost:(e,t)=>e.mana>=7||\"Insufficient mana!\"},killing_blow:{name:\"killing blow\",description:\"Having completed preparations, the user strikes to finish their target. Deals very high physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1.01,def_mod:.83,dmg_mod:2.56,use:(e,t,a)=>{const n=K.killing_blow,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} attempts to finish off their enemy! [Killing Blow]`,s);const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t,i={damage:s,type:[\"attack\"],target:\"opponent\"};K.dealDamage(a,s.damage,\"opponent\",[n.name,i,a],!0,o,r)},cost:(e,t)=>!0},invoke_cataclysm:{name:\"invoke cataclsym\",description:\"<b>Cost: 40 Stamina</b> - The user calls upon the power of the Demon sword, Cataclysm to strike their enemies. Deals one hit of high physical fire damage and one hit of high magical dark damage before applying <u>Catalysis</u> [-50% DEF/MDEF, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:1.123,def_mod:1.06,dmg_mod:1.78,use:(e,t,a)=>{const n=K.invoke_cataclysm;K.prepareAttackMessage(e.name,t.name,`<br>${e.name} calls upon the power of Cataclysm!`,r);const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t,r=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,\"\",r),K.dealDamage(a,r.damage,!1,!1,s,o);const i=K.calcDamage(e,t,n.off_stat,n.def_stat,\"fire\",\"fire\",n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e.name,t.name,\"\",r),K.dealDamage(a,i.damage,\"opponent\",!1,!1,s,o);const l={name:\"catalysis\",duration:3,def:-.5,mdef:-.5,element:\"dark\",types:[\"debuff\"],apply_text:\" has been afflicted by the power of Cataclysm!\",max_stacks:1};if(0==r.eva||0==i.eva){const t=()=>{G.applyBuff(l,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\")};K.applyBuff(a,t,\"opponent\",!1,!1,s,o)}},cost:(e,t)=>!0},guard_break:{name:\"guard break\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy with a blunt edge, dealing low physical weapon element damage but possibly with a 75% chance to apply <u>Guard Broken</u> [-10% DEF, 5T duration, stacks to 3].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,t,a)=>{e.stamina=e.stamina-35;const n=K.guard_break,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} struck the enemy with a blunt edge!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"guard broken\",def:-.1,duration:5,element:\"physical\",types:[\"debuff\"],apply_text:\"'s guard has been broken!\",max_stacks:3,elemental:{offence:{},defence:{}}};0==s.eva&&G.applyBuff(n,75,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\");const o=\"enemy\"==a?t:e,r=\"enemy\"==a?e:t;G.uploadChanges(o,r),K.finish(\"guard_break\",s,a)})},cost:(e,t)=>e.stamina>=35||\"Insufficient stamina!\"},rush_attack:{name:\"rush attack\",description:\"<b>Cost: 10 stamina</b> - The user strikes the enemy several times, dealing 3 hits of low physical weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=K.rush_attack,s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;K.gainStamina(a,-10,\"self\",!1,!1,s,o,!1),K.pushMessagesToState([`${e.name} lashed out at their enemy!<br>`],!0,\"unshift\");const r={damage:[],type:[\"attack\",\"multihit\"],target:\"opponent\"};for(var i=0;i<3;i++){const i=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);K.prepareAttackMessage(e,t,\"\",i,\"push\",!1),K.dealDamage(a,i.damage,\"opponent\",!1,!1,s,o),r.damage.push(i)}K.pushCustomFunc(a,()=>{},\"self\",[n.name,r,a],!0,s,o)},cost:(e,t)=>e.stamina>=10||\"Insufficient stamina!\"},health_potion:{name:\"health potion\",description:\"Drink a health potion, recovering 20% of one's health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=30;K.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.health/4)},s=[[`${e.name} Drank a health potion!`,1],[`recovered ${n.damage} HP!`,1]];yt(s,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(s,o),K.finish(\"health_potion\",n,a)})},cost:(e,t)=>e.mana>=30||\"Insufficient mana!\"},camoflague:{name:\"camoflague\",description:\"<b>Cost: 12 mana</b> - The user envelops themselves in a camoflague that makes them hard to see and react to. Applies <u>Camoflague</u> [+30% evasion, +70% resistance, +30% SPD, 2T duration].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.mana-=12;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} camoflagues themselves.`,1]];yt(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(s,o);G.applyBuff({name:\"camoflague\",evasion:.3,resistance:70,speed:.3,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is camoflagued!\",max_stacks:1},100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\"),K.finish(\"camoflague\",n,a)})},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},engulf:{name:\"engulf\",description:\"<b>Cost: 10 mana</b> - Absorb the enemy's power. Deals low physical damage and removes all buffs from the enemy. For each buff removed, applies <u>Empowered</u> [+10% ATK/DEF/MATK/MDEF/SPD, 2T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,t,a)=>{const n=K.engulf;e.mana-=10;const s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<br>${e.name} engulfs the enemy!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"empowered\",atk:.1,matk:.1,mdef:.1,def:.1,speed:.1,duration:2,element:\"dark\",types:[\"buff\"],apply_text:\" is empowered!\",max_stacks:99};if(0==s.eva){const s=JSON.parse(JSON.stringify(t.buffs));for(;s.length>0;){var o=Math.round(Math.random()*s.length)-1;o<0&&(o=0),s[o].hasOwnProperty(\"unstrippable\")?s.splice(o,1):(G.stripBuff(\"player\"==a?G.getEnemy().buffs:G.getPlayer().buffs,s[o].name),G.applyBuff(n,100,\"player\"==a?e:G.getPlayer(),\"player\"==a?G.getPlayer():G.getEnemy(),\"buffs\"),s.splice(o,1))}}const r=\"enemy\"==a?t:e,i=\"enemy\"==a?e:t;G.uploadChanges(r,i),K.finish(\"engulf\",s,a)})},cost:(e,t)=>e.mana>=10||\"Insufficient SP!\"},dark_pact:{name:\"dark pact\",description:\"<b>Cost: 18 mana</b> - The user calls upon their pact with the dark forest to strengthen them. At the cost of 5% HP, applies three stacks each of standard ATK/MATK/SPEED buff with increased duration [+10% ATK/MATK/SPEED, 5+3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:e.max_health/20,crit:!1,eva:!1,note:\"self-inflicted damage\"},s=[[`<br>${e.name} forms a covenant with darkness..`,1],[`<br>${e.name} took damage! (${e.max_health/20})`]];yt(s,\"battle\",()=>{e.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(s,o);const r={...X.matkup};r.duration=6;const i={...X.atkup};i.duration=6;const l={...X.spdup};l.duration=6;for(var c=0;c<3;c++)G.applyBuff(r,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\"),G.applyBuff(i,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\"),G.applyBuff(l,100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\");K.finish(\"dark_pact\",n,a)})},cost:(e,t)=>e.health>e.max_health/20&&e.mana>=18||\"Insufficient health/mana!\"},dark_howl:{name:\"dark howl\",description:\"<b>Cost: 15 mana</b> - The user lets out a howl imbued with malevolent magic. Deals low magical dark damage and has a 40% chance each to apply <u>Fear</u> [-100% evasion, -20% SPD, -10% ATK/DEF/MATK/MDEF], <u>Dark Curse</u> [+70% dark defence], and <u>Elemental Weaken</u> [-10% all elemental offences]. Each debuff lasts 2 turns and stacks twice.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:.6,use:(e,t,a)=>{e.mana=e.mana-15;const n=K.dark_howl,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} lets out a dark howl!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"fear\",duration:2,def:-.1,mdef:-.1,matk:-.1,atk:-.1,speed:-.2,evasion:-1,element:\"dark\",types:[\"debuff\"],apply_text:\" is rapt with fear!\",max_stacks:2},o={name:\"dark curse\",element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by darkness!\",elemental:{defence:{dark:70},offence:{}},duration:2,max_stacks:2},r={name:\"elemental weaken\",element:\"dark\",types:[\"debuff\"],apply_text:\"'s elemental strength has decreased!'\",elemental:{defence:{},offence:{physical:-10,fire:-10,water:-10,earth:-10,wind:-10,thunder:-10,dark:-10,light:-10}},duration:2,max_stacks:2};0==s.eva&&(G.applyBuff(n,40,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\"),G.applyBuff(o,40,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\"),G.applyBuff(r,40,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\"));const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;G.uploadChanges(i,l),K.finish(\"dark_howl\",s,a)})},cost:(e,t)=>e.mana>=15||\"Insufficient mana!\"},nox_curse:{name:\"nox curse\",description:\"<b>Cost: 20 mana</b> - The user curses the opponent, dealing moderate dark magical damage and removing all debuffs. For each debuff previously applied, applies a stack of <u>Nox Curse</u> to the enemy [15% HP DOT, 2T duration, stacks to 99]. <u>Nox Curse</u> has a base 300% apply chance. This skill's effects will proc even if the skill misses.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1.15,use:(e,t,a)=>{e.mana=e.mana-10;const n=K.nox_curse,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} curses the opponent!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;const n={name:\"nox curse\",duration:2,damage:[\"percentile\",15],element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by the shadows...\",max_stacks:99},o=JSON.parse(JSON.stringify(t.debuffs));for(;o.length>0;){var r=Math.round(Math.random()*o.length)-1;r<0&&(r=0),o[r].hasOwnProperty(\"unstrippable\")?o.splice(r,1):(G.stripBuff(\"player\"==a?G.getEnemy().debuffs:G.getPlayer().debuffs,o[r].name),G.applyBuff(n,100,\"player\"==a?G.getPlayer():G.getEnemy(),\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\"),o.splice(r,1))}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;G.uploadChanges(i,l),K.finish(\"nox curse\",s,a)})},cost:(e,t)=>e.mana>=20||\"Insufficient mana!\"},boar_rush:{name:\"boar rush\",description:\"The user rushes at the enemy and strikes them powerfully. Deals notable physical damage and applies <u>Boar Rush</u> [+10% SPD, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,t,a)=>{const n=K.boar_rush,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} rushed at the enemy!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;G.applyBuff({name:\"boar rush\",duration:4,speed:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased!\",max_stacks:3},100,\"player\"==a?e:G.getPlayer(),\"player\"==a?G.getPlayer():G.getEnemy(),\"buffs\"),\"player\"==a?(G.getPlayer().sp+=5,G.getPlayer().sp>G.getPlayer().max_sp&&(G.getPlayer().sp,G.getPlayer().max_sp),mt(`${e.name} gained 5 SP!`)):(G.getEnemy().sp+=5,G.getEnemy().sp>G.getEnemy().max_sp&&(G.getEnemy().sp,G.getEnemy().max_sp),mt(`${e.name} gained 5 SP!`));const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(n,o),K.finish(\"boar_rush\",s,a)})},cost:(e,t)=>!0},boar_strike:{name:\"boar strike\",description:\"The user strikes the enemy with their axe. Deals above average physical damage and applies <u>Boar Strike</u> [+10% ATK, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.4,use:(e,t,a)=>{const n=K.boar_strike,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} crashed their axe into the enemy!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;G.applyBuff({name:\"boar strike\",duration:4,atk:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s attack increased!\",max_stacks:3},100,\"player\"==a?e:G.getPlayer(),\"player\"==a?G.getPlayer():G.getEnemy(),\"buffs\"),\"player\"==a?(G.getPlayer().sp+=5,G.getPlayer().sp>G.getPlayer().max_sp&&(G.getPlayer().sp,G.getPlayer().max_sp),mt(`${e.name} gained 5 SP!`)):(G.getEnemy().sp+=5,G.getEnemy().sp>G.getEnemy().max_sp&&(G.getEnemy().sp,G.getEnemy().max_sp),mt(`${e.name} gained 5 SP!`));const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(n,o),K.finish(\"boar_strike\",s,a)})},cost:(e,t)=>!0},flare_impact:{name:\"flare impact\",description:\"<b>Cost: 20 SP</b> - The user ignites their axe and smashes the enemy, dealing high physical fire damage and applying <u>Burning</u> [3% HP DOT, 5T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:2.1,use:(e,t,a)=>{e.sp=e.sp-20;const n=K.flare_impact,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} ignited their axe and smashed the enemy!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;G.applyBuff({name:\"burning\",duration:5,element:\"fire\",types:[\"debuff\"],apply_text:\" is burning!\",damage:[\"percentile\",3],max_stacks:1},100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getEnemy():G.getPlayer(),\"debuffs\");const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(n,o),K.finish(\"flare_impact\",s,a)})},cost:(e,t)=>e.sp>=20||\"Insufficient mana!\"},ignis_destroyer:{name:\"ignis destroyer\",description:\"The user strikes the enemy with a great fireball and a flaming axe simulatenously, dealing massive fire physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:3.2,use:(e,t,a)=>{const n=K.ignis_destroyer,s=K.calcDamage(e,t,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,!1),o=K.prepareAttackMessage(e.name,t.name,`<Br>${e.name} attempts to obliterate the enemy with flames!`,s);yt(o,\"battle\",()=>{t.health-=s.damage;const n=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(n,o),K.finish(\"ignis_destroyer\",s,a)})},cost:(e,t)=>!0},boar_haste:{name:\"boar haste\",description:\"The user enchants their speed with powerful magic, applying <u>Boar Haste</u> [+50% SPD, unstrippable, 999T duration]  to themselves.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} enchants themselves with powerful magic!`,1]];yt(s,\"battle\",()=>{t.health-=n.damage;const s=\"enemy\"==a?t:e,o=\"enemy\"==a?e:t;G.uploadChanges(s,o);G.applyBuff({name:\"boar haste\",speed:.5,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased greatly!\",max_stacks:1,unstrippable:!0,duration:999},100,\"player\"==a?G.getPlayer():e,\"player\"==a?G.getPlayer():e,\"buffs\"),K.finish(\"camoflague\",n,a)})},cost:(e,t)=>e.mana>=12||\"Insufficient mana!\"},true_cleanse:{name:\"true cleanse\",description:\"<b>Cost: 10 SP</b> - The user cleanses their spirit completely. Removes all buffs and debuffs from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,t,a)=>{e.sp=e.sp-10;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} cleanses themselves completely.`,1]];yt(s,\"battle\",()=>{var s,o;t.health-=n.damage,\"player\"==a?(s=G.getPlayer().buffs,o=G.getEnemy().debuffs):(s=G.getEnemy().buffs,o=G.getEnemy().debuffs);for(var r=0;r<s.length;r++){const e=s[r];1==G.stripBuff(\"player\"==a?G.getPlayer().buffs:G.getEnemy().buffs,e.name)&&r--}for(r=0;r<o.length;r++){const e=o[r];1==G.stripBuff(\"player\"==a?G.getPlayer().debuffs:G.getEnemy().debuffs,e.name)&&r--}const i=\"enemy\"==a?t:e,l=\"enemy\"==a?e:t;G.uploadChanges(i,l),K.finish(\"true_cleanse\",n,a)})},cost:(e,t)=>e.sp>=10||\"Insufficient SP!\"}},X={defdown:{name:\"DEF down\",def:-.1,duration:5,element:\"none\",types:[\"debuff\"],apply_text:\"'s defence was decreased!\",max_stacks:5},defup:{name:\"DEF up\",def:.1,duration:5,element:\"none\",types:[\"buff\"],apply_text:\"'s defence was increased!\",max_stacks:5},mdefdown:{name:\"MDEF down\",mdef:-.1,duration:5,types:[\"debuff\"],apply_text:\"'s magical defence was decreased!\",max_stacks:5},mdefup:{name:\"MDEF up\",mdef:.1,duration:5,apply_text:\"'s magical defence was increased!\",max_stacks:5},atkup:{name:\"ATK up\",atk:.1,duration:5,types:[\"buff\"],apply_text:\"'s attack was increased!\",max_stacks:5},matkup:{name:\"MATK up\",matk:.1,duration:5,types:[\"buff\"],apply_text:\"'s magical attack was increased!\",max_stacks:5},spdup:{name:\"SPEED up\",speed:.1,duration:5,element:\"none\",types:[\"buff\"],apply_text:\"'s speed was increased!\",max_stacks:5}},Z=(e,t)=>{var a=0;return e.forEach(e=>{e.skill==t&&a++}),a},Q=e=>{var t=[];return e.forEach(e=>{t.push(e.damage.damage)}),t},ee=e=>{for(var t=JSON.parse(JSON.stringify(e)),a=0,n=0;n<t.length&&(n<0&&(n=0),0!=t.length);n++){var s=t[n].name;a+=1;for(var o=0;o<t.length;o++)t[o].name==s&&(t.splice(o,1),o-=1,n-=1)}return a},te=e=>{var t=JSON.parse(JSON.stringify(e)),a=0;return t.forEach(e=>{var n=e.name;a+=1;for(var s=0;s<t.length;s++)if(t[s].name==n){t.splice(s,1),s-=1;break}}),a},ae=(e,t)=>{console.log(\"find times used called\");const a=G.state;var n=0;return console.log(a),console.log(a[G.turn-1][e]),a[G.turn-1][e].forEach(e=>{console.log(`cur name is ${e.skill}`),e.skill==t&&(n+=1)}),n},ne=(e,t)=>{for(var a=!1;0==a;){var n=Math.floor(Math.random()*t.length);1==K[t[n]].cost(e)&&(a=!0,K[t[n]].use(G.getEnemy(),G.getPlayer(),\"enemy\"))}},se={damaged_dagger:{name:\"damaged dagger\",type:\"weapon\",atk:4,def:1,matk:5,mdef:3,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged dagger. Slightly rusty. It's corrogated edge may help against some enemies, but will not do any favours against slimes.\",sell_value:100},damaged_sword:{name:\"damaged sword\",type:\"weapon\",atk:7,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged sword. It is a little bit rusty, with varying sharpness throughout the length of its edge. It's uneven length is unlikely to assist its user in swordplay.\",sell_value:100},simple_sword:{name:\"simple sword\",type:\"weapon\",atk:5,def:1,matk:2,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of craftmanship evidently skilled and yet still simplistic. It has a presently untouched silver blade under a brown hilt. Swords of this type are often used by skilled adventurers who want to return to their roots.\",sell_value:25},sharpened_sword:{name:\"sharpened sword\",type:\"weapon\",atk:12,def:3,matk:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The blade atop this sword is noticeable sharper than weaker swords. It has a weightier feel that allows for stronger swings.\",sell_value:100},crafted_blade:{name:\"crafted blade\",type:\"weapon\",atk:20,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The result of a very skilled weapon forger working with limited materials. Even one unknowledgable in swords can infer the love put into this blade from the intricate hilt to the blade optimised for killing.\",sell_value:250},silver_axe:{name:\"silver axe\",type:\"weapon\",atk:18,def:6,matk:6,mdef:6,speed:-10,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe forged of silver. It is double-bladed, and the weight on either side makes it a little uncomfortable to handle.\",sell_value:120},reinforced_silver_axe:{name:\"reinforced silver axe\",type:\"weapon\",atk:25,def:8,matk:8,mdef:8,speed:-20,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe that seems to be exactly like the silver axe except it has been reinforced by various stronger materials. However, the materials used to reinforce it seem to have been applied unevenly, which makes this weapon, however strong, difficult to use.\",sell_value:300},metal_stave:{name:\"metal stave\",type:\"weapon\",atk:3,def:1,matk:6,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It is a common misconception that simple weaponry for mages are made out of wood. Wood actually doesn't really conduct mana very well and is susceptible to breaking and fragmenting, making it a poor choice. Instead, a simple stave constructed from various metals melded together haphazardly is the weapon of choice for beginning magic users.\",sell_value:30},magisteel_stave:{name:\"magisteel stave\",type:\"weapon\",atk:7,def:1,matk:13,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A stave made from a single alloy that is particularly good at conducting mana. Useful for intermediate mages but a lack of resistance to mana makes it unsuitable for stronger users.\",sell_value:150},enchanted_magisteel_stave:{name:\"enchanted magisteel stave\",type:\"weapon\",atk:9,def:1,matk:20,mdef:8,elemental:{offence:{water:10},defence:{water:-10}},element:\"water\",desc:\"A stave made from an alloy that conducts maigc easily, but also enchanted so that more powerful spells can be cast using it. It seems to have been enchanted with water magic.\",sell_value:350},conduit_orb:{name:\"conduit orb\",type:\"weapon\",matk:20,elemental:{offence:{},defence:{}},element:\"none\",desc:\"Most orbs are formed from solidified mana over a very long period of time, and therefore has a very high mana conductivity that allows for the use of very powerful spells. However this orb is manmade with no elemental alignment using a complicated and specialised technique. It offers no other combat advantages, however allows a user a relatively high increase in magic power for its price.\",sell_value:200},simple_dagger:{name:\"simple dagger\",type:\"weapon\",atk:2,speed:5,mdef:1,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A weapon that seems almost identical to another named 'simple sword' although it is smaller in length. It has a lightly curved blade that allows attacks to be parried more easily.\",sell_value:25},crafted_dagger:{name:\"crafted dagger\",type:\"weapon\",atk:10,speed:10,evasion:.1,mdef:3,def:3,elemental:{offence:{},defence:{}},element:\"none\",desc:\"A wonderfully crafted weapon. It's hilt it designed such that the weapon can be held in most positions very comfortably, and such that the way the weapon is held can be changed at will. The blade is an intricate array of grooves and smooth edges that allow attacks to be blocked and parried with great ease and effectiveness. Not to be used by newbie dagger wielders.\",sell_value:250},silver_shield:{name:\"silver shield\",type:\"weapon\",def:25,mdef:20,speed:-20,elemental:{offence:{},defence:{physical:-10}},element:\"physical\",desc:\"A silver shield. It is well-made and sturdy but with little nuance to speak of.\",sell_value:200},runeblade:{name:\"runeblade\",type:\"weapon\",atk:10,matk:7,mdef:5,def:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A blade of simple structure. The blade has been formed of two half-blades with runic inscriptions on the inside of either welded together such that the inscriptions cannot be seen. This along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},runic_dagger:{name:\"runic dagger\",type:\"weapon\",atk:7,matk:5,mdef:2,def:2,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger of simple structure. The weapon is too small for inscriptions to be placed inside of the blade so they are plainly visible. The runes along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},magisteel_runic_dagger:{name:\"magisteel runic dagger\",type:\"weapon\",atk:10,matk:8,mdef:7,def:5,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger crafted meticulously with the magisteel alloy and also encrusted with runes. This along with an enchantment placed upon the blade makes it possible to enhance the dagger with some runes, and even without magic, the expert craftsmanship evident on the weapon makes it an effective combat tool.\",sell_value:300},slime_reinforced_sword:{name:\"slime reinforced sword\",type:\"weapon\",atk:3,def:1,mdef:3,elemental:{offence:{water:10},defence:{}},element:\"water\",desc:\"A basic sword reinforced with some slime. It is a little heavier and more dull but grants some more elemental defence.\",sell_value:50},wolfhide_dagger:{name:\"wolfhide dagger\",type:\"weapon\",atk:3,speed:6,def:1,mdef:1,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"A simple dagger wherein the grip has been enhanced with grey wolf's skin.\",sell_value:50},pickaxe:{name:\"pickaxe\",type:\"weapon\",atk:3,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It's a pickaxe. What more do you want?\",sell_value:25},earthen_sword:{name:\"earthen sword\",type:\"weapon\",atk:23,def:2,matk:6,mdef:4,elemental:{offence:{earth:15,wind:-5},defence:{earth:-6,wind:6,fire:10}},element:\"earth\",desc:\"A blade enhanced with the venom of a venomous wolf from the dark forest. It can't really poison enemies due the limited quantity of poison, but it does grant the sword some earthen qualities.\",sell_value:390},makeshift_sword:{name:\"makeshift sword\",type:\"weapon\",atk:3,def:1,matk:1,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of limited craftsmanship. Besides that, nothing of note regarding this weapon.\",sell_value:25},wolven_reavers:{name:\"wolven reavers\",type:\"weapon\",atk:4,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Small weapons fashioned from wolf claws and pelt. Easy to carry and useful for close range combat.\",sell_value:75},flamme_kaiser:{name:\"flamme kaiser\",type:\"weapon\",atk:35,matk:15,elemental:{offence:{fire:20},defence:{fire:-5,water:10,thunder:-5}},element:\"fire\",desc:\"An axe whose craftsmanship is indicative of something beyond the comprehension of even a decently-skilled artisan. Even though it should be far too heavy to hold, somehow it is comfortable in just one hand. The heat it emanates makes it difficult to hold, however.\",sell_value:1e3},fishing_rod:{name:\"fishing rod\",type:\"weapon\",atk:5,speed:5,crit_chance:.2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An old fishing rod. You can tell it's used, and the wear of the old user's arms have given it a more comfortable grip. However, the compromise is the quality of the rod. It can clearly seen better days.\",sell_value:25},barren_sword:{name:\"barren sword\",type:\"weapon\",atk:30,matk:15,speed:5,elemental:{offence:{},defence:{}},element:\"none\",desc:\"There is a distinct lack of personaility and heart put into this sword, in spite of its elegance. Emotion is often a strong proponent of items made by skilled craftsmen, and seeing it completely absent in this weapon is a little... eerie. It emanates an unknown power.\",sell_value:\"unsellable\"},hydra_staff:{name:\"hydra staff\",type:\"weapon\",matk:25,atk:15,mdef:5,elemental:{offence:{water:20,fire:-5},defence:{water:-5,thunder:5}},element:\"water\",desc:\"A staff that has been very elegantly crafted - a stick of what looks like ivory has had two white-and-cyan snakes wrapped around it, swirling in opposite directions until they meet at the top, just below a water orb. Or at least, that's what it looks like. If it were truly made from such materials, it would probably be much more power. Nevertheless, it seems to be a formidable weapon.\",sell_value:\"unsellable\"},wooden_sword:{name:\"wooden sword\",type:\"weapon\",matk:1,atk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword made from wood. It is a little unpleasant to look at, to be honest.\",sell_value:20},vine_wrapped_wooden_sword:{name:\"vine wrapped wooden sword\",type:\"weapon\",matk:3,atk:6,elemental:{offence:{earth:5},defence:{earth:-2}},element:\"physical\",desc:\"A sword made from wood that has been enhanced with vines. The vines grant it a slight aestetic edge.\",sell_value:40},wooden_stave:{name:\"wooden stave\",type:\"weapon\",matk:3,atk:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A staff made from wood. It is a little unpleasant to look at, to be honest.\",sell_value:20},vine_wrapped_wooden_stave:{name:\"vine wrapped wooden stave\",type:\"weapon\",matk:6,atk:3,elemental:{offence:{earth:5},defence:{earth:-2}},element:\"physical\",desc:\"A stave made from wood that has been enhanced with vines. The vines grant it a slight aestetic edge.\",sell_value:40},feathervine_sword:{name:\"feathervine sword\",type:\"weapon\",matk:5,atk:9,elemental:{offence:{wind:5,earth:5},defence:{wind:-2,earth:-2}},element:\"physical\",desc:\"This sword doesn't actually have feathers attached to it. But the wolf pelt used in it's creation has been frayed and split to the extent that they look a bit like feathered remains.\",sell_value:70},wolf_hermit_staff:{name:\"wolf hermit staff\",type:\"weapon\",matk:10,atk:7,elemental:{offence:{physical:15},defence:{}},element:\"physical\",desc:\"This item uses the remains of wolves to capture their essence and in doing so, enhance one's attacks with the magic enherent within a grey wolf. The claws it is embroidered with look like charms worn by a hermit.\",sell_value:80},thunder_rod:{name:\"thunder rod\",type:\"weapon\",matk:10,atk:10,elemental:{offence:{thunder:10},defence:{}},element:\"thunder\",desc:\"A rod enchanted with simple thunder magic. Used by fighters of all types as a way of easily aligning one's attacks with the thunder element.\",sell_value:150},forest_explorer_daggers:{name:\"forest explorer daggers\",type:\"weapon\",atk:8,speed:8,resistance:5,mdef:2,def:2,elemental:{offence:{earth:10,dark:3},defence:{earth:-5,physical:-5,dark:-2}},element:\"earth\",desc:\"A pair of daggers that seem to have aspects of various creatures found in the forest skillfully woven together into a pair of small blades. They also seem to have several enchantments upon them to make exploring the area easier. Whoever owned these must have known a lot about the place they were found..\",sell_value:250},damaged_helm:{name:\"damaged helm\",type:\"head\",def:7,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A damaged helm. The perforations in the front may help the user to see better. The ones in the back, not so much.\",sell_value:100},leather_cap:{name:\"damaged helm\",type:\"head\",def:5,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A cap made of brown leather.\",sell_value:20},silver_helm:{name:\"damaged helm\",type:\"head\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-2,water:-2,fire:2}},element:\"physical\",desc:\"A silver helm. It is not a full helm, instead protecting the neck and head. Offers less protection than a full helm but does not restrict movement or sight.\",sell_value:50},advanced_silver_helm:{name:\"advanced silver helm\",type:\"head\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A helm made of impressive silver. It has more coverage than some lower end helmets but is still fairly free, at the cost of protection.\",sell_value:80},silver_knight_helm:{name:\"silver knight helm\",type:\"head\",def:10,mdef:5,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A knight's helm made of silver. It covers the face completely, but the limited view makes it harder to accurately move about and evade attacks.\",sell_value:200},ninja_wrap:{name:\"ninja wrap\",type:\"head\",def:2,mdef:1,speed:5,elemental:{offence:{},defence:{dark:-2,light:5}},element:\"dark\",desc:\"Black cloth intricately wrapped such that it can be wore on the head, hiding most of the face. Offers almost no protection but does not restrict movement at all.\",sell_value:90},wizard_headband:{name:\"wizard headband\",type:\"head\",def:1,mdef:4,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Stereotypical wizard hats are worn by many but often cannot function as much more than a fashion piece. This wizard headband, crafted from silver with a small gem at the center is designed to enhance spells cast by the wielder.\",sell_value:70},enchanted_wooden_helm:{name:\"enchanted wooden helm\",type:\"helm\",def:5,mdef:2,elemental:{offence:{},defence:{water:-10,fire:30,physical:-5}},element:\"physical\",desc:\"One would assume that a wooden helm would be very ineffective, but it seems to have been enchanted that prevents it from fragmenting and greatly increases its water absorbance.\",sell_value:75},wolfhide_cap:{name:\"wolfhide cap\",type:\"head\",def:1,mdef:1,speed:2,elemental:{offence:{physical:5},defence:{earth:-5}},element:\"physical\",desc:\"A cap fashioned from grey wolves hide. It doesn't offer much protection but does look quite nice!\",sell_value:50},water_infused_helm:{name:\"water infused helm\",type:\"head\",def:8,mdef:6,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"A metal helm infused with water mana. Surprisingly, the water magic does not change how the helm feels to wear. Grants some nice protection against the elements.\",sell_value:120},makeshift_steel_helm:{name:\"makeshift steel helm\",type:\"head\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-3}},element:\"physical\",desc:\"The artisanship observed with this helm is fairly weak. It's clear it was made by someone fairly inexperienced\",sell_value:50},shinobi_headcloak:{name:\"shinobi headcloak\",type:\"head\",def:8,mdef:6,speed:5,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-12,physical:-5,light:15}},element:\"dark\",desc:\"Basic black fabric that stealthy fighters use to hide their faces has been enhanced with the pelt of dark beasts. Just like their skin, it has an ethereal quality.\",sell_value:400},vine_helmet:{name:\"vine helmet\",type:\"head\",def:3,mdef:4,elemental:{offence:{},defence:{earth:-5,physical:-5,fire:20,water:-2,thunder:-2}},element:\"earth\",desc:\"Vines from a teravalum that looks a bit like a helmet. Better than nothing but since it's not designed to be a helmet, but it's a little uncomfortable.\",sell_value:35},crown_of_darkness:{name:\"crown of darkness\",type:\"head\",def:10,mdef:7,evasion:.1,elemental:{offence:{dark:10,physical:5},defence:{dark:-10,light:15,physical:-5}},element:\"dark\",desc:\"A small crown-looking headpiece. It is entirely black but unlike shadow pelts, completely solid. It is quite difficult to tell what material this item is made from, although it is imbued with magical power.\",sell_value:\"unsellable\"},leather_cap:{name:\"leather cap\",type:\"head\",def:3,mdef:4,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A cap made of brown leather. Uncomfortable and not practical. Is this even helpful?\",sell_value:20},forest_explorer_cap:{name:\"forest explorer cap\",type:\"head\",def:8,mdef:7,resistance:5,elemental:{offence:{},defence:{earth:-10,physical:-5,dark:-5}},element:\"earth\",desc:\"The cap of an experienced explorer of the forest. It seems to have several enchantments placed upon it designed to aid someone in a normal forest. Whoever previously owned these must have known a lot about the area in which they were found...\",sell_value:250},damaged_armour:{name:\"damaged armour\",type:\"body\",def:6,mdef:7,speed:-5,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A damaged chestplate. The damage to the ligaments would increase one's agility were it not for the rusting forcing one to move against the resistance of the joints.\",sell_value:100},leather_armour:{name:\"leather armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A chestplate made of leather.\",sell_value:20},silver_armour:{name:\"silver armour\",type:\"body\",def:5,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"Armour designed to protect the main vulnerable part of the body, leaving a chainmail pattern around the joints for movement. Not expertly cafted, but well made nonetheless.\",sell_value:50},advanced_silver_armour:{name:\"advanced silver armour\",type:\"body\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"An armour made almost entirely of silver. The joints use overlapping and interlocking pieces of iron to enable movement while facilitating good protection.\",sell_value:80},silver_knight_armour:{name:\"silver knight armour\",type:\"body\",def:13,mdef:7,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A complete silver knight's armour. It still allows movement at the joints, but still restricts movement slightly. In exchange, the wearer is granted greater defenses.\",sell_value:200},ninja_garb:{name:\"ninja garb\",type:\"body\",def:5,mdef:2,speed:10,evasion:.1,elemental:{offence:{},defence:{dark:-5,light:10}},element:\"dark\",desc:\"The equivalent of a chestplate for a ninja. It is made of a thin black fabric that offers little protection but allows for quick movement without detection.\",sell_value:130},light_wizard_robes:{name:\"light wizard robes\",type:\"body\",def:3,mdef:7,matk:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Grey and blue wizard robes are often worn by new mages. They have a light enchant to enhance spells cast by the user, are comfortable to move about in and are fairly stylish.\",sell_value:70},tattered_magus_robes:{name:\"tattered magus robes\",type:\"body\",def:5,mdef:10,matk:9,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Magi are extremely powerful magic users. Becaue of the powerful magic they use, spellcaster garb that they wear can wear out quickly. Some magi discard them and others donate them. These robes seem to have sustained a lot of damage, but are still better than most beginners wear. \",sell_value:140},wolfhide_armour:{name:\"wolfhide armour\",type:\"body\",def:3,mdef:2,speed:5,elemental:{offence:{physical:5},defence:{earth:-7}},element:\"physical\",desc:\"Armour fashioned from grey wolf hide. It is comfortable and enabled great movement.\",sell_value:50},water_infused_armour:{name:\"water infused armour\",type:\"body\",def:8,mdef:7,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Metal armour enhanced with water magic. Grants increased defence against the elements.\",sell_value:120},makeshift_steel_armour:{name:\"makeshift steel armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Makeshift steel armour. Not made very well, but grants rudimentary protection.\",sell_value:50},shinobi_armour:{name:\"shinobi armour\",type:\"body\",def:10,mdef:8,speed:8,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-8,physical:-5,light:12}},element:\"dark\",desc:\"Body wear worn by stealth fighters enhanced with the pelt of a dark beast. Having part of them on you makes you feel a little like a dark beast yourself.\",sell_value:400},shadow_cloak:{name:\"Shadow cloak\",type:\"body\",def:13,mdef:10,speed:15,evasion:.1,crit_chance:.1,elemental:{offence:{},defence:{physical:-10,dark:-15,light:15}},element:\"physical\",desc:\"A cloak that looks as though it was fashioned from darkness itself. It cannot be felt physically when worn but its power can still be felt.\",sell_value:600},bladed_armour:{name:\"bladed armour\",type:\"body\",def:5,mdef:3,atk:5,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Simple armour with claws used to grant the wearer an offensive edge.\",sell_value:120},vine_armour:{name:\"vine armour\",type:\"body\",def:4,mdef:4,speed:-2,elemental:{offence:{},defence:{fire:5,earth:-2}},element:\"earth\",desc:\"Armour fashioned from vines. It's surprisingly comofrtable, but grants little insulation.\",sell_value:20},wooden_armour:{name:\"wooden armour\",type:\"body\",def:3,mdef:3,elemental:{offence:{},defence:{}},element:\"earth\",desc:\"Armour made from wood. You could get splinters wearing this!\",sell_value:15},strong_vine_chestplate:{name:\"strong vine chestplate\",type:\"body\",def:6,mdef:6,elemental:{offence:{},defence:{fire:4,earth:-3,physical:-2}},element:\"earth\",desc:\"Armour from vines enhanced with hempwood ligaments. The use of the flexible but strong ligaments allows for better movement, and they cover vulnerable gaps present in armour without it.\",sell_value:45},leather_amour:{name:\"leather armour\",type:\"body\",def:4,mdef:4,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Armour made from leather. Fairly comfortable to move in but doesn't help keep you alive that much.\",sell_value:30},forest_explorer_armour:{name:\"forest explorer armour\",type:\"body\",def:10,mdef:7,resistance:5,elemental:{offence:{},defence:{earth:-10,physical:-5,dark:-3}},element:\"earth\",desc:\"A pair of daggers that seem to have aspects of various creatures found in the forest skillfully woven together into it. They also seem to have several enchantments upon them to make exploring the area easier. Whoever owned these must have known a lot about the place they were found..\",sell_value:250},damaged_pantaloons:{name:\"damaged pantaloons\",type:\"legs\",def:5,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"Damaged pantaloons. They're pretty uncomfortable, and rapid movement causes them to make a sound that hurts the ear. Also, pantaloons is such a silly sounding word.\",sell_value:100},leather_pants:{name:\"leather pants\",type:\"legs\",def:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Trousers made of brown leather.\",sell_value:20},silver_legwear:{name:\"silver legwear\",type:\"legs\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-4,water:-3,fire:2}},element:\"physical\",desc:\"Silver legwear. There is some type of fabric protecting the legs down to the knees, beyond which silver armour is present.\",sell_value:50},advanced_silver_legwear:{name:\"advanced silver legwear\",type:\"legs\",def:6,mdef:3,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"Advanced silver legwear. It uses relatively advanced craftsmanship to allow movement at the joints with overlapping and interlocking pieces of silver.\",sell_value:80},silver_knight_legwear:{name:\"silver knight legwear\",type:\"legs\",def:10,mdef:7,speed:-10,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"Legwear made of silver used by knights. There is a considerable compromise in movement in exchange for improved defenses.\",sell_value:200},ninja_legwear:{name:\"ninja legwear\",type:\"legs\",def:7,mdef:3,speed:10,elemental:{offence:{},defence:{dark:-2,light:10}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings. They offer great movement and are very comfortable, and seem to have been lightly enchanted for a little protection\",sell_value:90},light_wizard_leggings:{name:\"light wizard leggings\",type:\"legs\",def:2,mdef:5,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Simple legwear designed to synergise aesthetically with simple wizard robes. Has a light enchant to boost magical power.\",sell_value:70},wolfhide_leggings:{name:\"wolfhide leggings\",type:\"legs\",def:1,mdef:2,speed:3,elemental:{offence:{physical:5},defence:{earth:-5}},element:\"physical\",desc:\"Legwewar fasioned from grey wolf's hide. It is comfortable, and allows for great movement.\",sell_value:50},water_infused_legwear:{name:\"water infused legwear\",type:\"legs\",def:6,mdef:5,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Basic metal armour infused with water magic. Asides from enhanced physical protection, it also grants some defence against the elements.\",sell_value:120},makeshift_steel_legwear:{name:\"makeshift steel legwear\",type:\"legs\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-4}},element:\"physical\",desc:\"Steel legwear made somewhat poorly, but not unwearable. Seems like it might fall apart after some use.\",sell_value:50},shinobi_leggings:{name:\"shinobi leggings\",type:\"legs\",def:9,mdef:5,speed:10,elemental:{offence:{},defence:{dark:-9,physical:-5,light:12}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings, but that have been enhanced using the pelt of a dark beast. Quite comfortable, but have an ethereal quality to them.\",sell_value:400},vine_pantaloons:{name:\"vine pantaloons\",type:\"legs\",def:2,mdef:2,elemental:{offence:{},defence:{fire:3,earth:-2}},element:\"earth\",desc:\"Trousers fashioned from vines. It's surprisingly comofrtable, but grants little insulation.\",sell_value:15},wooden_trousers:{name:\"wooden trousers\",type:\"legs\",def:1,mdef:1,elemental:{offence:{},defence:{fire:3}},element:\"physical\",desc:\"Trousers crudely made from wood. You could get splinters from these!\",sell_value:10},leather_pants:{name:\"leather pants\",type:\"legs\",def:2,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Trousers fashioned entirely from brown leather. Comfortable to wear but do not offer great protecton.\",sell_value:15},forest_explorer_pants:{name:\"forest explorer pants\",type:\"legs\",def:9,mdef:6,resistance:5,elemental:{offence:{},defence:{earth:-10,physical:-5,dark:-3}},element:\"earth\",desc:\"Legwear that somehow has aspects of all the creatures found in the F1 forest woven together and still looks nice. It also seems to have various enchantments placed upon it aimed to grant an advantage to the wearer against the enemies found in the area. Whoever previously owned these must have known a lot about the place they were found..\",sell_value:250},shadowwarding_pendant:{name:\"Shadowwarding Pendant\",type:\"misc\",atk:5,def:5,matk:7,mdef:8,elemental:{offence:{},defence:{dark:-10,light:10}},element:\"physical\",description:\"A short pendant with a silver chain. On the front seems to be a small, dark purple crystal. It seems that the pendant is designed to defend against the more dangerous creatures in the dark forest.\",sell_value:500},slime_bracers:{name:\"Slime bracers\",type:\"misc\",def:3,mdef:4,speed:-3,resistance:5,elemental:{offence:{water:10},defence:{water:-5,fire:-10,thunder:10}},element:\"water\",description:\"Bracers for defending one's arms fashioned from slime. The solid and slightly sticky substance offers fairly good elemental protection but stunts one's ability to move somewhat.\",sell_value:30},wolfhide_charm:{name:\"Wolfhide charm\",type:\"misc\",atk:4,def:3,mdef:2,speed:3,evasion:.05,crit_chance:.1,elemental:{offence:{physical:8},defence:{fire:10}},element:\"physical\",description:\"A charm fashioned from wolf pelts. The residual inherent mana of the wolves seems to grant the charm some special qualities.\",sell_value:60},lizard_bracelet:{name:\"Lizard bracelet\",type:\"misc\",atk:7,def:4,mdef:3,evasion:.1,elemental:{offence:{},defence:{fire:-5}},element:\"water\",description:\"Small parts of lizard tails were wrapped intricately together to create a bracelet. It is quite pretty, and seems to have some magical properties.\",sell_value:100},aquus_orb:{name:\"Aquus orb\",type:\"misc\",matk:7,mdef:6,resistance:10,elemental:{offence:{water:10,fire:-10},defence:{water:-15,fire:-6,thunder:12}},element:\"water\",description:\"Aquus clusters condensed to form a small orb capable of enhancing the capabilities of the wielder.\",sell_value:100},luminant_charm:{name:\"Luminant charm\",type:\"misc\",matk:5,atk:5,mdef:6,speed:2,elemental:{offence:{light:10},defence:{light:-5,dark:-10}},element:\"light\",description:\"A simple charm enhanced with the luminescent eye of a water lizard. Can be worn on jewelry or held in a pocket.\",sell_value:150},tear_of_lucia:{name:\"Tear of lucia\",type:\"misc\",matk:7,mdef:7,resistance:5,elemental:{offence:{water:20},defence:{water:-15,fire:-10,dark:-5,light:-5,earth:-5,thunder:-5,wind:-5}},element:\"water\",description:\"A manasoul condensed using a makeshift orb into a very small space. The compactness of the charm causes the mana inside the be quite powerful. Items of this nature are called 'Tears of Lucia' as it believed that the tears of the Solace goddess will grant any who observes them inpenetrable safety, and the mana of this item for some reason has a very soothing aura.\",sell_value:350},red_slime_bracers:{name:\"Red slime bracers\",type:\"misc\",def:9,mdef:13,speed:-5,resistance:5,crit_damage:.1,elemental:{offence:{fire:10},defence:{water:5,fire:-13,thunder:-5}},element:\"water\",description:\"Bracers for defending one's arms fashioned from red slime. It is more solid than blue slime and has different elemental properties.\",sell_value:300},special_armband:{name:\"Special armband\",type:\"misc\",atk:3,def:3,matk:3,mdef:3,speed:3,max_stamina:20,elemental:{offence:{},defence:{}},element:\"physical\",description:\"A simple bracelet that promotes spirituality. It's a little tight..\",sell_value:200},friendly_slime:{name:\"Friendly slime\",type:\"misc\",def:9,mdef:13,resistance:5,max_mana:20,max_stamina:5,elemental:{offence:{water:20},defence:{water:-7,fire:-8,thunder:15}},element:\"water\",description:\"A slime to help you in battle! Where'd you find this little guy?\",sell_value:250},friendly_greater_slime:{name:\"Friendly greater slime\",type:\"misc\",def:15,mdef:20,resistance:5,max_mana:30,max_stamina:5,elemental:{offence:{water:25},defence:{water:-10,fire:-10,thunder:15}},element:\"water\",description:\"A greater slime to help you in battle! Where'd you find this little guy?\",sell_value:400},vine_membrane_bracers:{name:\"Vine membrance bracers\",type:\"misc\",atk:2,def:5,mdef:4,max_stamina:5,elemental:{offence:{earth:10},defence:{earth:-4,fire:4}},element:\"earth\",description:\"Bracers made from vines and hempweed ligaments. They offer a good mixture of offence and defence.\",sell_value:40},water_orb_necklace:{name:\"Water orb necklace\",type:\"misc\",matk:10,def:5,mdef:10,max_mana:50,elemental:{offence:{water:25,thunder:-10,fire:-10},defence:{thunder:20,fire:-10,water:-5}},element:\"water\",description:\"A simple necklace with a water orb encrusted at its center. Basic but very effective.\",sell_value:200},blue_vine_charm:{name:\"Blue vine charm\",type:\"misc\",atk:3,matk:3,def:3,mdef:3,speed:-2,max_mana:10,max_stamina:10,elemental:{offence:{water:5,earth:5},defence:{fire:25,water:-5,earth:-5}},element:\"water\",description:\"A necklace fashioned from various items that can be found from blue slimes and vined creatures. The coalesce of their inherent magics grants the wearer a range of boons.\",sell_value:30},fishers_lucky_charm:{name:\"Fisher's lucky charm\",type:\"misc\",atk:6,matk:7,def:4,mdef:5,crit_chance:.2,crit_damage:.15,evasion:.05,elemental:{offence:{},defence:{}},element:\"water\",description:\"Many fishers are known for their extreme luck both in finding rare and dangerous fish and surviving various encounters with them. Is this item the sole reason for that..?\",sell_value:50},vinewarding_charm:{name:\"Vinewarding charm\",type:\"misc\",atk:3,matk:2,def:4,mdef:3,resistance:15,elemental:{offence:{},defence:{earth:-10}},element:\"earth\",description:\"A charm infused with the essence of a teravalum. As such, it is useful in defending against them.\",sell_value:30},bearkiller_charm:{name:\"Bearkiller charm\",type:\"misc\",def:9,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",description:\"This charm isn't actually infused with a bear's essence, unfortunately. Since bears specialise in offence what is needed to beat them is a good defence, and this is what this item offers.\",sell_value:30},canine_charm:{name:\"Canine charm\",type:\"misc\",atk:5,speed:8,elemental:{offence:{physical:10},defence:{}},element:\"physical\",description:\"A charm infused with the essence of a wolf. Interestingly, many species of wolves may show respect, rather than hatred towards wearers of this charm. Such is the way of the canine.\",sell_value:30},forest_explorer_pendant:{name:\"Forest explorer pendant\",type:\"misc\",def:8,mdef:8,resistance:10,elemental:{offence:{earth:10},defence:{earth:-10,physical:-5,dark:-3}},element:\"earth\",description:\"A pendant with a silver chain and green gem at the center. The gem seems to have the essences of various creatures found in floor one infused into it, granting the wearer a series of boons.\",sell_value:250},forest_explorer_charm:{name:\"Forest explorer charm\",type:\"misc\",atk:8,mdef:8,effectiveness:10,elemental:{offence:{earth:15},defence:{earth:-6,physical:-2,dark:-1}},element:\"earth\",description:\"A charm made with several parts of various creatures from the floor one forest. It should look like a complete mess, but... it actually looks rather nice.\",sell_value:250},slime_ball:{name:\"Slime Ball\",type:\"reagent\",desc:\"A ball of blue slime. Although it has shape, it is easy to press into. Has a peculiar texture.\",sell_value:5},grey_wolf_pelt:{name:\"Grey Wolf Pelt\",type:\"reagent\",desc:\"The fur of a grey wolf. Most of it remains intact, but if you shake the straps of fur, parts of it will flake off rapidly\",sell_value:7},wanderer_memorabilia:{name:\"Adventurer Memorabilia\",type:\"reagent\",desc:\"Various things that may remind an old advenutrer of the adventures they had.\",sell_value:0},weak_membrane:{name:\"Weak Membrane\",type:\"reagent\",desc:\"A very thin layer of skin from some kind of weap reptile. A single wrong move and it would tear.\",sell_value:10},tiny_lizard_tail:{name:\"Tiny Lizard Tail\",type:\"reagent\",desc:\"The tail of a lizard. It still moves sometimes.\",sell_value:12},aquus_cluster:{name:\"Aquus Cluster\",type:\"reagent\",desc:\"An undeveloped orb of weak water magic. 'Aquus' refers to weak water magic. There wasn't enough of it to form an orb, so the mana settled as a semi-solid substance that has form and yet is very soft and malleable. Even so, it is fairly useful to novice mages.\",sell_value:25},water_orb:{name:\"Water Orb\",type:\"reagent\",desc:\"Water magic that gathered at a single point over a fairly long period of time and eventually reached a high enough concentration to possess crystalline form. These very rarely form naturally, and are often crafted by strong magic users to store mana of a particular alignment.\",sell_value:400},manasoul:{name:\"Manasoul\",type:\"reagent\",desc:\"Beings such as klastera and elementals with no anatomy or creature soul are animated by a 'manasoul', mana with the power to grant consciousness. It is not known how to create these and so they are often extracted from naturally occurring creatures such as klastera, elementals and very rarely, dragons.\",sell_value:1e3},light_absorbant_eye:{name:\"Light absorbant eye\",type:\"reagent\",desc:\"The eye of a class of lizard that absorbs light from the sun to be used to keep the body warm during hibernation. In many places with cold winters there is little space to burrow or make warm refuge, and so this skill is essential in keeping the lizards alive when the climate becomes cold.\",sell_value:20},red_slime_ball:{name:\"Red slime ball\",type:\"reagent\",desc:\"A ball of red slime. It can be pressed into but seems to return to a general shape after the deforming force is removed. Has a peculiar texture.\",sell_value:7},sharp_claw:{name:\"Sharp claw\",type:\"reagent\",desc:\"A dull grey claw. Seems to be sharper than most. Both the sides and prick cause bleeding upon contact.\",sell_value:8},venomous_claw:{name:\"Venomous claw\",type:\"reagent\",desc:\"A dull greenish-grey claw. The venom the claw is laced with seems to cause fatigue in small amounts. It would be unwise to toy with this item.\",sell_value:8},shadow_pelt:{name:\"Shadow pelt\",type:\"reagent\",desc:\"A patch of fur from a Dark beast. Although it is clearly tangible, it has an ethereal quality that makes it uncomfortable to hold - like it would just fade into black smoke.\",sell_value:10},shadow_corona:{name:\"Shadow corona\",type:\"reagent\",desc:\"It's difficult to tell what part of the Dark beast this comes from - it seems like a particularly tough, solid patch of its fur. It is heavily enchanted and seems to serve as some kind of evidence that the dark beast is in fact a dark beast.\",sell_value:20},trash:{name:\"Trash\",type:\"reagent\",desc:\"Human garbage. Arguably of negative value.\",sell_value:-1},fire_rune:{name:\"Fire rune\",type:\"reagent\",desc:\"A simple flame rune. It is contained in a transparent box of some material that seems to block any heat emanating from them.\",sell_value:40},water_rune:{name:\"Water rune\",type:\"reagent\",desc:\"A simple water rune. It isn't dangerous, but feels a little weird to touch - probably due to the water mana constantly emanating from it.\",sell_value:40},thunder_rune:{name:\"Thunder rune\",type:\"reagent\",desc:\"A simple thunder rune. Touching it would shock the user a little, so it is encased in a transparent box of some material.\",sell_value:40},dark_rune:{name:\"Dark rune\",type:\"reagent\",desc:\"A simple dark rune. It is uncomfortable to have in your inventory due to the foreboding enery it emits.\",sell_value:40},light_rune:{name:\"Light rune\",type:\"reagent\",desc:\"A simple light rune. It is difficult to tell whether it is emitting light or light mana.\",sell_value:40},vip_card:{name:\"VIP card\",type:\"reagent\",desc:\"A basic-looking small card. Apparently functions as evidence of one's generous patronage.\",sell_value:100},steel:{name:\"steel\",type:\"reagent\",desc:\"It's steel. What more do you want?\",sell_value:10},wood:{name:\"wood\",type:\"reagent\",desc:\"Some wood. Who cares what type it is?\",sell_value:8},leather:{name:\"leather\",type:\"reagent\",desc:\"Leather. It is cheap but fairly well made.\",sell_value:9},stone:{name:\"stone\",type:\"reagent\",desc:\"Stone.\",sell_value:3},water_energy:{name:\"water energy\",type:\"reagent\",desc:\"Pure water energy. Humans have not yet learned to replicate this with magic; this is something only animals can create. Can be used by some creatures to strengthen themselves.\",sell_value:60},weak_vine:{name:\"weak vine\",type:\"reagent\",desc:\"Weak vines woven of some kind of thick cellulose material. It feels a little leathery.\",sell_value:6},hempweed_ligament:{name:\"hempweed ligament\",type:\"reagent\",desc:\"Seems to form the ligaments of a Lesser Teravalum. It is very thin, but very strong. Could probably be woven into a fabric\",sell_value:7},brown_fur:{name:\"brown fur\",type:\"reagent\",desc:\"The brown fur of a brown bear. Despite feeling quite nice, it smells very bad.\",sell_value:6},magic_bark:{name:\"Magic bark\",type:\"reagent\",desc:\"Bark of a tree imbued with magic. The material of the tree itself seems to have a relatively poor magical, however bark of this nature could still be very useful to beginning adventurers.\",sell_value:12},special_sap:{name:\"Special sap\",type:\"reagent\",desc:\"The sap of a treant. It has potent magical qualities, specifically in healing. It's quite bitter, so in healing potions for children, sugar is often added to it.\",sell_value:15},forest_scourge_scales:{name:\"Forest scourge scales\",type:\"reagent\",desc:\"The scales of a forest scourge. They are dull, likely to aid camoflague, but incredibly tough and smooth to the touch.\",sell_value:12},mage_cheat_sheet:{name:\"Mage cheat sheet\",type:\"reagent\",desc:\"A cheat sheet for some basic spells. It reads (messily):<i><br>Water charge: fire + ice<br>Steam charge: fire + water<br>Soil charge: earth + water<br>Magma charge: fire + earth<br>Volcano charge: magma + earth<br>Obsidian charge: magma + water<br>Frozen Earth charge: ice + earth</i>\",sell_value:300},f1_settlement_teleportation_stone:{name:\"f1 settlement tp stone\",type:\"reagent\",desc:\"It is difficult to explain the function of this item, but it allows for instantaneous travel, albeit is destroyed afterwards. When exploring on floor one, consume to travel to the settlement in the north-west of the map.\",sell_value:5,use:{case:\"outside\",effect:[[\"player\",\"teleport\",\"floor1\",[4,2]]]}},f1_forest_settlement_teleportation_stone:{name:\"f1 forest settlement tp stone\",type:\"reagent\",desc:\"It is difficult to explain the function of this item, but it allows for instantaneous travel, albeit is destroyed afterwards. [When exploring on floor one, consume to travel to the settlement in the forest region of the map.]\",sell_value:5,use:{case:\"outside\",effect:[[\"player\",\"teleport\",\"floor1\",[17,20]]]}},stamina_vial:{name:\"stamina vial\",type:\"reagent\",desc:\"A vial filled with invigorating reagents. Recovers 40 stamina upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"stamina\",\"flat\",40]],battleEffect:()=>{K.pushMessagesToState([\"Used stamina vial!\"]),K.gainStamina(\"player\",40,\"self\",[\"item:stamina_vial\",{damage:30,type:[\"gain_stamina\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:4}},health_potion:{name:\"health potion\",type:\"reagent\",desc:\"A simple health potion. Recovers 40 HP upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",40]],battleEffect:()=>{K.pushMessagesToState([\"Used health potion!\"]),K.gainHealth(\"player\",40,\"self\",[\"item:health_potion\",{damage:30,type:[\"heal\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:5}},greater_health_potion:{name:\"greater health potion\",type:\"reagent\",desc:\"A fairly well-made health potion. Recovers 80 HP upon use.\",sell_value:15,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",80]],battleEffect:()=>{K.pushMessagesToState([\"Used greater health potion!\"]),K.gainHealth(\"player\",80,\"self\",[\"item:greater_health_potion\",{damage:80,type:[\"heal\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:5}},crafted_health_potion:{name:\"crafted health potion\",type:\"reagent\",desc:\"This health potion is somewhat of a spectacle of artisanship. Recovers 200 HP upon use.\",sell_value:50,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",200]],battleEffect:()=>{K.pushMessagesToState([\"Used crafted health potion!\"]),K.gainHealth(\"player\",200,\"self\",[\"item:crafted_health_potion\",{damage:150,type:[\"heal\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:5}},mana_potion:{name:\"mana potion\",type:\"reagent\",desc:\"A simple mana potion. Recovers 40 MP upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"mana\",\"flat\",40]],battleEffect:()=>{K.pushMessagesToState([\"Used mana potion!\"]),K.gainMana(\"player\",40,\"self\",[\"item:health_potion\",{type:[\"mana_gain\",\"item\"],mana:40,target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:5}},greater_mana_potion:{name:\"greater mana potion\",type:\"reagent\",desc:\"A fairly well-made mana potion. Recovers 80 MP upon use.\",sell_value:15,use:{case:\"all\",effect:[[\"player\",\"mana\",\"flat\",80]],battleEffect:()=>{K.pushMessagesToState([\"Used greater mana potion!\"]),K.gainMana(\"player\",80,\"self\",[\"item:greater_health_potion\",{mana:80,type:[\"mana_gain\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:5}},earthen_shield_potion:{name:\"earthen shield potion\",type:\"reagent\",desc:\"A potion infused with the concentrated essence of the forest. Applies <u>Earthen Shield</u> [+50 resistance, 1T duration] to the user. Can only be used in battle.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{K.pushMessagesToState([\"Used earthen shield potion!\"]);const e={name:\"earthen shield\",duration:1,resistance:50,element:\"earth\",types:[\"buff\"],apply_text:\" is protected by the earth!!\",max_stacks:1};K.applyBuff(\"player\",()=>{G.applyBuff(e,100,G.getPlayer(),G.getPlayer(),\"buffs\")},\"self\",[\"item:health_potion\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:3}},weak_slingshot:{name:\"weak slingshot\",type:\"reagent\",desc:\"A weak slingshot. It can be used once but will break afterwards. Use in battle to deal low physical damage and gain an action.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{const e=G.getPlayer(),t=G.getEnemy(),a=K.calcDamage(e,t,\"atk\",\"def\",\"physical\",\"physical\",.9,1.15,.5);K.prepareAttackMessage(e.name,t.name,`<br>${e.name} slung a slingshot at their enemy!`,a),K.dealDamage(\"player\",a.damage,\"opponent\",!1,!1,e,t),K.gainActions(\"player\",1,\"self\",[\"item:weak_slingshot\",{damage:0,type:[\"attack\",\"item\"],target:\"opponent\"},\"player\"],!0,e,t,!0)},pouchMax:4}},invigorating_flower:{name:\"invigorating flower\",type:\"reagent\",desc:\"An edible flower with invigorating qualities. Eat it in battle to gain 20 SP.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{K.pushMessagesToState([\"Used invigorating flower!\"]),K.gainSP(\"player\",20,\"self\",[\"item:invigorating_flower\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy(),!0)},pouchMax:3}},desperate_flower:{name:\"desperate flower\",type:\"reagent\",desc:\"An edible flower with properties that increase with in effectiveness depending on the desperation of the consumer. Grants 2 extra actions, then 1 additional action for every 30% of HP lost.\",sell_value:10,use:{case:\"battle\",battleEffect:()=>{const e=G.getPlayer(),t=G.getEnemy();K.pushMessagesToState([\"Used desperate flower!\"]),K.gainActions(\"player\",2,\"self\",!1,!1,e,t,!0),e.health<=.7*e.max_health&&K.gainActions(\"player\",1,\"self\",!1,!1,e,t,!0),e.health<=.4*e.max_health&&K.gainActions(\"player\",1,\"self\",!1,!1,e,t,!0),e.rhealth<=.3*e.max_health&&K.gainActions(\"player\",1,\"self\",!1,!1,e,t,!0),K.pushCustomFunc(\"player\",()=>{},\"self\",[\"item:desperate_flower\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,e,t,!1)},pouchMax:2}},monster_essence:{name:\"monster essence\",type:\"reagent\",desc:\"A pouch infused with various monster essences. Consume during battle to grant oneself a <u>Monster Soul</u> for the duration of that battle.\",sell_value:20,use:{case:\"battle\",battleEffect:()=>{K.pushMessagesToState([\"Used monster essence!\"]);const e={name:\"monster soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{K.pushMessagesToState([\"<br>The afflicted's monster soul radiates energy!\"],!0,\"push\"),K.gainSP(e,5,\"self\",!1,!1,a,n,!0)},apply_text:\"'s monster soul radiates energy!\",max_stacks:1};K.applyBuff(\"player\",()=>{G.applyBuff(e,100,G.getPlayer(),G.getPlayer(),\"buffs\")},\"self\",[\"item:monster_essence\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:1}},kindred_essence:{name:\"kindred essence\",type:\"reagent\",desc:\"A pouch infused with various kindred essences. Consume during battle to grant oneself a <u>Kindred Soul</u> for the duration of that battle.\",sell_value:20,use:{case:\"battle\",battleEffect:()=>{K.pushMessagesToState([\"Used kindred essence!\"]);const e={name:\"kindred soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,t,a,n)=>{console.log(t),K.pushMessagesToState([\"<br>The afflicted's kindred soul radiates energy!\"],!0,\"push\"),K.gainHealth(e,Math.round(.03*user.max_health),\"self\",!1,!1,a,n,!0)},apply_text:\"'s kindred soul radiates energy!\",max_stacks:1};K.applyBuff(\"player\",()=>{G.applyBuff(e,100,G.getPlayer(),G.getPlayer(),\"buffs\")},\"self\",[\"item:kindred_essence\",{damage:0,type:[\"buff\",\"item\"],target:\"self\"},\"player\"],!0,G.getPlayer(),G.getEnemy())},pouchMax:1}}},oe=(e,t=1,a=1)=>{const s={...se[e]},o=Math.floor(Math.random()*(a-t+1))+t;mt(`<br>Attained ${o} ${s.name}${o>1?\"s\":\"\"}!`);var r=!1;const i=n.player;if(\"reagent\"==s.type&&i.inventory.forEach(t=>{t[0]==e&&(t[1]+=o,r=!0)}),0==r)if(\"reagent\"!=s.type)for(var l=1;l<o+1;l++)n.player.inventory.push(e);else n.player.inventory.push([e,o])},re=(e,t)=>{const a=se[e];mt(`<br>Removed ${t} ${a.name}${t>1?\"s\":\"\"}!`);var s=!1;const o=n.player;if(\"reagent\"==a.type){const a=n.player;a.inventory.forEach(n=>{if(n[0]==e){if(n[1]-=t,0==n[1]){const t=a.inventory.findIndex(t=>t[0]==e);a.inventory.splice(t,1)}s=!0}})}if(0==s)for(var r=1;r<t+1;r++)-1!=o.inventory.indexOf(e)&&(delete o.inventory[o.inventory.indexOf(e)],me(),s=!1);return me(),0==s?-1:0},ie=(e,t=!0,a=!0,n=!0,s=!0,o=!1,r=!0)=>{const i=[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"critical_chance\",\"critical_damage\",\"effectiveness\",\"resistance\",\"max_stamina\",\"max_mana\",\"evasion\"],l=[\"attack\",\"defence\",\"magic attack\",\"magic defence\",\"speed\",\"critical chance\",\"critical damage\",\"effectiveness\",\"resistance\",\"max stamina\",\"max mana\",\"evasion\"];o&&mt(e.name),Object.keys(e).forEach(s=>{const o=e[s];n&&\"type\"==s&&mt(`Type: ${o}`),t&&i.includes(s)&&mt(`${o} ${l[i.indexOf(s)]}`),t&&\"elemental\"==s&&(Object.keys(o.offence).forEach(e=>{mt(`${o.offence[e]<0?\"\":\"+\"}${o.offence[e]} ${e} attack`)}),Object.keys(o.defence).forEach(e=>{mt(`${o.defence[e]<0?\"\":\"+\"}${o.defence[e]} ${e} defence`)})),a&&\"desc\"==s&&mt(`Description: ${o}`),a&&\"sell_value\"==s&&mt(`Sell value: ${o}`),r&&\"use\"==s&&null!=e[s].pouchMax&&mt(`Pouch limit: ${o.pouchMax}`)})},le=e=>e[0].length>1,ce=e=>le(e)?e[0]:e,fe=(e,t)=>{var a=0;return\"reagent\"!=se[e].type?t.forEach(t=>{t==e&&a++}):t.forEach(t=>{t[0]==e&&(a=t[1])}),a},de=e=>{const t=Object.keys(se);for(var a=0;a<t.length;a++)if(se[t[a]].name==e)return t[a];return!1},me=()=>{const e=n.player;for(var t=0;t<e.inventory.length;t++)null!=e.inventory[t]&&null!=e.inventory[t]||e.inventory.splice(t,1)},he=e=>{ue.returnFunction=e,n.first_time.stats?(n.first_time.stats=!1,it(S.statsIntroduction,ue.statLoop)):ue.statLoop()},ue={returnFunction:void 0,statLoop:()=>{mt(\"<br>Entering the stats menu.<br> Say 'sk'/'skills' to enter the skill menu, or 'sp' to enter the sp menu.\"),mt(\"<br>Input <b>'b'/'back'</b> to return.\"),kt(u),ut(ue.statLoopResponse),et(n.player,\"normal\")},statLoopResponse:()=>{pt(ue.statLoopResponse);n.player;switch(ht().toLowerCase()){case\"sk\":case\"skills\":mt(`${k}Entering skills menu. To change skills equipped, say 'e'/equipped', or say 'l'/'learn' to learn new skills.`),kt([\"equipped\",\"learn\",\"back\"]),ut(ke);break;case\"sp\":mt(`${k}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),mt(\"<br>Current SP investments:\"),ge(),kt([\"allocate\",\"reset\",\"back\"]),ut(pe);break;case\"b\":case\"back\":mt(`${k}Returning to main menu...`),ue.returnFunction();break;default:mt(\"<br>Invalid input\"),kt(u),ut(ue.statLoopResponse)}}},pe=()=>{pt(pe);const e=ht(),t=n.player;switch(e.toLowerCase()){case\"a\":case\"allocate\":mt(`${k}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),mt(`You have ${n.player.sp} SP.`),mt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${i[t.level]}.`),kt(_),ut(_e);break;case\"r\":case\"reset\":var a=0;Object.keys(t.sp_investment).forEach(e=>{a+=t.sp_investment[e]}),mt(`${k}Are you sure you want to reset your SP? It will cost ${20*a} gold. Type 'y' or 'yes' to confirm. To go back, enter anything else.`),ut(ye);break;case\"b\":case\"back\":mt(`${k}Returning to status menu..`),ue.statLoop();break;default:mt(\"<br>Invalid input\"),mt(`${k}Current SP investments:`),ge(),ut(pe)}},ge=()=>{const e=n.player;Object.keys(e.sp_investment).map(t=>`${t}: ${e.sp_investment[t]}`).forEach(e=>mt(e))},ye=()=>{pt(ye);const e=ht().toLowerCase(),t=n.player;var a=0;Object.keys(t.sp_investment).forEach(e=>{a+=t.sp_investment[e]});const s=20*a;if(\"yes\"==e||\"y\"==e){if(t.gold>=s){mt(`${k}SP has been reset.`),Object.keys(t.sp_investment).forEach(e=>{t.sp+=t.sp_investment[e],t.sp_investment[e]=0}),t.gold-=s;const e=G.getMaxHealth(t.stats);t.stats.current_health>e&&(t.stats.current_health=e)}else mt(`${k}You don't have enough gold!`);mt(`${k}You now have ${t.sp} SP.`)}mt(`${k}Returning to SP menu..`),mt(`${k}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),mt(\"<br>Current SP investments:\"),ge(),ut(pe),kt([\"allocate\",\"reset\"]),et(n.player,\"normal\")},_e=()=>{pt(_e);const e=ht().toLowerCase(),t=n.player;var a=!0;t.sp_investment.hasOwnProperty(e)?t.sp>0?(mt(`How many SP points would you like to allocate to ${e}?`),ut(be(e)),a=!1):mt(\"You don't have any SP!\"):\"back\"==e||\"b\"==e?(a=!1,mt(\"Returning to SP menu...\"),mt(\"Entering SP menu. Say 'a/allocate' to allocate SP, 'r/reset' to reset allocation.\"),mt(\"Current SP investments:\"),ge(),kt([\"allocate\",\"reset\"]),ut(pe)):mt(\"Invalid input.\"),a&&(mt(`<br>You currently have ${t.sp} SP.`),ut(_e)),et(n.player,\"normal\")},be=e=>{pt(be);const t=()=>{pt(t,!1);const a=ht();if(\"NaN\"!=parseInt(a).toString()){const t=n.player;parseInt(a)<=t.sp?parseInt(a)+t.sp_investment[e]<=i[t.level]?(t.sp-=parseInt(a),t.sp_investment[e]+=parseInt(a),\"health\"==e&&(t.stats.current_health+=20*parseInt(a)),mt(`${a} SP allocated to ${e}. Returning to allocate mode..<br>`),mt(\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),mt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${i[t.level]}.`),mt(`You have ${n.player.sp} SP.`),kt(_),ut(_e),et(t,\"normal\")):(mt(\"This amount of SP would exceed your single stat allocation limit! Returning to allocate mode..<br>\"),mt(\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),mt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${i[t.level]}.`),mt(`You have ${n.player.sp} SP.`),kt(_),ut(_e)):(mt(\"You don't have enough SP! Returning to allocate mode..<br>\"),mt(\"Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.\"),mt(`At level ${t.level}, the maximum SP that can be allocated to one stat is ${i[t.level]}.`),mt(`You have ${n.player.sp} SP.`),kt(_),ut(_e))}else mt(\"Invalid input.\"),ut(be(e))};return t},ke=()=>{pt(ke);const e=ht().toLowerCase();n.player;switch(e){case\"e\":case\"equipped\":ve.disciplinesMenuLoop();break;case\"l\":case\"learn\":we.disciplinesMenuLoop();break;case\"b\":case\"back\":mt(`${k}Returning...`),ue.statLoop();break;default:mt(\"<br>Invalid input.\"),ut(ke)}},we={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){mt(`${k}Showing all available disciplines. Say the name of a discipline to view the skills it contains if it is unlocked, or to unlock it if it is not unlocked.`);const e=d;Object.keys(e).forEach(t=>{e[t].requirements.level<=n.player.level&&(e[t].visible=!0)});const t=Object.keys(e);t.sort((t,a)=>1==e[t].unlocked&&1==e[a].unlocked?t>a?1:-1:0==e[t].unlocked&&0==e[a].unlocked?t>a?1:-1:1==e[t].unlocked?-1:1),t.forEach(t=>{const a=e[t];1==a.unlocked?mt(` - ${Ze(a.name)} -- UNLOCKED`):1==a.visible&&mt(` - ${Ze(a.name)} -- LOCKED`)}),xe.showAllDisciplines(e),ut(we.disciplinesMenu)},disciplineMenuLoop(e){const t=we.currentDiscipline;n.player;if(1==e){mt(`${k}Showing all skills in the ${t.name.toUpperCase()} discipline. Say the name of a skill to view its description and unlock it if you haven't done so already.`);var a=0,s=0;t.skills.forEach(e=>{1==e.unlocked&&(a+=1),s+=1}),mt(`Skills known in this discipline: ${a}/${s}<br>`),t.skills.forEach(e=>{const t=e.name,a=1==e.unlocked?\"X\":\" \";mt(`${K[t].name} - [${a}]`)})}xe.skillsInDiscipline(t),ut(we.disciplineMenu)},disciplineMenu(){pt(we.disciplineMenu);const e=ht().toLowerCase(),t=n.player,a=we.currentDiscipline,s=a.skills.findIndex(t=>K[t.name].name==e);if(-1!=s){const n=K[a.skills[s].name].description,r=a.skills[s];if(mt(`${k}${Ze(e)} - ${n}`),1==r.unlocked)mt(`${k}This skill is already unlocked.`),xe.skillsInDiscipline(a),we.disciplineMenuLoop(!1);else{if(mt(`${k}This skill is not learned. In order to unlock it, the following requirements must be met:`),0==we.checkRequirements(r))yt([[\"<br>You do not meet the requirements to unlock this skill!\",2]],\"outside\",()=>{we.disciplineMenuLoop(!0)});else{var o=we.checkCost(r);mt(`Unlocking this skill requires ${r.cost.ap} AP.`),t.ap<r.cost.ap&&(o=!1),0==o?yt([[\"<br>You do not have enough items/gold/ap to unlock this skill!\",2]],\"outside\",()=>{we.disciplineMenuLoop(!0)}):(mt(\"Would you like to learn this skill? Say 'y' or 'yes' to learn it, otherwise enter anything else.\"),we.currentSkill=r,ut(we.unlockSkill))}}}else\"back\"==e||\"b\"==e?we.disciplinesMenuLoop():(mt(\"<br>Invalid input\"),xe.skillsInDiscipline(a),we.disciplineMenuLoop(!1))},unlockSkill(){pt(we.unlockSkill);const e=ht().toLowerCase(),t=n.player,a=we.currentSkill;\"y\"==e||\"yes\"==e?(a.unlocked=!0,a.cost.items.forEach(e=>{const a=t.inventory.findIndex(t=>{try{return t.name==e[0]}catch{}}),n=t.inventory[a];n[1]-=e[1],0==n[1]&&delete t.inventory[a]}),t.gold-=a.cost.gold,t.ap-=a.cost.ap,mt(\"Skill unlocked!\"),mt(\"If you would like to use this skill in battle, remember to <u>equip</u> it first.\"),xe.unlockedDisciplines(),we.disciplineMenuLoop(!0)):(mt(`${k}Returning to discipline menu...`),xe.unlockedDisciplines(),we.disciplineMenuLoop(!0)),et(t,\"normal\")},disciplinesMenu(){pt(we.disciplinesMenu);const e=ht().toLowerCase(),t=(n.player,d);if(t.hasOwnProperty(e)){if(1==t[e].unlocked)we.currentDiscipline=t[e],we.disciplineMenuLoop(!0);else if(0==t[e].unlocked&&1==t[e].visible){this.currentDiscipline=t[e];const a=this.currentDiscipline;mt(`<b>${Ze(a.name)}</b> - ${a.desc}`),mt(`${k}This discipline is not unlocked. To unlock it, the following requirements must be met:`);n.player;if(0==we.checkRequirements(a))yt([[\"You do not meet the requirements to unlock this discipline!\",2]],\"outside\",we.disciplinesMenuLoop);else{0==we.checkCost(a)?yt([[\"You do not have enough items/gold to unlock this discipline!\",2]],\"outside\",we.disciplinesMenuLoop):(mt(\"<br>Would you like to unlock this discipline? If so, type 'y' or 'yes'. This action cannot be undone.\"),ut(we.unlockDiscipline))}}}else\"back\"==e||\"b\"==e?(mt(`${k}Returning...`),mt(`${k}Entering skills menu. To change skills equipped, say 'e'/'equipped', or say 'l'/'learn' to learn new skills.`),kt([\"equipped\",\"learn\",\"back\"]),ut(ke)):(mt(\"<br>Invalid input<br>\"),ut(we.disciplinesMenu));et(n.player,\"normal\")},unlockDiscipline(){pt(we.unlockDiscipline);const e=n.player,t=ht().toLowerCase();\"y\"==t||\"yes\"==t?(this.currentDiscipline.unlocked=!0,this.currentDiscipline.cost.items.forEach(t=>{const a=e.inventory.findIndex(e=>{try{return e[0]==t[0]}catch{}}),n=e.inventory[a];n[1]-=t[1],0==n[1]&&delete e.inventory[a]}),e.gold-=this.currentDiscipline.cost.gold,mt(`${k}Discipline unlocked!`),this.currentDiscipline=null,we.disciplinesMenuLoop()):(mt(`${k}Returning to disciplines menu..`),we.disciplinesMenuLoop()),et(n.player,\"normal\")},checkRequirements(e,t=!0){const a=n.player;var s=!0,o=!1;return a.level>=e.requirements.level?o=!0:s=!1,t&&mt(`Be at level ${e.requirements.level} or higher - [${1==o?\"X\":\" \"}]`),e.requirements.skills.forEach(e=>{-1!=a.library.indexOf(e)?o=!0:(o=!1,s=!1),t&&mt(`Unlock skill ${e} - [${1==o?\"X\":\" \"}]`)}),e.requirements.flags.forEach(e=>{1==m[e].complete?o=!0:(o=!1,s=!1),t&&mt(`${m[e].desc} - [${1==o?\"X\":\" \"}]`)}),s},checkCost(e){const t=n.player;var a=!0;return mt(`<br>You will need to pay: ${e.cost.gold} gold.`),e.cost.items.length>0&&(mt(\"You will also need the following items:\"),e.cost.items.forEach(e=>{const n=t.inventory.findIndex(t=>{try{return t[0]==e[0]}catch{}});var s=0;s=-1==n?0:t.inventory[n][1],mt(`${e[1]} ${e[0]} (${s}/${e[1]})`),e[1]>s&&(a=!1)})),e.cost.gold>t.gold&&(a=!1),a}},ve={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){mt(`${k}Showing all available disciplines. Say the name of a discipline to`+\" view the skills it contains. <b>Or, say 'e' or 'equipped' to view your currently equipped skills.</b>\");const e=d;Object.keys(e).forEach(t=>{e[t].requirements.level<=n.player.level&&(e[t].visible=!0)}),Object.keys(e).forEach(t=>{const a=e[t];1==a.unlocked&&mt(` - ${Ze(a.name)}`)});var t=[\"equipped\"];Object.keys(e).forEach(a=>{const n=e[a];1==n.unlocked&&t.push(n.name)}),t.push(\"back\"),kt(t),ut(ve.disciplinesMenu)},disciplinesMenu(){pt(ve.disciplinesMenu);const e=ht().toLowerCase(),t=n.player,a=d;if(a.hasOwnProperty(e)){if(1==a[e].unlocked){ve.currentDiscipline=a[e];var s=[\"equipped\"];Object.keys(a).forEach(e=>{const t=a[e];1==t.unlocked&&s.push(t.name)}),s.push(\"back\"),kt(s),ve.disciplineMenuLoop(!0)}}else if(\"back\"==e||\"b\"==e)mt(`${k}Returning...`),mt(`${k}Entering skills menu. To change skills equipped, say 'e'/'equipped',`+\" or say 'l'/'learn' to learn new skills.\"),kt([\"equipped\",\"learn\",\"back\"]),ut(ke);else if(\"e\"==e||\"equipped\"==e)yt([[`${k}Showing equipped skills. Say the name of an equipped skill to unequip it.`,1]],\"outside\",()=>{rt(t.stats.skills).forEach(e=>{const t=K[e].description;mt(`<br>${K[e].name} - ${t}`)}),ve.initShortcuts(),ut(ve.unequipSkill)});else{mt(\"<br>Invalid input<br>\"),ut(ve.disciplinesMenu);s=[\"equipped\"];Object.keys(a).forEach(e=>{const t=a[e];1==t.unlocked&&s.push(t.name)}),s.push(\"back\"),kt(s)}et(n.player,\"normal\")},unequipSkill(){const e=ht().toLowerCase(),t=n.player;pt(ve.unequipSkill);var a=rt(t.stats.skills);-1!=a.indexOf(e.replace(/\\s/g,\"_\"))?t.stats.skills.length>1?(\"attack\"!=e&&\"guard\"!=e?(t.stats.skills.splice([a.indexOf(e.replace(/\\s/g,\"_\"))],1),mt(`${e} unequipped.`)):mt(\"<br>That skill can't be unequipped!\"),ve.initShortcuts(),ut(ve.unequipSkill)):(mt(\"You can't have 0 skills!\"),ve.initShortcuts(),ut(ve.unequipSkill)):\"back\"==e||\"b\"==e?(mt(`${k}Returning to disciplines menu...`),ve.disciplinesMenuLoop()):(mt(\"<br>Invalid input.\"),ve.initShortcuts(),ut(ve.unequipSkill))},disciplineMenuLoop(e=!1){const t=ve.currentDiscipline;n.player;1==e&&(mt(`${k}Showing all known skills in the ${t.name.toUpperCase()} discipline. Say the name of a skill to view its description.`),t.skills.forEach(e=>{const t=e.name;\"X\"==(1==e.unlocked?\"X\":\" \")&&mt(` - ${K[t].name}`)}));var a=[];t.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&1==e.unlocked&&a.push(K[e.name].name)}),a.push(\"back\"),kt(a),ut(ve.disciplineMenu)},disciplineMenu(){pt(ve.disciplineMenu);const e=ht().toLowerCase(),t=n.player,a=ve.currentDiscipline;if(-1!=a.skills.map(e=>{if(1==e.unlocked)return K[e.name].name}).indexOf(e)){const n=K[e.replace(/\\s/g,\"_\")].description,s=Se(a,e.replace(/\\s/g,\"_\"));ve.currentSkill=s,mt(`<br>${Ze(e)} - ${n}`),-1!=t.stats.skills.indexOf(Pe(e.replace(/\\s/g,\"_\"),a))?(mt(\"This skill is already equipped.\"),ve.disciplineMenuLoop(!1)):(mt(\"<br>This skill is not equipped. Say 'e' or 'equip' to equip this skill. You can also say 'f' or 'forget' to unlearn this skill. Input anything else to return.\"),ut(ve.skillMenu))}else\"back\"==e||\"b\"==e?ve.disciplinesMenuLoop():(mt(\"<br>Invalid input\"),xe.skillsInDiscipline(a),ut(ve.disciplineMenu))},skillMenu(){const e=ht().toLowerCase(),t=n.player;pt(ve.skillMenu);const a=ve.currentSkill;ve.currentDiscipline;\"e\"==e||\"equip\"==e?t.stats.skills.length<12?-1==t.stats.skills.indexOf(a.code)?(t.stats.skills.push(ve.currentSkill.code),mt(`${k}Skill equipped.`),ve.disciplineMenuLoop(!0)):(mt(`${k}You already have this skill equipped!`),ve.disciplineMenuLoop(!0)):(mt(`${k}You have too many skills equipped!`),ve.disciplineMenuLoop(!0)):\"f\"==e||\"forget\"==e?(mt(`${k}Would you like to unlearn this skill? You will get the AP back, but you the reagents and gold will be lost.`),mt(\"<br>Input 'y'/'yes' to forget the skill, otherwise input 'b'/'back' to return to the discipline menu.\"),kt([\"yes\",\"back\"]),ut(ve.unlearnSkillResponse)):(mt(`${k}Returning to discipline menu...`),ve.disciplineMenuLoop(!0))},unlearnSkillResponse(){switch(pt(ve.unlearnSkillResponse),ht().toLowerCase()){case\"y\":case\"yes\":{const e=ve.currentSkill;ve.currentDiscipline;-1==n.player.stats.skills.indexOf(e.code)?1==e.unlearnable?ve.unlearnSkill():(mt(\"<br>This skill cannot be unlearned!\"),ve.disciplineMenuLoop(!0)):(mt(\"<br>You cannot unlearn an equipped skill!\"),ve.disciplineMenuLoop(!0));break}case\"b\":case\"back\":mt(`${k}Returning...`),ve.disciplineMenuLoop(!0);break;default:mt(\"Invalid input.\"),ut(ve.unlearnSkillResponse)}},unlearnSkill(){const e=ve.currentSkill;ve.currentDiscipline;e.unlocked=!1,n.player.ap+=e.cost.ap,mt(`${k}Skill unlearned! Gained ${e.cost.ap} AP.`),et(n.player,\"normal\"),mt(`${k}Returning...`),ve.disciplineMenuLoop(!0)},getSkills:()=>n.player.stats.skills.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var t=e.split(\"-\"),a=t[0],n=t[1];return d[a].skills[n].name}return e}),initShortcuts(){const e=ve.getSkills();e.push(\"back\"),kt(e)}},xe={unlockedDisciplines:()=>{const e=d;var t=[\"equipped\"];Object.keys(e).forEach(a=>{const n=e[a];1==n.unlocked&&t.push(n.name)}),t.push(\"back\"),kt(t)},skillsInDiscipline:e=>{var t=[];e.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&t.push(K[e.name].name)}),t.push(\"back\"),kt(t)},showAllDisciplines:e=>{var t=[];Object.keys(e).forEach(a=>{const n=e[a];1==n.visible&&t.push(n.name)}),t.push(\"back\"),kt(t)}},Se=(e,t)=>{var a=-1;return e.skills.forEach(e=>{e.name==t&&(a=e)}),a},Pe=(e,t)=>{const a=t.skills;for(var n=0;n<a.length;n++)if(a[n].name==e)return a[n].skillCode;return-1},Ie=e=>{$e.returnFunction=e,$e.mainLoop()},$e={returnFunction:void 0,mainLoop:()=>{mt(`${k}Currently in settings. You can do the following things:`),mt(\"<br> - Change the message delay for battle and outside of battle (input 'md')\"),mt(\"<br> - Change the input shortcut key ('ci')\"),mt(\"<br> - Test your current message delay settings ('tc')\"),mt(\"<br> - View or re-view any tutorial messages ('rv') [CURRENTLY UNAVAILABLE]\"),mt(\"<br> - To save or reset your data, type 'save'.\"),mt(\"<br> - Change the scroll limit ('sl')\"),mt(\"<br>Input <b>'b'/'back'</b> to return.\"),kt(g),ut($e.mainLoopResponse)},mainLoopResponse:()=>{switch(pt($e.mainLoopResponse),ht().toLowerCase()){case\"message delay\":case\"md\":$e.messageDelayLoop();break;case\"change shortcut\":case\"ci\":$e.changeShortcutLoop();break;case\"test message\":case\"tc\":$e.testMessageLoop();break;case\"sa\":case\"save\":$e.saveLoop();break;case\"sl\":case\"scroll limit\":$e.scrollLimitLoop();break;case\"b\":case\"back\":mt(`${k}Returning...`),$e.returnFunction();break;default:mt(`${k}Invalid input.`),kt(g),ut($e.mainLoopResponse)}},scrollLimitLoop:()=>{mt(`${k}Currently in the scroll limit menu. Type any integer between 50 and 500 to change`+\" the scroll limit to that number. Scroll limit refers to the number of lines that can be stored in the main box\"+` before the oldest ones are deleted. <b>Scroll limit is currently ${o.scrollLimit}</b>`),ut($e.scrollLimitResponse)},scrollLimitResponse:()=>{pt($e.scrollLimitResponse);const e=ht().toLowerCase();var t=!1;\"NaN\"!=parseInt(e).toString()?parseInt(e)>=50&&parseInt(e)<=500?(o.scrollLimit=parseInt(e),mt(`Scroll limit changed to ${parseInt(e)}`),mt(\"You are still in the scroll limit menu. Input 'b'/'back' to return.\")):mt(\"<br>Input out of range.\"):\"b\"==e||\"back\"==e?(mt(\"<br>Returning...\"),t=!0):mt(\"<br>Invalid input.\"),t?$e.mainLoop():ut($e.scrollLimitResponse)},tutorialLoop:()=>{mt(`${k}Currently in the tutorial menu. State a topic to view the corresponding tutorial:`),mt(\" - Gamestart\"),mt(\" - Explore\"),mt(\" - Shop\"),mt(\" - Equip\"),mt(\" - Stats\"),mt(\" - Crafting\"),mt(\" - Settings\"),mt(\" - Combat\"),mt(\" - Combat-complex\"),kt(p),ut($e.tutorialLoopResponse)},tutorialLoopResponse:()=>{pt($e.tutorialLoopResponse);ht().toLowerCase()},saveLoop:()=>{mt(`${k}Entering the save menu. Data saved can be loaded if you refresh the page, but`+\" not if you clear the cache or restart your device. Saving will overwrite previously saved data. Type 's'/'save' to save, and 'r'/'reset' to reset your data.\"),kt([\"save\",\"load\",\"back\"]),ut($e.saveLoopResponse)},saveLoopResponse:()=>{switch(pt($e.saveLoopResponse),ht().toLowerCase()){case\"s\":case\"save\":mt(`${k}Saved data. Returning...`),Te(\"save1\",n),Ae(\"save1\",o),Ee(\"save1\",m),Me(\"save1\",d),$e.mainLoop();break;case\"r\":case\"reset\":mt(`${k}Data reset. Refresh the page to restart.`),localStorage.clear(),$e.mainLoop();break;case\"b\":case\"back\":mt(`${k}Returning...`),$e.mainLoop();break;default:mt(\"<br>Invalid input.\"),ut($e.saveLoopResponse);case!0:et(n.player)}},testMessageLoop:()=>{mt(`${k}Four messages of different length will play in order to show you approximately\\n        the speed of the text in the settings you have selected. Please choose whether you would like to test your battle\\n        display speed or your display speed outside of battle.`),mt(\"<br>Please type 'ba'/'battle' to see text speed in battle and 'ou'/'outside' to see text speed outside of battle.\"),mt(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),mt(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),kt([\"battle\",\"outside\",\"back\"]),ut($e.testMessage)},testMessage:()=>{pt($e.testMessage);var e=!1,t=\"outside\";switch(ht().toLowerCase()){case\"ba\":case\"battle\":e=!0,t=\"battle\";break;case\"ou\":case\"outside\":e=!0,t=\"outside\";break;case\"b\":case\"back\":e=!1,mt(`${k}Returning...`),$e.mainLoop();break;default:mt(\"<br>Invalid input.\"),ut($e.testMessage)}if(e){yt([[\"This is a short message. Hi!\",.5],[\"This message is a little bit longer... Hello there. Lovely weather today.\",1],[\"This message is pretty long. Longer than the previous, and the one before it. Memento mori. Praise the sun? Weather is ok.\",1.5],[\"This is the longest message in this test. I hope you enjoy reading this one. Um. Have you seen Vinland Saga? It's a pretty good anime. I'd watch it if I were you. Or don't, I don't really care.\",3]],t,$e.postTestMessage)}},postTestMessage:()=>{mt(`${k}Message testing has concluded. Returning...`),$e.mainLoop()},changeShortcutLoop:()=>{mt(`${k}Currently changing the input shortcut toggle key. Because most of the keyboard is`+\" required for gameplay, there are a limited number of keys that can be used. Input the name of a key as seen to change input shortcut to that key:\"),mt(\"<br>\"),Object.keys(x).forEach(e=>{mt(` - ${e}`)}),mt(`<br>Your current key is ${x[o.toggleShortcut]}`),kt([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"AltLeft\",\"AltRight\",\"¬\",\"back\"]),ut($e.changeShortcutResponse)},changeShortcutResponse:()=>{pt($e.changeShortcutResponse);var e=ht();e.length>0&&(e=Ze(e.toLowerCase()));-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(mt(`${k}Input shortcut toggle changed to <b>${e}</b>.`),mt(\"<br>You are still in the change Input Shortcut menu. Input 'b' or 'back to return.\"),o.toggleShortcut=e,kt([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),ut($e.changeShortcutResponse)):\"Back\"==e||\"B\"==e?(mt(`${k}Returning...`),$e.mainLoop()):(mt(\"<br>Invalid input\"),kt([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),ut($e.changeShortcutResponse))},messageDelayLoop:()=>{mt(`${k}There are two types of message delay you can change. Would you like to change`+\" the message delay in battle or outside of battle?\"),mt(\"<br>Type 'ba'/'battle' to change the message delay in battle and 'ou'/'outside' to change the message delay outside of battle.\"),mt(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),mt(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),kt([\"battle\",\"outside\",\"back\"]),ut($e.messageDelayResponse)},messageDelayResponse:()=>{switch(pt($e.messageDelayResponse),ht().toLowerCase()){case\"ba\":case\"battle\":$e.battleMessageDelayLoop();break;case\"ou\":case\"outside\":$e.outsideMessageDelayLoop();break;case\"b\":case\"back\":mt(`${k}Returning...`),$e.mainLoop();break;default:mt(\"<br>Invalid input.\"),kt([\"battle\",\"outside\",\"back\"]),ut($e.messageDelayResponse)}},battleMessageDelayLoop:()=>{const e=w;mt(`${k}Currently changing battle message delay loop. You can type any number from 0-3, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),ut($e.battleMessageDelayResponse)},battleMessageDelayResponse:()=>{pt($e.battleMessageDelayResponse);const e=ht().toLowerCase(),t=w;switch(!0){case\"s\"==e||\"slow\"==e:{const e=t.slow;o.battleMessageDelay=e,mt(`${k}Changed battle message delay to ${e} seconds.`),ut($e.battleMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=t.medium;o.battleMessageDelay=e,mt(`${k}Changed battle message delay to ${e} seconds.`),ut($e.battleMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=t.fast;o.battleMessageDelay=e,mt(`${k}Changed battle message delay to ${e} seconds.`),ut($e.battleMessageDelayResponse);break}case\"NaN\"!=parseFloat(e).toString():{const t=parseFloat(e);t<=3&&t>=0?(o.battleMessageDelay=t.toFixed(2),mt(`${k}Changed battle message delay to ${t.toFixed(2)} seconds.`)):mt(\"<br>That number is out of range!\"),ut($e.battleMessageDelayResponse);break}case\"b\"==e||\"back\"==e:mt(`${k}Returning...`),$e.messageDelayLoop();break;default:mt(\"<br>Invalid input.\"),ut($e.battleMessageDelayResponse)}},outsideMessageDelayLoop:()=>{const e=v;mt(`${k}Currently changing outside message delay. You can type any number from 0-3, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),ut($e.outsideMessageDelayResponse)},outsideMessageDelayResponse:()=>{pt($e.outsideMessageDelayResponse);const e=ht().toLowerCase(),t=v;switch(!0){case\"s\"==e||\"slow\"==e:{const e=t.slow;o.messageDelay=e,mt(`${k}Changed message delay to ${e} seconds.`),ut($e.outsideMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=t.medium;o.messageDelay=e,mt(`${k}Changed message delay to ${e} seconds.`),ut($e.outsideMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=t.fast;o.messageDelay=e,mt(`${k}Changed message delay to ${e} seconds.`),ut($e.outsideMessageDelayResponse);break}case\"NaN\"!=parseFloat(e).toString():{const t=parseFloat(e);t<=3&&t>=0?(o.messageDelay=t.toFixed(2),mt(`${k}Changed message delay to ${t.toFixed(2)} seconds.`)):mt(\"<br>That number is out of range!\"),ut($e.outsideMessageDelayResponse);break}case\"b\"==e||\"back\"==e:mt(`${k}Returning...`),$e.messageDelayLoop();break;default:mt(\"<br>Invalid input.\"),ut($e.outsideMessageDelayResponse)}}},Te=(e,t)=>{localStorage.setItem(e+\"Player\",JSON.stringify(t))},Ae=(e,t)=>{localStorage.setItem(e+\"Settings\",JSON.stringify(t))},Me=(e,t)=>{localStorage.setItem(e+\"Disciplines\",JSON.stringify(t))},Ee=(e,t)=>{localStorage.setItem(e+\"Flags\",JSON.stringify(t))},Be=(e,t,a=[])=>{Object.keys(e).forEach(n=>{var s;null!=t[n]&&(!nt(e[n])||Array.isArray(e[n])?0==a.includes(n)&&(e[n]=t[n]):(\"stats\"==n&&(s=[\"atk\",\"def\",\"health\",\"max_sp\",\"max_mana\",\"max_stamina\",\"current_mana\",\"current_stamina\",\"mdef\",\"matk\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\",\"evasion\",\"current_health\"]),Be(e[n],t[n],s)))})},Le=(e,t,a=[])=>{Object.keys(e).forEach(n=>{null!=t[n]&&(!nt(e[n])||Array.isArray(e[n])?0==a.includes(n)&&(e[n]=t[n]):Le(e[n],t[n]))})},Ce=(e,t)=>{Object.keys(e).forEach(a=>{null!=t[a]&&(\"unlocked\"==a||\"visible\"==a||\"complete\"==a?e[a]=t[a]:nt(e[a])&&Ce(e[a],t[a]))})},Oe={autoSave:!0};setInterval(()=>{Oe.autoSave&&(Te(\"save1\",n),Ae(\"save1\",o),Ee(\"save1\",m),Me(\"save1\",d),mt('<span style=\"color: gold\">Data saved</span>',!1))},3e4);const De=e=>{Je.returnFunction=e,n.first_time.equip?(n.first_time.equip=!1,it(S.equipIntroduction,Je.menuLoop)):Je.menuLoop()},qe=()=>({currentZone:ze.currentZone,currentRoom:ze.currentRoom,coordinates:ze.coordinates,justEnteredRoom:ze.justEnteredRoom,ambushed:ze.ambushed}),Re={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"slime\",25,{levelCap:5}],[\"lesser_teravalum\",25,{levelCap:6}],[\"brown_bear\",25,{levelCap:7}],[\"grey_wolf\",25,{levelCap:7}]],finds:[[\"wood\",17,1,3],[\"slime_ball\",14,1,3],[\"brown_fur\",14,1,3],[\"weak_vine\",14,1,3],[\"grey_wolf_pelt\",14,1,3],[\"hempweed_ligament\",11,1,2],[\"sharp_claw\",11,1,2],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[[\"slime\",5,{levelCap:5}],[\"lesser_teravalum\",5,{levelCap:6}],[\"brown_bear\",5,{levelCap:7}],[\"grey_wolf\",5,{levelCap:7}]],interacts:[]},je={explores:[[\"encounter\",65],[\"find\",35]],encounters:[[\"young_venomous_wolf\",35,{levelCap:16}],[\"lesser_forest_scourge\",30,{levelCap:18}],[\"mobile_lesser_ent\",25,{levelCap:20}]],finds:[[\"forest_scourge_scale\",27,1,3],[\"sharp_claw\",27,2,3],[\"venomous_claw\",17,1,3],[\"grey_wolf_pelt\",17,2,5],[\"magic_bark\",10,1,3],[\"sharpened_sword\",2,1,1]],ambushes:[[\"grey_wolf\",25,{changeLevel:8,levelCap:15}],[\"brown_bear\",25,{changeLevel:10,levelCap:6}],[\"young_venomous_wolf\",25,{levelCap:16}],[\"lesser_forest_scourge\",25,{levelCap:18}]],interacts:[]},Fe={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"greater_slime\",40,!0,!1,!1],[\"lesser_water_klastera\",30,!0,!1,!1],[\"young_water_lizard\",30,!0,!1,!1]],finds:[[\"slime_ball\",40,2,5],[\"weak_membrane\",20,1,2],[\"tiny_lizard_tail\",20,1,1],[\"aquus_cluster\",17,1,2],[\"water_orb\",3,1,1]],ambushes:[],interacts:[]},Ye={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"red_slime\",35,!0,!1,!1],[\"venomous_wolf\",30,!0,!1,!1],[\"grey_wolf\",25,16,!1,!1],[\"dark_beast\",10,!0,!1,!1]],finds:[[\"red_slime_ball\",40,3,4],[\"grey_wolf_pelt\",30,2,4],[\"sharp_claw\",20,1,1],[\"shadow_pelt\",10,2,3]],ambushes:[],interacts:[]},He={explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]],interacts:[]},Ne={1:\"floor1\"},ze={currentZone:void 0,currentRoom:void 0,coordinates:void 0,justEnteredRoom:!0,ambushed:!1,roomLoop:()=>{const e=ze.currentZone,t=ze.coordinates,a=e.zone[t[0]][t[1]],s=JSON.parse(JSON.stringify(e[a[0]]));if(a.length>1){const e=s.specialRooms[a.slice(1)];Object.keys(e).forEach(t=>{s[t]=e[t]})}delete s.specialRooms,ze.currentRoom=s;const o=ze.currentRoom,r=n.player.maps[e.name];\"discovered\"!=r[t[1]][t[0]]&&(r[t[1]][t[0]]=\"discovered\",\"discovered\"!=r[t[1]+1][t[0]]&&(r[t[1]+1][t[0]]=\"seen\"),\"discovered\"!=r[t[1]-1][t[0]]&&(r[t[1]-1][t[0]]=\"seen\"),\"discovered\"!=r[t[1]][t[0]+1]&&(r[t[1]][t[0]+1]=\"seen\"),\"discovered\"!=r[t[1]][t[0]-1]&&(r[t[1]][t[0]-1]=\"seen\")),et(n.player);var i=!1;if(0==ze.ambushed){ze.ambushed=!0;const e=o.ambushes,t=Math.floor(100*Math.random())+1;var l=0,c=0;for(l in e){if(t>c&&t<=e[l][1]+c){i=!0,mt(`${k}AMBUSH!!`);const t=M[e[l][0]],a=e[l][2];G.battleProcessing(n.player,t,ze.roomLoop,a);break}c+=e[l][1]}}i||(ze.roomLoop2(ze.justEnteredRoom),ut(ze.roomResponse))},roomLoop2:(e=!1)=>{et(n.player);const t=ze.coordinates,a=ze.currentZone.zone,s=(a[t[0]][t[1]],ze.currentRoom);H.playMusic(s.music),e&&mt(`${k}${s.entrance}`);const o=[t[1],a.length-t[0]];mt(`<b>Coordinates: [${o}]</b>`),Ue.forEach(e=>{mt(e)});var r=1;s.extraOptions.forEach(e=>{var t=!0;e.length>1&&(t=ot(e[1])),t&&(mt(` - ${r}: ${e[0]}`),r+=1)}),ze.justEnteredRoom=!1,ut(ze.roomResponse)},roomResponse:()=>{pt(ze.roomResponse);const e=ht().toLowerCase(),t=ze.currentZone,a=ze.coordinates,s=(ze.currentZone.zone[a[0]][a[1]],ze.currentRoom);switch(et(n.player),!0){case\"e\"==e:case\"explore\"==e:{const e=s.explores,t=Math.floor(100*Math.random())+1;var o=0;for(o in e){const a=0==o?0:e[o-1][1];if(t>a&&t<=e[o][1]+a)if(\"encounter\"==e[o][0]){o=0;const e=s.encounters,t=Math.floor(100*Math.random())+1;var r=0;for(o in e){if(t>(r+=0==o?0:e[o-1][1])&&t<=e[o][1]+r){mt(\"<br>You survey the area....\"),mt(\"<br>An enemy approaches!\");const t=M[e[o][0]],a=e[o][2];G.battleProcessing(n.player,t,ze.roomLoop,a);break}}}else if(\"find\"==e[o][0]){o=0;const e=s.finds,t=Math.floor(100*Math.random())+1;r=0;for(o in e){if(t>(r+=0==o?0:e[o-1][1])&&t<=e[o][1]+r){H.playFX(\"find\"),mt(\"<br>You survey the area....\"),mt(\"<br>You find something while looking around!\"),null!=e[o][3]?oe(e[o][0],e[o][2],e[o][3]):oe(e[o][0]);break}}ut(ze.roomResponse)}}break}case\"i\"==e:case\"inventory\"==e:De(ze.roomLoop);break;case\"st\"==e:case\"stats\"==e:he(ze.roomLoop);break;case\"set\"==e:case\"settings\"==e:Ie(ze.roomLoop);break;case\"c\"==e:case\"crafting\"==e:j(ze.roomLoop);break;case null!=s.interacts[parseInt(e-1)]:for(var i=[],l=0;l<s.interacts.length;l++){var c=!0;s.interacts[l].length>1&&(c=ot(s.interacts[l][1])),c&&i.push(s.interacts[l])}null!=i[parseInt(e-1)]?(d=i[parseInt(e-1)][0],m=ze.roomLoop,W.initNpc(d,m)):(mt(\"Invalid input\"),ut(ze.roomResponse));break;case\"leave\"==e:mt(\"<br>Leaving area...\"),ze.currentZone=void 0,ze.coordinates=void 0,ze.justEnteredRoom=!0,wt();break;case\"s\"==e:case\"south\"==e:{var f=void 0;const e=[a[0]+1,a[1]];null!=s.south?f=ze.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?yt([[\"<br>You travel to the south...\",1]],\"outside\",()=>{ze.coordinates=f,ze.justEnteredRoom=!0,ze.ambushed=!1,ze.roomLoop()}):(mt(\"<b>You can't travel in that direction!</b>\"),ze.roomLoop());break}case\"n\"==e:case\"north\"==e:{f=void 0;const e=[a[0]-1,a[1]];null!=s.south?f=ze.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?yt([[\"<br>You travel to the north...\",1]],\"outside\",()=>{ze.coordinates=f,ze.justEnteredRoom=!0,ze.ambushed=!1,ze.roomLoop()}):(mt(\"<b>You can't travel in that direction!</b>\"),ze.roomLoop());break}case\"l\"==e:case\"left\"==e:{f=void 0;const e=[a[0],a[1]-1];null!=s.south?f=ze.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?yt([[\"<br>You travel to the left...\",1]],\"outside\",()=>{ze.coordinates=f,ze.justEnteredRoom=!0,ze.ambushed=!1,ze.roomLoop()}):(mt(\"<b>You can't travel in that direction!</b>\"),ze.roomLoop());break}case\"r\"==e:case\"right\"==e:{f=void 0;const e=[a[0],a[1]+1];null!=s.south?f=ze.currentZone.zone.south:null!=e&&\"n\"!=t.zone[e[0]][e[1]]&&(f=e),null!=f?yt([[\"<br>You travel to the right...\",1]],\"outside\",()=>{ze.coordinates=f,ze.justEnteredRoom=!0,ze.ambushed=!1,ze.roomLoop()}):(mt(\"<b>You can't travel in that direction!</b>\"),ze.roomLoop());break}case\"m\"==e:case\"map\"==e:{const e=t.zone,n=Ge(e,t,a);mt(n),ze.roomLoop();break}case\"sm\"==e:case\"show minimap\"==e:\"minimap\"==Qe.mode?Qe.mode=\"normal\":Qe.mode=\"minimap\",et(n.player),ze.roomLoop();break;case\"rep\"==e:case\"reprint\"==e:mt(\"Reprinting options..\"),et(n.player),ze.roomLoop();break;default:mt(\"Invalid input\"),ut(ze.roomResponse)}var d,m}},We={floor1:{name:\"floor1\",zone:[[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"z\",\"z\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"z\",\"z\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"f\",\"d\",\"d\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f31\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f7\",\"f\",\"f\",\"f40\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f11\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"f29\",\"f\",\"f\",\"f\",\"f\",\"n\",\"f\",\"n\",\"f10\",\"n\",\"f\",\"f\",\"f44\",\"f\",\"f\",\"f45\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"f\",\"n\",\"n\",\"n\",\"f8\",\"n\",\"f9\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f12\",\"n\",\"d\",\"d\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"n\",\"f13\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"n\",\"f4\",\"n\",\"n\",\"f45\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f46\",\"n\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f27\",\"f\",\"f\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f41\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f99\",\"f98\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f14\",\"f\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f28\",\"f\",\"f\",\"f6\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f1\",\"n\",\"f97\",\"f96\",\"n\",\"n\",\"n\",\"f43\",\"n\",\"n\",\"f\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"s\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f15\",\"n\",\"f\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f45\",\"n\",\"f5\",\"f\",\"f\",\"f26\",\"n\",\"f2\",\"n\",\"f\",\"f3\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f46\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"d\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f26\",\"f\",\"f\",\"f\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f16\",\"f\",\"f45\",\"f\",\"f25\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f46\",\"n\",\"n\",\"n\",\"f30\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f35\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f25\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"f\",\"f\",\"n\",\"f38\",\"n\",\"n\",\"n\",\"n\",\"f23\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f17\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"f24\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f42\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f45\",\"f\",\"f\",\"f20\",\"n\",\"f\",\"n\",\"f18\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"f33\",\"f\",\"f\",\"n\",\"f22\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f37\",\"f\",\"f32\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f21\",\"n\",\"f\",\"f47\",\"n\",\"n\",\"f19\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f34\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"q\",\"q\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"]],s:{entrance:\"Green grass unfolds like a blanket in all directions. As far as can be seen, the view is fairly unchanging - vibrant leafage darkened by a lack of light caused by the sheltering of arborous towers above. Medum-sized bushes and thickets prevent a clear view in any particular direction, however to the north-east, some very faint echoes of water splashing can be heard.\",colour:\"#0b6d00\",extraOptions:[[\"Approach person being attacked by slime\",[\"flag: -f1_spoken_to_tutorial_man\"]]],music:\"forest\",explores:Re.explores,encounters:Re.encounters,finds:Re.finds,ambushes:[],interacts:[[\"f1_tutorial_man\",[\"flag: -f1_spoken_to_tutorial_man\"]]]},f:{entrance:\"The forest remains unchanging for a large distance. It is easy to travel if one avoids the occasional bushy path.\",colour:\"#0b6d00\",extraOptions:[],music:\"forest\",explores:Re.explores,encounters:Re.encounters,finds:Re.finds,ambushes:Re.ambushes,interacts:Re.interacts,specialRooms:{1:{extraOptions:[[\"Speak to little girl\",[]]],interacts:[[\"f1_little_girl\",[]]]},2:{extraOptions:[[\"Speak to rude-looking kid\",[\"flag: -f1_spoken_to_rude_kid\"]]],interacts:[[\"f1_rude_kid\",[\"flag: -f1_spoken_to_rude_kid\"]]]},3:{extraOptions:[[\"Speak to lost looking teenager\",[\"flag: -f1_spoken_to_lost_teenager\"]]],interacts:[[\"f1_lost_teenager\",[\"flag: -f1_spoken_to_lost_teenager\"]]]},4:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_simple_sword\"]]],interacts:[[\"f1_simple_sword_on_floor\",[\"flag: -f1_picked_up_simple_sword\"]]]},5:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_damaged_helm\"]]],interacts:[[\"f1_damaged_helm_on_floor\",[\"flag: -f1_picked_up_damaged_helm\"]]]},6:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_metal_stave\"]]],interacts:[[\"f1_metal_stave_on_floor\",[\"flag: -f1_picked_up_metal_stave\"]]]},7:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_silver_axe\"]]],interacts:[[\"f1_silver_axe_on_floor\",[\"flag: -f1_picked_up_silver_axe\"]]]},8:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_simple_dagger\"]]],interacts:[[\"f1_simple_dagger_on_floor\",[\"flag: -f1_picked_up_simple_dagger\"]]]},9:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_pickaxe\"]]],interacts:[[\"f1_pickaxe_on_floor\",[\"flag: -f1_picked_up_pickaxe\"]]]},10:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_brown_pelt\"]]],interacts:[[\"f1_brown_pelt_on_floor\",[\"flag: -f1_picked_up_brown_pelt\"]]]},11:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_silver_helm\"]]],interacts:[[\"f1_silver_helm_on_floor\",[\"flag: -f1_picked_up_silver_helm\"]]]},12:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_venomous_claw\"]]],interacts:[[\"f1_venomous_claw_on_floor\",[\"flag: -f1_picked_up_venomous_claw\"]]]},13:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_vine_helmet\"]]],interacts:[[\"f1_vine_helmet_on_floor\",[\"flag: -f1_picked_up_vine_helmet\"]]]},14:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_ninja_headcloak\"]]],interacts:[[\"f1_ninja_headcloak_on_floor\",[\"flag: -f1_picked_up_ninja_headcloak\"]]]},15:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_makeshift_steel_armour\"]]],interacts:[[\"f1_makeshift_steel_armour_on_floor\",[\"flag: -f1_picked_up_makeshift_steel_armour\"]]]},16:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_earthen_shield_potion\"]]],interacts:[[\"f1_earthen_shield_potion_on_floor\",[\"flag: -f1_picked_up_earthen_shield_potion\"]]]},17:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_vine_pantaloons\"]]],interacts:[[\"f1_vine_pantaloons_on_floor\",[\"flag: -f1_picked_up_vine_pantaloons\"]]]},18:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_silver_legwear\"]]],interacts:[[\"f1_silver_legwear_on_floor\",[\"flag: -f1_picked_up_silver_legwear\"]]]},19:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_slime_ball\"]]],interacts:[[\"f1_slime_ball_on_floor\",[\"flag: -f1_picked_up_slime_ball\"]]]},20:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_weak_vine\"]]],interacts:[[\"f1_weak_vine_on_floor\",[\"flag: -f1_picked_up_weak_vine\"]]]},21:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_hempweed_ligament\"]]],interacts:[[\"f1_hempweed_ligament_on_floor\",[\"flag: -f1_picked_up_hempweed_ligament\"]]]},22:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_wood\"]]],interacts:[[\"f1_wood_on_floor\",[\"flag: -f1_picked_up_wood\"]]]},23:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_steel\"]]],interacts:[[\"f1_steel_on_floor\",[\"flag: -f1_picked_up_steel\"]]]},24:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_health_potion\"]]],interacts:[[\"f1_health_potion_on_floor\",[\"flag: -f1_picked_up_health_potion\"]]]},25:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_greater_health_potion\"]]],interacts:[[\"f1_greater_health_potion_on_floor\",[\"flag: -f1_picked_up_greater_health_potion\"]]]},26:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_mana_potion\"]]],interacts:[[\"f1_mana_potion_on_floor\",[\"flag: -f1_picked_up_mana_potion\"]]]},27:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_greater_mana_potion\"]]],interacts:[[\"f1_greater_mana_potion_on_floor\",[\"flag: -f1_picked_up_greater_mana_potion\"]]]},28:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_crafted_health_potion\"]]],interacts:[[\"f1_crafted_health_potion_on_floor\",[\"flag: -f1_picked_up_crafted_health_potion\"]]]},29:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_daggers\"]]],interacts:[[\"f1_forest_explorer_daggers_on_floor\",[\"flag: -f1_picked_up_forest_explorer_daggers\"]]]},30:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_cap\"]]],interacts:[[\"f1_forest_explorer_cap_on_floor\",[\"flag: -f1_picked_up_forest_explorer_cap\"]]]},31:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_armour\"]]],interacts:[[\"f1_forest_explorer_armour_on_floor\",[\"flag: -f1_picked_up_forest_explorer_armour\"]]]},32:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_pants\"]]],interacts:[[\"f1_forest_explorer_pants_on_floor\",[\"flag: -f1_picked_up_forest_explorer_pants\"]]]},33:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_pendant\"]]],interacts:[[\"f1_forest_explorer_pendant_on_floor\",[\"flag: -f1_picked_up_forest_explorer_pendant\"]]]},34:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_picked_up_forest_explorer_charm\"]]],interacts:[[\"f1_forest_explorer_charm_on_floor\",[\"flag: -f1_picked_up_forest_explorer_charm\"]]]},35:{extraOptions:[[\"Speak to travelling hermit\",[\"flag: -f1_spoken_to_hermit\"]]],interacts:[[\"f1_travelling_hermit\",[\"flag: -f1_spoken_to_hermit\"]]]},36:{extraOptions:[[\"Speak to lost-looking person\",[\"flag: -f1_spoken_to_person_looking_for_settlement\"]]],interacts:[[\"f1_person_looking_for_settlement\",[\"flag: -f1_spoken_to_person_looking_for_settlement\"]]]},37:{extraOptions:[[\"Check out interesting item on floor\",[\"flag: -f1_taken_crafted_sword\"]]],interacts:[[\"f1_owned_crafted_sword\",[\"flag: -f1_taken_crafted_sword\"]]]},38:{extraOptions:[[\"Speak to explorer woman\",[]]],interacts:[[\"f1_explorer_woman\",[]]]},40:{extraOptions:[[\"Check out person in the distance\",[]]],interacts:[[\"f1_person_on_toilet\",[]]]},41:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_east\",[]]]},42:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_north\",[]]]},43:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_west\",[]]]},44:{extraOptions:[[\"Check out sign\",[]]],interacts:[[\"f1_forest_settlement_sign_south\",[]]]},45:{extraOptions:[[\"Check out peculiar tree\",[]]],interacts:[[\"f1_lesser_treant\",[]]]},46:{extraOptions:[[\"Check out peculiar tree\",[]]],interacts:[[\"f1_treant\",[]]]},47:{extraOptions:[[\"Check out peculiar tree\",[]]],interacts:[[\"f1_lesser_ent\",[]]]},99:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to alchemist lady\",[]]],interacts:[[\"f1_alchemist_woman\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]},98:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to craftsman\",[]]],interacts:[[\"f1_forest_craftsman\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]},97:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to teenage cleric\",[]]],interacts:[[\"f1_forest_cleric\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]},96:{desc:\"Some kind of a settlement in a clearing surrounded by what almost feels like a protective barrier of trees. Green tents and other small structures blend well into the surroundings and grant the area a camp-like, homely feel. A few people are moving about or stationary doing their own thing in near silence.\",extraOptions:[[\"Speak to ninja\",[]]],interacts:[[\"f1_ninja_trainer\",[]]],explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]]}}},d:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous.\",colour:\"#003300\",extraOptions:[],music:\"forest\",explores:je.explores,encounters:je.encounters,finds:je.finds,ambushes:je.ambushes,interacts:je.interacts},r:{entrance:\"A thin river runs with numerous tributaries flowing out in all directions, such that no matter where you go, the river seems to follow. The grass is very short compared to the forest and it is much easier to see where you're going.\",colour:\"#0018a8\",extraOptions:[],explores:Fe.explores,encounters:Fe.encounters,finds:Fe.finds,ambushes:Fe.ambushes,interacts:Fe.interacts},q:{entrance:\"The trees are taller and brimming with leaves, although their black-purple hue makes them seem as though they are dead and rotton. The grass beneath your feet is crusty and uncomfortable to walk on. There is a dead silence that makes even taking a step an uncomfortable endeavour as the leafage crinkles below your feet.\",colour:\"#b10000\",extraOptions:[],explores:Ye.explores,encounters:Ye.encounters,finds:Ye.finds,ambushes:Ye.ambushes,interacts:Ye.interacts},z:{entrance:\"AREA INCOMPLETE\",colour:\"#b2009c\",extraOptions:[[]],explores:He.explores,encounters:He.encounters,finds:He.finds,ambushes:He.ambushes,interacts:[[]]}}},Ue=[`${k} - e/Explore`,\" - l/left\",\" - r/right\",\" - n/north\",\" - s/south\",\" - i/inventory\",\" - st/Stats\",\" - c/crafting\",\" - set/settings\",\" - m/map\",\" - sm/show minimap\",\" - Leave\"],Ge=(e,t,a)=>{const s=n.player.maps[t.name];for(var o=\"\",r=0;r<e.length;r++){for(var i=0;i<e[r].length;i++)if(a[0]==r&&a[1]==i)o+=\" \\t▣\";else if(\"discovered\"==s[i][r]){o+=`<span style=\"color:${t[t.zone[r][i][0]].colour}\">  ▣</span>`}else\"seen\"==s[i][r]?\"n\"==e[r][i]?o+=\"  ▩\":o+=\"\\t▢\":o+=\"\\t▥\";o+=\"<br>\"}return o},Je={currentItem:null,currentIndex:-1,returnFunction:null,menuLoop(){Je.currentIndex=-1,et(n.player,\"normal\"),mt(`${k}Entering inventory. Say the name of an item to view its details and equip it.`+\" Say the name of a slot to unequip the item in that slot. Say 'p'/'pouch' to enter the pouch menu, which will allow you to remove items from your pouch (to add items, first navigate to the item in your inventory)\"),mt(\"<br>Input <b>'b'/'back'</b> to return.\"),ut(Je.inventoryMenu)},inventoryMenu(){pt(Je.inventoryMenu);const e=n.player,t=ht().toLowerCase(),a=e.inventory.length>0?e.inventory.findIndex(e=>1==e[1].length?se[e].name.toLowerCase()==t.toLowerCase():se[e[0]].name.toLowerCase()==t.toLowerCase()):-1;if(e.stats.equips.hasOwnProperty(t))null!=e.stats.equips[t]&&Je.unequipItem(t),ut(Je.inventoryMenu);else if(-1!=a){const t=e.inventory[a];se[t];Je.currentItem=t,Je.itemLoop()}else\"back\"==t||\"b\"==t?(mt(\"<br>Returning...\"),Je.currentIndex=-1,Je.returnFunction()):\"p\"==t||\"pouch\"==t?(mt(\"Entering the pouch menu...\"),Je.pouchMenuLoop()):(mt(\"<br>Invalid input\"),ut(Je.inventoryMenu))},pouchMenuLoop(){const e=n.player;0==e.stats.pouch.length?(mt(\"Your pouch is empty!\"),Je.menuLoop()):(mt(\"Currently in the pouch menu. Options:\"),mt(\"<br> - Type the name of an item to remove it from the pouch.\"),mt(\" - b/back (to return)\"),mt(\"<br>Items currently in pouch:<br>\"),e.stats.pouch.forEach(e=>{mt(`${e[1]} ${se[e[0]].name}`)}),ut(Je.pouchMenuResponse))},pouchMenuResponse(){pt(Je.pouchMenuResponse);const e=ht().toLowerCase(),t=n.player;if(-1!=t.stats.pouch.findIndex(t=>de(e)==t[0])){const a=t.stats.pouch.findIndex(t=>de(e)==t[0]),n=t.stats.pouch[a][0],s=t.stats.pouch[a][1],o=se[n].name;mt(`Removed ${s} ${o}`),oe(n,s,s),t.stats.pouch.splice(a,1),Je.pouchMenuLoop()}else\"b\"==e||\"back\"==e?(mt(\"Returning..\"),Je.menuLoop()):(mt(\"Invalid input\"),ut(Je.pouchMenuResponse))},itemLoop(){const e=n.player,t=Je.currentItem,a=le(t)?se[t[0]]:se[t];Je.currentIndex=e.inventory.findIndex(e=>le(e)?e[0]==Je.currentItem[0]:e==Je.currentItem);const s=JSON.parse(JSON.stringify(a));s.hasOwnProperty(\"elemental\")&&(JSON.parse(JSON.stringify(s.elemental)),delete s.elemental),mt(`<br>${a.name} selected.`),ie(a),mt(\"<br>say 'e'/'equip' to equip this item, and 'u'/'use to consume it.  Otherwise, enter 'b' to return. The item's position in your inventory is marked in <b>bold</b>. Input 'z' to scroll up or 'x' to scroll down.\"),mt(\"<br>Options:\"),mt(\"<br> - e/equip (to equip it)\"),mt(\"<br> - u/use (to consume it)\"),mt(\"<br> - p/pouch (to add the item to your pouch - or remove it if it already added)\"),mt(\"<br> - z to scroll up in inventory\"),mt(\"<br> - x to scroll down in inventory\"),mt(\"<br> - b/back to return\"),Je.currentItem=t,et(n.player,\"normal\"),ut(Je.itemMenu)},itemMenu(){pt(Je.itemMenu);const e=n.player,t=ht().toLowerCase(),a=Je.currentItem,s=le(a)?se[a[0]]:se[a];if(\"e\"==t||\"equip\"==t)if(\"reagent\"==s.type)mt(\"<br>You cannot equip reagents.\"),ut(Je.itemMenu);else{const t=e.inventory.findIndex(e=>e==a.toLowerCase());\"misc\"!=s.type?null==e.stats.equips[s.type]?Je.equipItem(t):(Je.unequipItem(s.type),Je.equipItem(t)):(null!=e.stats.equips.misc1&&null!=e.stats.equips.misc2&&Je.unequipItem(\"misc1\"),Je.equipItem(t)),Je.menuLoop()}else if(\"u\"==t||\"use\"==t)if(1!=s.hasOwnProperty(\"use\"))mt(\"This item cannot be used.\"),ut(Je.itemMenu);else if(\"all\"!=s.use.case&&\"outside\"!=s.use.case)mt(\"This item cannot be used here!\"),ut(Je.itemMenu);else{const t=s.use.effect;var o=!0;t.forEach(t=>{switch(t[1]){case\"health\":\"flat\"==t[2]?a=t[3]:\"percentile\"==t[2]&&(a=G.getMaxHealth(e.stats)*(t[3]/100)),e.stats.current_health+a<0?(mt(\"Your health is too low to use that item!\"),o=!1):(e.stats.current_health+=a,e.stats.current_health>G.getMaxHealth(e.stats)&&(e.stats.current_health=G.getMaxHealth(e.stats)),mt(`Recovered ${a} HP!`),et(e,\"normal\"));break;case\"mana\":\"flat\"==t[2]?a=t[3]:\"percentile\"==t[2]&&(a=G.getPlayerAdd(e.stats).max_mana*(t[3]/100)),e.stats.current_mana+a<0?(mt(\"Your mana is too low to use that item!\"),o=!1):(e.stats.current_mana+=a,e.stats.current_mana>G.getPlayerAdd(e.stats).max_mana&&(e.stats.current_mana=G.getPlayerAdd(e.stats).max_mana),mt(`Recovered ${a} MP!`));break;case\"stamina\":var a;\"flat\"==t[2]?a=t[3]:\"percentile\"==t[2]&&(a=G.getPlayerAdd(e.stats).max_stamina*(t[3]/100)),e.stats.current_mana+a<0?(mt(\"Your stamina is too low to use that item!\"),o=!1):(e.stats.current_stamina+=a,e.stats.current_stamina>G.getPlayerAdd(e.stats).max_stamina&&(e.stats.current_stamina=G.getPlayerAdd(e.stats).max_stamina),mt(`Recovered ${a} stamina!`));break;case\"teleport\":{const e=ze.currentZone;null==e?(mt('<br>This item cannot be used right now!\"'),o=!1):e.name!=t[2]?(mt(\"<br>You can't use this item right now! You're in the wrong zone!\"),o=!1):(e=>{if(null==ze.currentZone)return!1;{const t=ze.currentZone.zone;mt(`Teleporting to ${[e[1],t.length-e[0]]}`),ze.ambushed=!0,ze.coordinates=e,ze.ambushed=!0,ze.justEnteredRoom=!0}})(t[3]);break}default:mt(\"Error occurred: Effect invalid\"),o=!1,ut(Je.itemMenu)}var r=!1;o&&(re(de(s.name),1),0==fe(de(s.name),n.player.inventory)&&(r=!0)),r?Je.menuLoop():ut(Je.itemMenu),et(e,\"normal\")})}else if(\"p\"==t||\"pouch\"==t){const t=de(s.name);if(-1!=e.stats.pouch.findIndex(e=>e[0]==t)){const a=e.stats.pouch.findIndex(e=>e[0]==t),n=e.stats.pouch[a][1];oe(t,n,n),e.stats.pouch.splice(a,n),mt(`Removed ${n} ${s.name} from the pouch.`),Je.itemLoop()}else s.hasOwnProperty(\"use\")&&s.use.hasOwnProperty(\"battleEffect\")?e.stats.pouch.length<f?(mt(`How many ${s.name} would you like to add to your pouch? Input anything invalid to return.`),mt(`Do note that you cannot add more than ${s.use.pouchMax} of this item.`),ut(Je.addPouchResponse)):(mt(\"<b>Your pouch is full!</b>\"),Je.itemLoop()):yt([[\"This item cannot be added to your pouch!\",2]],\"outside\",Je.itemLoop)}else if(\"z\"==t||\"x\"==t){Je.currentItem;const a=Je.currentIndex;var r;if(\"z\"==t)mt(`${k}Scrolling up..`),(r=a-1)<0&&(r=e.inventory.length-1),le(e.inventory[r])?e.inventory[r][0]:e.inventory[r],Je.currentItem=e.inventory[r],Je.itemLoop();else mt(`${k}Scrolling down..`),(r=a+1)==e.inventory.length&&(r=0),le(e.inventory[r])?e.inventory[r][0]:e.inventory[r],Je.currentItem=e.inventory[r],Je.itemLoop()}else\"b\"==t||\"back\"==t?(mt(`${k}Returning...`),Je.menuLoop()):(mt(\"<br>Invalid input.\"),ut(Je.itemMenu))},addPouchResponse(){pt(Je.addPouchResponse);const e=n.player,t=ht().toLowerCase(),a=Je.currentItem,s=le(a)?se[a[0]]:se[a],o=de(s.name),r=e.inventory.findIndex(e=>e[0]==o);if(\"NaN\"!=parseInt(t).toString){const a=parseInt(t);a>0&&a<=s.use.pouchMax?a<=e.inventory[r][1]?(re(o,a),e.stats.pouch.push([o,a]),mt(`Added ${a} ${s.name} to pouch.`),mt(\"When you want to remove this item from your pouch, if you have none of it left in your inventory, you can remove it via the pouch menu accessible by inputting p/pouch instead of an item name at the inventory menu.\")):mt(\"You don't have enough of this item!\"):mt(\"That amount is either beyond the pouch limit or below out of range!\")}else mt(\"Invald input\"),Je.itemLoop();yt([[\"Returning..\",2]],\"outside\",Je.itemLoop)},unequipItem(e){const t=n.player,a=t.stats.equips[e],s=se[a];t.stats.equips[e]=void 0,t.inventory.push(a),mt(`${k}${s.name} unequipped.`)},equipItem(e){const t=n.player,a=t.inventory[e],s={...se[a]};if(\"misc\"==s.type&&(null==t.stats.equips.misc1?s.type=\"misc1\":null==t.stats.equips.misc2?s.type=\"misc2\":s.type=\"misc1\"),null==t.stats.equips[s.type]){const a=t.inventory[e];delete t.inventory[e],t.stats.equips[s.type]=a,mt(`${k}${s.name} equipped.`)}else mt(\"There is already an item equipped in that slot.\");for(var o=0;o<t.inventory.length;o++)null==t.inventory[o]&&t.inventory.splice(o,1);et(t,\"normal\")}},Ve=e=>{h.minimap.style.visibility=\"hidden\",h.miscView.style.visibility=\"visible\";var t=\"\";const a=e.stats.equips;Object.keys(e.stats.equips).forEach(e=>{const n=a[e],s={...se[n]};var o=!1;if(t+=`${e.toUpperCase()}: `,null!=s.name){t+=`${s.name}<br>`,delete s.name;var r=\"\";s.hasOwnProperty(\"elemental\")&&(Object.keys(s.elemental.offence).forEach(e=>{r+=`${e} attack: ${s.elemental.offence[e]}<br>`}),Object.keys(s.elemental.defence).forEach(e=>{r+=`${e} defence: ${s.elemental.defence[e]}<br>`}),delete s.elemental,o=!0),Object.keys(s).forEach(e=>{\"desc\"!=e&&\"sell_value\"!=e&&\"description\"!=e&&(t+=`${e}: ${s[e]}<br>`)}),1==o&&(t+=r)}t+=\"<br>\"});const n=`\\n    Level: ${e.level}<br>\\n    EXP: ${e.exp}/${r[e.level]}<br>\\n    Gold: ${e.gold}<br>\\n    SP: ${e.sp}<br>\\n    AP: ${e.ap}<br><br>\\n    \\n    <b>Equipped items</b><br>\\n    ${t}\\n\\n\\n    `;const s=`\\n    <b>Inventory</b><br>\\n    ${(e.inventory.length>0?Object.keys(e.inventory).map((t,a)=>{const n=a==Je.currentIndex?\"<b>\":\"\",s=a==Je.currentIndex?\"</b>\":\"\";return e.inventory[t][1].length<2?`${n}${se[e.inventory[t]].name}${s}`:`${n}${e.inventory[t][1]} ${se[e.inventory[t][0]].name}${s}`}):[]).join(\"<br>\")}`;h.playerStats.innerHTML=n,h.inventory.innerHTML=s},Ke=(e,t,a=[999,999])=>{const s=((e,t,a)=>{const s=n.player.maps[t.name];for(var o=\"\",r=0;r<e.length;r++){for(var i=0;i<e[r].length;i++){const e=i+a[1]-8,n=r+a[0]-8;if(n<s.length)if(a[0]==n&&a[1]==e)o+=\" \\t▣\";else if(\"discovered\"==s[e][n]){o+=`<span style=\"color:${t[t.zone[n][e][0]].colour}\">  ▣</span>`}else\"seen\"==s[e][n]?\"n\"==t.zone[n][e]?o+=\"  ▩\":o+=\"\\t▢\":o+=\"\\t▥\";else o+=\"\\t▥\"}o+=\"<br>\"}return o})(e,t,a);h.miscView.style.visibility=\"hidden\",h.minimap.style.visibility=\"visible\",h.minimap.innerHTML=s};function Xe(e,t,a){return e<=t?t:e>=a?a:e}function Ze(e){return e[0].toUpperCase()+e.slice(1)}const Qe={mode:\"normal\"},et=(e,t=\"none\")=>{if(\"normal\"==Qe.mode&&\"none\"==t)Ve(e);else if(\"normal\"==t||null==qe().currentZone)Ve(e);else{const e=qe(),t=e.coordinates,o=[...Array(17)].map(e=>Array(17).fill(void 0)),r=n.player.maps[e.currentZone.name];for(var a=0;a<o.length;a++)for(var s=0;s<o[a].length;s++)null!=r[a+t[0]-8]&&a+t[0]-8>-1&&s+t[1]-8>-1?o[a][s]=r[a+t[0]-8][s+t[1]-8]:o[a][s]=void 0;Ke(o,e.currentZone,e.coordinates)}const o=JSON.parse(JSON.stringify(e));o.stats=G.getPlayerAdd(o.stats),I(o)},tt=(e,t)=>{if(\"reagent\"==se[e].type){const a=t.findIndex(t=>t[0]==e);return-1==a?0:t[a][1]}var a=0;return t.forEach(t=>{t==e&&a++}),a},at=(e,t)=>{var a;if(e.hasOwnProperty(t))return e[t];for(a in e){if(a==t)return e[a];if(\"object\"==typeof e[a]&&null==e[a].length)return at(e[a],t)}},nt=e=>e===Object(e),st=e=>{if(!e)return e;let t,a=Array.isArray(e)?[]:{};for(const n in e)t=e[n],a[n]=\"object\"==typeof t?st(t):t;return a},ot=e=>{const t=n.player;var a=!0;return e.forEach(e=>{const n=e.split(\" \");switch(n[0]){case\"gold:\":{const e=n[1];t.gold>=e||(a=!1);break}case\"item:\":{const e=n[2],s=n[1];fe(e,t.inventory)>=s||(a=!1);break}case\"level:\":{const e=n[1];t.level>=e||(a=!1);break}case\"flag:\":{var s=n[1],o=\"t\";\"-\"==n[1][0]&&(o=\"f\",s=s.slice(1));const e=m[s];\"f\"==o&&0==e.complete||\"t\"==o&&1==e.complete||(a=!1)}}}),a},rt=e=>e.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var t=e.split(\"-\"),a=t[0],n=t[1];return d[a].skills[n].name}return e}),it=(e,t)=>{var a=0;const n=()=>{mt(e[a]),a++,null!=e[a]?ut(n):ut(t)};n()};function lt(){document.querySelector(\".tab-container\").style.visibility=\"visible\"}function ct(e,t){var a,n,s;for(n=document.getElementsByClassName(\"tabcontent\"),a=0;a<n.length;a++)n[a].style.display=\"none\";for(s=document.getElementsByClassName(\"tablinks\"),a=0;a<s.length;a++)s[a].className=s[a].className.replace(\" active\",\"\");document.getElementById(t).style.display=\"block\",e.currentTarget.className+=\" active\"}function ft(e,t){var a,n,s;for(n=document.getElementsByClassName(\"tabcontent-2\"),a=0;a<n.length;a++)n[a].style.display=\"none\";for(s=document.getElementsByClassName(\"tablinks-2\"),a=0;a<s.length;a++)s[a].className=s[a].className.replace(\" active\",\"\");document.getElementById(t).style.display=\"block\",e.currentTarget.className+=\" active\"}function dt(e){!function(){const e=document.getElementsByClassName(\"tabcontent\");for(var t=0;t<e.length;t++)e[t].style.display=\"none\";const a=document.getElementsByClassName(\"tablinks\");for(t=0;t<a.length;t++)a[t].className=a[t].className.replace(\" active\",\"\")}(),document.querySelector(\".tab-container\").style.visibility=\"hidden\"}document.addEventListener(\"DOMContentLoaded\",e=>{!function(e){var t=0,a=0,n=0,s=0;document.getElementById(e.id+\"header\")?document.getElementById(e.id+\"header\").onmousedown=o:e.onmousedown=o;function o(e){(e=e||window.event).preventDefault(),n=e.clientX,s=e.clientY,document.onmouseup=i,document.onmousemove=r}function r(o){(o=o||window.event).preventDefault(),t=n-o.clientX,a=s-o.clientY,n=o.clientX,s=o.clientY,e.style.top=e.offsetTop-a+\"px\",e.style.left=e.offsetLeft-t+\"px\"}function i(){document.onmouseup=null,document.onmousemove=null}}(document.getElementById(\"draggable\"))});const mt=(e,t=!0)=>{h.main.insertAdjacentHTML(\"beforeend\",`${e}<br>`),t&&_t()},ht=(e=!0)=>{const t=h.input.value,a=bt.inputShortcuts;return e&&(h.input.value=\"\"),bt.on&&\"Nan\"!=parseInt(t).toString()&&null!=bt.inputShortcuts[parseInt(t)]?(bt.inputShortcuts={},bt.on=!1,a[parseInt(t)]):(bt.inputShortcuts={},bt.special={},bt.on=!1,t)},ut=e=>{gt.callback=e},pt=(e=\"nothing\",t=!0)=>{gt.callback=void 0,t&&mt(\"<br>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\")},gt={callback:void 0,response:()=>{const e=h.input.value;if(/[~`!#$%\\^&*+=\\\\[\\]\\\\';,/{}|\\\\\":<>\\?]/g.test(e))mt(\"<br>Please don't include any special characters in your inputs!\"),h.input.value=\"\";else{const a=e.toLowerCase().split(\"-\");if(\"sc\"==a[0]){var t=!1;if(3==a.length){if(\"px\"==a[2].slice(-2)&&0==isNaN(a[2].slice(0,-2))){const e=\"fontSize\",n=a[2];\"main\"==a[1]?(h.main.style[e]=n,o.mainTextSize=a[2],t=!0):\"stat\"==a[1]?(h.mainStats.style[e]=n,h.elementalStats.style[e]=n,o.statsTextSize=a[2],t=!0):\"misc\"==a[1]&&(h.miscView.style[e]=n,o.miscTextSize=a[2],t=!0)}else 0==isNaN(a[2])&&parseFloat(a[2])<=1&&parseFloat(a[2])>=0&&(\"volume\"==a[1]?(H.changeVolume(a[2],\"volume\"),H.changeVolume(a[2],\"volumeFX\"),mt('<br><span style=\"color:#33cccc\">Volume changed</span>'),t=!0):\"music\"==a[1]?(H.changeVolume(a[2],\"volume\"),mt('<br><span style=\"color:#33cccc\">Music changed</span>'),t=!0):\"fx\"==a[1]&&(H.changeVolume(a[2],\"volumeFX\"),mt('<br><span style=\"color:#33cccc\">FX volume changed</span>'),t=!0));h.input.value=\"\"}else 2==a.length&&(\"reset\"==a[1]?(h.main.style.fontSize=\"16px\",h.mainStats.style.fontSize=\"16px\",h.elementalStats.style.fontSize=\"16px\",h.playerStats.style.fontSize=\"16px\",h.inventory.style.fontSize=\"16px\",t=!0):\"inputshortcut\"==a[1]?(mt(`<br><span style=\"color:#33cccc\">Input shortcut is currently set to\\n                         <b>${o.toggleShortcut}</b>. Don't like this key? You can change the key input shortcut\\n                         is assigned to in settings.</span>`),t=!0):\"help\"==a[1]?(lt(),mt(\"<br><span style=\\\"color:#33cccc\\\">Showing help module. Is it offscreen?\\n                         If so, input 'sc-helpreset' to reset its position.</span>\"),t=!0):\"helpreset\"==a[1]?(!function(){const e=document.querySelector(\".tab-container\");e.style.visibility=\"visible\",e.style.left=\"0px\",e.style.right=\"0px\",e.style.top=\"0px\",e.style.bottom=\"0px\"}(),t=!0):\"minimap\"==a[1]?(\"minimap\"==Qe.mode?(Qe.mode=\"normal\",t=!0):(Qe.mode=\"minimap\",t=!0),et(n.player)):\"clear\"==a[1]&&(h.main.textContent=\"\",t=!0),h.input.value=\"\");t||(mt(\"<br><span style=\\\"color:#33cccc\\\">Did you try and input a super command? Input 'sc-help' for assistance.</span>\"),h.input.value=\"\")}else\"help\"==e?(lt(),mt(\"<br><span style=\\\"color:#33cccc\\\">Showing help module. Is it offscreen?\\n                 If so, input 'sc-helpreset' to reset its position.</span>\"),h.input.value=\"\"):null!=gt.callback&&gt.callback()}}},yt=(e,t,a)=>{var n=0;const s=\"battle\"==t?o.battleMessageDelay:o.messageDelay,r=()=>{n<e.length?(mt(e[n][0]),_t(),++n<e.length?setTimeout(r,1e3*s*e[n-1][1]):setTimeout(a,1e3*s*e[n-1][1])):a.call()};r()},_t=()=>{h.mainBox.scrollTop=h.mainBox.scrollHeight;var e=h.main.innerHTML.split(\"<br>\");e.length>o.scrollLimit&&((e=e.filter(e=>!e.includes(\"form\"))).splice(1,e.length-o.scrollLimit),h.main.innerHTML=e.join(\"<br>\"))};window.addEventListener(\"keyup\",(function(e){this.event.code==x[o.toggleShortcut]&&bt.toggleInputShortcut()}));const bt={on:!1,inputShortcuts:{},special:{combat:!1},toggleInputShortcut:()=>{if(bt.on)bt.on=!1,mt(\"<br>Input shortcut turned off.\");else if(h.input.value=\"\",Object.keys(bt.inputShortcuts).length>0)if(bt.on=!0,mt(\"<br>Input shortcut turned on.\"),1==bt.special.combat){const t={...bt.inputShortcuts},a={...bt.inputShortcuts};for(var e in t)[\"skills\",\"status\",\"enemy\",\"pouch\",\"flee\"].includes(t[e])||delete t[e];for(var e in a)[\"skills\",\"status\",\"enemy\",\"pouch\",\"flee\"].includes(a[e])&&delete a[e];mt(\"<b>Actions\"),Object.keys(t).forEach(e=>{mt(`${e} - ${bt.inputShortcuts[e]}`)}),mt(\"<b>Skills\"),Object.keys(a).forEach(e=>{mt(`${e} - ${bt.inputShortcuts[e]}`)})}else Object.keys(bt.inputShortcuts).forEach(e=>{mt(`${e} - ${bt.inputShortcuts[e]}`)});else mt(\"<br>Input shortcut cannot be used here.\")}},kt=(e,t={})=>{const a={};return e.forEach((e,t)=>{a[t+1]=e}),bt.inputShortcuts=a,bt.special=t,a};a.d(t,\"mainLoop\",(function(){return wt}));const wt=()=>{H.playMusic(\"lobby\"),G.heal(n.player.stats),Qe.mode=\"normal\",mt(`${k}You are currently on floor ${n.current_floor}`);const e={...n.player};e.stats=G.getPlayerAdd(e.stats),I(e),Ve(n.player),kt(y),ut(St)},vt=()=>{if(pt(vt),\"\"==ht(!1).replace(/\\s/gi,\"\"))mt(\"<br><b>Please input a name!</b>\"),ut(vt);else{const e=ht();n.player.name=e,xt()}},xt=()=>{const e=n.player.name;mt(`<br>${e}? That's a nice name. Nice to meet you!`),it(S.gameIntroduction,()=>{mt(`${k}<b>Now you will set your input shortcut key.</b>`),mt(\"<br>Input Shortcut is a <b>VERY IMPORTANT</b> mechanic that will make menu navigation and combat much easier. By pressing the designated key, you can bring up a list of your options in a particular menu, and also select an option by inputting a number rather than a line of text. Input shortcut won't work in some menus, however. This is usually menus wherein you are told of your options beforehand or where the possible inputs vary greatly.\"),mt('<br>Once you enter the main menu, use Input Shortcut to see your options. It is recommended that you input each option to \"look around\" before starting to explore.'),mt(\"<br>You can check your input shortcut key at any time by inputting <b>sc-inputshortcut</b>.\"),mt(\"<br>Please input one of the following to set input shortcut to that key:\"),Object.keys(x).forEach(e=>{mt(` - ${e}`)}),ut(Pt)})},St=()=>{H.playMusic(\"lobby\"),pt(St);const e=ht().toLowerCase();if(\"ascend\"==e.toLowerCase())mt(\"<br><b>Floor boss currently unavailable.</b>\"),wt();else if(\"inventory\"==e||\"i\"==e)De(wt);else if(\"stats\"==e||\"st\"==e)he(wt);else if(\"explore\"==e||\"e\"==e){((e,t=\"start\")=>{ze.currentZone=We[e];const a=We[e].zone;if(\"start\"==t)for(var s=0;s<a.length;s++)for(var o=0;o<a[s].length;o++)if(\"s\"==a[s][o]){ze.coordinates=[s,o];break}n.first_time.explore?(n.first_time.explore=!1,it(S.exploreIntroduction,ze.roomLoop)):ze.roomLoop()})(Ne[n.current_floor])}else if(\"shop\"==e||\"sh\"==e){const e=C[n.current_floor];L(e,wt)}else\"crafting\"==e||\"c\"==e?j(wt):\"settings\"==e||\"set\"==e?Ie(wt):(mt(\"<br>Invalid input\"),kt(y),ut(St))};function Pt(){pt(Pt);var e=ht();e.length>0&&(e=Ze(e.toLowerCase()));-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(mt(`${k}Input shortcut toggle changed to <b>${e}</b>.`),o.toggleShortcut=e,wt(),Oe.autoSave=!0):(mt(\"<br>Invalid input\"),ut(Pt))}!function(){const e=document.getElementsByClassName(\"tablinks\");for(var t=0;t<e.length;t++){const a=e[t];if(a.classList.contains(\"tablinks-2\")||\"close\"==a.id)if(a.classList.contains(\"tablinks-2\")){const e=a.id;a.addEventListener(\"click\",t=>{ft(t,e.slice(0,-5))})}else a.addEventListener(\"click\",e=>dt());else{const e=a.id;a.addEventListener(\"click\",t=>{ct(t,e.slice(0,-5))})}}}(),(()=>{if(h.form.addEventListener(\"submit\",gt.response),mt(\"<br>Welcome to Tower RPG!\"),null==localStorage.getItem(\"save1Player\"))Oe.autoSave=!1,mt(\"Please enter your name\"),ut(vt);else{(e=>{const t=n,a=JSON.parse(localStorage.getItem(e+\"Player\"));Be(t,a)})(\"save1\"),(e=>{const t=o,a=JSON.parse(localStorage.getItem(e+\"Settings\"));Le(t,a)})(\"save1\"),(e=>{const t=m,a=JSON.parse(localStorage.getItem(e+\"Flags\"));Le(t,a)})(\"save1\"),(e=>{const t=d,a=JSON.parse(localStorage.getItem(e+\"Disciplines\"));Ce(t,a)})(\"save1\"),n.version<.11&&(localStorage.clear(),window.location.reload());const e=JSON.parse(localStorage.getItem(\"save1Settings\"));P(\"main\",e.mainTextSize),P(\"stat\",e.statsTextSize),P(\"misc\",e.miscTextSize),me(),wt()}})()}]);","extractedComments":[]}