{"code":"!function(e){var a={};function t(n){if(a[n])return a[n].exports;var s=a[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{enumerable:!0,get:n})},t.r=function(e){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})},t.t=function(e,a){if(1&a&&(e=t(e)),8&a)return e;if(4&a&&\"object\"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,\"default\",{enumerable:!0,value:e}),2&a&&\"string\"!=typeof e)for(var s in e)t.d(n,s,function(a){return e[a]}.bind(null,s));return n},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,\"a\",a),a},t.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},t.p=\"\",t(t.s=5)}([function(e,a,t){(function(e){function t(e,a){for(var t=0,n=e.length-1;n>=0;n--){var s=e[n];\".\"===s?e.splice(n,1):\"..\"===s?(e.splice(n,1),t++):t&&(e.splice(n,1),t--)}if(a)for(;t--;t)e.unshift(\"..\");return e}function n(e,a){if(e.filter)return e.filter(a);for(var t=[],n=0;n<e.length;n++)a(e[n],n,e)&&t.push(e[n]);return t}a.resolve=function(){for(var a=\"\",s=!1,o=arguments.length-1;o>=-1&&!s;o--){var r=o>=0?arguments[o]:e.cwd();if(\"string\"!=typeof r)throw new TypeError(\"Arguments to path.resolve must be strings\");r&&(a=r+\"/\"+a,s=\"/\"===r.charAt(0))}return(s?\"/\":\"\")+(a=t(n(a.split(\"/\"),(function(e){return!!e})),!s).join(\"/\"))||\".\"},a.normalize=function(e){var o=a.isAbsolute(e),r=\"/\"===s(e,-1);return(e=t(n(e.split(\"/\"),(function(e){return!!e})),!o).join(\"/\"))||o||(e=\".\"),e&&r&&(e+=\"/\"),(o?\"/\":\"\")+e},a.isAbsolute=function(e){return\"/\"===e.charAt(0)},a.join=function(){var e=Array.prototype.slice.call(arguments,0);return a.normalize(n(e,(function(e,a){if(\"string\"!=typeof e)throw new TypeError(\"Arguments to path.join must be strings\");return e})).join(\"/\"))},a.relative=function(e,t){function n(e){for(var a=0;a<e.length&&\"\"===e[a];a++);for(var t=e.length-1;t>=0&&\"\"===e[t];t--);return a>t?[]:e.slice(a,t-a+1)}e=a.resolve(e).substr(1),t=a.resolve(t).substr(1);for(var s=n(e.split(\"/\")),o=n(t.split(\"/\")),r=Math.min(s.length,o.length),l=r,i=0;i<r;i++)if(s[i]!==o[i]){l=i;break}var c=[];for(i=l;i<s.length;i++)c.push(\"..\");return(c=c.concat(o.slice(l))).join(\"/\")},a.sep=\"/\",a.delimiter=\":\",a.dirname=function(e){if(\"string\"!=typeof e&&(e+=\"\"),0===e.length)return\".\";for(var a=e.charCodeAt(0),t=47===a,n=-1,s=!0,o=e.length-1;o>=1;--o)if(47===(a=e.charCodeAt(o))){if(!s){n=o;break}}else s=!1;return-1===n?t?\"/\":\".\":t&&1===n?\"/\":e.slice(0,n)},a.basename=function(e,a){var t=function(e){\"string\"!=typeof e&&(e+=\"\");var a,t=0,n=-1,s=!0;for(a=e.length-1;a>=0;--a)if(47===e.charCodeAt(a)){if(!s){t=a+1;break}}else-1===n&&(s=!1,n=a+1);return-1===n?\"\":e.slice(t,n)}(e);return a&&t.substr(-1*a.length)===a&&(t=t.substr(0,t.length-a.length)),t},a.extname=function(e){\"string\"!=typeof e&&(e+=\"\");for(var a=-1,t=0,n=-1,s=!0,o=0,r=e.length-1;r>=0;--r){var l=e.charCodeAt(r);if(47!==l)-1===n&&(s=!1,n=r+1),46===l?-1===a?a=r:1!==o&&(o=1):-1!==a&&(o=-1);else if(!s){t=r+1;break}}return-1===a||-1===n||0===o||1===o&&a===n-1&&a===t+1?\"\":e.slice(a,n)};var s=\"b\"===\"ab\".substr(-1)?function(e,a,t){return e.substr(a,t)}:function(e,a,t){return a<0&&(a=e.length+a),e.substr(a,t)}}).call(this,t(2))},function(e,a,t){\"use strict\";a.decode=a.parse=t(3),a.encode=a.stringify=t(4)},function(e,a){var t,n,s=e.exports={};function o(){throw new Error(\"setTimeout has not been defined\")}function r(){throw new Error(\"clearTimeout has not been defined\")}function l(e){if(t===setTimeout)return setTimeout(e,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(a){try{return t.call(null,e,0)}catch(a){return t.call(this,e,0)}}}!function(){try{t=\"function\"==typeof setTimeout?setTimeout:o}catch(e){t=o}try{n=\"function\"==typeof clearTimeout?clearTimeout:r}catch(e){n=r}}();var i,c=[],d=!1,f=-1;function m(){d&&i&&(d=!1,i.length?c=i.concat(c):f=-1,c.length&&h())}function h(){if(!d){var e=l(m);d=!0;for(var a=c.length;a;){for(i=c,c=[];++f<a;)i&&i[f].run();f=-1,a=c.length}i=null,d=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===r||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(a){try{return n.call(null,e)}catch(a){return n.call(this,e)}}}(e)}}function u(e,a){this.fun=e,this.array=a}function p(){}s.nextTick=function(e){var a=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)a[t-1]=arguments[t];c.push(new u(e,a)),1!==c.length||d||l(h)},u.prototype.run=function(){this.fun.apply(null,this.array)},s.title=\"browser\",s.browser=!0,s.env={},s.argv=[],s.version=\"\",s.versions={},s.on=p,s.addListener=p,s.once=p,s.off=p,s.removeListener=p,s.removeAllListeners=p,s.emit=p,s.prependListener=p,s.prependOnceListener=p,s.listeners=function(e){return[]},s.binding=function(e){throw new Error(\"process.binding is not supported\")},s.cwd=function(){return\"/\"},s.chdir=function(e){throw new Error(\"process.chdir is not supported\")},s.umask=function(){return 0}},function(e,a,t){\"use strict\";function n(e,a){return Object.prototype.hasOwnProperty.call(e,a)}e.exports=function(e,a,t,o){a=a||\"&\",t=t||\"=\";var r={};if(\"string\"!=typeof e||0===e.length)return r;var l=/\\+/g;e=e.split(a);var i=1e3;o&&\"number\"==typeof o.maxKeys&&(i=o.maxKeys);var c=e.length;i>0&&c>i&&(c=i);for(var d=0;d<c;++d){var f,m,h,u,p=e[d].replace(l,\"%20\"),g=p.indexOf(t);g>=0?(f=p.substr(0,g),m=p.substr(g+1)):(f=p,m=\"\"),h=decodeURIComponent(f),u=decodeURIComponent(m),n(r,h)?s(r[h])?r[h].push(u):r[h]=[r[h],u]:r[h]=u}return r};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)}},function(e,a,t){\"use strict\";var n=function(e){switch(typeof e){case\"string\":return e;case\"boolean\":return e?\"true\":\"false\";case\"number\":return isFinite(e)?e:\"\";default:return\"\"}};e.exports=function(e,a,t,l){return a=a||\"&\",t=t||\"=\",null===e&&(e=void 0),\"object\"==typeof e?o(r(e),(function(r){var l=encodeURIComponent(n(r))+t;return s(e[r])?o(e[r],(function(e){return l+encodeURIComponent(n(e))})).join(a):l+encodeURIComponent(n(e[r]))})).join(a):l?encodeURIComponent(n(l))+t+encodeURIComponent(n(e)):\"\"};var s=Array.isArray||function(e){return\"[object Array]\"===Object.prototype.toString.call(e)};function o(e,a){if(e.map)return e.map(a);for(var t=[],n=0;n<e.length;n++)t.push(a(e[n],n));return t}var r=Object.keys||function(e){var a=[];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&a.push(t);return a}},function(e,a,t){\"use strict\";t.r(a);const n={player:{name:name,gold:100,exp:0,level:1,sp:0,ap:1,sp_investment:{health:0,mana:0,atk:0,def:0,matk:0,mdef:0,speed:0},stats:{health:60,current_health:60,max_sp:100,max_mana:100,current_mana:100,max_stamina:100,atk:30,def:30,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100}},skills:[\"attack\",\"guard\"],equips:{weapon:void 0,head:void 0,body:void 0,legs:void 0,misc1:void 0,misc2:void 0},pouch:[]},inventory:[],library:[\"attack\",\"guard\"],recipes:[],maps:{floor1:[...Array(45)].map(e=>Array(40).fill(void 0))}},max_floor:2,current_floor:1,first_time:{explore:!0,shop:!0,equip:!0,stats:!0,crafting:!0,settings:!0,game:!0,combat:!0},version:0},s={max:1,1:{boss:\"flame_minotaur\"}},o={messageDelay:.5,battleMessageDelay:.5,toggleShortcut:\"Rshift\",scrollLimit:200},r={1:100,2:400,3:800,4:1100,5:1500,6:2e3,7:3e3,8:3500,9:4e3,10:4500,11:5e3,12:5500,13:6100,14:6700,15:7500,16:8500,17:9600,18:10700,19:12e3,20:14e3,21:16500,22:19e3,23:23e3,24:26e3,25:3e4},l=-99,i=500,c=2,d={adventurer:{name:\"adventurer\",requirements:{skills:[],level:1,flags:[]},cost:{gold:0,items:[]},skills:[{name:\"check\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-0\",unlocked:!1,unlearnable:!0},{name:\"boost\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-1\",unlocked:!1,unlearnable:!0},{name:\"channel_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-2\",unlocked:!1,unlearnable:!0},{name:\"brutal_swipe\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-3\",unlocked:!1,unlearnable:!0},{name:\"hex\",requirements:{skills:[],level:1,flags:[]},disciple:\"adventurer\",cost:{gold:0,items:[],ap:1},code:\"adventurer-4\",unlocked:!1,unlearnable:!0}],unlocked:!0,visible:!0,complete:!1,conditions:{level:1,discplines:[]}},mage:{name:\"mage\",requirements:{skills:[],level:2,flags:[]},cost:{gold:150,items:[]},skills:[{name:\"fireball\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-0\",unlocked:!1,unlearnable:!0},{name:\"icebolt\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-1\",unlocked:!1,unlearnable:!0},{name:\"lesser_quake\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-2\",unlocked:!1,unlearnable:!0},{name:\"imbue_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-3\",unlocked:!1,unlearnable:!0},{name:\"enforce_energy\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-4\",unlocked:!1,unlearnable:!0},{name:\"blood_pact\",requirements:{skills:[],level:1,flags:[]},disciple:\"mage\",cost:{gold:25,items:[],ap:2},code:\"mage-5\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}},guardian:{name:\"guardian\",requirements:{skills:[],level:2,flags:[]},cost:{gold:150,items:[]},skills:[{name:\"stalwart_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"guardian\",cost:{gold:25,items:[],ap:2},code:\"guardian-0\",unlocked:!1,unlearnable:!0},{name:\"guard_conversion\",requirements:{skills:[],level:1,flags:[]},disciple:\"guardian\",cost:{gold:25,items:[],ap:2},code:\"guardian-1\",unlocked:!1,unlearnable:!0},{name:\"debilitate\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:3},code:\"guardian-2\",unlocked:!1,unlearnable:!0},{name:\"enduring_fortress\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:3},code:\"guardian-3\",unlocked:!1,unlearnable:!0},{name:\"sacred_shield\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:3},code:\"guardian-4\",unlocked:!1,unlearnable:!0},{name:\"sentinel_blow\",requirements:{skills:[],level:3,flags:[]},disciple:\"guardian\",cost:{gold:50,items:[],ap:3},code:\"guardian-5\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}},ninja:{name:\"ninja\",requirements:{skills:[],level:2,flags:[]},cost:{gold:150,items:[]},skills:[{name:\"swift_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-0\",unlocked:!1,unlearnable:!0},{name:\"shinobi_strike\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-1\",unlocked:!1,unlearnable:!0},{name:\"crippling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-2\",unlocked:!1,unlearnable:!0},{name:\"enfeebling_blow\",requirements:{skills:[],level:1,flags:[]},disciple:\"ninja\",cost:{gold:25,items:[],ap:2},code:\"ninja-3\",unlocked:!1,unlearnable:!0},{name:\"imbue_infliction\",requirements:{skills:[],level:3,flags:[]},disciple:\"ninja\",cost:{gold:50,items:[],ap:3},code:\"ninja-4\",unlocked:!1,unlearnable:!0},{name:\"enforce_infliction\",requirements:{skills:[],level:4,flags:[]},disciple:\"ninja\",cost:{gold:100,items:[],ap:4},code:\"ninja-5\",unlocked:!1,unlearnable:!0},{name:\"shadow_strike\",requirements:{skills:[],level:4,flags:[]},disciple:\"ninja\",cost:{gold:100,items:[],ap:4},code:\"ninja-6\",unlocked:!1,unlearnable:!0}],unlocked:!1,visible:!1,complete:!1,conditions:{level:1,discplines:[]}}},f={beatSlime:{desc:\"Defeat the slime on floor one.\",complete:!1},f1_spoken_to_little_girl:{desc:\"Speak to a little girl on floor one about her slime problem.\",complete:!1},f1_helped_little_girl:{desc:\"Help a little girl on floor one with her slime problem.\",complete:!1},f1_spoken_to_docile_slime:{desc:\"Interact with a docile slime on floor one.\",complete:!1},f1_helped_docile_slime:{desc:\"Help a docile slime on floor one gather their bretheren.\",complete:!1},f1_spoken_to_rude_kid:{desc:\"Speak to a rude kid on floor one.\",complete:!1},f1_kicked_rude_kids_shin:{desc:\"Kick the shin of a rude kid on floor one.\",complete:!1},f1_extended_convo_with_rude_kid:{desc:\"Have an extended conversation with a rude kid on floor one.\",complete:!1},f1_spoken_to_little_boy:{desc:\"Speak to a young boy in the dark forest of floor one.\",complete:!1},f1_helped_little_boy:{desc:\"Help the young boy in the dark forest of floor one.\",complete:!1},f1_spoken_to_wanderer_collector:{desc:\"Speak to the collector of wanderer memorabilia on floor one.\",complete:!1},f1_helped_wanderer_collector:{desc:\"Help out the collector of wanderer memorabilia on floor one.\",complete:!1},f1_met_wanderer_at_statue:{desc:\"Meet a wanderer at the statue of Lucia, the Solace Goddess on floor one.\",complete:!1},f1_spoken_to_lost_teenager:{desc:\"Speak to a lost teenager in the forest on floor one.\",complete:!1},f1_spoken_to_traveller_woman:{desc:\"Speak to a travelling woman with a green backpack on floor one.\",complete:!1},f1_helped_alchemist_lady:{desc:\"Help an alchemist lady on floor one and in return, be taught how to make crafted health potions.\",complete:!1},f1_spoken_to_alchemist_lady:{desc:\"Speak to an alchemist lady on floor one.\",complete:!1},f1_gotten_beginner_recipes:{desc:\"Receive beginner recipes from the craftswomen in the settlement at floor one.\",complete:!1},f1_gotten_advanced_recipes:{desc:\"Received advanced recipes from the artisan in the settlement at floor one.\",complete:!1},f1_spoken_to_hermit:{desc:\"Speak to the travelling hermit on floor one.\",complete:!1},f1_spoken_to_person_looking_for_settlement:{desc:\"Speak to the person looking for the settlement on floor one.\",complete:!1},f1_helped_person_looking_for_settlement:{desc:\"Help the person looking for the settlement on floor one.\",complete:!1},f1_taken_crafted_sword:{desc:\"Successfully taken a crafted sword in the forest on floor one.\",complete:!1},f1_picked_up_hydra_staff:{desc:\"Pick up a hydra staff on floor one.\",complete:!1},f1_picked_up_crown_of_darkness:{desc:\"Pick up a crown of darkness on floor one.\",complete:!1},f1_picked_up_simple_sword:{desc:\"Pick up a simple sword on floor one.\",complete:!1},f1_picked_up_damaged_helm:{desc:\"Pick up a damaged helm on floor one.\",complete:!1},f1_picked_up_metal_stave:{desc:\"Pick up a metal stave on floor one.\",complete:!1},f1_picked_up_silver_axe:{desc:\"Pick up a silver axe on floor one.\",complete:!1},f1_picked_up_silver_dagger:{desc:\"Pick up a silver dagger on floor one.\",complete:!1},f1_picked_up_pickaxe:{desc:\"Pick up a pickaxe on floor one.\",complete:!1},f1_picked_up_feathervine_sword:{desc:\"Pick up a feathervine sword on floor one.\",complete:!1},f1_picked_up_silver_helm:{desc:\"Pick up a silver helm on floor one.\",complete:!1},f1_picked_up_wolfhide_cap:{desc:\"Pick up a wolfhide cap on floor one.\",complete:!1},f1_picked_up_vine_helmet:{desc:\"Pick up a vine helmet on floor one.\",complete:!1},f1_picked_up_ninja_garb:{desc:\"Pick up a ninja garb on floor one.\",complete:!1},f1_picked_up_makeshift_steel_armour:{desc:\"Pick up a makeshift steel armour on floor one.\",complete:!1},f1_picked_up_vine_armour:{desc:\"Pick up a vine armour on floor one.\",complete:!1},f1_picked_up_vine_pantaloons:{desc:\"Pick up a vine pantaloons on floor one.\",complete:!1},f1_picked_up_silver_legwear:{desc:\"Pick up a silver legwear on floor one.\",complete:!1},f1_picked_up_slime_ball:{desc:\"Pick up a slime ball on floor one.\",complete:!1},f1_picked_up_weak_vine:{desc:\"Pick up a weak vine on floor one.\",complete:!1},f1_picked_up_hempweed_ligament:{desc:\"Pick up a hempweed ligament on floor one.\",complete:!1},f1_picked_up_wood:{desc:\"Pick up a wood on floor one.\",complete:!1},f1_picked_up_steel:{desc:\"Pick up a steel on floor one.\",complete:!1},f1_picked_up_health_potion:{desc:\"Pick up a health potion on floor one.\",complete:!1},f1_picked_up_greater_health_potion:{desc:\"Pick up a greater health potion on floor one.\",complete:!1},f1_picked_up_crafted_health_potion:{desc:\"Pick up a crafted health potion on floor one.\",complete:!1},f1_picked_up_mana_potion:{desc:\"Pick up a mana potion on floor one.\",complete:!1},f1_picked_up_crafted_mana_potion:{desc:\"Pick up a crafted mana potion on floor one.\",complete:!1},f1_picked_up_forest_explorer_daggers:{desc:\"Pick up a forest explorer daggers on floor one.\",complete:!1},f1_picked_up_forest_explorer_cap:{desc:\"Pick up a forest explorer cap on floor one.\",complete:!1},f1_picked_up_forest_explorer_armour:{desc:\"Pick up a forest explorer armour on floor one.\",complete:!1},f1_picked_up_forest_explorer_pants:{desc:\"Pick up a forest explorer pants on floor one.\",complete:!1},f1_picked_up_forest_explorer_pendant:{desc:\"Pick up a forest explorer pendant on floor one.\",complete:!1},f1_picked_up_forest_explorer_charm:{desc:\"Pick up a forest explorer charm on floor one.\",complete:!1}},m={mainBox:document.querySelector(\".main\"),main:document.querySelector(\".mainText\"),input:document.querySelector(\".main-input\"),form:document.querySelector(\".form-input\"),mainStats:document.getElementById(\"mainstats\"),elementalStats:document.getElementById(\"elemstats\"),playerStats:document.getElementById(\"playerstats\"),inventory:document.getElementById(\"inventory\"),minimap:document.getElementById(\"minimapview\"),miscView:document.getElementById(\"miscview\")},h=[\"skills\",\"sp\",\"back\"],u=[\"gamestart\",\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"combat\",\"combat-complex\",\"back\"],p=[\"message delay\",\"change shortcut\",\"test message\",\"tutorials\",\"save\",\"back\"],g={none:\"#FFFFFF\",physical:\"#737373\",fire:\"#FF2D00\",water:\"#000FFF\",earth:\"#7F2C00\",thunder:\"#DAAB00\",dark:\"#2A003D\",light:\"#E8CC3E\",wind:\"#8BF020\"},y=\"<br> --------------------------------<br><br>\",_={slow:1.25,medium:.75,fast:.25},b={slow:1.25,medium:.75,fast:.25},k={Rshift:\"ShiftRight\",Lshift:\"ShiftLeft\",Lctrl:\"ControlLeft\",Rctrl:\"ControlRight\",Altleft:\"AltLeft\",Altright:\"AltRight\",\"¬\":\"Backquote\"},w={exploreIntroduction:`${y}Welcome to your first zone! Here you can traverse 'rooms' by moving in any one of`+\" the four cardinal directions. You can also 'explore' which has a chance of finding you items, or an enemy encounter!<br><br>In some places, you can also interact with NPCs. You may find something interesting if you do so! If it's possible, it will be in your menu of options.<br><br>You can access some menus while exploring. But do note that if you leave (input 'leave') and return, you will return to the beginning of the zone.<br><br>Use the map to see where you are. Your position is the black square. If you've been somewhere already, it will light up as a colour depending on the type of area it is.<br><br>(This message will only show once.)\",gameIntroduction:`${y}Welcome to Tower RPG! In this game, the object is to get to the highest floor you can.`+\" You advance floors by defeating the boss of the current floor. Each floor is specifically designed and you can save at any time wherein you can access settings to return to continue your progress (please note that data may not save if you clear your cache or restart your device). Data also autosaves every 30 seconds.<br><br>I hope you you enjoy this game I've made! You will be briefed on some things as you explore the menus, but here is some stuff you might want to know:<br><br> - There is no music in this game. I'd recommend playing some music of your own so things don't get dull!<br><br> - The game is focused on the combat and gameplay. Please don't expect a grand story.<br><br> - You can press <b>RIGHT SHIFT</b> to active Input Shorcut, which can help if you forget what to type or if you have a low WPM. The key assigned to Input Shortcut can be changed in the settings. Use it once you've read this to see your options in the main menu. It can't be used everywhere, however.<br><br>The separator (━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━) separates responses to different inputs. After making an input, be sure to read everything under the latest separator.\"+`<br><br> - At the moment, there are ${s.max} floors.`+\"<br><br> - You can battle the floor boss while in the main menu by typing 'ascend'. There's no penalty for losing, so don't be afraid to try lots of different strategies! Do note that you may be a bit weak for the floor boss to begin with.. become stronger by exploring, finding and crafting items and levelling up.<br><br> - I would recommend you go through the options in the main menu and check each of them out to familiarise yourself with the interface. Many of them will tell you a bit about what goes on in that section, as well. When in doubt, usually inputting 'b'/'back' will take you back.<br><br> - If the text is hard to read, <b>try zooming in.</b><br><br> <b>- Your data will not save if you play on incognito.</b><br><br> - Please message iuc#1105 with any feedback or bugs you have/find, no matter how small!\",shopIntroduction:`${y}Shops are pretty self-explanatory. But do note that all shops have inifnite stock!`+\"<br><br>Also, each floor has a shop you can access from the main menu. Remember to check them out!<br><br>To exit a shop, just type 'b' or 'back'.\",equipIntroduction:`${y}Here, you can equip and unequip items. Just follow the instructions!`,statsIntroduction:`${y}Welcome to the stats menu! Here, you can learn skills and equip them.`+\"<br><br>Skills are learned using AP, which is gained from levelling up. They can also require gold and reagents to unlock.<br><br>Skills are contained within disciplines. You unlock these with gold and reagents. Learning certain skills, disciplines and reaching certain levels may unlock new disciplines!<br><br>You can use SP to increase your stats. SP is gained from levelling up [you get the same amount of SP/AP per level].<br><br>Skills can be unlearned and SP reset, so don't worry too much about being locked into one build forever.<br><br>The menus here can be a little complex, so here's how to find some things you may be looking for:<br><br>To unequip a skill, go (sk/skills) -> (e/equip) -> (e/equipped) and follow the instructions.<br><br>To forget a skill, make sure it isn't equipped. Then go (sk/skills) -> (e/equipped) -> (select the discipline) -> (select the skill) -> (f/forget).\",craftingIntroduction:`${y}Welcome to the crafting menu! Here, you can use recipes that you've learned to craft`+\" items.<br><br>Recipes use gold and items to create items and are not consumed upon use.<br><br>Recipes are unlocked when you reach a new floor and can be unlocked through other means as well. Make yourself some powerful items!\",settingsIntroduction:`${y}Welcome to settings! This is pretty self-explanatory. Here, you can adjust various`+\" things to enhance your play experience. You can also save and reset your data here and see any of the tutorial messages again if you need to.\",combatIntroduction:`${y}Your first fight! Don't worry, there isn't much to know. Press your input shortcut key`+\" to see your options. There are a few that will always be present:<br><br> - 'status' will display the buffs and debuffs applied to you.<br><br> - 'enemy' will display the buffs and debuffs applied to the enemy.<br><br> - 'skills' will display all your skills and what they do.<br><br> - Anything else you can see are attacks you can use.<br><br>Also note that some enemies have 'modes', which dictate what they will do. These depend on your actions and the state of the battle. Pay attention, and use the way the enemy thinks to your advantage!<br><br>Also, if you die, you will return to the main menu of your floor, no matter where you are. Try not to die!<br><br>There is no way to get out of a fight besides fleeing. If you flee, you will effectively \\\"die\\\", returning to the main menu instantly.<br><br>Note that your stamina will recover inbetween battles (and your SP will reset to 0), but your mana and hp will not regenerate. To restore, use potions or return to the main menu by typing 'leave'.<br><br>Finally, there are a bunch more stats and things you might want to know. If you're interested, a more comprehensive explanation is available in settings.\",combatComplex:`${y}There are quite a few stats of which the explanation isn't obvious. All that's left to`+\" complete your knowledge of combat is to explain what each of them mean:<br><br> <b>- Elemental defence.</b> For each element, this is the % of damage you take from attacks of that element. So if you have 50 fire defence, you take half damage from fire attacks. 200 fire defence, and you take double damage from fire attacks.<br><br> <b>- Elemental offence.</b> For each element, this is the % of damage you deal when using attacks of that element. So, if you have 50 fire offence, your fire attacks deal half damage. 200 Fire offence, and your fire attacks deal double damage.<br><br><b>- Resistance and Effectiveness.</b> Effectiveness increases your chance of applying debuffs to the enemy. Resistance decreases your chance of receiving debuffs from the enemy. Both are added to are taken away directly from the percentage. So, if you are using an attack with a 50% chance to apply a debuff and you have 50 effectiveness, the chance of applying the debuff is 100%. Likewise, if you had 0 effectiveness and the opponent had 50 resistance, the chance of applying the debuff would be 0%.<br><br><b>-Stamina, mana and SP.</b> All three are resources for using skills but they all work a little differently. <b>Mana</b> does not regenerate and you gain maximum mana after healing. <b>Stamina</b> regenerates at the end of each turn (10%) and you gain 100% stamina at the start of each fight. <b>SP</b> can only be gained through skills and various effects. It does not carry over in battles and starts at 0.<br><br><b>- Critical chance and critical damage.</b> Critical chance is the chance of you dealing a critical hit. Critical damage is the damage modifier applied to your critical hit.<br><br><b>- ATK, DEF, MATK, MDEF, SPD.</b> ATK and DEF increase dealt and decrease taken physical damage respecitvely. MATK and MDEF increase dealt and decrease taken magical damage respectively. SPD doesn't do anything, although if your speed is 2.5x greater than the enemy, then you will have 2 actions, as opposed to the usual 3 each. The same applies to your enemy. Don't be outsped!\"},v=e=>{m.main.insertAdjacentHTML(\"beforeend\",`${e}<br>`),I()},x=()=>{const e=m.input.value,a=T.inputShortcuts;return m.input.value=\"\",console.log(`input is ${e}`),T.on&&\"Nan\"!=parseInt(e).toString()&&null!=T.inputShortcuts[parseInt(e)]?(T.inputShortcuts={},T.on=!1,a[parseInt(e)]):(T.inputShortcuts={},T.on=!1,e)},S=e=>{m.form.addEventListener(\"submit\",e)},P=e=>{m.form.removeEventListener(\"submit\",e),v(\"<br>━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\")},$=(e,a,t)=>{var n=0;const s=\"battle\"==a?o.battleMessageDelay:o.messageDelay,r=()=>{n<e.length?(v(e[n][0]),I(),++n<e.length?setTimeout(r,1e3*s*e[n-1][1]):setTimeout(t,1e3*s*e[n-1][1])):t.call()};r()},I=()=>{m.mainBox.scrollTop=m.mainBox.scrollHeight;var e=m.main.innerHTML.split(\"<br>\");e.length>o.scrollLimit&&((e=e.filter(e=>!e.includes(\"form\"))).splice(1,e.length-o.scrollLimit),m.main.innerHTML=e.join(\"<br>\"))};window.addEventListener(\"keyup\",(function(e){this.event.code==k[o.toggleShortcut]&&T.toggleInputShortcut()}));const T={on:!1,inputShortcuts:{},toggleInputShortcut:()=>{T.on?(T.on=!1,v(\"<br>Input shortcut turned off.\")):(m.input.value=\"\",Object.keys(T.inputShortcuts).length>0?(T.on=!0,v(\"<br>Input shortcut turned on.\"),Object.keys(T.inputShortcuts).forEach(e=>{v(`${e} - ${T.inputShortcuts[e]}`)})):v(\"<br>Input shortcut cannot be used here.\"))}},A=e=>{const a={};return e.forEach((e,t)=>{a[t+1]=e}),T.inputShortcuts=a,a},M={damaged_dagger:{name:\"damaged dagger\",type:\"weapon\",atk:4,def:1,matk:5,mdef:3,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged dagger. Slightly rusty. It's corrogated edge may help against some enemies, but will not do any favours against slimes.\",sell_value:100},damaged_sword:{name:\"damaged sword\",type:\"weapon\",atk:7,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A damaged sword. It is a little bit rusty, with varying sharpness throughout the length of its edge. It's uneven length is unlikely to assist its user in swordplay.\",sell_value:100},simple_sword:{name:\"simple sword\",type:\"weapon\",atk:5,def:1,matk:2,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of craftmanship evidently skilled and yet still simplistic. It has a presently untouched silver blade under a brown hilt. Swords of this type are often used by skilled adventurers who want to return to their roots.\",sell_value:25},sharpened_sword:{name:\"sharpened sword\",type:\"weapon\",atk:12,def:3,matk:4,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The blade atop this sword is noticeable sharper than weaker swords. It has a weightier feel that allows for stronger swings.\",sell_value:100},crafted_blade:{name:\"crafted blade\",type:\"weapon\",atk:20,def:4,matk:5,mdef:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"The result of a very skilled weapon forger working with limited materials. Even one unknowledgable in swords can infer the love put into this blade from the intricate hilt to the blade optimised for killing.\",sell_value:250},silver_axe:{name:\"silver axe\",type:\"weapon\",atk:18,def:6,matk:6,mdef:6,speed:-10,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe forged of silver. It is double-bladed, and the weight on either side makes it a little uncomfortable to handle.\",sell_value:120},reinforced_silver_axe:{name:\"reinforced silver axe\",type:\"weapon\",atk:25,def:8,matk:8,mdef:8,speed:-20,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An axe that seems to be exactly like the silver axe except it has been reinforced by various stronger materials. However, the materials used to reinforce it seem to have been applied unevenly, which makes this weapon, however strong, difficult to use.\",sell_value:300},metal_stave:{name:\"metal stave\",type:\"weapon\",atk:3,def:1,matk:6,mdef:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It is a common misconception that simple weaponry for mages are made out of wood. Wood actually doesn't really conduct mana very well and is susceptible to breaking and fragmenting, making it a poor choice. Instead, a simple stave constructed from various metals melded together haphazardly is the weapon of choice for beginning magic users.\",sell_value:30},magisteel_stave:{name:\"magisteel stave\",type:\"weapon\",atk:7,def:1,matk:13,mdef:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A stave made from a single alloy that is particularly good at conducting mana. Useful for intermediate mages but a lack of resistance to mana makes it unsuitable for stronger users.\",sell_value:150},enchanted_magisteel_stave:{name:\"enchanted magisteel stave\",type:\"weapon\",atk:9,def:1,matk:20,mdef:8,elemental:{offence:{water:10},defence:{water:-10}},element:\"water\",desc:\"A stave made from an alloy that conducts maigc easily, but also enchanted so that more powerful spells can be cast using it. It seems to have been enchanted with water magic.\",sell_value:350},conduit_orb:{name:\"conduit orb\",type:\"weapon\",matk:20,elemental:{offence:{},defence:{}},element:\"none\",desc:\"Most orbs are formed from solidified mana over a very long period of time, and therefore has a very high mana conductivity that allows for the use of very powerful spells. However this orb is manmade with no elemental alignment using a complicated and specialised technique. It offers no other combat advantages, however allows a user a relatively high increase in magic power for its price.\",sell_value:200},simple_dagger:{name:\"simple dagger\",type:\"weapon\",atk:2,speed:5,mdef:1,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A weapon that seems almost identical to another named 'simple sword' although it is smaller in length. It has a lightly curved blade that allows attacks to be parried more easily.\",sell_value:25},crafted_dagger:{name:\"crafted dagger\",type:\"weapon\",atk:10,speed:10,evasion:.1,mdef:3,def:3,elemental:{offence:{},defence:{}},element:\"none\",desc:\"A wonderfully crafted weapon. It's hilt it designed such that the weapon can be held in most positions very comfortably, and such that the way the weapon is held can be changed at will. The blade is an intricate array of grooves and smooth edges that allow attacks to be blocked and parried with great ease and effectiveness. Not to be used by newbie dagger wielders.\",sell_value:250},silver_shield:{name:\"silver shield\",type:\"weapon\",def:25,mdef:20,speed:-20,elemental:{offence:{},defence:{physical:-10}},element:\"physical\",desc:\"A silver shield. It is well-made and sturdy but with little nuance to speak of.\",sell_value:200},runeblade:{name:\"runeblade\",type:\"weapon\",atk:10,matk:7,mdef:5,def:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A blade of simple structure. The blade has been formed of two half-blades with runic inscriptions on the inside of either welded together such that the inscriptions cannot be seen. This along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},runic_dagger:{name:\"runic dagger\",type:\"weapon\",atk:7,matk:5,mdef:2,def:2,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger of simple structure. The weapon is too small for inscriptions to be placed inside of the blade so they are plainly visible. The runes along with a basic enchantment placed on the blade makes it easy to enhance with some runes.\",sell_value:150},magisteel_runic_dagger:{name:\"magisteel runic dagger\",type:\"weapon\",atk:10,matk:8,mdef:7,def:5,speed:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A dagger crafted meticulously with the magisteel alloy and also encrusted with runes. This along with an enchantment placed upon the blade makes it possible to enhance the dagger with some runes, and even without magic, the expert craftsmanship evident on the weapon makes it an effective combat tool.\",sell_value:300},slime_reinforced_sword:{name:\"slime reinforced sword\",type:\"weapon\",atk:3,def:1,mdef:3,elemental:{offence:{water:10},defence:{}},element:\"water\",desc:\"A basic sword reinforced with some slime. It is a little heavier and more dull but grants some more elemental defence.\",sell_value:50},wolfhide_dagger:{name:\"wolfhide dagger\",type:\"weapon\",atk:3,speed:6,def:1,mdef:1,elemental:{offence:{},defence:{fire:10}},element:\"physical\",desc:\"A simple dagger wherein the grip has been enhanced with grey wolf's skin.\",sell_value:50},pickaxe:{name:\"pickaxe\",type:\"weapon\",atk:3,def:2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"It's a pickaxe. What more do you want?\",sell_value:25},earthen_sword:{name:\"earthen sword\",type:\"weapon\",atk:23,def:2,matk:6,mdef:4,elemental:{offence:{earth:15,wind:-5},defence:{earth:-6,wind:6,fire:10}},element:\"earth\",desc:\"A blade enhanced with the venom of a venomous wolf from the dark forest. It can't really poison enemies due the limited quantity of poison, but it does grant the sword some earthen qualities.\",sell_value:390},makeshift_sword:{name:\"makeshift sword\",type:\"weapon\",atk:3,def:1,matk:1,mdef:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword of limited craftsmanship. Besides that, nothing of note regarding this weapon.\",sell_value:25},wolven_reavers:{name:\"wolven reavers\",type:\"weapon\",atk:4,speed:5,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Small weapons fashioned from wolf claws and pelt. Easy to carry and useful for close range combat.\",sell_value:75},flamme_kaiser:{name:\"flamme kaiser\",type:\"weapon\",atk:35,matk:15,elemental:{offence:{fire:20},defence:{fire:-5,water:10,thunder:-5}},element:\"fire\",desc:\"An axe whose craftsmanship is indicative of something beyond the comprehension of even a decently-skilled artisan. Even though it should be far too heavy to hold, somehow it is comfortable in just one hand. The heat it emanates makes it difficult to hold, however.\",sell_value:1e3},fishing_rod:{name:\"fishing rod\",type:\"weapon\",atk:5,speed:5,crit_chance:.2,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"An old fishing rod. You can tell it's used, and the wear of the old user's arms have given it a more comfortable grip. However, the compromise is the quality of the rod. It can clearly seen better days.\",sell_value:25},barren_sword:{name:\"barren sword\",type:\"weapon\",atk:30,matk:15,speed:5,elemental:{offence:{},defence:{}},element:\"none\",desc:\"There is a distinct lack of personaility and heart put into this sword, in spite of its elegance. Emotion is often a strong proponent of items made by skilled craftsmen, and seeing it completely absent in this weapon is a little... eerie. It emanates an unknown power.\",sell_value:\"unsellable\"},hydra_staff:{name:\"hydra staff\",type:\"weapon\",matk:25,atk:15,mdef:5,elemental:{offence:{water:20,fire:-5},defence:{water:-5,thunder:5}},element:\"water\",desc:\"A staff that has been very elegantly crafted - a stick of what looks like ivory has had two white-and-cyan snakes wrapped around it, swirling in opposite directions until they meet at the top, just below a water orb. Or at least, that's what it looks like. If it were truly made from such materials, it would probably be much more power. Nevertheless, it seems to be a formidable weapon.\",sell_value:\"unsellable\"},wooden_sword:{name:\"wooden sword\",type:\"weapon\",matk:1,atk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A sword made from wood. It is a little unpleasant to look at, to be honest.\",sell_value:20},vine_wrapped_wooden_sword:{name:\"vine wrapped wooden sword\",type:\"weapon\",matk:3,atk:6,elemental:{offence:{earth:5},defence:{earth:-2}},element:\"physical\",desc:\"A sword made from wood that has been enhanced with vines. The vines grant it a slight aestetic edge.\",sell_value:40},wooden_stave:{name:\"wooden stav\",type:\"weapon\",matk:3,atk:1,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"A staff made from wood. It is a little unpleasant to look at, to be honest.\",sell_value:20},vine_wrapped_wooden_stave:{name:\"vine wrapped wooden stave\",type:\"weapon\",matk:6,atk:3,elemental:{offence:{earth:5},defence:{earth:-2}},element:\"physical\",desc:\"A stave made from wood that has been enhanced with vines. The vines grant it a slight aestetic edge.\",sell_value:40},feathervine_sword:{name:\"feathervine sword\",type:\"weapon\",matk:5,atk:9,elemental:{offence:{wind:5,earth:5},defence:{wind:-2,earth:-2}},element:\"physical\",desc:\"This sword doesn't actually have feathers attached to it. But the wolf pelt used in it's creation has been frayed and split to the extent that they look a bit like feathered remains.\",sell_value:70},wolf_hermit_staff:{name:\"wolf hermit staff\",type:\"weapon\",matk:10,atk:7,elemental:{offence:{physical:15},defence:{}},element:\"physical\",desc:\"This item uses the remains of wolves to capture their essence and in doing so, enhance one's attacks with the magic enherent within a grey wolf. The claws it is embroidered with look like charms worn by a hermit.\",sell_value:80},thunder_rod:{name:\"thunder rod\",type:\"weapon\",matk:10,atk:10,elemental:{offence:{thunder:10},defence:{}},element:\"thunder\",desc:\"A rod enchanted with simple thunder magic. Used by fighters of all types as a way of easily aligning one's attacks with the thunder element.\",sell_value:150},damaged_helm:{name:\"damaged helm\",type:\"head\",def:7,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A damaged helm. The perforations in the front may help the user to see better. The ones in the back, not so much.\",sell_value:100},silver_helm:{name:\"damaged helm\",type:\"head\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-2,water:-2,fire:2}},element:\"physical\",desc:\"A silver helm. It is not a full helm, instead protecting the neck and head. Offers less protection than a full helm but does not restrict movement or sight.\",sell_value:50},advanced_silver_helm:{name:\"advanced silver helm\",type:\"head\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A helm made of impressive silver. It has more coverage than some lower end helmets but is still fairly free, at the cost of protection.\",sell_value:80},silver_knight_helm:{name:\"silver knight helm\",type:\"head\",def:10,mdef:5,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A knight's helm made of silver. It covers the face completely, but the limited view makes it harder to accurately move about and evade attacks.\",sell_value:200},ninja_wrap:{name:\"ninja wrap\",type:\"head\",def:2,mdef:1,speed:5,elemental:{offence:{},defence:{dark:-2,light:5}},element:\"dark\",desc:\"Black cloth intricately wrapped such that it can be wore on the head, hiding most of the face. Offers almost no protection but does not restrict movement at all.\",sell_value:90},wizard_headband:{name:\"wizard headband\",type:\"head\",def:1,mdef:4,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Stereotypical wizard hats are worn by many but often cannot function as much more than a fashion piece. This wizard headband, crafted from silver with a small gem at the center is designed to enhance spells cast by the wielder.\",sell_value:70},enchanted_wooden_helm:{name:\"enchanted wooden helm\",type:\"helm\",def:5,mdef:2,elemental:{offence:{},defence:{water:-10,fire:30,physical:-5}},element:\"physical\",desc:\"One would assume that a wooden helm would be very ineffective, but it seems to have been enchanted that prevents it from fragmenting and greatly increases its water absorbance.\",sell_value:75},wolfhide_cap:{name:\"wolfhide cap\",type:\"head\",def:1,mdef:1,speed:2,elemental:{offence:{physical:5},defence:{earth:-5}},element:\"physical\",desc:\"A cap fashioned from grey wolves hide. It doesn't offer much protection but does look quite nice!\",sell_value:50},water_infused_helm:{name:\"water infused helm\",type:\"head\",def:8,mdef:6,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"A metal helm infused with water mana. Surprisingly, the water magic does not change how the helm feels to wear. Grants some nice protection against the elements.\",sell_value:120},makeshift_steel_helm:{name:\"makeshift steel helm\",type:\"head\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-3}},element:\"physical\",desc:\"The artisanship observed with this helm is fairly weak. It's clear it was made by someone fairly inexperienced\",sell_value:50},shinobi_headcloak:{name:\"shinobi headcloak\",type:\"head\",def:8,mdef:6,speed:5,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-12,physical:-5,light:15}},element:\"dark\",desc:\"Basic black fabric that stealthy fighters use to hide their faces has been enhanced with the pelt of dark beasts. Just like their skin, it has an ethereal quality.\",sell_value:400},vine_helmet:{name:\"vine helmet\",type:\"head\",def:3,mdef:4,elemental:{offence:{},defence:{earth:-5,physical:-5,fire:20,water:-2,thunder:-2}},element:\"earth\",desc:\"Vines from a teravalum that looks a bit like a helmet. Better than nothing but since it's not designed to be a helmet, it's a little uncomfortable.\",sell_value:35},crown_of_darkness:{name:\"crown of darkness\",type:\"head\",def:10,mdef:7,evasion:.1,elemental:{offence:{dark:10,physical:5},defence:{dark:-10,light:15,physical:-5}},element:\"dark\",desc:\"A small crown-looking headpiece. It is entirely black but unlike shadow pelts, completely solid. It is quite difficult to tell what material this item is made from, although it is imbued with magical power.\",sell_value:\"unsellable\"},damaged_armour:{name:\"damaged armour\",type:\"body\",def:6,mdef:7,speed:-5,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"A damaged chestplate. The damage to the ligaments would increase one's agility were it not for the rusting forcing one to move against the resistance of the joints.\",sell_value:100},silver_armour:{name:\"silver armour\",type:\"body\",def:5,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"Armour designed to protect the main vulnerable part of the body, leaving a chainmail pattern around the joints for movement. Not expertly cafted, but well made nonetheless.\",sell_value:50},advanced_silver_armour:{name:\"advanced silver armour\",type:\"body\",def:8,mdef:4,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"An armour made almost entirely of silver. The joints use overlapping and interlocking pieces of iron to enable movement while facilitating good protection.\",sell_value:80},silver_knight_armour:{name:\"silver knight armour\",type:\"body\",def:13,mdef:7,speed:-5,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"A complete silver knight's armour. It still allows movement at the joints, but still restricts movement slightly. In exchange, the wearer is granted greater defenses.\",sell_value:200},ninja_garb:{name:\"ninja garb\",type:\"body\",def:5,mdef:2,speed:10,evasion:.1,elemental:{offence:{},defence:{dark:-5,light:10}},element:\"dark\",desc:\"The equivalent of a chestplate for a ninja. It is made of a thin black fabric that offers little protection but allows for quick movement without detection.\",sell_value:130},light_wizard_robes:{name:\"light wizard robes\",type:\"body\",def:3,mdef:7,matk:7,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Grey and blue wizard robes are often worn by new mages. They have a light enchant to enhance spells cast by the user, are comfortable to move about in and are fairly stylish.\",sell_value:70},tattered_magus_robes:{name:\"tattered magus robes\",type:\"body\",def:5,mdef:10,matk:9,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Magi are extremely powerful magic users. Becaue of the powerful magic they use, spellcaster garb that they wear can wear out quickly. Some magi discard them and others donate them. These robes seem to have sustained a lot of damage, but are still better than most beginners wear. \",sell_value:140},wolfhide_armour:{name:\"wolfhide armour\",type:\"body\",def:3,mdef:2,speed:5,elemental:{offence:{physical:5},defence:{earth:-7}},element:\"physical\",desc:\"Armour fashioned from grey wolf hide. It is comfortable and enabled great movement.\",sell_value:50},water_infused_armour:{name:\"water infused armour\",type:\"body\",def:8,mdef:7,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Metal armour enhanced with water magic. Grants increased defence against the elements.\",sell_value:120},makeshift_steel_armour:{name:\"makeshift steel armour\",type:\"body\",def:4,mdef:3,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Makeshift steel armour. Not made very well, but grants rudimentary protection.\",sell_value:50},shinobi_armour:{name:\"shinobi armour\",type:\"body\",def:10,mdef:8,speed:8,evasion:.05,crit_chance:.1,elemental:{offence:{},defence:{dark:-8,physical:-5,light:12}},element:\"dark\",desc:\"Body wear worn by stealth fighters enhanced with the pelt of a dark beast. Having part of them on you makes you feel a little like a dark beast yourself.\",sell_value:400},shadow_cloak:{name:\"Shadow cloak\",type:\"body\",def:13,mdef:10,speed:15,evasion:.1,crit_chance:.1,elemental:{offence:{},defence:{physical:-10,dark:-15,light:15}},element:\"physical\",desc:\"A cloak that looks as though it was fashioned from darkness itself. It cannot be felt physically when worn but its power can still be felt.\",sell_value:600},bladed_armour:{name:\"bladed armour\",type:\"body\",def:5,mdef:3,atk:5,elemental:{offence:{},defence:{physical:-5}},element:\"physical\",desc:\"Simple armour with claws used to grant the wearer an offensive edge.\",sell_value:120},vine_armour:{name:\"vine armour\",type:\"body\",def:4,mdef:4,speed:-2,elemental:{offence:{},defence:{fire:5,earth:-2}},element:\"earth\",desc:\"Armour fashioned from vines. It's surprisingly comofrtable, but grants little insulation.\",sell_value:20},wooden_armour:{name:\"wooden armour\",type:\"body\",def:3,mdef:3,elemental:{offence:{},defence:{}},element:\"earth\",desc:\"Armour made from wood. You could get splinters wearing this!\",sell_value:15},strong_vine_chestplate:{name:\"strong vine chestplate\",type:\"body\",def:6,mdef:6,elemental:{offence:{},defence:{fire:4,earth:-3,physical:-2}},element:\"earth\",desc:\"Armour from vines enhanced with hempwood ligaments. The use of the flexible but strong ligaments allows for better movement, and they cover vulnerable gaps present in armour without it.\",sell_value:45},damaged_pantaloons:{name:\"damaged pantaloons\",type:\"legs\",def:5,mdef:3,elemental:{offence:{},defence:{physical:-5,fire:1}},element:\"physical\",desc:\"Damaged pantaloons. They're pretty uncomfortable, and rapid movement causes them to make a sound that hurts the ear. Also, pantaloons is such a silly sounding word.\",sell_value:100},silver_legwear:{name:\"silver legwear\",type:\"legs\",def:3,mdef:2,elemental:{offence:{},defence:{physical:-4,water:-3,fire:2}},element:\"physical\",desc:\"Silver legwear. There is some type of fabric protecting the legs down to the knees, beyond which silver armour is present.\",sell_value:50},advanced_silver_legwear:{name:\"advanced silver legwear\",type:\"legs\",def:6,mdef:3,elemental:{offence:{},defence:{physical:-5,water:-5,fire:2}},element:\"physical\",desc:\"Advanced silver legwear. It uses relatively advanced craftsmanship to allow movement at the joints with overlapping and interlocking pieces of silver.\",sell_value:80},silver_knight_legwear:{name:\"silver knight legwear\",type:\"legs\",def:10,mdef:7,speed:-10,evasion:-.1,elemental:{offence:{},defence:{physical:-5,water:-5,fire:3}},element:\"physical\",desc:\"Legwear made of silver used by knights. There is a considerable compromise in movement in exchange for improved defenses.\",sell_value:200},ninja_legwear:{name:\"ninja legwear\",type:\"legs\",def:7,mdef:3,speed:10,elemental:{offence:{},defence:{dark:-2,light:10}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings. They offer great movement and are very comfortable, and seem to have been lightly enchanted for a little protection\",sell_value:90},light_wizard_leggings:{name:\"light wizard leggings\",type:\"legs\",def:2,mdef:5,matk:3,elemental:{offence:{},defence:{}},element:\"physical\",desc:\"Simple legwear designed to synergise aesthetically with simple wizard robes. Has a light enchant to boost magical power.\",sell_value:70},wolfhide_leggings:{name:\"wolfhide leggings\",type:\"legs\",def:1,mdef:2,speed:3,elemental:{offence:{physical:5},defence:{earth:-5}},element:\"physical\",desc:\"Legwewar fasioned from grey wolf's hide. It is comfortable, and allows for great movement.\",sell_value:50},water_infused_legwear:{name:\"water infused legwear\",type:\"legs\",def:6,mdef:5,elemental:{offence:{},defence:{physical:-5,water:-10,fire:-5}},element:\"water\",desc:\"Basic metal armour infused with water magic. Asides from enhanced physical protection, it also grants some defence against the elements.\",sell_value:120},makeshift_steel_legwear:{name:\"makeshift steel legwear\",type:\"legs\",def:2,mdef:1,elemental:{offence:{},defence:{physical:-4}},element:\"physical\",desc:\"Steel legwear made somewhat poorly, but not unwearable. Seems like it might fall apart after some use.\",sell_value:50},shinobi_leggings:{name:\"shinobi leggings\",type:\"legs\",def:9,mdef:5,speed:10,elemental:{offence:{},defence:{dark:-9,physical:-5,light:12}},element:\"dark\",desc:\"Plain black legwear that looks a little like joggings, but that have been enhanced using the pelt of a dark beast. Quite comfortable, but have an ethereal quality to them.\",sell_value:400},vine_pantaloons:{name:\"vine pantaloons\",type:\"legs\",def:2,mdef:2,elemental:{offence:{},defence:{fire:3,earth:-2}},element:\"earth\",desc:\"Trousers fashioned from vines. It's surprisingly comofrtable, but grants little insulation.\",sell_value:15},wooden_trousers:{name:\"wooden trousers\",type:\"legs\",def:1,mdef:1,elemental:{offence:{},defence:{fire:3}},element:\"physical\",desc:\"Trousers crudely made from wood. You could get splinters from these!\",sell_value:10},shadowwarding_pendant:{name:\"Shadowwarding Pendant\",type:\"misc\",atk:5,def:5,matk:7,mdef:8,elemental:{offence:{},defence:{dark:-10,light:10}},element:\"physical\",description:\"A short pendant with a silver chain. On the front seems to be a small, dark purple crystal. It seems that the pendant is designed to defend against the more dangerous creatures in the dark forest.\",sell_value:500},slime_bracers:{name:\"Slime bracers\",type:\"misc\",def:3,mdef:4,speed:-3,resistance:.05,elemental:{offence:{water:10},defence:{water:-5,fire:-10,thunder:10}},element:\"water\",description:\"Bracers for defending one's arms fashioned from slime. The solid and slightly sticky substance offers fairly good elemental protection but stunts one's ability to move somewhat.\",sell_value:30},wolfhide_charm:{name:\"Wolfhide charm\",type:\"misc\",atk:4,def:3,mdef:2,speed:3,evasion:.05,crit_chance:.1,elemental:{offence:{physical:8},defence:{fire:10}},element:\"physical\",description:\"A charm fashioned from wolf pelts. The residual inherent mana of the wolves seems to grant the charm some special qualities.\",sell_value:60},lizard_bracelet:{name:\"Lizard bracelet\",type:\"misc\",atk:7,def:4,mdef:3,evasion:.1,elemental:{offence:{},defence:{fire:-5}},element:\"water\",description:\"Small parts of lizard tails were wrapped intricately together to create a bracelet. It is quite pretty, and seems to have some magical properties.\",sell_value:100},aquus_orb:{name:\"Aquus orb\",type:\"misc\",matk:7,mdef:6,resistance:.1,elemental:{offence:{water:10,fire:-10},defence:{water:-15,fire:-6,thunder:12}},element:\"water\",description:\"Aquus clusters condensed to form a small orb capable of enhancing the capabilities of the wielder.\",sell_value:100},luminant_charm:{name:\"Luminant charm\",type:\"misc\",matk:5,atk:5,mdef:6,speed:2,elemental:{offence:{light:10},defence:{light:-5,dark:-10}},element:\"light\",description:\"A simple charm enhanced with the luminescent eye of a water lizard. Can be worn on jewelry or held in a pocket.\",sell_value:150},tear_of_lucia:{name:\"Tear of lucia\",type:\"misc\",matk:7,mdef:7,resistance:.05,elemental:{offence:{water:20},defence:{water:-15,fire:-10,dark:-5,light:-5,earth:-5,thunder:-5,wind:-5}},element:\"water\",description:\"A manasoul condensed using a makeshift orb into a very small space. The compactness of the charm causes the mana inside the be quite powerful. Items of this nature are called 'Tears of Lucia' as it believed that the tears of the Solace goddess will grant any who observes them inpenetrable safety, and the mana of this item for some reason has a very soothing aura.\",sell_value:350},red_slime_bracers:{name:\"Red slime bracers\",type:\"misc\",def:9,mdef:13,speed:-5,resistance:.05,crit_damage:.1,elemental:{offence:{fire:10},defence:{water:5,fire:-13,thunder:-5}},element:\"water\",description:\"Bracers for defending one's arms fashioned from red slime. It is more solid than blue slime and has different elemental properties.\",sell_value:300},special_armband:{name:\"Special armband\",type:\"misc\",atk:3,def:3,matk:3,mdef:3,speed:3,max_stamina:20,elemental:{offence:{},defence:{}},element:\"physical\",description:\"A simple bracelet that promotes spirituality. It's a little tight..\",sell_value:200},friendly_slime:{name:\"Friendly slime\",type:\"misc\",def:9,mdef:13,resistance:.05,max_mana:20,max_stamina:5,elemental:{offence:{water:20},defence:{water:-7,fire:-8,thunder:15}},element:\"water\",description:\"A slime to help you in battle! Where'd you find this little guy?\",sell_value:250},friendly_greater_slime:{name:\"Friendly greater slime\",type:\"misc\",def:15,mdef:20,resistance:.05,max_mana:30,max_stamina:5,elemental:{offence:{water:25},defence:{water:-10,fire:-10,thunder:15}},element:\"water\",description:\"A greater slime to help you in battle! Where'd you find this little guy?\",sell_value:400},vine_membrane_bracers:{name:\"Vine membrance bracers\",type:\"misc\",atk:2,def:5,mdef:4,max_stamina:5,elemental:{offence:{earth:10},defence:{earth:-4,fire:4}},element:\"earth\",description:\"Bracers made from vines and hempweed ligaments. They offer a good mixture of offence and defence.\",sell_value:40},water_orb_necklace:{name:\"Water orb necklace\",type:\"misc\",matk:10,def:5,mdef:10,max_mana:50,elemental:{offence:{water:25,thunder:-10,fire:-10},defence:{thunder:20,fire:-10,water:-5}},element:\"water\",description:\"A simple necklace with a water orb encrusted at its center. Basic but very effective.\",sell_value:200},blue_vine_charm:{name:\"Blue vine charm\",type:\"misc\",atk:3,matk:3,def:3,mdef:3,speed:-2,max_mana:10,max_stamina:10,elemental:{offence:{water:5,earth:5},defence:{fire:25,water:-5,earth:-5}},element:\"water\",description:\"A necklace fashioned from various items that can be found from blue slimes and vined creatures. The coalesce of their inherent magics grants the wearer a range of boons.\",sell_value:30},fishers_lucky_charm:{name:\"Fisher's lucky charm\",type:\"misc\",atk:6,matk:7,def:4,mdef:5,crit_chance:.2,crit_damage:.15,evasion:.05,elemental:{offence:{},defence:{}},element:\"water\",description:\"Many fishers are known for their extreme luck both in finding rare and dangerous fish and surviving various encounters with them. Is this item the sole reason for that..?\",sell_value:50},slime_ball:{name:\"Slime Ball\",type:\"reagent\",desc:\"A ball of blue slime. Although it has shape, it is easy to press into. Has a peculiar texture.\",sell_value:5},grey_wolf_pelt:{name:\"Grey Wolf Pelt\",type:\"reagent\",desc:\"The fur of a grey wolf. Most of it remains intact, but if you shake the straps of fur, parts of it will flake off rapidly\",sell_value:7},wanderer_memorabilia:{name:\"Adventurer Memorabilia\",type:\"reagent\",desc:\"Various things that may remind an old advenutrer of the adventures they had.\",sell_value:0},weak_membrane:{name:\"Weak Membrane\",type:\"reagent\",desc:\"A very thin layer of skin from some kind of weap reptile. A single wrong move and it would tear.\",sell_value:10},tiny_lizard_tail:{name:\"Tiny Lizard Tail\",type:\"reagent\",desc:\"The tail of a lizard. It still moves sometimes.\",sell_value:12},aquus_cluster:{name:\"Aquus Cluster\",type:\"reagent\",desc:\"An undeveloped orb of weak water magic. 'Aquus' refers to weak water magic. There wasn't enough of it to form an orb, so the mana settled as a semi-solid substance that has form and yet is very soft and malleable. Even so, it is fairly useful to novice mages.\",sell_value:25},water_orb:{name:\"Water Orb\",type:\"reagent\",desc:\"Water magic that gathered at a single point over a fairly long period of time and eventually reached a high enough concentration to possess crystalline form. These very rarely form naturally, and are often crafted by strong magic users to store mana of a particular alignment.\",sell_value:400},manasoul:{name:\"Manasoul\",type:\"reagent\",desc:\"Beings such as klastera and elementals with no anatomy or creature soul are animated by a 'manasoul', mana with the power to grant consciousness. It is not known how to create these and so they are often extracted from naturally occurring creatures such as klastera, elementals and very rarely, dragons.\",sell_value:1e3},light_absorbant_eye:{name:\"Light absorbant eye\",type:\"reagent\",desc:\"The eye of a class of lizard that absorbs light from the sun to be used to keep the body warm during hibernation. In many places with cold winters there is little space to burrow or make warm refuge, and so this skill is essential in keeping the lizards alive when the climate becomes cold.\",sell_value:20},red_slime_ball:{name:\"Red slime ball\",type:\"reagent\",desc:\"A ball of red slime. It can be pressed into but seems to return to a general shape after the deforming force is removed. Has a peculiar texture.\",sell_value:7},sharp_claw:{name:\"Sharp claw\",type:\"reagent\",desc:\"A dull grey claw. Seems to be sharper than most. Both the sides and prick cause bleeding upon contact.\",sell_value:8},venomous_claw:{name:\"Venomous claw\",type:\"reagent\",desc:\"A dull greenish-grey claw. The venom the claw is laced with seems to cause fatigue in small amounts. It would be unwise to toy with this item.\",sell_value:8},shadow_pelt:{name:\"Shadow pelt\",type:\"reagent\",desc:\"A patch of fur from a Dark beast. Although it is clearly tangible, it has an ethereal quality that makes it uncomfortable to hold - like it would just fade into black smoke.\",sell_value:10},shadow_corona:{name:\"Shadow corona\",type:\"reagent\",desc:\"It's difficult to tell what part of the Dark beast this comes from - it seems like a particularly tough, solid patch of its fur. It is heavily enchanted and seems to serve as some kind of evidence that the dark beast is in fact a dark beast.\",sell_value:20},trash:{name:\"Trash\",type:\"reagent\",desc:\"Human garbage. Arguably of negative value.\",sell_value:-1},fire_rune:{name:\"Fire rune\",type:\"reagent\",desc:\"A simple flame rune. It is contained in a transparent box of some material that seems to block any heat emanating from them.\",sell_value:40},water_rune:{name:\"Water rune\",type:\"reagent\",desc:\"A simple water rune. It isn't dangerous, but feels a little weird to touch - probably due to the water mana constantly emanating from it.\",sell_value:40},thunder_rune:{name:\"Thunder rune\",type:\"reagent\",desc:\"A simple thunder rune. Touching it would shock the user a little, so it is encased in a transparent box of some material.\",sell_value:40},dark_rune:{name:\"Dark rune\",type:\"reagent\",desc:\"A simple dark rune. It is uncomfortable to have in your inventory due to the foreboding enery it emits.\",sell_value:40},light_rune:{name:\"Light rune\",type:\"reagent\",desc:\"A simple light rune. It is difficult to tell whether it is emitting light or light mana.\",sell_value:40},vip_card:{name:\"VIP card\",type:\"reagent\",desc:\"A basic-looking small card. Apparently functions as evidence of one's generous patronage.\",sell_value:100},steel:{name:\"steel\",type:\"reagent\",desc:\"It's steel. What more do you want?\",sell_value:10},wood:{name:\"wood\",type:\"reagent\",desc:\"Some wood. Who cares what type it is?\",sell_value:8},leather:{name:\"leather\",type:\"reagent\",desc:\"Leather. It is cheap but fairly well made.\",sell_value:9},stone:{name:\"stone\",type:\"reagent\",desc:\"Stone.\",sell_value:3},water_energy:{name:\"water energy\",type:\"reagent\",desc:\"Pure water energy. Humans have not yet learned to replicate this with magic; this is something only animals can create. Can be used by some creatures to strengthen themselves.\",sell_value:60},weak_vine:{name:\"weak vines\",type:\"reagent\",desc:\"Weak vines woven of some kind of thick cellulose material. It feels a little leathery.\",sell_value:6},hempweed_ligament:{name:\"hempweed ligament\",type:\"reagent\",desc:\"Seems to form the ligaments of a Lesser Teravalum. It is very thin, but very strong. Could probably be woven into a fabric\",sell_value:7},health_potion:{name:\"health potion\",type:\"reagent\",desc:\"A simple health potion. Recovers 30 HP upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",30]],battleEffect:()=>{We.pushMessagesToState([\"Used health potion!\"]),We.gainHealth(\"player\",30,\"self\",[\"item:health_potion\",{heal:30,target:\"self\"},\"player\"],!0,Ze.getPlayer(),Ze.getEnemy())},pouchMax:5}},greater_health_potion:{name:\"greater health potion\",type:\"reagent\",desc:\"A fairly well-made health potion. Recovers 80 HP upon use.\",sell_value:15,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",80]],battleEffect:()=>{We.pushMessagesToState([\"Used greater health potion!\"]),We.gainHealth(\"player\",80,\"self\",[\"item:greater_health_potion\",{heal:80,target:\"self\"},\"player\"],!0,Ze.getPlayer(),Ze.getEnemy())},pouchMax:5}},crafted_health_potion:{name:\"crafted health potion\",type:\"reagent\",desc:\"This health potion is somewhat of a spectacle of artisanship. Recovers 150 HP upon use.\",sell_value:50,use:{case:\"all\",effect:[[\"player\",\"health\",\"flat\",150]],battleEffect:()=>{We.pushMessagesToState([\"Used crafted health potion!\"]),We.gainHealth(\"player\",150,\"self\",[\"item:crafted_health_potion\",{heal:150,target:\"self\"},\"player\"],!0,Ze.getPlayer(),Ze.getEnemy())},pouchMax:5}},mana_potion:{name:\"mana potion\",type:\"reagent\",desc:\"A simple mana potion. Recovers 40 MP upon use.\",sell_value:3,use:{case:\"all\",effect:[[\"player\",\"mana\",\"flat\",40]],battleEffect:()=>{We.pushMessagesToState([\"Used mana potion!\"]),We.gainMana(\"player\",40,\"self\",[\"item:health_potion\",{mana:40,target:\"self\"},\"player\"],!0,Ze.getPlayer(),Ze.getEnemy())},pouchMax:5}},greater_mana_potion:{name:\"greater mana potion\",type:\"reagent\",desc:\"A fairly well-made mana potion. Recovers 80 MP upon use.\",sell_value:15,use:{case:\"all\",effect:[[\"player\",\"mana\",\"flat\",80]],battleEffect:()=>{We.pushMessagesToState([\"Used greater mana potion!\"]),We.gainMana(\"player\",80,\"self\",[\"item:greater_health_potion\",{mana:80,target:\"self\"},\"player\"],!0,Ze.getPlayer(),Ze.getEnemy())},pouchMax:5}},f1_settlement_teleportation_stone:{name:\"floor one settlement teleportation stone\",type:\"reagent\",desc:\"It is difficult to explain the function of this item, but it allows for instantaneous travel, albeit is destroyed afterwards. When exploring on floor one, consume to travel to the settlement in the north-west of the map.\",sell_value:5,use:{case:\"outside\",effect:[[\"player\",\"teleport\",\"floor1\",[4,2]]]}},brown_fur:{name:\"brown fur\",type:\"reagent\",desc:\"The brown fur of a brown bear. Despite feeling quite nice, it smells very bad.\",sell_value:6},magic_bark:{name:\"Magic bark\",type:\"reagent\",desc:\"Bark of a tree imbued with magic. The material of the tree itself seems to have a relatively poor magical, however bark of this nature could still be very useful to beginning adventurers.\",sell_value:12},special_sap:{name:\"Special sap\",type:\"reagent\",desc:\"The sap of a treant. It has potent magical qualities, specifically in healing. It's quite bitter, so in healing potions for children, sugar is often added to it.\",sell_value:15}},E=(e,a=1,t=1)=>{const s={...M[e]},o=Math.floor(Math.random()*(t-a+1))+a;v(`<br>Attained ${o} ${s.name}${o>1?\"s\":\"\"}!`);var r=!1;const l=n.player;if(\"reagent\"==s.type&&l.inventory.forEach(a=>{a[0]==e&&(a[1]+=o,r=!0)}),0==r)if(\"reagent\"!=s.type)for(var i=1;i<o+1;i++)n.player.inventory.push(e);else n.player.inventory.push([e,o])},B=(e,a)=>{const t=M[e];v(`<br>Removed ${a} ${t.name}${a>1?\"s\":\"\"}!`);var s=!1;const o=n.player;if(\"reagent\"==t.type){const t=n.player;t.inventory.forEach(n=>{if(n[0]==e){if(n[1]-=a,0==n[1]){const a=t.inventory.findIndex(a=>a[0]==e);console.log(a),t.inventory.splice(a,1)}s=!0}})}if(0==s)for(var r=1;r<a+1;r++)-1!=o.inventory.indexOf(e)&&(delete o.inventory[o.inventory.indexOf(e)],R(),s=!1);return R(),0==s?-1:0},L=(e,a=!0,t=!0,n=!0,s=!0,o=!1)=>{const r=[\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"critical_chance\",\"critical_damage\",\"effectiveness\",\"resistance\",\"max_stamina\",\"max_mana\",\"evasion\"],l=[\"attack\",\"defence\",\"magic attack\",\"magic defence\",\"speed\",\"critical chance\",\"critical damage\",\"effectiveness\",\"resistance\",\"max stamina\",\"max mana\",\"evasion\"];o&&v(e.name),Object.keys(e).forEach(s=>{const o=e[s];n&&\"type\"==s&&v(`Type: ${o}`),a&&r.includes(s)&&v(`${o} ${l[r.indexOf(s)]}`),a&&\"elemental\"==s&&(Object.keys(o.offence).forEach(e=>{v(`${o.offence[e]<0?\"\":\"+\"}${o.offence[e]} ${e} attack`)}),Object.keys(o.defence).forEach(e=>{v(`${o.defence[e]<0?\"\":\"+\"}${o.defence[e]} ${e} defence`)})),t&&\"desc\"==s&&v(`Description: ${o}`),t&&\"sell_value\"==s&&v(`Sell value: ${o}`)})},q=e=>e[0].length>1,D=e=>q(e)?e[0]:e,O=(e,a)=>{var t=0;return\"reagent\"!=M[e].type?a.forEach(a=>{a==e&&t++}):a.forEach(a=>{a[0]==e&&(t=a[1])}),t},C=e=>{const a=Object.keys(M);for(var t=0;t<a.length;t++)if(M[a[t]].name==e)return a[t];return!1},R=()=>{console.log(\"clean inv called\"),console.log(n.player.inventory);const e=n.player;for(var a=0;a<e.inventory.length;a++)null!=e.inventory[a]&&null!=e.inventory[a]||e.inventory.splice(a,1)},j={slime:{stats:{base_level:1,max_health:40,atk:30,def:30,matk:30,mdef:30,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:50,wind:50,thunder:150,dark:75,light:75}},ai:\"slime\",mode:\"slime\",skills:[\"splash\",\"boost\"],name:\"Slime\",baseLevel:1,exp:100,gold:10,drops:[[\"slime_ball\",1e3,2,5]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. They seem sentient, however not very intelligent - as though unlikely to have any particular strategy.\"}},lesser_teravalum:{stats:{base_level:2,max_health:60,atk:30,def:40,matk:30,mdef:55,speed:10,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:150,water:50,earth:50,wind:120,thunder:40,dark:100,light:100}},ai:\"lesser_teravalum\",mode:\"lesser_teravalum\",skills:[\"constrict\",\"guard\"],name:\"Lesser Teravalum\",baseLevel:1,exp:150,gold:10,drops:[[\"weak_vine\",1e3,2,5],[\"hempweed_ligament\",300,1,2],[\"vine_helmet\",200,1,1]],desc:\"A mass of tangled green vines that somehow has sentience. There is no indication of facial features or emotion, although the creature is clearly sentient. It seems suited only for constricting enemies and defending itself.\"}},grey_wolf:{stats:{base_level:3,max_health:50,atk:30,def:40,matk:30,mdef:30,speed:45,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:80,wind:100,thunder:100,dark:100,light:100}},ai:\"grey_wolf\",mode:\"grey_wolf\",skills:[\"attack\",\"boost\",\"rend\"],name:\"Grey Wolf\",baseLevel:1,exp:200,gold:15,drops:[[\"grey_wolf_pelt\",500,3,6],[\"sharp_claw\",200,1,2]],desc:\"A wolf with bristling grey fur. Despite its aggression, the wolf has a sort of rough beauty about it. It's rugged nature almost implies that it would grow stronger as its situation becomes more dire. Seems to attack indiscriminately.\"}},brown_bear:{stats:{base_level:4,max_health:70,atk:40,def:40,matk:40,mdef:40,speed:30,crit_chance:.25,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:120,water:90,earth:75,wind:105,thunder:105,dark:100,light:100}},ai:\"brown_bear\",mode:\"brown_bear\",skills:[\"attack\",\"rend\"],name:\"Brown Bear\",baseLevel:4,exp:250,gold:20,drops:[[\"brown_fur\",1e3,1,7],[\"sharp_claw\",300,1,2]],desc:\"A simple-looking (or as simple looking as they come) brown bear. It has a somewhat calm demeanour but clearly does not appreciate your presence. Even when on all fours it is taller than you, and when it jumps up to deliver a powerful blow, its stature has an effect comparable to blotting out the sun. It seems to only have the energy to do this occasionally, however.\"}},lesser_treant:{stats:{base_level:7,max_health:200,atk:45,def:45,matk:50,mdef:50,speed:20,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:25,evasion:0,max_mana:50,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:140,water:70,earth:40,wind:115,thunder:90,dark:100,light:100}},ai:\"lesser_treant\",mode:\"lesser_treant\",skills:[\"attack\",\"constrict\"],name:\"Lesser Treant\",baseLevel:4,exp:450,gold:50,drops:[[\"wood\",500,2,3],[\"magic_bark\",450,1,2],[\"special_sap\",250,1,2],[\"magic_bark\",1e3,1,2],[\"special_sap\",1e3,1,1]],desc:\"A fairly large tree. It isn't really mobile, but is capable of moving it's branches around like appendages. It has a semblance of a face, with grooves resembling eyes and a mouth that move about arthritically, but no actual facial features. It seems to be of moderate intelligence, but not much useful information can be gleaned from its appearance.\"}},treant:{stats:{base_level:12,max_health:400,atk:65,def:80,matk:65,mdef:80,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:25,resistance:40,evasion:0,max_mana:75,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:75,fire:130,water:60,earth:30,wind:105,thunder:80,dark:90,light:105}},ai:\"treant\",mode:\"treant\",skills:[\"attack\",\"constrict\",\"forest_curse\"],name:\"Treant\",baseLevel:4,exp:700,gold:85,drops:[[\"wood\",500,5,7],[\"magic_bark\",450,3,4],[\"special_sap\",250,3,4],[\"magic_bark\",1e3,3,4],[\"special_sap\",1e3,2,4]],desc:\"A fairly large tree. It isn't really mobile, but is capable of moving it's branches around like appendages. It has a semblance of a face, with grooves resembling eyes and a mouth that move about eloquently, but no actual facial features. It seems to be of moderate intelligence, but not much useful information can be gleaned from its appearance. It radiates an energy that is at once sinister and serene.\"}},lesser_ent:{stats:{base_level:17,max_health:650,atk:80,def:100,matk:80,mdef:120,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:40,resistance:60,evasion:0,max_mana:120,max_stamina:200,max_sp:100,elemental:{offence:{none:100,physical:110,fire:100,water:100,earth:125,wind:100,thunder:100,dark:110,light:100},defence:{none:100,physical:65,fire:120,water:60,earth:20,wind:100,thunder:70,dark:80,light:105}},ai:\"lesser_ent\",mode:\"lesser_ent\",passedThresholds:[],skills:[\"constrict\",\"forest_curse\"],name:\"Lesser Ent\",baseLevel:4,exp:1e3,gold:120,drops:[[\"wood\",500,10,15],[\"magic_bark\",650,6,8],[\"special_sap\",500,6,9],[\"magic_bark\",1e3,6,8],[\"special_sap\",1e3,4,8]],desc:\"A large tree. Unlike other trees and treants, this tree has a venerate aura about it. It's attacks are almost absentminded, as though it is focusing on something else completely, and yet they are still so dangerous. Its facial features are equally indescriptive as other treefolk, however here they are also faded and more immobile. The almost automatic defences it puts up makes you wonder if it has some pre-prepared responses to certain scenarios or danger levels.\"}},young_venomous_wolf:{stats:{base_level:7,max_health:85,atk:40,def:50,matk:40,mdef:55,speed:65,crit_chance:.3,crit_damage:1.25,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"young_venomous_wolf\",mode:\"young_venomous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Young Venemous Wolf\",exp:300,gold:20,drops:[[\"sharp_claw\",500,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build with a similarly rugged appearence. although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately. Due to its youth, it seems unlikely that it would be possible to glean any of its venom.\"}},wayward_traveler:{stats:{max_health:500,base_level:10,atk:65,def:55,matk:50,mdef:60,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:10,resistance:10,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{physical:80,fire:110,water:110,earth:110,wind:110,thunder:110,dark:110,light:110}},ai:\"wayward_traveler\",mode:\"wayward_traveler\",skills:[\"attack\",\"guard_break\",\"rush_attack\",\"healing_potion\"],name:\"Wayward Traveler\",exp:500,gold:50,drops:[[\"damaged_sword\",50,1,1],[\"damaged_armour\",50,1,1],[\"damaged_pantaloons\",50,1,1],[\"damaged_helm\",50,1,1],[\"wanderer_memorabilia\",1e3,2,3]],desc:\"A traveler who seems to have lost their way. From their responsive battle style and analytic glances, you infer that they seem to have some kind of specific strategy in mind.\"}},greater_slime:{stats:{base_level:5,max_health:150,atk:60,def:60,matk:70,mdef:60,speed:22,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:70,fire:0,water:10,earth:50,wind:50,thunder:200,dark:75,light:75}},ai:\"greater_slime\",mode:\"greater_slime\",skills:[\"splash\",\"icebolt\"],name:\"Greater Slime\",exp:300,gold:15,drops:[[\"slime_ball\",1e3,5,8]],desc:\"A blue slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Generally, their disposition seems to mirror your own actions. Seems larger and more experienced(?) than most slimes.\"}},lesser_water_klastera:{stats:{base_level:6,max_health:125,atk:60,def:70,matk:70,mdef:70,speed:25,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:50,evasion:0,max_mana:200,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:150,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:80,earth:80,wind:80,thunder:150,dark:80,light:80}},ai:\"lesser_water_klastera\",mode:\"lesser_water_klastera\",skills:[\"icebolt\",\"arcane_shield\",\"channel_health\",\"splash\"],name:\"Lesser Water Klastera\",exp:350,gold:15,drops:[[\"aquus_cluster\",500,1,3],[\"manasoul\",10,1,1],[\"water_orb\",1,1,1]],desc:\"A being comprised of only water. It's body seems to be some kind of deep blue semi-solid. It's only facial feature is white, oval eyes that convey no sense of emotion. One might infer from its formulaic structure that the same could be said about its battle style.\"}},young_water_lizard:{stats:{base_level:7,max_health:100,atk:60,def:60,matk:40,mdef:50,speed:50,crit_chance:.3,crit_damage:1.5,effectiveness:0,resistance:0,evasion:0,max_mana:100,max_stamina:150,max_sp:100,elemental:{offence:{none:100,physical:100,fire:100,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:50,water:50,earth:100,wind:120,thunder:120,dark:100,light:100}},ai:\"young_water_lizard\",mode:\"young_water_lizard\",skills:[\"attack\",\"rush_attack\",\"camoflague\"],name:\"Young Water Lizard\",exp:400,gold:20,drops:[[\"weak_membrane\",500,1,3],[\"tiny_lizard_tail\",250,1,1],[\"light_absorbant_eye\",100,1,2]],desc:\"A relatively small reptile. It has clearly rough skin, although the abundant tiny spikes all over its body are clearly conscious designs of nature. Perhaps due to the size difference, it seems wary of any attacks.\"}},red_slime:{stats:{base_level:11,max_health:250,atk:70,def:70,matk:70,mdef:70,speed:35,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:30,evasion:0,max_mana:150,max_stamina:70,max_sp:100,elemental:{offence:{none:100,physical:100,fire:150,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:80,fire:0,water:50,earth:70,wind:70,thunder:70,dark:60,light:130}},ai:\"red_slime\",mode:\"red_slime\",skills:[\"fireball\",\"guard\",\"engulf\",\"attack\"],name:\"Red Slime\",exp:500,gold:35,drops:[[\"red_slime_ball\",1e3,5,8]],desc:\"A red slime. From their movement and feel one would assume they are amorphous but they seem to always settle upon the same semispherical form. Seems to be wary of boons you grant yourself.\"}},venomous_wolf:{stats:{base_level:14,max_health:210,atk:80,def:60,matk:70,mdef:55,speed:80,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:0,max_mana:100,max_stamina:170,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:120,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:120,water:100,earth:70,wind:100,thunder:100,dark:100,light:100}},ai:\"venemous_wolf\",mode:\"venemous_wolf\",skills:[\"attack\",\"rend\",\"rush_attack\",\"poison_claws\"],name:\"Venemous Wolf\",exp:550,gold:30,drops:[[\"sharp_claw\",500,1,2],[\"venomous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"Seems to be a similar species to grey wolves; a generally similar build, although this creature is more lean - perhaps a quality made possible by its claws dripping with poison. Seems to attack indiscrimately.\"}},dark_beast:{stats:{base_level:18,max_health:300,atk:90,def:70,matk:80,mdef:80,speed:70,crit_chance:.1,crit_damage:1.5,effectiveness:0,resistance:10,evasion:.1,max_mana:120,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:100,water:100,earth:100,wind:100,thunder:100,dark:120,light:100},defence:{none:100,physical:80,fire:100,water:100,earth:100,wind:100,thunder:100,dark:0,light:150}},ai:\"dark_beast\",mode:\"dark_beast\",skills:[\"attack\",\"rend\",\"rush_attack\",\"nox_curse\",\"dark_howl\",\"hex\"],name:\"Dark Beast\",exp:800,gold:10,drops:[[\"sharp_claw\",500,1,2],[\"venemous_claw\",250,1,2],[\"grey_wolf_pelt\",1e3,2,5]],desc:\"A creature with a wolf-like structure, but with a larger upper body. It's entire body is shrouded in an oppressive mist that makes you uncomfortable. Little regarding its disposition can be inferred from its movements besides its apparent intelligence compared to its wolf 'bretheren'.\"}},flame_minotaur:{stats:{base_level:30,max_health:5e3,atk:110,def:80,matk:80,mdef:80,speed:65,crit_chance:0,crit_damage:1.5,effectiveness:30,resistance:0,evasion:0,max_mana:100,max_stamina:100,max_sp:100,elemental:{offence:{none:100,physical:120,fire:120,water:100,earth:100,wind:100,thunder:100,dark:100,light:100},defence:{none:100,physical:100,fire:0,water:130,earth:90,wind:120,thunder:80,dark:110,light:90}},ai:\"flame_minotaur\",mode:\"flame_minotaur\",mode2:\"phase one\",skills:[\"boar_strike\",\"boar_rush\",\"flame_impact\",\"ignis_destroyer\",\"boar_haste\",\"engulf\",\"true_cleanse\"],name:\"Flame Minotaur\",exp:5e3,gold:2500,drops:[[\"flamme_kaiser\",1e3,1,1]],desc:\"A tall beast of extremely muscular built. It is difficult to fully appreciate the stature of the minotaur, as it is several times taller than you. However you can feel it's scorching breath, and see it's giant, rune-encrusted axe. Nothing can about it's mannerisms can be inferred from its appearance besides its great power.\"}}},F={slime:()=>{const e=Ze.getEnemy();1==Ze.turn&&0==e.actionsTaken?We.monster_soul.use(e,Ze.getPlayer(),\"enemy\"):Ve(e,e.skills)},grey_wolf:()=>{const e=Ze.getEnemy();1==Ze.turn&&0==e.actionsTaken?We.wolven_soul.use(e,Ze.getPlayer(),\"enemy\"):Ve(e,e.skills)},brown_bear:()=>{const e=Ze.getEnemy();1==Ze.turn&&0==e.actionsTaken?We.monster_soul.use(e,Ze.getPlayer(),\"enemy\"):1==We.boost.cost(e,Ze.getPlayer())?We.boost.use(e,Ze.getPlayer(),\"enemy\"):Ze.turn%3==0&&1==We.brutal_swipe.cost(e,Ze.getPlayer())?We.brutal_swipe.use(e,Ze.getPlayer(),\"enemy\"):Ve(e,e.skills)},lesser_treant:()=>{const e=Ze.getEnemy(),a=e.modeBattle;if(1==Ze.turn&&0==e.actionsTaken)We.kindred_soul.use(e,Ze.getPlayer(),\"enemy\");else if(\"anima bark\"==a)We.anima_bark.use(e,Ze.getPlayer(),\"enemy\");else if(\"heal\"==a){Math.floor(100*Math.random())+1<=75&&1==We.nature_healing.cost(e,Ze.getPlayer())?We.nature_healing.use(e,Ze.getPlayer(),\"enemy\"):Ve(e,e.skills)}else Ve(e,e.skills)},treant:()=>{const e=Ze.getEnemy(),a=e.modeBattle;if(1==Ze.turn&&0==e.actionsTaken)We.anima_soul.use(e,Ze.getPlayer(),\"enemy\");else if(1==We.boost.cost(e,Ze.getPlayer()))We.boost.use(e,Ze.getPlayer(),\"enemy\");else if(\"anima bark\"==a)We.anima_bark.use(e,Ze.getPlayer(),\"enemy\");else if(\"heal\"==a){Math.floor(100*Math.random())+1<=75&&1==We.lesser_anima_healing.cost(e,Ze.getPlayer())?We.lesser_anima_healing.use(e,Ze.getPlayer(),\"enemy\"):Ve(e,e.skills)}else Ve(e,e.skills)},lesser_ent:()=>{const e=Ze.getEnemy(),a=e.modeBattle;if(console.log(`MODE IF ${a}`),1==Ze.turn&&0==e.actionsTaken)We.anima_soul.use(e,Ze.getPlayer(),\"enemy\");else if(1==We.boost.cost(e,Ze.getPlayer()))We.boost.use(e,Ze.getPlayer(),\"enemy\");else if(\"anima bark\"==a)We.anima_bark.use(e,Ze.getPlayer(),\"enemy\");else if(\"greater anima bark\"==a)We.greater_anima_bark.use(e,Ze.getPlayer(),\"enemy\");else if(\"threshold-one\"==a)console.log(\"THRESHOLD ONE REACHED\"),e.passedThresholds.push(\"one\"),We.forest_rupture.use(e,Ze.getPlayer(),\"enemy\");else if(\"threshold-three\"==a)e.passedThresholds.push(\"three\"),We.forest_rupture.use(e,Ze.getPlayer(),\"enemy\");else if(\"threshold-two\"==a)e.passedThresholds.push(\"two\"),We.forest_rupture.use(e,Ze.getPlayer(),\"enemy\");else if(\"heal\"==a){Math.floor(100*Math.random())+1<=75&&1==We.lesser_anima_healing.cost(e,Ze.getPlayer())?We.lesser_anima_healing.use(e,Ze.getPlayer(),\"enemy\"):1==We.constrict.cost(e,Ze.getPlayer())&&We.forest_curse.cost(e,1==Ze.getPlayer())?Ve(e,e.skills):We.guard.use(e,Ze.getPlayer(),\"enemy\")}else 1==We.constrict.cost(e,Ze.getPlayer())&&We.forest_curse.cost(e,1==Ze.getPlayer())?Ve(e,e.skills):We.guard.use(e,Ze.getPlayer(),\"enemy\")},wayward_traveler:()=>{const e=Ze.getEnemy().modeBattle;console.log(\"this was called\"),console.log(e),\"wary\"==e?We.health_potion.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):\"desperate\"==e||\"allout\"==e?1==We.rush_attack.cost(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()))?We.rush_attack.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.attack.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):\"preparing\"==e&&(1==We.guard_break.cost(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()))?We.guard_break.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.attack.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"))},greater_slime:()=>{const e=Ze.getEnemy().modeBattle;if(\"aggressive\"==e){1==Math.round(2*(Math.random()+.1))?We.splash.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.icebolt.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\")}else if(\"defensive\"==e)We.guard.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\");else{const e=Math.round(3*(Math.random()+.1));1==e?We.guard.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.splash.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\")}},lesser_water_klastera:()=>{const e=Ze.getEnemy(),a=e.modeBattle;\"normal\"==a?1==We.icebolt.cost(e)?We.icebolt.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.splash.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):\"heal\"==a?1==We.channel_health.cost(e)?We.channel_health.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.splash.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):\"arcane\"==a&&(1==We.arcane_shield.cost(e)?We.arcane_shield.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.splash.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"))},young_water_lizard:()=>{const e=Ze.getEnemy(),a=Ze.getPlayerAdd(Ze.getPlayer());if(\"cautious\"==e.modeBattle&&1==We.camoflague.cost(e,a)&&0==Ze.checkStacks(e.buffs,\"camoflague\"))We.camoflague.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\");else{1==Math.round(3*Math.random()+1)&&1==We.rush_attack.cost(e,a)?We.rush_attack.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.attack.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\")}},red_slime:()=>{const e=Ze.getEnemy(),a=Ze.getEnemy().modeBattle,t=Je(Ze.getPlayer().buffs);console.log(`PLAYERBUFFCOUNT ${t}`),\"normal\"==a&&(0==e.actionsTaken&&1==We.engulf.cost(e)&&t>1?We.engulf.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):1==We.fireball.cost(e)?We.fireball.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):We.attack.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"))},venomous_wolf:()=>{const e=Ze.getEnemy(),a=Ze.getPlayer(),t=He(e.skills);1==Ze.checkStacks(a.debuffs,\"bleed\")&&t.splice(t.indexOf(\"rend\"),1),1==Ze.checkStacks(a.debuffs,\"viridian toxin\")&&t.splice(t.indexOf(\"poison_claws\"),1),Ve(e,t)},young_venomous_wolf:()=>{const e=Ze.getEnemy(),a=Ze.getPlayer(),t=He(e.skills);1==Ze.checkStacks(a.debuffs,\"bleed\")&&t.splice(t.indexOf(\"rend\"),1),1==Ze.checkStacks(a.debuffs,\"viridian toxin\")&&t.splice(t.indexOf(\"poison_claws\"),1),1==Ze.turn&&0==e.actionsTaken?We.wolven_soul.use(e,Ze.getPlayer(),\"enemy\"):Ve(e,t)},dark_beast:()=>{const e=Ze.getEnemy(),a=e.modeBattle;\"dark pact\"==a&&1==We.dark_pact.cost(e)?We.dark_pact.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):\"hex\"==a&&1==We.hex.cost(e)?We.hex.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):\"nox curse\"==a&&1==We.nox_curse.cost(e)?We.nox_curse.use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):Ve(e,[\"rend\",\"attack\",\"dark_howl\"])},flame_minotaur:()=>{const e=Ze.getEnemy(),a=e.modeBattle;\"normal\"!=a?We[a].use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\"):Ve(e,[\"boar_strike\",\"boar_rush\"])},lesser_teravalum:()=>{const e=Ze.getEnemy(),a=e.modeBattle;1==Ze.turn&&0==e.actionsTaken?We.kindred_soul.use(e,Ze.getPlayer(),\"enemy\"):\"normal\"!=a&&We[a].use(Ze.getEnemy(),Ze.getPlayerAdd(Ze.getPlayer()),\"enemy\")}},H={slime:(e,a,t,n)=>{n()},grey_wolf:(e,a,t,n)=>{n()},brown_bear:(e,a,t,n)=>{n()},lesser_treant:(e,a,t,n)=>{console.log(\"mode called\");const s=Ze.checkStacks(t.buffs,\"anima bark\");t.health<=.3*t.max_health&&0==s?(t.modeBattle=\"anima bark\",$([[`<br>${t.name} feels mystical energy welling within..`,1]],\"battle\",n)):t.health<=t.max_health/2?(t.modeBattle=\"heal\",$([[`<br>${t.name} is wary of their condition..`,1]],\"battle\",n)):(t.modeBattle=\"normal\",n())},treant:(e,a,t,n)=>{console.log(\"mode called\");const s=Ze.checkStacks(t.buffs,\"anima bark\");t.health<=.3*t.max_health&&0==s?(t.modeBattle=\"anima bark\",$([[`<br>${t.name} feels mystical energy welling within..`,1]],\"battle\",n)):t.health<=t.max_health/2?(t.modeBattle=\"heal\",$([[`<br>${t.name} is wary of their condition..`,1]],\"battle\",n)):(t.modeBattle=\"normal\",n())},lesser_ent:(e,a,t,n)=>{console.log(\"mode called\");const s=Ze.checkStacks(t.buffs,\"anima bark\"),o=Ze.checkStacks(t.buffs,\"greater anima bark\");console.log(`INDEX OF ${t.passedThresholds.indexOf(\"one\")}`),console.log(t.health),console.log(.8*t.max_health),console.log(t.health<=.8*t.max_health),console.log(-1==t.passedThresholds.indexOf(\"one\")),t.health<=.8*t.max_health&&-1==t.passedThresholds.indexOf(\"one\")?(t.modeBattle=\"threshold-one\",n()):t.health<=.5*t.max_health&&-1==t.passedThresholds.indexOf(\"two\")?(t.modeBattle=\"threshold-two\",n()):t.health<=.2*t.max_health&&-1==t.passedThresholds.indexOf(\"three\")?(t.modeBattle=\"threshold-three\",n()):t.health<=.4*t.max_health&&0==o?(t.modeBattle=\"greater anima bark\",$([[`<br>${t.name} feels great mystical energy welling within..`,1]],\"battle\",n)):t.health<=.6*t.max_health&&0==s?(t.modeBattle=\"anima bark\",$([[`<br>${t.name} feels mystical energy welling within..`,1]],\"battle\",n)):t.health<=.6*t.max_health?(t.modeBattle=\"heal\",$([[`<br>${t.name} is wary of their condition..`,1]],\"battle\",n)):(t.modeBattle=\"normal\",n())},wayward_traveler:(e,a,t,n)=>{const s=t.health,o=Ze.checkStacks(a.debuffs,\"guard broken\");console.log(`found ${o} guard broken stacks`),s<t.max_health/2?t.mana>30?(t.modeBattle=\"wary\",$([[`<br>${t.name} is concerned about their condition..`,1]],\"battle\",n)):(t.modeBattle=\"desperate\",$([[`<br>${t.name} is employing a last ditch attempt!`,1]],\"battle\",n)):o<3?(t.modeBattle=\"preparing\",$([[`<br>${t.name} seems to be setting something up..`,1]],\"battle\",n)):(t.modeBattle=\"allout\",$([[`<br>${t.name} is going all out!`,1]],\"battle\",n))},greater_slime:(e,a,t,n)=>{const s=e[Ze.turn-1].player;var o=!0,r=Ge(s,\"guard\"),l=Ue(s);console.log(\"logging player damage\"),console.log(l),l.forEach(e=>{e<1&&(o=!1)}),r>0?(t.modeBattle=\"defensive\",$([[`<br>${t.name} eyes ${a.name} cautiously...`,1]],\"battle\",n)):o?(t.modeBattle=\"aggressive\",$([[`<br>${t.name} assumes an aggressive stance!`,1]],\"battle\",n)):(t.modeBattle=\"normal\",$([[`<br>${t.name} assumes a normal stance.`,1]],\"battle\",n))},lesser_water_klastera:(e,a,t,n)=>{var s=Ze.checkStacks(t.buffs,\"arcane protection\"),o=0;null!=e[Ze.turn-1].enemy&&(o=Ge(e[Ze.turn-1].enemy,\"channel_health\")),0==s?(t.modeBattle=\"arcane\",$([[`<br>${t.name} would like to enhance themselves with magic...`,1]],\"battle\",n)):Ze.turn%3==0&&0==o?(t.modeBattle=\"heal\",$([[`<br>${t.name} would like to heal..`,1]],\"battle\",n)):(t.modeBattle=\"normal\",$([[`<br>${t.name} has no particular desire.`,1]],\"battle\",n))},young_water_lizard:(e,a,t,n)=>{0==Ge(e[Ze.turn-1].player,\"guard\")?(t.modeBattle=\"cautious\",$([[`<br>${t.name} feels uncomfortable...`,1]],\"battle\",n)):(t.modeBattle=\"normal\",$([[`<br>${t.name} seems to be feeling normal.`,1]],\"battle\",n))},red_slime:(e,a,t,n)=>{t.modeBattle=\"normal\",n()},venemous_wolf:(e,a,t,n)=>{n()},young_venemous_wolf:(e,a,t,n)=>{n()},dark_beast:(e,a,t,n)=>{const s=Ze.checkStacks(t.buffs,\"ATK up\"),o=Ze.checkStacks(t.buffs,\"MATK up\"),r=Ze.checkStacks(t.buffs,\"SPEED up\"),l=Ze.checkStacks(a.debuffs,\"hexed\"),i=Ke(a.debuffs);s<3&&o<3&&r<3?(t.modeBattle=\"dark pact\",$([[`<br>${t.name} eyes ${a.name} with a slight glare.`,1]],\"battle\",n)):0==l?(t.modeBattle=\"hex\",$([[`<br>${t.name} eyes ${a.name} with a malicious glare.`,1]],\"battle\",n)):i-Ze.checkStacks(a.debuffs,\"nox curse\")>1?(t.modeBattle=\"nox curse\",$([[`<br>${t.name} eyes ${a.name} with a malevolent glare.`,1]],\"battle\",n)):(t.modeBattle=\"normal\",$([[`<br>${t.name} eyes ${a.name} with a dry glare.`,1]],\"battle\",n))},flame_minotaur:(e,a,t,n)=>{const s=Ze.turn,o=Je(t.debuffs),r=Je(a.buffs),l=Ze.checkStacks(t.buffs,\"boar haste\");var i=t.mode2,c=5;\"phase two\"==i&&(c=3),t.health<t.max_health/2&&\"phase one\"==i&&(v('<span style=\"color:red\"><b>The minotaur grows evermore furious..</span></b>'),t.mode2=\"phase two\",i=\"phase two\"),\"phase two\"==i&&0==l?(t.modeBattle=\"boar_haste\",n()):s%c==0?(t.modeBattle=\"ignis_destroyer\",n()):1==We.flare_impact.cost(t)?(t.modeBattle=\"flare_impact\",n()):o>2?1==We.true_cleanse.cost(t)?(t.modeBattle=\"true_cleanse\",n()):(t.modeBattle=\"ignis_destroyer\",n()):r>2?1==We.engulf.cost(t)?(t.modeBattle=\"engulf\",n()):(t.modeBattle=\"ignis_destroyer\",n()):(t.modeBattle=\"normal\",n())},lesser_teravalum:(e,a,t,n)=>{1==We.constrict.cost(t)?(t.modeBattle=\"constrict\",$([[`<br>${t.name} is in the mood to constrict..`,1]],\"battle\",n)):(t.modeBattle=\"guard\",$([[`<br>${t.name} assumes a defensive stance.`,1]],\"battle\",n))}};t(0),t(1);const Y=(e,a)=>{z.currentShop=W[e],z.returnFunction=a,n.first_time.shop&&(n.first_time.shop=!1,v(w.shopIntroduction)),z.shopLoop()},N={1:\"f1_shop\"},W=Object.assign({f1_shop:{name:\"Floor one shop\",items:[[\"special_armband\",500],[\"health_potion\",15],[\"greater_health_potion\",50],[\"mana_potion\",15],[\"greater_mana_potion\",50],[\"wood\",20]]},old_man:{name:\"Old man's teeth\",items:[[\"old_man_yellow_tooth\",6e3],[\"old_man_white_tooth\",1200]]},f1_docile_slime_shop:{name:\"Docile slime's shop\",items:[[\"water_energy\",100]]},f1_old_man:{name:\"Old man's shop\",items:[[\"fishing_rod\",100],[\"fishers_lucky_charm\",250]]},f1_weak_weapons:{name:\"Weapons shop\",items:[[\"simple_sword\",100],[\"silver_axe\",400],[\"metal_stave\",120],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"magisteel_stave\",500],[\"thunder_rod\",500]]},f1_strong_weapons:{name:\"Advanced Weapons shop\",items:[[\"crafted_blade\",1e3],[\"crafted_dagger\",1e3],[\"reinforced_silver_axe\",1200],[\"sharpened_sword\",400],[\"simple_dagger\",100],[\"runeblade\",500],[\"runic_dagger\",500],[\"silver_shield\",400],[\"enchanted_magisteel_stave\",1400],[\"conduit_orb\",800],[\"magisteel_runic_dagger\",1200]]},f1_weak_armours:{name:\"Armour shop\",items:[[\"silver_helm\",200],[\"silver_armour\",200],[\"silver_legwear\",200],[\"advanced_silver_helm\",320],[\"advanced_silver_armour\",320],[\"advanced_silver_legwear\",320],[\"wizard_headband\",280],[\"light_wizard_robes\",280],[\"light_wizard_leggings\",280],[\"enchanted_wooden_helm\",350]]},f1_strong_armours:{name:\"Advanced armour shop\",items:[[\"silver_knight_helm\",600],[\"silver_knight_armour\",600],[\"silver_knight_legwear\",600],[\"ninja_wrap\",360],[\"ninja_garb\",360],[\"ninja_legwear\",360],[\"tattered_magus_robes\",600]]},f1_misc:{name:\"Misc shop\",items:[[\"steel\",40],[\"leather\",36],[\"wood\",15],[\"water_rune\",200],[\"vip_card\",400],[\"f1_settlement_teleportation_stone\",20]]},f1_misc_vip:{name:\"VIP Misc shop\",items:[[\"steel\",25],[\"leather\",24],[\"wood\",10]]}}),z={currentItem:void 0,currentShop:void 0,returnFunction:void 0,mode:void 0,price:void 0,menuOptions:void 0,shopLoop:(e=!0)=>{const a=z.currentShop;v(`${y}Currently shopping at ${a.name}`),v(\"Wares available:\"),a.items.forEach(e=>{const t=a.items.findIndex(a=>a[0]==e[0]);v(`${t+1} - ${M[e[0]].name} - ${e[1]}G`)}),v(\"Type the name/number of an item to buy it, or type 's'/'sell' to enter sell mode.\"),S(z.shopResponse)},shopResponse:()=>{P(z.shopResponse);const e=z.currentShop,a=x().toLowerCase();var t=null!=e.items[a-1]?parseInt(a)-1:-1;if(-1==t&&(t=e.items.findIndex(e=>a==M[e[0]].name.toLowerCase())),-1!=t){const a=e.items[t];v(`${y}${M[a[0]].name} selected.`),L(M[a[0]]),v(\"<br>Type 'b' or 'buy to buy it. Otherwise, type anything else to return.\"),z.currentItem=a,z.mode=\"buy\",A([\"buy\"]),S(z.itemMenu)}else\"sell\"==a||\"s\"==a?(z.mode=\"sell\",v(`${y}Entering sell mode..`),z.sellLoop()):\"back\"==a||\"b\"==a?(v(`${y}Returning...`),z.returnFunction()):(v(\"<br>Invalid input.\"),S(z.shopResponse))},sellLoop:(e=!0)=>{const a=n.player;v(`${y}Currently in sell mode. Type the name/number of an item in the inventory to see\\n        its details and sell it. Type 'b'/'back' to exit sell mode.`),v(\"<br>Inventory:\");var t=[];a.inventory.forEach(e=>{q(e)?t.push(e):t.includes(e)||t.push(e)}),e&&t.forEach((e,t)=>{var n,s;q(e)?(n=M[e[0]],s=e[0]):\"nothing\"==e||(n=M[e],s=e),v(`${t+1} - ${n.name} (x${Re(s,a.inventory)}) - ${n.sell_value}${\"unsellable\"==n.sell_value?\"\":\"G\"}`)}),z.menuOptions=t,S(z.sellResponse)},sellResponse:()=>{P(z.sellResponse);const e=x().toLowerCase(),a=z.menuOptions;var t=-1;\"NaN\"!=parseInt(e).toString()?a.length>=parseInt(e)?(v(`<br>${M[D(a[parseInt(e-1)])].name} selected.`),t=e-1):v(\"<br>Number out of range.\"):(a.forEach((a,n)=>{q(a)?M[a[0]].name.toLowerCase()==e&&(t=n):M[a].name.toLowerCase()==e&&(t=n)}),-1!=t&&v(`<br>${M[a[parseInt(t)].name]} selected.`)),-1!=t?(L(M[D(a[t])]),z.currentItem=a[t],\"unsellable\"!=M[D(a[t])].sell_value?(v(`${y}If you would like to sell this item, type 's'/'sell'. Otherwise, type anything else to return.`),S(z.itemMenu)):(v(\"This item cannot be sold.\"),z.sellLoop())):\"b\"==e||\"back\"==e?(v(`${y}Returning...`),z.shopLoop()):(v(\"<br>Invalid input.\"),S(z.sellResponse))},itemMenu:()=>{P(z.itemMenu);z.currentShop;const e=x().toLowerCase();var a=\"none\";\"b\"==e||\"buy\"==e?a=\"buy\":\"s\"!=e&&\"sell\"!=e||(a=\"sell\"),a==z.mode?(v(\"buy\"==a?`${y}How many would you like to buy? (Please type a numerical integer value`+\", or type '0' to return)\":`${y}<br>How many would you like to sell? (Please type a numerical integer value`+\", or type '0' to return\"),S(z.itemConfirmation)):(v(`${y}Returning...`),\"buy\"==z.mode?z.shopLoop():z.sellLoop())},itemConfirmation:()=>{P(z.itemConfirmation);z.currentShop;const e=x().toLowerCase();var a=!1;if(\"NaN\"!=parseInt(e).toString())if(parseInt(e)>0&&\"buy\"==z.mode){const t=parseInt(e),n=t*z.currentItem[1];v(`${y}buying ${t} ${M[z.currentItem[0]].name}${t>1?\"s\":\"\"} will cost`+` ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),z.price=n,S(z.itemTransaction),a=!0}else if(parseInt(e)>0&&\"sell\"==z.mode){const s=parseInt(e);var t,n;q(z.currentItem)?(n=s*M[z.currentItem[0]].sell_value,t=M[z.currentItem[0]].name):(n=s*M[z.currentItem].sell_value,t=M[z.currentItem].name),v(`${y}${s} ${t}${s>1?\"s\":\"\"} will sell for\\n                ${n}G. Are you sure? Type 'y' or 'yes' to confirm, or anything else to return.`),z.price=n,S(z.itemTransaction),a=!0}else 0==parseInt(e)&&(v(`${y}Returning..`),a=!0,\"buy\"==z.mode?z.shopLoop():z.sellLoop());0==a&&(v(\"<br>Invalid input\"),S(z.itemConfirmation))},itemTransaction:()=>{P(z.itemTransaction);z.currentShop;const e=x().toLowerCase(),a=n.player,t=z.price;if(\"y\"==e||\"yes\"==e)if(\"buy\"==z.mode)if(a.gold>=t){a.gold-=t;const e=t/z.currentItem[1];v(`${y}Purchasing...`),E(z.currentItem[0],e,e),v(\"Returning...\"),z.shopLoop()}else v(\"<br>Too expensive!\"),z.shopLoop();else{const e=z.currentItem,n=a.inventory;if((q(e)?Re(e[0],n):Re(e,n))>=t/M[D(z.currentItem)].sell_value){a.gold+=t;const e=t/M[D(z.currentItem)].sell_value;B(D(z.currentItem),e),v(`${y}Selling..`),v(\"<br>Returning...\"),z.sellLoop()}else v(`${y}Not enough of the item in the inventory!`),z.sellLoop()}else v(\"<br>Returning..\"),\"buy\"==z.mode?z.shopLoop():z.sellLoop();Ce(n.player)}},G={wooden_sword:{name:\"Wooden sword\",item:\"wooden_sword\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",2]]},vine_wrapped_wooden_sword:{name:\"Vine wrapped wooden sword\",item:\"vine_wrapped_wooden_sword\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"wooden_sword\",1],[\"weak_vine\",6]]},wooden_stave:{name:\"Wooden stave\",item:\"wooden_stave\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",2]]},vine_wrapped_wooden_stave:{name:\"Vine wrapped wooden stave\",item:\"vine_wrapped_wooden_stave\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"wooden_stave\",1],[\"weak_vine\",6]]},vine_armour:{name:\"Vine armour\",item:\"vine_armour\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",12]]},strong_vine_chestplate:{name:\"Vine chestplate\",item:\"vine_chestplate\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"vine_armour\",1],[\"weak_vine\",3],[\"hempwood_ligament\",3]]},vine_pantaloons:{name:\"Vine pantaloons\",item:\"vine_pantaloons\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"weak_vine\",8]]},feathervine_sword:{name:\"Feathervine sword\",item:\"feathervine_sword\",description:\"Allows for the crafting of an item.\",gold:25,items:[[\"wood\",3],[\"grey_wolf_pelt\",10],[\"weak_vine\",7]]},wolf_hermit_staff:{name:\"Wolf hermit staff\",item:\"wolf_hermit_staff\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"wooden_stave\",1],[\"grey_wolf_pelt\",10],[\"sharp_claw\",2]]},wooden_armour:{name:\"Wooden armour\",item:\"wooden_armour\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",4]]},wooden_trousers:{name:\"Wooden trousers\",item:\"wooden_trousers\",description:\"Allows for the crafting of an item.\",gold:0,items:[[\"wood\",3]]},vine_membrane_bracers:{name:\"Vine membrane bracers\",item:\"vine_membrane_bracers\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"hempweed_ligament\",4],[\"weak_vine\",10]]},blue_vine_charm:{name:\"Blue vine charm\",item:\"blue_vine_charm\",description:\"Allows for the crafting of an item.\",gold:35,items:[[\"slime_ball\",15],[\"hempweed_ligament\",4],[\"weak_vine\",8]]},wolfhide_armour:{name:\"Wolfhide armour\",item:\"wolfhide_armour\",description:\"Allows for the crafting of an item.\",gold:40,items:[[\"grey_wolf_pelt\",10],[\"leather\",1]]},wolfhide_cap:{name:\"Wolfhide cap\",item:\"wolfhide_cap\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",7],[\"leather\",1]]},wolfhide_leggings:{name:\"Wolfhide leggings\",item:\"wolfhide_leggings\",description:\"Allows for the crafting of an item.\",gold:30,items:[[\"grey_wolf_pelt\",8],[\"leather\",1]]},slime_bracers:{name:\"Slime bracers\",item:\"slime_bracers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"slime_ball\",10],[\"steel\",1]]},slime_reinforced_sword:{name:\"Slime reinforced sword\",item:\"slime_reinforced_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"slime_ball\",10],[\"simple_sword\",1]]},wolfhide_charm:{name:\"Wolfhide charm\",item:\"wolfhide_charm\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"sharp_claw\",2],[\"grey_wolf_pelt\",8]]},lizard_bracelet:{name:\"Lizard bracelet\",item:\"lizard_bracelet\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"tiny_lizard_tail\",2],[\"leather\",3]]},aquus_orb:{name:\"Aquus orb\",item:\"aquus_orb\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5]]},water_infused_armour:{name:\"Water infused armour\",item:\"water_infused_armour\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",5],[\"advanced_silver_armour\",1]]},water_infused_helm:{name:\"Water infused helm\",item:\"water_infused_helm\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",3],[\"advanced_silver_helm\",1]]},water_infused_legwear:{name:\"Water infused legwear\",item:\"water_infused_legwear\",description:\"Allows for the crafting of an item.\",gold:100,items:[[\"aquus_cluster\",4],[\"advanced_silver_helm\",1]]},luminant_charm:{name:\"Luminant charm\",item:\"luminant_charm\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"steel\",2],[\"leather\",2],[\"light_absorbant_eye\",1]]},wolfhide_dagger:{name:\"Wolfhide dagger\",item:\"wolfhide_dagger\",description:\"Allows for the crafting of an item.\",gold:20,items:[[\"simple_dagger\",1],[\"grey_wolf_pelt\",8]]},pickaxe:{name:\"Pickaxe\",item:\"pickaxe\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"wood\",1]]},makeshift_steel_armour:{name:\"Makeshift steel armour\",item:\"makeshift_steel_armour\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_steel_helm:{name:\"Makeshift steel helm\",item:\"makeshift_steel_helm\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",2]]},makeshift_steel_legwear:{name:\"Makeshift steel legwear\",item:\"makeshift_steel_legwear\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",3]]},makeshift_sword:{name:\"Makeshift sword\",item:\"makeshift_sword\",description:\"Allows for the crafting of an item.\",gold:5,items:[[\"steel\",1],[\"leather\",1]]},wolven_reavers:{name:\"Wolven reavers\",item:\"wolven_reavers\",description:\"Allows for the crafting of an item.\",gold:15,items:[[\"leather\",1],[\"sharp_claw\",3],[\"grey_wolf_pelt\",3]]},bladed_armour:{name:\"Bladed armour\",item:\"bladed_armour\",description:\"Allows for the crafting of an item.\",gold:50,items:[[\"makeshift_steel_armour\",1],[\"sharp_claw\",4]]},friendly_greater_slime:{name:\"Friendly greater slime\",item:\"friendly_greater_slime\",description:\"Strengthen your slime buddy!\",gold:0,items:[[\"friendly_slime\",1],[\"water_rune\",1],[\"water_energy\",1],[\"slime_bracers\",1]]},crafted_health_potion:{name:\"Crafted health potion\",item:\"crafted_health_potion\",description:\"Allows for the crafting of an item.\",gold:10,items:[[\"greater_health_potion\",1],[\"health_potion\",1],[\"slime_ball\",3]]},tear_of_lucia:{name:\"Tear of Lucia\",item:\"tear_of_lucia\",description:\"Allows for the crafting of an item.\",gold:500,items:[[\"steel\",4],[\"conduit_orb\",1],[\"manasoul\",1]]},shadow_cloak:{name:\"Shadow cloak\",item:\"shadow_cloak\",description:\"Allows for the crafting of an item.\",gold:400,items:[[\"leather\",3],[\"shadow_pelt\",8],[\"shadow_corona\",1],[\"grey_wolf_pelt\",15]]},earthen_sword:{name:\"Earthen sword\",item:\"earthen_sword\",description:\"Allows for the crafting of an item.\",gold:220,items:[[\"sharpened_sword\",1],[\"venomous_claw\",4],[\"sharp_claw\",3],[\"steel\",3]]},red_slime_bracers:{name:\"Red slime bracers\",item:\"red_slime_bracers\",description:\"Allows for the crafting of an item.\",gold:150,items:[[\"red_slime_ball\",10],[\"steel\",2]]},shinobi_armour:{name:\"Shinobi armour\",item:\"shinobi_armour\",description:\"Allows for the crafting of an item.\",gold:300,items:[[\"ninja_garb\",1],[\"grey_wolf_pelt\",10],[\"shadow_pelt\",5]]},shinobi_headcloak:{name:\"Shinobi headcloak\",item:\"shinobi_headcloak\",description:\"Allows for the crafting of an item.\",gold:250,items:[[\"ninja_wrap\",1],[\"grey_wolf_pelt\",7],[\"shadow_pelt\",3]]},shinobi_leggings:{name:\"Shinobi leggings\",item:\"shinobi_leggings\",description:\"Allows for the crafting of an item.\",gold:280,items:[[\"ninja_legwear\",1],[\"grey_wolf_pelt\",8],[\"shadow_pelt\",4]]},water_orb_necklace:{name:\"Water orb necklace\",item:\"water_orb_necklace\",description:\"Allows for the crafting of an item.\",gold:200,items:[[\"water_orb\",1],[\"steel\",5],[\"aquus_cluster\",12]]}},U=e=>{J.returnFunction=e,n.first_time.crafting&&(n.first_time.crafting=!1,v(w.craftingIntroduction)),J.recipesLoop()},J={currentRecipe:void 0,recipesArray:void 0,returnFunction:void 0,recipesLoop:(e=!0)=>{e&&v(`${y}Currently in the recipes menu. Input 'a' to see them all in alphabetical order, `+\"or input 'r' to see first all recipes that can be crafted.\"),A([\"alphabetical\",\"gold\",\"ready\",\"back\"]),S(J.displayRecipes)},displayRecipes:()=>{const e=x().toLowerCase();P(J.displayRecipes);var a=n.player.recipes.map(e=>G[e]);const t=[\"0\",\"1\",\"2\",\"3\",\"4\",\"5\",\"6\",\"7\",\"8\",\"9\",\"a\",\"b\",\"c\",\"d\",\"e\",\"f\",\"g\",\"h\",\"i\",\"j\",\"k\",\"l\",\"m\",\"n\",\"o\",\"p\",\"q\",\"r\",\"s\",\"t\",\"u\",\"v\",\"w\",\"x\",\"y\",\"z\"];var s=!1;switch(e){case\"alphabetical\":case\"a\":s=!0;for(var o=0;o<a.length;o++)for(var r=1;r<a.length;r++)for(var l=!1,i=0;0==l;){const e=t.indexOf(a[r].name[i].toLowerCase()),n=t.indexOf(a[r-1].name[i].toLowerCase());if(e<n){const e=a[r];a[r]=a[r-1],a[r-1]=e,l=!0}else e>n?l=!0:i+1>=a[r].name.length||i+1>=a[r-1].name.length?l=!0:i++}break;case\"ready\":case\"r\":s=!0;var c=0;for(o=1;o<a.length;o++)if(J.checkReady(a[o],inventory)){const e={...a[o]};delete a[o],a.unshift(e),o++,++c==a.length&&(o=a.length)}a=a.filter((function(e){return void 0!==e}));break;case\"back\":case\"b\":v(\"<br>Returning...\"),J.returnFunction();break;default:v(\"<br>Invalid input.\"),J.recipesLoop(!1)}if(s){J.recipesArray=a,v(`${y}Showing recipes...`),a.forEach(e=>{const t=1==J.checkReady(e,inventory)?\"[X]\":\"[ ]\";v(`${a.indexOf(e)+1} - ${e.name} (${t})`)}),v(`${y}Say the name or number of a recipe to access it. From there you can see the`+\" items and gold required, and craft the recipe if you desire as well.\");a.map(e=>e.name);S(J.recipesMenu)}},recipesMenu:()=>{P(J.recipesMenu);const e=x().toLowerCase(),a=J.recipesArray,t=parseInt(e);var n=!1;\"NaN\"!=t.toString()&&a.length>t-1&&(n=!0);var s,o=!1;switch(a.forEach(a=>{a.name.toLowerCase()==e&&(o=!0,s=a)}),!0){case n:a[t-1];J.currentRecipe=a[t-1],J.recipeLoop();break;case o:J.currentRecipe=s,J.recipeLoop();break;case\"b\"==e:case\"back\"==e:v(`${y}Returning..`),J.recipesLoop();break;default:v(`${y}Invalid input.`),S(J.recipesMenu)}},recipeLoop:()=>{J.recipesArr;const e=J.currentRecipe,a=n.player.inventory;v(`${y}Currently viewing ${e.name} recipe.`),v(\"The following is required:\"),v(`${e.gold} gold (You have ${n.player.gold})`),e.items.forEach(e=>{v(`${e[1]} ${M[e[0]].name}${e[1]>1?\"s\":\"\"} (You have ${O(e[0],a)})`)}),v(\"<br>The recipe will craft the following item:\"),L(M[e.item],!0,!0,!0,!1,!0),J.checkReady(e,a)&&v(\"<br>This item can be crafted.\"),v(\"<br>If the item can be crafted, type 'c' to craft it. Otherwise, type 'z' to scroll up, 'x' to scroll down (looking through more recipes), or 'b' to go back. 'l' will reprint the list and your position.\"),A([\"up\",\"down\",\"list\",\"craft\",\"back\"]),S(J.recipeMenu)},recipeMenu:()=>{P(J.recipeMenu);const e=x().toLowerCase(),a=J.recipesArray;console.log(a);const t=J.currentRecipe,s=n.player.inventory;var o=a.findIndex(e=>(console.log(e),t.name==e.name));switch(e){case\"up\":case\"z\":v(`${y}Scrolling back..`),0==o?o=a.length-1:o--,J.currentRecipe=a[o],J.recipeLoop();break;case\"down\":case\"x\":v(`${y}Scrolling forward..`),o==a.length-1?o=0:o++,J.currentRecipe=a[o],J.recipeLoop();break;case\"list\":case\"l\":var r;v(`${y}Displaying recipes...`),a.forEach(e=>{r=e.name==J.currentRecipe.name?\"<b>\":\"\",v(`${r}${e.name}${\"<b>\"==r?\"</b>\":\"\"}`)}),S(J.recipeMenu);break;case\"c\":J.checkReady(J.currentRecipe,s)?(v(`${y}How many of this item would you like to craft? Please input the `+\" number you would like to craft, or input '0' if you would like to return.\"),S(J.inputQuantity)):(v(\"<br>This item cannot be crafted.\"),S(J.recipeMenu));break;case\"back\":case\"b\":v(\"<br>Returning...\"),J.recipesLoop();break;default:v(\"<br>Invalid input.\"),S(J.recipeMenu)}},inputQuantity:()=>{const e=x().toLowerCase();P(J.inputQuantity);const a=n.player.inventory;if(\"NaN\"==parseInt(e).toString())v(\"<br>Invalid input.\"),S(J.inputQuantity);else if(0==parseInt(e))v(\"<br>Returning...\"),J.recipeLoop();else{const t=parseInt(e),n=JSON.parse(JSON.stringify(J.currentRecipe));n.items.forEach(e=>{e[1]=e[1]*t}),n.gold=n.gold*t;const s=J.checkReady(n,a);v(`${y}In order to craft ${e} ${M[J.currentRecipe.item].name}`+`${t>1?\"s\":\"\"}, You will need the following items:`),n.items.forEach(e=>{const t=e[0],n=e[1],s=O(t,a);v(`${n} ${M[t].name} (You have ${s})`)}),v(`${n.gold} gold`),s?(v(`<br>Are you sure you would like to craft ${t}`+` ${M[J.currentRecipe.item].name}? Input 'y'/'yes' to confirm, or enter`+\" anything else to return.\"),J.craftAmount=t,S(J.craftConfirmation)):(v(\"<br>You cannot craft this much of that item!\"),J.recipeLoop())}},craftConfirmation:()=>{P(J.craftConfirmation);const e=x().toLowerCase();P(J.craftConfirmation);const a=n.player;if(\"y\"==e||\"yes\"==e){const e=J.currentRecipe,n=J.craftAmount;for(var t=0;t<n;t++)a.gold-=e.gold,e.items.forEach(e=>{B(e[0],e[1])});E(e.item,n,n),Ce(a),v(`${y}Returning to recipe menu...`),J.recipeLoop()}else v(\"<br>Returning...\"),J.recipeLoop()},checkReady:(e,a)=>{const t=n.player.inventory,s=e.items;var o=!0;return s.forEach(e=>{O(e[0],t)>=e[1]==0&&(o=!1)}),n.player.gold<e.gold&&(o=!1),o}},K=e=>{1==e[0].length&&(e=[e]),e.forEach(e=>{console.log(e),null!=G[e]?-1==n.player.recipes.indexOf(e)?(n.player.recipes.push(e),v(`<br>Unlocked recipe [${G[e].name}]`)):console.log(\"recipe already owned\"):console.log(\"recipe does not exist\")})},V={lily:{name:\"Lily\",say:[[\"<i>You approach the child. As you near her, she backs away slightly.\",1]],conditional:{\"level: 0\":{say:[[\"[name]: H-Hello [player]... can you help me?\"]],action:[\"gold\",1e3],action3:[\"exp\",1e3],action2:[\"end\"]},\"item: 1212 slime_ball\":{say:[[\"[name]: Icky! Slime!\"]],action:[\"items\",\"slime_ball\",200],action2:[\"end\"]},\"flag: -beatSlime\":{say:[[\"[name]: You haven't beat the slime? Weakling.\"]],action:[\"recipe\",\"slam_sword\"],action2:[\"end\"]},\"level: 121\":{say:[[\"[name]: I don't have anything interesting to say to you\",1]],action:[\"end\"]}},end:[[\"[name]: Goodbye.\",1]]},f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{f1_little_girl:{name:\"Little girl\",say:[[\"<i>You approach the child. She originally looks wary but upon noticing your adventuring gear a wide grin finds it way on her face.</i>\",2]],conditional:{\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},\"flag: -f1_spoken_to_little_girl\":{say:[[\"[name]: Hello! You can fight right? Help me gather slimes!\",1],[\"[name]: I loooove slimes. They are so slimy. I love slimy things!\",1],[\"[name]: If you help me get some slime, I will give you my pocket money! That's a good deal right? Get me some slimes! 20 Slime balls, please!\",2]],action:[\"flag\",\"f1_spoken_to_little_girl\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_girl\":{conditional:{\"flag: -f1_helped_little_girl\":{conditional:{\"item: 20 slime_ball\":{say:[[\"[name]: You got the slime balls! Thank you Thank youThankyouThankyouThankyou--\",1],[\"<i>Her excitement is a little disconcerting. Best take the money and leave...</i>\",1]],action:[\"gold\",100],action5:[\"exp\",500],action2:[\"items\",\"slime_ball\",-20],action3:[\"flag\",\"f1_helped_little_girl\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: You haven't got the slime balls yet?\",1],[\"<i>The girl looks disappointed. Like she might cry..\",1],[\"<i>Perhaps best to leave her alone until you have the slime balls.</i>\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_girl\":{say:[[\"<i>The little girl looks as though she is in a trance of ecstasy. Best leave her alone..\",2]],action:[\"end\"]}}}},end:[[\"<i>You say goodbye to the little girl.</i>\",1]]},f1_docile_slime:{name:\"Docile slime\",say:[[\"<i>You approach the slime.</i>\",1]],conditional:{\"flag: f1_helped_docile_slime\":{say:[[\"<i>The slime looks happy to see you. It wants to show you something.\",2]],action:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},\"flag: -f1_spoken_to_docile_slime\":{say:[[\"<i>Slimes can't speak, obviously. But it seems to want something from you.</i>\",1],[\"<i>Somehow you gather that it is trying to gesture to the remnants of slime on the ground.. as though it wants some slime for itself.</i>\",2],[\"<i>100 Slime balls might be enough to appease the slime. It seems to have nothing more to say to you.\",2]],action:[\"flag\",\"f1_spoken_to_docile_slime\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_docile_slime\":{conditional:{\"item: 100 slime_ball\":{say:[[\"<i>The slime looks pleased with you, and hopeful. Will you give the sime what it wants?\",2]],options:{yes:{exp:[\"exp\",3e3],say:[[\"<i>You give the slime 100 slime balls. It has way of showing emotion, but you can tell that it's very happy.\",2],[\"<i>It seems to want to show you something..\",1]],action3:[\"items\",\"slime_ball\",-100],action:[\"flag\",\"f1_helped_docile_slime\",\"true\"],action4:[\"items\",\"friendly_slime\",1],action5:[\"recipe\",\"friendly_greater_slime\"],action2:[\"shop\",\"f1_docile_slime_shop\",[\"end\"]]},no:{say:[[\"<i>The slime looks disappointed. It doesn't want to speak to you anymore.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>You don't seem to have what the slime wants. It ignores you.</i>\",1]],action:[\"end\"]}}}},end:[[\"[name]: ...\",1]]},f1_wanderer_statue:{name:\"Unnamed Wanderer\",say:[[\"<i>You approach the statue.</i>\",1],[\"<i>It is well looked after, despite showing clear signs of wear. It seems to be of some kind of goddess, who adorns a benevolent smile with her arms outstreched, as though enveloping many in her embrace.\",2],[\"<i>Below the statue is a tall rectangular stone container. It is filled up about halfway with various items.\",2]],conditional:{\"item: 1 wanderer_memorabilia\":{say:[[\"Some of the items remind you of the wanderer memorabilia that you found off somebody else. Will you add some to the container?\",2]],options:{yes:{say:[[\"<i>You place a piece of wanderer memorabilia into the rectangle. Nothing happens for a short while, but a person eventually emerges. They have ragged clothes and a few weapons and other useful items holstered at their waste. Despite their decrepit appearance there is an aura of experience and knowledge that you interpret from their demeanour.\",4],[\"[name]: Who are you? You don't look like a wanderer.\",1]],action:[\"items\",\"wanderer_memorabilia\",-1],options:{\"wanderer?\":{say:[[\"[name]: You must have happened on somebody else's memorabilia...\",1],[\"<i>The person thinks to themselves for a little.</i>\",1],[\"[name]: Many people have gone on adventures in the past in search for some purpose, or in pursuit of some kind of treasure or reward.\",2],[\"[name]: Regardless of whether they find what they are looking for, at the end of their quest, they almost always find that there is nothing more they want to achieve... these people are called wanderers.\",3],[\"[name]: Not all wanderers believe in the Wandering Goddess Lucia, but she is somewhat of an icon for wanderers... hence the statue.\",2],[\"[name]: Wanderers place their memorabilia here in honour of her and other wanderers. if two wanderers meet here, they will often battle to remember their days of adventure and learn of the experiences of others.\",3],[\"[name]: You aren't a wanderer, but you still seem like somebody who can fight. If you would like, we can battle here, right now.\",2]],action:[\"flag\",\"f1_met_wanderer_at_statue\",\"true\"],options:{yes:{action:[\"waypoint\",\"let's fight!\"]},no:{say:[[\"[name]: Alright. Well, now you know the purpose of this area. If you come here again, it's unlikely you will meet the same person. Keep safe, young one.\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}}},\"let's fight!\":{say:[[\"[name]: Very well then. Prepare yourself!\",1]],action:[\"battle\",[[\"wayward_traveler\",{changeLevel:!1,levelCap:!1,addLevels:!1}],[\"waypoint\",\"after_battle\"]]]}}},no:{say:[[\"<i>You decide to leave the statue alone.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>There doesn't seem to be much to do here. Nothing you own reminds you of the items that are in your possession. You decide to leave the statue alone.\",2]],action:[\"end\"]}},end:[[\"\",0]],after_battle:{say:[[\"[name]: It was a good fight. I am glad to have met you. Perhaps we will meet again someday...\",2],[\"<i>The wanderer walks away. He walks quite quickly, you notice. It isn't long until his footsteps are no longer audible.\",2]],action:[\"end\"]}},f1_rude_kid:{name:\"Kid\",conditional:{\"flag: -f1_spoken_to_rude_kid\":{say:[[\"<i>You approach the kid. He has an uninviting look on his face. As you near him, he spits on the floor.\",2],[\"[name]: Pfft. Whaddya want? Loser.\"]],options:{\"<i>kick his shin</i>\":{say:[[\"<i>You kick the kid's shin.</i>\",1],[\"[name]: OW! What the hell, dude?!\",1],[\"<i>The kid's eyes tear up and he runs away.\",1],[\"<i>You notice he left some gold on floor. Hopefully you don't see that kid again.</i>\"]],action:[\"gold\",50],action5:[\"exp\",100],action2:[\"flag\",\"f1_kicked_rude_kids_shin\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]},\"why are you so rude?\":{say:[[\"[name]: Rude? I'm just battle hardened, y'see. Check this out.\",1],[\"<i>The kid holds up a small patch of grey wolf fur.</i>\",1],[\"[name]: Runt attacked me and my li'l sis. We got separated, and I fought off the wolf with my own bare hands. Not a pretty sight for pansy folk like yourself.\",2],[\"[name]: You know what? Keep this pelt. As a reminder of the horrors of war.\",1],[\"<i>He throws the pelt at your feet.</i>\",1],[\"[name]: Not everyone has to go through what I did...\",1],[\"<i>The kid walks away, hands in his pockets. Hopefully you don't see that kid again.\",2]],action:[\"items\",\"grey_wolf_pelt\",3],action5:[\"exp\",300],action2:[\"flag\",\"f1_extended_convo_with_rude_kid\",\"true\"],action3:[\"flag\",\"f1_spoken_to_rude_kid\",\"true\"],action4:[\"end\"]}}},\"flag: f1_spoken_to_rude_kid\":{say:[[\"<i>You look for the rude kid, but he isn't there anymore.\",1]],action:[\"end\"]}},end:[[\"\",0]]},f1_wolf_man:{name:\"Lucas\",say:[[\"<i>You approach the man. As you do so, he stands up. He smells a little.\",1.5],[\"[name]: Hi. My name's Lucas. I live in the forest, nearby this area.\",1],[\"[name]: I thought it would be a good idea to let you know that there more wolves in this spot than normal. If you need some wolf pelts, it might be worth hanging around here.\",2],[\"<i>The man closes his eyes. It doesn't seem like he wants to say much else..</i>\",1]],action:[\"end\"],end:[[\"\",0]]},f1_old_man:{name:\"Old Man\",say:[[\"<i>You start to move towards the old man, but before you can approach, he quickly notices you and beckons you over rather enthusiastically.</i>\",1.5],[\"[name]: Helloe there! Not many people come 'round these parts no more.\",1],[\"[name]: It's such a beautifool place.. but a little dangerous for most people, even though it's a little less dangerous than the ruins and forest a li'l far off.\",2],[\"[name]: Must the be rumours of some massive sea serpent, 'though I've never seen nothing like that in my time..\",1.5],[\"[name]: Thanks for listenin' to me ramblin' off about nothing. I have some stuff that could be of use to you, if you're interested...\",2]],options:{yes:{say:[[\"[name]: Ok, then - have yourself a look..\"]],action:[\"shop\",\"f1_old_man\",[\"end\"]]},no:{say:[[\"[name]: Alrighty then - I'll be seeyin' ye around, I suppose.\"]],action:[\"end\"]}},end:[[\"<i>You say goodbye to the old man.</i>\",1]]},f1_little_boy:{name:\"Little boy\",say:[[\"<i>As you begin to approach the kid, you notice his distinctive eyes, a hue of dull red. The dark clothes that he's wearing make him difficult to say, and coalesce with his facial aesthetic into a somewhat edgy demeanour.\",2]],conditional:{\"flag: f1_helped_little_girl\":{conditional:{\"flag: -f1_spoken_to_little_boy\":{say:[[\"[name]: ...\",.5],[\"[name]: I don't wanna speak to a weakling like you. Bring me the Crimson Regalia if you're realling worth my time..\",1],[\"<i>The kid seems reluctant to speak. Perhaps if you bring him 30 or so red slime balls..\",1]],action:[\"flag\",\"f1_spoken_to_little_boy\",\"true\"],action2:[\"end\"]},\"flag: f1_spoken_to_little_boy\":{conditional:{\"flag: -f1_helped_little_boy\":{conditional:{\"item: 30 red_slime_ball\":{say:[[\"[name]: Is that.. Crimson Reglia?!\",1],[\"<i>The child hesitates a little. It doesn't seem like he thought you'd actually bring him the slime balls.\",2],[\"[name]: I-I bet you stole them from someone. How pathetic--\",1],[\"[player]: What the hell man? What's your problem?\",1],[\"[name]: You can speak?! Crapdude calm down I was just messing around I--\",1],[\"[player]: Kids like you are so annoying.. I'll show you--\",1],[\"[name]: Brocalm down! OK, I found this thing in this forest and I thought it was really cool and since putting it on I haven't been attacked here just leave me alone!!\",2.5],[\"<i>The kid hands you a pendant and runs off. By the time you've processed what has happened the kid is out of earshot. Oh well. There was some money on the floor as well... your lucky day.\",3]],action:[\"gold\",500],action6:[\"exp\",3e3],action2:[\"items\",\"red_slime_ball\",-30],action5:[\"items\",\"shadowwarding_pendant\",1],action3:[\"flag\",\"f1_helped_little_boy\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"[name]: I don't see the crimson regalia.. get out of my sight.\",1]],action:[\"end\"]}}},\"flag: f1_helped_little_boy\":{say:[[\"<i>...Is what you would've seen, but the kid is noowhere to be found.\",1]],action:[\"end\"]}}}}},\"level: 0\":{say:[[\"[name]: You aren't worthy.. I can feel it.\",1],[\"<i>The boy refuses to say anything more. It looks like you need to help someone else before him.</i>\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_lost_person:{name:\"Lost person\",say:[[\"[name]: Hi... I'm lost. Do you know where I am?\",1]],options:{yes:{say:[[\"[name]: Sweet! Can you tell me where I am then?\",1]],options:{\"Sorry I was lying, I don't know.\":{say:[[\"[name]: ...\",1],[\"[name]: Godammit.\",1]],action:[\"end\"]},\"The dark forest\":{say:[[\"[name]: Thanks! That's not helpful at all!\",1],[\"[name]: Asshole.\",1]],action:[\"end\"]},\"The twisted trees\":{say:[[\"[name]: I'm pretty sure that's not even a place.\",1]],action:[\"end\"]},Hell:{say:[[\"[name]: Figures. I've raided one too many village I guess..\",1],[\"[name]: But the women were worth it.\",1],[\"[name]: You were joking? UM..\",1]],action:[\"end\"]}}},no:{say:[[\"[name]: Fair enough. Not like I can talk...\",1],[\"[name]: I know a bit about the general area we're in. The Driftwood area has four main sections.\",2],[\"[name]: In the center sort of is the foresty area. To the north-west is a small settlement. I don't know...\",2],[\"...much about the rest but I guess there's one area other than this one..\",1],[\"[name]: This place is kind of well-known because it has a bunch of interesting stuff in such a small area.\",2],[\"[name]: Apparently there's a hydra in a nearby sea, and some evil creature lurking in the forest.. gives me the creeps!\",2],[\"[name]: If you ever find out where this place is, please let me know! I don't wanna stay here any longer...\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_weapons_shop:{name:\"Reiner\",say:[[\"<i>You approach the weapons merchant. He is quite large and muscular, with brown hair and brown facial hair. He flashes a friendly smile your way.</i>\",3],[\"[name]: Hey there, runt! You interested in some weapons?\",1]],options:{\"weapons shop\":{action:[\"shop\",\"f1_weak_weapons\",[\"end\"]]},\"advanced weapons shop\":{action:[\"shop\",\"f1_strong_weapons\",[\"end\"]]},nope:{say:[[\"[name]: No problem! Seeya around!\",1]],action:[\"end\"]}},end:[[\"[name]: See you later, runt! Come again soon!\",1]]},f1_armour_shop:{name:\"Sora\",say:[[\"<i>You approach the armour merchant. They look a little out of place. As you approach him, he scratches his head and watches you as you near.</i>\",3],[\"[name]: Umm... hi. Would you like some armour?\",1]],options:{\"armour shop\":{action:[\"shop\",\"f1_weak_armours\",[\"end\"]]},\"advanced armour shop\":{action:[\"shop\",\"f1_strong_armours\",[\"end\"]]},nope:{say:[[\"[name]: Alright. Um..\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, uh.. see you later, I guess...\",1]]},f1_misc_shop:{name:\"Amy\",say:[[\"<i>You approach the miscellaneous merchant. She has blond hair and an intelligent glare. She watches you silently as you approach, however she has a friendly aura.\",3],[\"[name]: Hello. I have some stuff for sale. Would you like anything?\"]],options:{\"misc shop\":{action:[\"shop\",\"f1_misc\",[\"end\"]]},\"VIP misc shop\":{conditional:{\"item: 1 vip_card\":{action:[\"shop\",\"f1_misc_vip\",[\"end\"]]},\"level: 0\":{say:[[\"[name]: Sorry, you need a VIP card to access the VIP shop.\",1]],action:[\"waypoint\",\"nope\"]}}},nope:{say:[[\"[name]: Ok. Thanks for coming.\",1]],action:[\"end\"]}},end:[[\"[name]: Ok, see you later.\",1]]},f1_man_a:{name:\"Male settler\",say:[[\"<i>You approach the man. He, similar to most other men in the settlement, has a somewhat muscular build.\",1.5],[\"He had no facial hair and messy black hair, complimenting his plain, dark brown eyes. His attire was...\",1.5],[\"...Comparable to most others in the settlement, plain fabric of a dull hue.\",1],[\"[name]: Hey. What's up?\",1]],options:{talk:{say:[[\"[name]: This settlement has existed for a few centuies, I think.. I moved in a few years ago.\",2],[\"[name]: It's fairly dangerous around here, so a lot of the people who stay here are fairly strong.\",2],[\"[name]: But there are tons of animals here, and some of them can be hunted for good reagents, so it's a great place for adventurers to stay.\",3]],conditional:{\"level: 0\":{options:{\"How long are you going to stay here?\":{say:[[\"[name]: Ehh... I don't know. Maybe a few more years.\",1],[\"[name]: Maybe once I've made some more money. There are some safer places nearby.\",1],[\"[name]: I could settle down, get a more stable job and a house.. it's pretty appealing.\",1.5],[\"[name]: But I don't really know right now. It's pretty nice here right now. Gets you in the mood for an adventure..\",2]],action:[\"waypoint\",\"level: 0\"]},\"Do you have a family?\":{say:[[\"[name]: Parents? Yeah. But no wife or kids.\",1],[\"[name]: Women who just want to settle down don't really stay here, it's not a great place unless you wanna adventure. So most of the girls here are single and uninterested.\",3],[\"[name]: It's a real shame. I wish Amy would take some interest in me..\",1]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}}}},bye:{action:[\"end\"]}},end:[[\"[name]: Mk, see you later.\",1]]},f1_hyssha:{name:\"Hyssha\",say:[[\"<i>You approach the woman. She seems stronger than most of the residents. Wavy auburn hair cascades down her spine.</i>\",2],[\"<i>She has a somewhat tough face, and her blue eyes grant her a piercing gaze. She's wearing brownish hunter garb, accentuated by the intricate wooden bow holstered at her back.\",3],[\"[name]: Hello. I take it you are an adventuerer. My name is Hyssha.\",1]],conditional:{\"level: 0\":{options:{\"What are you doing here?\":{say:[[\"[name]: I have been staying here for some time. I am searching for a legendary beast..\",1.5],[\"[name]: I am trying to hunt powerful beasts. I use each one I slay to improve my adventuring gear.\",2]],options:{\"How many beasts have you slain?\":{say:[[\"[name]: Three. Rokusha, an earth anima, whose magical scales I used to enhance my bow.\",1.5],[\"[name]: Ignia, a fire wyvern. It's wings and scales I used to enhance my armour. With it's heart, I enhanced my bow.\",2],[\"[name]: The final was a beast in this area.. I don't know it's name, but it escaped before I could slay it. From a poison-tipped claw it had I enhanced many of my arrows.\",3],[\"[name]: I cannnot simply slay all beasts I come across. I must consider the consequences.\",1.5],[\"[name]: Otherwise, I would have slain many more creatures..\",1]],action:[\"waypoint\",\"level: 0\"]},\"Where's the legendary beast that you're hunting?\":{say:[[\"[name]: I don't know. It is a type of water beast, however to this point is has eluded me.\",2],[\"[name]: Perhaps it is absent, or must be summoned.. I must do more research.\",1.5],[\"(BOSS NOT ADDED YET)\"]],action:[\"waypoint\",\"level: 0\"]},bye:{action:[\"waypoint\",\"bye\"]}}},bye:{say:[[\"<i>You say goodbye to Hyssha.\",1]],action:[\"end\"]}}}},end:[[\"[name]: Until next, adventurer.\",1]]},f1_worried_woman:{name:\"Worried woman\",say:[[\"<i>You approach the worried woman. She has short hair and a friendly face, although right now it is warped into a worried expression.\",2],[\"[name]: Hello.. have you seen my kids?\",1],[\"[name]: They both seem to like slimes a lot.. but they ran off into the forest and I haven't seem them since!\",2],[\"[name]: I can't go out to find them on my own.. I wouldn't be able to fend for myself.\",1.5]],action:[\"end\"],end:[[\"[name]: I hope they're ok... if they were hurt, I..\",1]]},f1_tutorial_man:{name:\"Pel\",say:[[\"<i>You approach a man nearby. He looks at you as though he's unsurprised that you're here.</i>\",1.5],[\"[name]: Hello! My name's Pel. I'm just here to tell you a few things.\",1.5],[\"[name]: Currently you're in the rough center of a very small area. Be careful where you go, because you may be attacked by monsters as you travel!\",2.5],[\"[name]: I think to the north-west there's some kind of settlement, they might have some stuff. But I don't know what else there is in this area. Let me know if you see anything cool!\",3.5]],action:[\"end\"],end:[[\"<i>It looks like he's done talking. You don't have anything to say to him..</i>\",1]]},f1_wanderer_collector:{name:\"Man who enjoys collecting\",say:[[\"<i>You approach a rather friendly-looking person. He is male and of average build. He has simple black hair and no facial hair, along with simple villager clothes.\",3]],conditional:{\"flag: f1_helped_wanderer_collector\":{say:[[\"Hato: Yo. I haven't got much for you RN, sorry.\",1]],action:[\"end\"]},\"flag: f1_spoken_to_wanderer_collector\":{say:[[\"[name]: Hi there. Do you have the memorabilia?\",1]],conditional:{\"item: 100 wanderer_memorabilia\":{say:[[\"[name]: Cool! Now, just give it here...\",1]],options:{\"give him the memorabilia\":{action:[\"items\",\"wanderer_memorabilia\",-100],say:[[\"[name]: Thank you for your patronage! As promised, I will reward you for your troubles..\",2],[\"Hato: My name's Hato, by the way. Maybe I'll see you again later. Seeya for now!\",2]],action2:[\"items\",\"barren_sword\",1],action3:[\"gold\",2500],action4:[\"exp\",5e3],action6:[\"flag\",\"f1_helped_wanderer_collector\",\"true\"],action5:[\"end\"]},\"don't give him the memorabilia\":{say:[[\"[name]: Man. Ok. Whatever.\",1]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Doesn't look like it. Come back another time.\",1.5]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Hello! Do you know what wanderers are?\"]],options:{yes:{conditional:{\"flag: f1_met_wanderer_at_statue\":{say:[[\"[name]: Alright! Cool. I collect wanderer memorabilia. Interpreting the adventures and pasts of various adventurers... it's really interesting to me. Therefore!\",3],[\"[name]: If you can get me some, let's say, <i>100</i>, I'll take it off your hands and ensure you're rewarded handsomely. What do you say?\",2],[\"[name]: Well, I won't listen anyways. Come back if you have them and want me to take them off your hands.\",2],[\"<i>The man doesn't look like he'll say any more. Best to come back if you have what he wants.\",2]],action:[\"flag\",\"f1_spoken_to_wanderer_collector\",\"true\"],action2:[\"end\"]},\"level: 0\":{say:[[\"[name]: Really? What are they then?\",1],[\"[player]: Uhh...\",1],[\"<i>The man frowns disappointedly.</i>\",1],[\"[name]: Not cool, dude.. come back when you know a little more.\",1.5]],action:[\"end\"]}}},no:{say:[[\"[name]: Ah, ok. Nevermind - I'll see you around.\"]],action:[\"end\"]}}}},end:[[\"\",0]]},f1_lost_teenager:{name:\"Lost teenager\",conditional:{\"flag: -f1_spoken_to_lost_teenager\":{say:[[\"<i>You approach the lost teenager. They don't look particularly worried as you approach. In fact, they don't look like they're feeling anything at all.\",3.5],[\"[name]: Hi. I've been here for a while now, I'm not really sure what's going on.\",1.5],[\"[name]: One thing's for sure, I'm probably not getting out of this forest. I've been wandering for ages.\",2],[\"[name]: You can have these potions. I'm not gonna need them where I'm going...\",1.5]],action:[\"items\",\"health_potion\",3],action2:[\"items\",\"greater_health_potion\",1],action3:[\"flag\",\"f1_spoken_to_lost_teenager\",\"true\"],action4:[\"end\"]},\"level: 0\":{say:[[\"<i>You look for the lost teenager, but they aren't there anymore.\",1.5]],action:[\"end\"]}},end:[[\"\",0]]},f1_traveller_woman:{name:\"Traveller woman\",say:[[\"<i>You approach the traveler woman. Once distinctive feature you notice is her kale-green backpack, something people seem to not have around here.\",2.5]],conditional:{\"flag: -f1_spoken_to_traveller_woman\":{say:[[\"[name]: Hey.. as you might be able to tell, I'm not from 'round here.\",1.5],[\"[name]: I enjoy seeing what's up about different places. This place is sorta dangerous, there's only one tiny settlement that I've found!\",3],[\"[name]: It's hard to stock up on supplies. I know there are some places outside this main forest, but I can't get to the end of them without turning back... I wonder if there's something there.\",3],[\"[name]: Oh well! I guess I'll never know. This looks like a nice place to take a nap..\",2],[\"<i>The woman looks sleepy. You don't want to bother her, so you say goodbye.</i>\",1.5],[\"[name]: Oh! I was attacked by some monster as well. I don't need this stuff, so you can have it.\",2],[\"<i>The woman hands you some items. You decide to leave afterwards.</i>\",1.5]],action:[\"items\",\"weak_vines\",5],action2:[\"items\",\"hempweed_ligament\",2],action3:[\"items\",\"sharp_claw\",1],action4:[\"items\",\"venomous_claw\",1],action5:[\"flag\",\"f1_spoken_to_traveller_woman\",\"true\"],action6:[\"end\"]},\"level: 0\":{say:[[\"<i>She's currently asleep. Looks like she can fend for herself - probably shouldn't bother her.\",2]],action:[\"end\"]}},end:[[\"\",0]]},f1_alchemist_woman:{name:\"Alchemist woman\",say:[[\"<i>You approach the woman. She has a large dark blue witch hat which should look silly, but she seems to make it work. It compliments her brown hair nicely, which is medium length and somewhat messy.</i>\",3.5],[\"<i>Her clothes seem to be a modified version of plainish blue robes on top, and on the bottom, robe bottoms fashioned into a skirt to aid movement. Her attire in general seems to be a modified wizard's robe to enable efficient movement and accentuate her female features.\",4.5],[\"<i>As you approach, she greets you with an inviting smile.</i>\",1.5]],conditional:{\"flag: f1_helped_alchemist_lady\":{say:[[\"Skyla: Hey, adventurer! I don't have anything for you right now, sorry..\",2.2],[\"Skyla: Maybe next time we meet, I'll have an even better reward for you..\",2.2],[\"<i>She smiles playfully and waves goodbye.</i>\",1]],action:[\"end\"]},\"flag: f1_spoken_to_alchemist_lady\":{say:[[\"[name]: Hi, adventurer! Have you got the items?\",1.25]],options:{\"give her the items\":{conditional:{\"item: 10 grey_wolf_pelt\":{conditional:{\"item: 3 tiny_lizard_tail\":{say:[[\"[name]: You got the items!\",1],[\"<i>She smiles brightly at you. Something about her joyous face makes you feel very pleased\",2],[\"[name]: As promised, I'll give you something in return. Come a little closer..\",2],[\"<i>You approach her, slowly..</i>\",4],[\"<i>She hands you a piece of paper. It has some writing about potions on it.</i>\",2],[\"[name]: It's a crafting recipe for good health potions. It should help you on your adventures..\",2.25],[\"[name]: Was it what you expected? Hehe.\",1],[\"[name]: You can have some gold as well. My name's Skyla, by the way. I'm sure we'll meet again!\",2.1],[\"<i>She smiles again and waves goodbye.</i>\",1]],action:[\"recipe\",\"crafted_health_potion\"],action2:[\"gold\",500],action3:[\"flag\",\"f1_helped_alchemist_lady\",\"true\"],action5:[\"items\",\"grey_wolf_pelt\",-10],action6:[\"items\",\"tiny_lizard_tail\",-3],action4:[\"end\"]},\"level: 0\":{say:[[\"<i>You don't have all the items you need. You have no choice but to inform her, a little remorsefully, you notice.\",2]],action:[\"waypoint\",\"tell her you don't have the items\"]}}},\"level: 0\":{say:[[\"<i>You don't have all the items you need. You have no choice but to inform her, a little remorsefully, you notice.\",2]],action:[\"waypoint\",\"tell her you don't have the items\"]}}},\"tell her you don't have the items\":{say:[[\"<i>Oh, alright.. just come back when you do, okay? I'll be waiting..\",2],[\"<i>She seems a little sad but smiles and waves goodbye.\",1.5]],action:[\"end\"]}}},\"level: 0\":{say:[[\"[name]: Oh, an adventurer? Just my luck, I needed some help.\",1.5],[\"[name]: I need some items for some alchemy I'm doing, but I can't really be bothered to get them myself..\",2],[\"[name]: Could you help me? All I need is 10 grey wolf pelts and 3 tiny lizard's tails, nothing that hard to get..\",2.5],[\"[name]: Of course, I'll make it worth your while..\",1.25]],options:{yes:{say:[[\"<i>The woman smiles at you. Having her smile at you makes you feel really good for some reason.\",2.5],[\"[name]: Thank you!\",1],[\"[name]: Just bring the things back to me whenever you're ready. I'll be waiting..\",2]],action:[\"flag\",\"f1_spoken_to_alchemist_lady\",\"true\"],action2:[\"end\"]},no:{say:[[\"<i>The woman frowns slightly, in a disappointed, not angry manner.</i>\",1.5],[\"[name]: Just think about it, please? If you get the items and want to give them to me, just come over. I'll be waiting.\",2.5]],action:[\"flag\",\"f1_spoken_to_alchemist_lady\",\"true\"],action2:[\"end\"]}}}},end:[[\"\",0]],\"tell her you don't have the items\":{say:[[\"<i>Oh, alright.. just come back when you do, okay? I'll be waiting..\",2],[\"<i>She seems a little sad but smiles and waves goodbye.\",1.5]],action:[\"end\"]}},f1_craftswoman:{name:\"Craftswoman\",say:[[\"<i>You approach the craftswoman. She has black hair and blue eyes, is wearing a plain brown apron.</i>\",2]],conditional:{\"flag: -f1_gotten_beginner_recipes\":{say:[[\"[name]: Yo. I'm a craftswoman, as you can see. I don't have a specific craft, but I make losta things.\",2],[\"[name]: If you're a travelling adventurer like my husband, it'll help a ton to be able to craft things on the go.\",2.5],[\"[name]: So take these recipes. I don't need them, they're all up in here for me.\",1.5],[\"<i>She taps her head with a finger twice. Then, she hands you some recipes.<i>\",1.5]],action:[\"recipe\",[\"wolfhide_armour\",\"wolfhide_cap\",\"wolfhide_leggings\",\"slime_bracers\",\"slime_reinforced_sword\",\"wolfhide_charm\",\"lizard_bracelet\",\"aquus_orb\",\"water_infused_armour\",\"water_infused_helm\",\"water_infused_legwear\",\"luminant_charm\",\"wolfhide_dagger\",\"pickaxe\",\"makeshift_steel_armour\",\"makeshift_steel_helm\",\"makeshift_steel_legwear\",\"makeshift_sword\",\"wolven_reavers\",\"bladed_armour\"]],action3:[\"flag\",\"f1_gotten_beginner_recipes\",\"true\"],action2:[\"end\"]},\"level: 0\":{say:[[\"[name]: Can't teach you anymore, sorry.\",1]],action:[\"end\"]}},end:[[\"[name]: Seeya 'round.\",1]]},f1_artisan:{name:\"Artisan\",say:[[\"<i>The artisan is sitting down. He seems as though he is deep in thought.</i>\",2]],conditional:{\"flag: -f1_gotten_advanced_recipes\":{say:[[\"<i>As you approach, he notices, and looks up. His green eyes look dull but have clearly observed great things.</i>\",2.5],[\"[name]: ...\",1],[\"<i>He eyes you up for a few seconds..</i>\",1.5]],conditional:{\"level: 12\":{say:[[\"<i>He says nothing, but after a few seconds gets up and walks away.</i>\",1.5],[\"<i>When he returns, he hands you some pieces of paper - recipes. Then, he returns to whatever he was doing previously.</i>\",2.5]],action:[\"recipe\",[\"tear_of_lucia\",\"shadow_cloak\",\"earthen_sword\",\"red_slime_bracers\",\"shinobi_armour\",\"shinobi_headcloak\",\"shinobi_leggings\",\"water_orb_necklace\"]],action3:[\"flag\",\"f1_gotten_advanced_recipes\",\"true\"],action2:[\"end\"]},\"level: 0\":{say:[[\"<i>..before returning to whatever he was thinking about previously. He seems uninterested in you currently.\",2]],action:[\"end\"]}}},\"level: 0\":{say:[[\"<i>He seems busy with something. Best leave him alone.</i>\",1]],action:[\"end\"]}},end:[[\"\",0]]},f1_travelling_hermit:{name:\"Old traveller\",say:[[\"<i>You approach the old traveller.</i>\",1],[\"<i>One would assume he is in his seventies or eighties, given his fairly shrivelled skin and hunched back. He uses a walking stick that is a little lighter than the trees surrounding the steady himself as he walks.\",3],[\"<i>His clothes are very plain; a grey top that seems a little large for his shrunken self, and plan brown trousers that fit the same criteria. He doesn't react as you near him, but he emanates a friendly aura.\",3],[\"[name]: Hello there.\",1]],options:{\"What are you doing?\":{say:[[\"[name]: I'm looking for a statue. I think it is somewhere around the outskirts of this forest...\",2],[\"[name]: It is a statue of Lucia, the wandering Goddess. I am not a wanderer myself, but the statues are a centerpiece of their lifestyle. Somewhat of a spectacle to behold, in my opinion.\",3]],options:{\"wanderer?\":{say:[[\"[name]: Yes, wanderer. Maybe if you can meet a wanderer at the statue they will tell you a bit more. I'm no expert, unfortunately.\",2],[\"[name]: Anyways, I should be on my way. I'll never find the statue at this rate!\",1.5],[\"<i>The old man begins to walk away. You notice that he moves very quickly for someone who needs a walking stick. Very quickly, his image fades in between the trees.\",2]],action:[\"flag\",\"f1_spoken_to_hermit\",\"true\"],action2:[\"end\"]},\"oh, ok. Bye\":{say:[[\"[name]: I think I'll rest around here for a little while, so perhaps I will see you around. Until then, traveller!\",1.5]],action:[\"end\"]}}},bye:{say:[[\"<i>The old man looks a little confused by your sudden approach and retreat.</i>\",1.5],[\"[name]: Ah, okay then.. I'm going to rest here for a little bit, so perhaps I will see you around. Until then, traveller!\",1.5]],action:[\"end\"]}},end:[[\"\",0]]},f1_person_looking_for_settlement:{name:\"Lost person\",say:[[\"<i>You approach the random person. They seem a little lost.</i>\",1.25],[\"[name]: Hello!! I know there is a settlement around here.. do you know where it is??\",1.5],[\"[name]: Please!!! I'm running out of resources and I'm too scared to go without direction! Can you tell me??\",2]],options:{\"north-east\":{say:[[\"North east?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"north-west\":{say:[[\"North west?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action3:[\"flag\",\"f1_helped_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"straight south\":{say:[[\"Straight south?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]},\"south-east\":{say:[[\"South east?? Got it!\",1],[\"<i>The person looks as thought they are getting ready to run. They tighten the straps on their wolfhide backpack and smile at you.\",2]],action:[\"flag\",\"f1_spoken_to_person_looking_for_settlement\",\"true\"],action2:[\"end\"]}},end:[[\"[name]: Thank you!! Bye!\",1],[\"<i>The person runs off into the distance. Hopefully you told them the right direction..\",1.5]]},f1_owned_crafted_sword:{name:\"Wolves\",say:[[\"<i>You notice something interesting on the floor.\",1],[\"<i>It's a sword; it looks quite elegantly-made and surprisingly pristine for something left on the floor.</i>\",1.5],[\"<i>Will you take it?</i>\",1]],options:{yes:{say:[[\"<i>You reach for the sword and pick it up.\",2.5],[\"<i>As you move to walk away, you can hear growling from all directions..\",1.5],[\"<i>Suddenly, a group of grey wolves emerge! Their hides are bristling with fury, their eyes fixated on the sword. They emerge from thickets in all directions, blocking off any escape.\",2.5],[\"<i>Before you can absorb the situation, they start to attack--\",1]],action:[\"battle\",[[\"grey_wolf\",{changeLevel:10,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleOne\"]]]},no:{say:[[\"You decide to leave the sword alone.\",1]],action:[\"end\"]}},postBattleOne:{say:[[\"Another wolf attacks!\",1]],action:[\"battle\",[[\"grey_wolf\",{changeLevel:12,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleTwo\"]]]},postBattleTwo:{say:[[\"Most of the wolves back down after seeing you defeat two in a row.\",1.5],[\"However, a few remain. A wolf whose claws are dripping with a dangerous-looking substance approaches..\",2]],action:[\"battle\",[[\"venomous_wolf\",{changeLevel:13,levelCap:!1,addLevels:!1}],[\"waypoint\",\"postBattleThree\"]]]},postBattleThree:{say:[[\"By this point, all of the wolves have left. You take the sword and leave, feeling a little startled.\",2]],action:[\"flag\",\"f1_taken_crafted_sword\",\"true\"],action2:[\"gold\",250],action3:[\"exp\",3e3],action4:[\"items\",\"crafted_blade\",1],action5:[\"end\"]},end:[[\"\",1]]},f1_explorer_woman:{name:\"Explorer woman\",say:[[\"<i>You approach the woman. She has a friendly smile, along with black hair and blue eyes.\",1.5],[\"<i>Her clothes are clearly geared for exploration - a jacket, trousers and (somewhat long) boots various hues of brown.\",2],[\"<i>Two pouches holstered at her waist allow for easy storage without the compromise of maneouvrability that comes with a large backpack.\",2],[\"[name]: Hey! I'm currently exploring this area, looking for rare things.\",1.5],[\"[name]: Sometimes brazen creatures attack me as I travel, but I think there are some creatures that won't ambush you and that you'll only find if you go exploring looking for them. Usually, those are the rare ones!\",2],[\"[name]: Did you know that? It shocked me when I found out!\",1]],options:{yes:{say:[[\"[name]: Oh.. you did? I feel a little silly now, haha!\",1]],action:[\"end\"]},no:{say:[[\"[name]: There you go then! Hopefully my infomration was helpful!!\",1]],action:[\"end\"]}},end:[[\"[name]: I'm going to stay here for a while. I've been running around exploring for so long, I need a break! Seeya around!\",1.5]]},f1_person_on_toilet:{name:\"Person 'using the toilet'\",say:[[\"<i>You can see someone in the distance, covered by an outburst of leaves.</i>\",1.5],[\"<i>It's difficult to see what they're doing. You move some leaves to get a closer look..\",1.5],[\"[name]: HEY!! What the hell are you doing?! Fuck off!!\",1],[\"<i>The person throws some leaves in your direction, obviously to no avail. You decide it's best to leave them alone.\",2]],action:[\"end\"],end:[[\"\",0]]},f1_hydra_staff_on_floor:{interesting_item:[\"f1_picked_up_hydra_staff\",[\"hydra_staff\",1]],end:[[\"\",0]]},f1_crown_of_darkness_on_floor:{interesting_item:[\"f1_picked_up_crown_of_darkness\",[\"crown_of_darkness\",1]],end:[[\"\",0]]},f1_simple_sword_on_floor:{interesting_item:[\"f1_picked_up_simple_sword\",[\"simple_sword\",1]],end:[[\"\",0]]},f1_damaged_helm_on_floor:{interesting_item:[\"f1_picked_up_damaged_helm\",[\"damaged_helm\",1]],end:[[\"\",0]]},f1_metal_stave_on_floor:{interesting_item:[\"f1_picked_up_metal_stave\",[\"metal_stave\",1]],end:[[\"\",0]]},f1_silver_axe_on_floor:{interesting_item:[\"f1_picked_up_silver_axe\",[\"silver_axe\",1]],end:[[\"\",0]]},f1_silver_dagger_on_floor:{interesting_item:[\"f1_picked_up_silver_dagger\",[\"silver_dagger\",1]],end:[[\"\",0]]},f1_pickaxe_on_floor:{interesting_item:[\"f1_picked_up_pickaxe\",[\"pickaxe\",1]],end:[[\"\",0]]},f1_feathervine_sword_on_floor:{interesting_item:[\"f1_picked_up_feathervine_sword\",[\"feathervine_sword\",1]],end:[[\"\",0]]},f1_silver_helm_on_floor:{interesting_item:[\"f1_picked_up_silver_helm\",[\"silver_helm\",1]],end:[[\"\",0]]},f1_wolfhide_cap_on_floor:{interesting_item:[\"f1_picked_up_wolfhide_cap\",[\"wolfhide_cap\",1]],end:[[\"\",0]]},f1_vine_helmet_on_floor:{interesting_item:[\"f1_picked_up_vine_helmet\",[\"vine_helmet\",1]],end:[[\"\",0]]},f1_ninja_garb_on_floor:{interesting_item:[\"f1_picked_up_ninja_garb\",[\"ninja_garb\",1]],end:[[\"\",0]]},f1_makeshift_steel_armour_on_floor:{interesting_item:[\"f1_picked_up_makeshift_steel_armour\",[\"makeshift_steel_armour\",1]],end:[[\"\",0]]},f1_vine_armour_on_floor:{interesting_item:[\"f1_picked_up_vine_armour\",[\"vine_armour\",1]],end:[[\"\",0]]},f1_vine_pantaloons_on_floor:{interesting_item:[\"f1_picked_up_vine_pantaloons\",[\"vine_pantaloons\",1]],end:[[\"\",0]]},f1_silver_legwear_on_floor:{interesting_item:[\"f1_picked_up_silver_legwear\",[\"silver_legwear\",1]],end:[[\"\",0]]},f1_slime_ball_on_floor:{interesting_item:[\"f1_picked_up_slime_ball\",[\"slime_ball\",8]],end:[[\"\",0]]},f1_weak_vine_on_floor:{interesting_item:[\"f1_picked_up_weak_vine\",[\"weak_vine\",6]],end:[[\"\",0]]},f1_hempweed_ligament_on_floor:{interesting_item:[\"f1_picked_up_hempweed_ligament\",[\"hempweed_ligament\",2]],end:[[\"\",0]]},f1_wood_on_floor:{interesting_item:[\"f1_picked_up_wood\",[\"wood\",4]],end:[[\"\",0]]},f1_steel_on_floor:{interesting_item:[\"f1_picked_up_steel\",[\"steel\",4]],end:[[\"\",0]]},f1_health_potion_on_floor:{interesting_item:[\"f1_picked_up_health_potion\",[\"health_potion\",4]],end:[[\"\",0]]},f1_greater_health_potion_on_floor:{interesting_item:[\"f1_picked_up_greater_health_potion\",[\"greater_health_potion\",2]],end:[[\"\",0]]},f1_crafted_health_potion_on_floor:{interesting_item:[\"f1_picked_up_crafted_health_potion\",[\"crafted_health_potion\",1]],end:[[\"\",0]]},f1_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_mana_potion\",[\"mana_potion\",4]],end:[[\"\",0]]},f1_crafted_mana_potion_on_floor:{interesting_item:[\"f1_picked_up_crafted_mana_potion\",[\"crafted_mana_potion\",2]],end:[[\"\",0]]},f1_forest_explorer_daggers_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_daggers\",[\"forest_explorer_daggers\",1]],end:[[\"\",0]]},f1_forest_explorer_cap_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_cap\",[\"forest_explorer_cap\",1]],end:[[\"\",0]]},f1_forest_explorer_armour_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_armour\",[\"forest_explorer_armour\",1]],end:[[\"\",0]]},f1_forest_explorer_pants_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_pants\",[\"forest_explorer_pants\",1]],end:[[\"\",0]]},f1_forest_explorer_pendant_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_pendant\",[\"forest_explorer_pendant\",1]],end:[[\"\",0]]},f1_forest_explorer_charm_on_floor:{interesting_item:[\"f1_picked_up_forest_explorer_charm\",[\"forest_explorer_charm\",1]],end:[[\"\",0]]}},Z=Object.assign(V),X={currentNpc:void 0,currentBranch:void 0,returnFunction:void 0,initNpc(e,a){this.currentNpc=JSON.parse(JSON.stringify(Z[e])),this.currentBranch=this.currentNpc,this.returnFunction=a,this.runBranch(Object.keys(this.currentBranch))},runBranch(e){const a=this.currentBranch;console.log(\"CURRENTLY RUNNING ON THE FOLLOWING BRANCH\"),console.log(a),console.log(\"RESPONSE ARRAY IS AS FOLLOWS\"),console.log(e);for(var t,s=!1,r=0;r<Object.keys(a).length;r++){const d=e[r];switch(d){case\"say\":{s=!0;const t=X.parseDialogue(a.say);$(t,\"outside\",()=>{var a=e;delete a[a.indexOf(\"say\")],this.runBranch(a)});break}case\"action6\":case\"action5\":case\"action4\":case\"action3\":case\"action2\":case\"action\":if(!s){const e=X.currentBranch;X.currentNpc;switch(e[d][0]){case\"end\":X.runBranch([\"end\"]);break;case\"waypoint\":{const a=e[d][1],t=je(X.currentNpc,a);X.currentBranch=t,X.runBranch(Object.keys(t));break}case\"shop\":{const a=e[d][1];var l=e[d][2];switch(l[0]){case\"end\":l=()=>{const e={action:[\"end\"]};X.currentBranch=e,X.runBranch(Object.keys(e))};break;case\"waypoint\":l=()=>{const a={action:e[d][2]};X.currentBranch=a,X.runBranch(Object.keys(a))}}Y(a,l);break}case\"battle\":{const a=e[d][1][0];console.log(a),Ze.battleProcessing(n.player,(t=e[d][1][0][0],j[t]),()=>{const a={action:e[d][1][1]};X.currentBranch=a,X.runBranch(Object.keys(a))},a[1]);break}case\"gold\":{const a=e[d][1];v(`<br>Obtained ${a} gold!`),n.player.gold+=a,Ce(n.player);break}case\"exp\":{const a=e[d][1];v(`<br>Obtained ${a} EXP!`),n.player.exp+=a,Xe(),Ce(n.player);break}case\"items\":{const a=e[d][1],t=e[d][2];t>0?E(a,t,t):B(a,-1*t),Ce(n.player);break}case\"flag\":{const a=e[d][1],t=e[d][2];f[a].complete=\"true\"==t;break}case\"recipe\":{const a=e[d][1];K(a);break}}}break;case\"end\":if(!s&&\"end\"==e[0]){X.currentBranch;const e=o.messageDelay,a=X.currentNpc,t=X.returnFunction;$(X.parseDialogue(a.end),e,t)}break;case\"options\":s||(Object.keys(a.options).forEach((e,a)=>{v(`${a+1} - ${e}`)}),S(this.branchResponse));break;case\"conditional\":if(!s){const e=X.currentBranch.conditional;var i=void 0,c=!1;n.player;Object.keys(e).forEach(a=>{c||1==Ye([a])&&(c=!0,i=e[a])}),console.log(`RESULT: ${c}`),c&&(X.currentBranch=i,X.runBranch(Object.keys(i)))}break;case\"interesting_item\":$([[\"<br>You notice something interesting on the floor. You decide to pick it up and take it with you.\",2]],\"outisde\",()=>{const e={action:[\"items\",a[d][1][0],a[d][1][1]],action3:[\"flag\",a[d][0],\"true\"],action2:[\"end\"]};X.currentBranch=e,X.runBranch(Object.keys(e))})}}},branchResponse(){P(X.branchResponse);const e=x().toLowerCase(),a=X.currentBranch,t=Object.keys(a.options);if(\"Nan\"!=parseInt(e).toString()&&\"\"!=e)if(null!=t[e-1]){const n=t[e-1];X.currentBranch=a.options[n],X.runBranch(Object.keys(X.currentBranch))}else v(\"<br>Input out of range\"),S(X.branchResponse);else v(\"<br>Invalid input.\"),S(X.branchResponse)},parseDialogue:e=>(e.forEach(e=>{e[0]=e[0].replace(\"[name]\",`${X.currentNpc.name}`),e[0]=e[0].replace(\"[player]\",`${n.player.name}`),e[0]=\"<br>\"+e[0]}),e),end(){X.runBranch([\"end\"])}},Q=e=>{ee.returnFunction=e,n.first_time.stats&&(n.first_time.stats=!1,v(w.statsIntroduction)),ee.statLoop()},ee={returnFunction:void 0,statLoop:()=>{v(\"<br>Entering the stats menu.<br> Say 'sk'/'skills' to enter the skill menu, or 'sp' to enter the sp menu.\"),A(h),S(ee.statLoopResponse)},statLoopResponse:()=>{P(ee.statLoopResponse);n.player;switch(x().toLowerCase()){case\"sk\":case\"skills\":v(`${y}Entering skills menu. To change skills equipped, say 'e'/equipped', or say 'l'/'learn' to learn new skills.`),A([\"equipped\",\"learn\",\"back\"]),S(re);break;case\"sp\":v(`${y}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),v(\"<br>Current SP investments:\"),te(),A([\"allocate\",\"reset\",\"back\"]),S(ae);break;case\"b\":case\"back\":v(`${y}Returning to main menu...`),ee.returnFunction();break;default:v(\"<br>Invalid input\"),A(h),S(ee.statLoopResponse)}}},ae=()=>{P(ae);const e=x(),a=n.player;switch(e.toLowerCase()){case\"a\":case\"allocate\":v(`${y}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),v(`You have ${n.player.sp} SP.`),A([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),S(se);break;case\"r\":case\"reset\":var t=0;Object.keys(a.sp_investment).forEach(e=>{t+=a.sp_investment[e]}),v(`${y}Are you sure you want to reset your SP? It will cost ${50*t} gold. Type 'y' or 'yes' to confirm. To go back, enter anything else.`),S(ne);break;case\"b\":case\"back\":v(`${y}Returning to status menu..`),ee.statLoop();break;default:v(\"<br>Invalid input\"),v(`${y}Current SP investments:`),te(),S(ae)}},te=()=>{const e=n.player;Object.keys(e.sp_investment).map(a=>`${a}: ${e.sp_investment[a]}`).forEach(e=>v(e))},ne=()=>{P(ne);const e=x().toLowerCase(),a=n.player;var t=0;Object.keys(a.sp_investment).forEach(e=>{t+=a.sp_investment[e]});const s=50*t;\"yes\"!=e&&\"y\"!=e||(a.gold>=s?(v(`${y}SP has been reset.`),Object.keys(a.sp_investment).forEach(e=>{a.sp+=a.sp_investment[e],a.sp_investment[e]=0}),a.gold-=s):v(`${y}You don't have enough gold!`),v(`${y}You now have ${a.sp} SP.`)),v(`${y}Returning to SP menu..`),v(`${y}Entering SP menu. Say 'a'/'allocate' to allocate SP, or 'r'/'reset' to reset allocation.`),v(\"<br>Current SP investments:\"),te(),S(ae),A([\"allocate\",\"reset\"]),Ce(n.player)},se=()=>{P(se);const e=x().toLowerCase(),a=n.player;var t=!0;a.sp_investment.hasOwnProperty(e)?a.sp>0?(v(`How many SP points would you like to allocate to ${e}?`),S(oe(e)),t=!1):v(\"You don't have any SP!\"):\"back\"==e||\"b\"==e?(t=!1,v(`${y}Returning to SP menu...`),v(`${y}Entering SP menu. Say 'a/allocate' to allocate SP, 'r/reset' to reset allocation.`),v(\"Current SP investments:\"),te(),A([\"allocate\",\"reset\"]),S(ae)):v(\"Invalid input.\"),t&&(v(`<br>You currently have ${a.sp} SP.`),S(se)),Ce(n.player)},oe=e=>{P(oe);const a=()=>{P(a);const t=x();if(\"NaN\"!=parseInt(t).toString()){const a=n.player;parseInt(t)<=a.sp?(a.sp-=parseInt(t),a.sp_investment[e]+=parseInt(t),v(`${t} SP allocated to ${e}. Returning to allocate mode..`),v(`${y}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),v(`You have ${n.player.sp} SP.`),A([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),S(se),Ce(a)):(v(\"You don't have enough SP! Returning to allocate mode..\"),v(`${y}Entering allocate mode. Say the name of a stat, for example 'atk' to allocate SP to that stat. Only atk, def, matk, mdef, speed and hp can be allocated to.`),v(`You have ${n.player.sp} SP.`),A([\"atk\",\"def\",\"matk\",\"mdef\",\"speed\",\"back\"]),S(se))}else v(\"Invalid input.\"),S(oe(e))};return a},re=()=>{P(re);const e=x().toLowerCase();n.player;switch(e){case\"e\":case\"equipped\":ie.disciplinesMenuLoop();break;case\"l\":case\"learn\":le.disciplinesMenuLoop();break;case\"b\":case\"back\":v(`${y}Returning...`),ee.statLoop();break;default:v(\"<br>Invalid input.\"),S(re)}},le={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){v(`${y}Showing all available disciplines. Say the name of a discipline to view the skills it contains if it is unlocked, or to unlock it if it is not unlocked.`);const e=d;Object.keys(e).forEach(a=>{e[a].requirements.level<=n.player.level&&(e[a].visible=!0)}),Object.keys(e).forEach(a=>{const t=e[a];1==t.unlocked?v(` - ${De(t.name)} -- UNLOCKED`):1==t.visible&&v(` - ${De(t.name)} -- LOCKED`)}),ce.showAllDisciplines(e),S(le.disciplinesMenu)},disciplineMenuLoop(e){const a=le.currentDiscipline;n.player;if(1==e){v(`${y}Showing all skills in the ${a.name.toUpperCase()} discipline. Say the name of a skill to view its description and unlock it if you haven't done so already.`);var t=0,s=0;a.skills.forEach(e=>{1==e.unlocked&&(t+=1),s+=1}),v(`Skills known in this discipline: ${t}/${s}<br>`),a.skills.forEach(e=>{const a=e.name,t=1==e.unlocked?\"X\":\" \";v(`${We[a].name} - [${t}]`)})}ce.skillsInDiscipline(a),S(le.disciplineMenu)},disciplineMenu(){P(le.disciplineMenu);const e=x().toLowerCase(),a=n.player,t=le.currentDiscipline,s=t.skills.findIndex(a=>We[a.name].name==e);if(-1!=s){const n=We[t.skills[s].name].description,r=t.skills[s];if(v(`${y}${De(e)} - ${n}`),1==r.unlocked)v(`${y}This skill is already unlocked.`),ce.skillsInDiscipline(t),le.disciplineMenuLoop(!1);else{if(v(`${y}This skill is not learned. In order to unlock it, the following requirements must be met:`),0==le.checkRequirements(r))v(\"<br>You do not meet the requirements to unlock this skill!\"),le.disciplinesMenuLoop(!0);else{var o=le.checkCost(r);v(`Unlocking this skill requires ${r.cost.ap} AP.`),a.ap<r.cost.ap&&(o=!1),0==o?(v(\"<br>You do not have enough items/gold/ap to unlock this skill!\"),le.disciplinesMenuLoop(!0)):(v(\"Would you like to learn this skill? Say 'y' or 'yes' to learn it, otherwise enter anything else.\"),le.currentSkill=r,S(le.unlockSkill))}}}else\"back\"==e||\"b\"==e?le.disciplinesMenuLoop():(v(\"<br>Invalid input\"),ce.skillsInDiscipline(t),le.disciplineMenuLoop(!1))},unlockSkill(){P(le.unlockSkill);const e=x().toLowerCase(),a=n.player,t=le.currentSkill;\"y\"==e||\"yes\"==e?(t.unlocked=!0,t.cost.items.forEach(e=>{const t=a.inventory.findIndex(a=>{try{return a.name==e[0]}catch{}}),n=a.inventory[t];n[1]-=e[1],0==n[1]&&delete a.inventory[t]}),a.gold-=t.cost.gold,a.ap-=t.cost.ap,v(\"Skill unlocked!\"),ce.unlockedDisciplines(),le.disciplineMenuLoop(!0)):(v(`${y}Returning to discipline menu...`),ce.unlockedDisciplines(),le.disciplineMenuLoop(!0)),Ce(a)},disciplinesMenu(){P(le.disciplinesMenu);const e=x().toLowerCase(),a=(n.player,d);if(a.hasOwnProperty(e)){if(1==a[e].unlocked)le.currentDiscipline=a[e],le.disciplineMenuLoop(!0);else if(0==a[e].unlocked&&1==a[e].visible){this.currentDiscipline=a[e];const t=this.currentDiscipline;v(`${y}This discipline is not unlocked. To unlock it, the following requirements must be met:`);n.player;if(0==le.checkRequirements(t))v(\"You do not meet the requirements to unlock this discipline!\"),le.disciplinesMenuLoop();else{0==le.checkCost(t)?(v(\"You do not have enough items/gold to unlock this discipline!\"),le.disciplinesMenuLoop()):(v(\"Would you like to unlock this discipline? If so, type 'y' or 'yes'. This action cannot be undone.\"),S(le.unlockDiscipline))}}}else\"back\"==e||\"b\"==e?(v(`${y}Returning...`),v(`${y}Entering skills menu. To change skills equipped, say 'e'/'equipped', or say 'l'/'learn' to learn new skills.`),A([\"equipped\",\"learn\",\"back\"]),S(re)):(v(\"<br>Invalid input<br>\"),S(le.disciplinesMenu));Ce(n.player)},unlockDiscipline(){P(le.unlockDiscipline);const e=n.player,a=x().toLowerCase();\"y\"==a||\"yes\"==a?(this.currentDiscipline.unlocked=!0,this.currentDiscipline.cost.items.forEach(a=>{const t=e.inventory.findIndex(e=>{try{return e[0]==a[0]}catch{}}),n=e.inventory[t];n[1]-=a[1],0==n[1]&&delete e.inventory[t]}),e.gold-=this.currentDiscipline.cost.gold,v(`${y}Discipline unlocked!`),this.currentDiscipline=null,le.disciplinesMenuLoop()):(v(`${y}Returning to disciplines menu..`),le.disciplinesMenuLoop()),Ce(n.player)},checkRequirements(e,a=!0){const t=n.player;var s=!0,o=!1;return t.level>=e.requirements.level?o=!0:s=!1,a&&v(`Be at level ${e.requirements.level} or higher - [${1==o?\"X\":\" \"}]`),e.requirements.skills.forEach(e=>{-1!=t.library.indexOf(e)?o=!0:(o=!1,s=!1),a&&v(`Unlock skill ${e} - [${1==o?\"X\":\" \"}]`)}),e.requirements.flags.forEach(e=>{1==f[e].complete?o=!0:(o=!1,s=!1),a&&v(`${f[e].desc} - [${1==o?\"X\":\" \"}]`)}),s},checkCost(e){const a=n.player;var t=!0;return v(`<br>You will need to pay: ${e.cost.gold} gold.`),e.cost.items.length>0&&(v(\"You will also need the following items:\"),e.cost.items.forEach(e=>{const n=a.inventory.findIndex(a=>{try{return a[0]==e[0]}catch{}});var s=0;s=-1==n?0:a.inventory[n][1],v(`${e[1]} ${e[0]} (${s}/${e[1]})`),e[1]>s&&(t=!1)})),e.cost.gold>a.gold&&(t=!1),t}},ie={currentDiscipline:null,currentSkill:null,disciplinesMenuLoop(){v(`${y}Showing all available disciplines. Say the name of a discipline to`+\" view the skills it contains. Or, say 'e' or 'equipped' to view your currently equipped skills.\");const e=d;Object.keys(e).forEach(a=>{e[a].requirements.level<=n.player.level&&(e[a].visible=!0)}),Object.keys(e).forEach(a=>{const t=e[a];1==t.unlocked&&v(` - ${De(t.name)}`)});var a=[\"equipped\"];Object.keys(e).forEach(t=>{const n=e[t];1==n.unlocked&&a.push(n.name)}),a.push(\"back\"),A(a),S(ie.disciplinesMenu)},disciplinesMenu(){P(ie.disciplinesMenu);const e=x().toLowerCase(),a=n.player,t=d;if(t.hasOwnProperty(e)){if(1==t[e].unlocked){ie.currentDiscipline=t[e];var s=[\"equipped\"];Object.keys(t).forEach(e=>{const a=t[e];1==a.unlocked&&s.push(a.name)}),s.push(\"back\"),A(s),ie.disciplineMenuLoop(!0)}}else\"back\"==e||\"b\"==e?(v(`${y}Returning...`),v(`${y}Entering skills menu. To change skills equipped, say 'e'/'equipped',`+\" or say 'l'/'learn' to learn new skills.\"),A([\"equipped\",\"learn\",\"back\"]),S(re)):\"e\"==e||\"equipped\"==e?(v(`${y}Showing equipped skills. Say the name of an equipped skill to unequip it.`),console.log(\"logging skills\"),console.log(a.stats.skills),Ne(a.stats.skills).forEach(e=>{console.log(`current skills is ${e}`);const a=We[e].description;v(`<br>${We[e].name} - ${a}`)}),ie.initShortcuts(),S(ie.unequipSkill)):(v(\"<br>Invalid input<br>\"),S(ie.disciplinesMenu));Ce(n.player)},unequipSkill(){const e=x().toLowerCase(),a=n.player;P(ie.unequipSkill);var t=Ne(a.stats.skills);-1!=t.indexOf(e.replace(/\\s/g,\"_\"))?a.stats.skills.length>1?(\"attack\"!=e&&\"guard\"!=e?(a.stats.skills.splice([t.indexOf(e.replace(/\\s/g,\"_\"))],1),v(`${e} unequipped.`)):v(\"<br>That skill can't be unequipped!\"),ie.initShortcuts(),S(ie.unequipSkill)):(v(\"You can't have 0 skills!\"),ie.initShortcuts(),S(ie.unequipSkill)):\"back\"==e||\"b\"==e?(v(`${y}Returning to disciplines menu...`),ie.disciplinesMenuLoop()):(v(\"<br>Invalid input.\"),ie.initShortcuts(),S(ie.unequipSkill))},disciplineMenuLoop(e=!1){const a=ie.currentDiscipline;n.player;1==e&&(v(`${y}Showing all known skills in the ${a.name.toUpperCase()} discipline. Say the name of a skill to view its description.`),a.skills.forEach(e=>{const a=e.name;\"X\"==(1==e.unlocked?\"X\":\" \")&&v(` - ${We[a].name}`)}));var t=[];a.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&1==e.unlocked&&t.push(We[e.name].name)}),t.push(\"back\"),A(t),S(ie.disciplineMenu)},disciplineMenu(){P(ie.disciplineMenu);const e=x().toLowerCase(),a=n.player,t=ie.currentDiscipline;if(-1!=t.skills.map(e=>{if(1==e.unlocked)return We[e.name].name}).indexOf(e)){const n=We[e.replace(/\\s/g,\"_\")].description,s=de(t,e.replace(\" \",\"_\"));ie.currentSkill=s,v(`<br>${De(e)} - ${n}`),-1!=a.stats.skills.indexOf(fe(e.replace(/\\s/g,\"_\"),t))?(v(\"This skill is already equipped.\"),ie.disciplineMenuLoop(!1)):(v(\"This skill is not equipped. Say 'e' or 'equip' to equip this skill. You can also say 'f' or 'forget' to unlearn this skill. Input anything else to return.\"),S(ie.skillMenu))}else\"back\"==e||\"b\"==e?ie.disciplinesMenuLoop():(v(\"<br>Invalid input\"),ce.skillsInDiscipline(t),S(ie.disciplineMenu))},skillMenu(){const e=x().toLowerCase(),a=n.player;P(ie.skillMenu);const t=ie.currentSkill;ie.currentDiscipline;\"e\"!=e&&\"equip\"!=e||(a.stats.skills.length<12?-1==a.stats.skills.indexOf(t.code)?(console.log(\"logging current skill\"),console.log(ie.currentSkill),a.stats.skills.push(ie.currentSkill.code),v(`${y}Skill equipped.`),ie.disciplineMenuLoop(!0)):(v(`${y}You already have this skill equipped!`),ie.disciplineMenuLoop(!0)):(v(`${y}You have too many skills equipped!`),ie.disciplineMenuLoop(!0))),\"f\"==e||\"forget\"==e?(v(`${y}Would you like to unlearn this skill? You will get the AP back, but you the reagents and gold will be lost.`),v(\"<br>Input 'y'/'yes' to forget the skill, otherwise input 'b'/'back' to return to the discipline menu.\"),A([\"yes\",\"back\"]),S(ie.unlearnSkillResponse)):(v(`${y}Returning to discipline menu...`),ie.disciplineMenuLoop(!0))},unlearnSkillResponse(){switch(P(ie.unlearnSkillResponse),x().toLowerCase()){case\"y\":case\"yes\":{const e=ie.currentSkill;ie.currentDiscipline;-1==n.player.stats.skills.indexOf(e.code)?1==e.unlearnable?ie.unlearnSkill():(v(\"<br>This skill cannot be unlearned!\"),ie.disciplineMenuLoop(!0)):(v(\"<br>You cannot unlearn an equipped skill!\"),ie.disciplineMenuLoop(!0));break}case\"b\":case\"back\":v(`${y}Returning...`),ie.disciplineMenuLoop(!0);break;default:v(\"Invalid input.\"),S(ie.unlearnSkillResponse)}},unlearnSkill(){const e=ie.currentSkill;ie.currentDiscipline;e.unlocked=!1,n.player.ap+=e.cost.ap,v(`${y}Skill unlearned! Gained ${e.cost.ap} AP.`),Ce(n.player),v(`${y}Returning...`),ie.disciplineMenuLoop(!0)},getSkills:()=>n.player.stats.skills.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var a=e.split(\"-\"),t=a[0],n=a[1];return d[t].skills[n].name}return e}),initShortcuts(){const e=ie.getSkills();e.push(\"back\"),A(e)}},ce={unlockedDisciplines:()=>{const e=d;var a=[\"equipped\"];Object.keys(e).forEach(t=>{const n=e[t];1==n.unlocked&&a.push(n.name)}),a.push(\"back\"),A(a)},skillsInDiscipline:e=>{var a=[];e.skills.forEach(e=>{e.hasOwnProperty(\"name\")&&a.push(We[e.name].name)}),a.push(\"back\"),A(a)},showAllDisciplines:e=>{var a=[];Object.keys(e).forEach(t=>{const n=e[t];1==n.visible&&a.push(n.name)}),a.push(\"back\"),A(a)}},de=(e,a)=>{var t=-1;return e.skills.forEach(e=>{e.name==a&&(t=e)}),t},fe=(e,a)=>{const t=a.skills;for(var n=0;n<t.length;n++)if(t[n].name==e)return t[n].skillCode;return-1},me=e=>{he.returnFunction=e,n.first_time.settings&&(n.first_time.settings=!1,v(w.settingsIntroduction)),he.mainLoop()},he={returnFunction:void 0,mainLoop:()=>{v(`${y}Currently in settings. You can do the following things:`),v(\"<br> - Change the message delay for battle and outside of battle (input 'md')\"),v(\"<br> - Change the input shortcut key ('ci')\"),v(\"<br> - Test your current message delay settings ('tc')\"),v(\"<br> - View or re-view any tutorial messages ('rv')\"),v(\"<br> - To save or reset your data, type 'save'.\"),v(\"<br> - Change the scroll limit ('sl')\"),A(p),S(he.mainLoopResponse)},mainLoopResponse:()=>{switch(P(he.mainLoopResponse),x().toLowerCase()){case\"message delay\":case\"md\":he.messageDelayLoop();break;case\"change shortcut\":case\"ci\":he.changeShortcutLoop();break;case\"test message\":case\"tc\":he.testMessageLoop();break;case\"sa\":case\"save\":he.saveLoop();break;case\"rv\":case\"tutorials\":he.tutorialLoop();break;case\"sl\":case\"scroll limit\":he.scrollLimitLoop();break;case\"b\":case\"back\":v(`${y}Returning...`),he.returnFunction();break;default:v(`${y}Invalid input.`),A(p),S(he.mainLoopResponse)}},scrollLimitLoop:()=>{v(`${y}Currently in the scroll limit menu. Type any integer between 50 and 500 to change`+\" the scroll limit to that number. Scroll limit refers to the number of lines that can be stored in the main box\"+` before the oldest ones are deleted. <b>Scroll limit is currently ${o.scrollLimit}</b>`),S(he.scrollLimitResponse)},scrollLimitResponse:()=>{P(he.scrollLimitResponse);const e=x().toLowerCase();var a=!1;\"NaN\"!=parseInt(e).toString()?parseInt(e)>=50&&parseInt(e)<=500?(o.scrollLimit=parseInt(e),v(`Scroll limit changed to ${parseInt(e)}`),v(\"You are still in the scroll limit menu. Input 'b'/'back' to return.\")):v(\"<br>Input out of range.\"):\"b\"==e||\"back\"==e?(v(\"<br>Returning...\"),a=!0):v(\"<br>Invalid input.\"),a?he.mainLoop():S(he.scrollLimitResponse)},tutorialLoop:()=>{v(`${y}Currently in the tutorial menu. State a topic to view the corresponding tutorial:`),v(\" - Gamestart\"),v(\" - Explore\"),v(\" - Shop\"),v(\" - Equip\"),v(\" - Stats\"),v(\" - Crafting\"),v(\" - Settings\"),v(\" - Combat\"),v(\" - Combat-complex\"),A(u),S(he.tutorialLoopResponse)},tutorialLoopResponse:()=>{P(he.tutorialLoopResponse);const e=x().toLowerCase();switch(e){case\"gamestart\":v(w.gameIntroduction);break;case\"explore\":v(w.exploreIntroduction);break;case\"shop\":v(w.shopIntroduction);break;case\"equip\":v(w.equipIntroduction);break;case\"stats\":v(w.statsIntroduction);break;case\"crafting\":v(w.craftingIntroduction);break;case\"settings\":v(w.settingsIntroduction);break;case\"combat\":v(w.combatIntroduction);break;case\"combat-complex\":v(w.combatComplex);break;case\"b\":case\"back\":v(`${y}Returning...`),he.mainLoop();break;default:v(\"<br>Invalid input.\"),S(he.tutorialLoopResponse),\"b\"!=e&&\"back\"!=e&&(v(\"<br>Currently in tutorial menu. Use inputshortcut to see your options.\"),A(u),S(he.tutorialLoopResponse))}},saveLoop:()=>{v(`${y}Entering the save menu. Data saved can be loaded if you refresh the page, but`+\" not if you clear the cache or restart your device. Saving will overwrite previously saved data. Type 's'/'save' to save, and 'r'/'reset' to reset your data.\"),A([\"save\",\"load\",\"back\"]),S(he.saveLoopResponse)},saveLoopResponse:()=>{switch(P(he.saveLoopResponse),x().toLowerCase()){case\"s\":case\"save\":v(`${y}Saved data. Returning...`),ue(\"save1\",n),pe(\"save1\",o),ye(\"save1\",f),ge(\"save1\",d),he.mainLoop();break;case\"r\":case\"reset\":v(`${y}Data reset. Refresh the page to restart.`),localStorage.clear(),he.mainLoop();break;case\"b\":case\"back\":v(`${y}Returning...`),he.mainLoop();break;default:v(\"<br>Invalid input.\"),S(he.saveLoopResponse);case!0:Ce(n.player)}},testMessageLoop:()=>{v(`${y}Four messages of different length will play in order to show you approximately\\n        the speed of the text in the settings you have selected. Please choose whether you would like to test your battle\\n        display speed or your display speed outside of battle.`),v(\"<br>Please type 'ba'/'battle' to see text speed in battle and 'ou'/'outside' to see text speed outside of battle.\"),v(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),v(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),A([\"battle\",\"outside\",\"back\"]),S(he.testMessage)},testMessage:()=>{P(he.testMessage);var e=!1,a=\"outside\";switch(x().toLowerCase()){case\"ba\":case\"battle\":e=!0,a=\"battle\";break;case\"ou\":case\"outside\":e=!0,a=\"outside\";break;case\"b\":case\"back\":e=!1,v(`${y}Returning...`),he.mainLoop();break;default:v(\"<br>Invalid input.\"),S(he.testMessage)}if(e){$([[\"This is a short message. Hi!\",.5],[\"This message is a little bit longer... Hello there. Lovely weather today.\",1],[\"This message is pretty long. Longer than the previous, and the one before it. Memento mori. Praise the sun? Weather is ok.\",1.5],[\"This is the longest message in this test. I hope you enjoy reading this one. Um. Have you seen Vinland Saga? It's a pretty good anime. I'd watch it if I were you. Or don't, I don't really care.\",3]],a,he.postTestMessage)}},postTestMessage:()=>{v(`${y}Message testing has concluded. Returning...`),he.mainLoop()},changeShortcutLoop:()=>{v(`${y}Currently changing the input shortcut toggle key. Because most of the keyboard is`+\" required for gameplay, there are a limited number of keys that can be used. Input the name of a key as seen to change input shortcut to that key:\"),v(\"<br>\"),Object.keys(k).forEach(e=>{v(` - ${e}`)}),v(`<br>Your current key is ${k[o.toggleShortcut]}`),A([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"AltLeft\",\"AltRight\",\"¬\",\"back\"]),S(he.changeShortcutResponse)},changeShortcutResponse:()=>{P(he.changeShortcutResponse);const e=De(x().toLowerCase());-1!=[\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"Altleft\",\"Altright\"].indexOf(e)?(v(`${y}Input shortcut toggle changed to <b>${e}</b>.`),o.toggleShortcut=e,A([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),S(he.changeShortcutResponse)):\"Back\"==e||\"B\"==e?(v(`${y}Returning...`),he.mainLoop()):(v(\"<br>Invalid input\"),A([\"Rshift\",\"Lshift\",\"Rctrl\",\"Lctrl\",\"¬\",\"AltLeft\",\"AltRight\",\"back\"]),S(he.changeShortcutResponse))},messageDelayLoop:()=>{v(`${y}There are two types of message delay you can change. Would you like to change`+\" the message delay in battle or outside of battle?\"),v(\"<br>Type 'ba'/'battle' to change the message delay in battle and 'ou'/'outside' to change the message delay outside of battle.\"),v(`<br>Your battle message delay is currently ${o.battleMessageDelay} seconds.`),v(`<br>Your general message delay is currently ${o.messageDelay} seconds.`),A([\"battle\",\"outside\",\"back\"]),S(he.messageDelayResponse)},messageDelayResponse:()=>{switch(P(he.messageDelayResponse),x().toLowerCase()){case\"ba\":case\"battle\":he.battleMessageDelayLoop();break;case\"ou\":case\"outside\":he.outsideMessageDelayLoop();break;case\"b\":case\"back\":v(`${y}Returning...`),he.mainLoop();break;default:v(\"<br>Invalid input.\"),A([\"battle\",\"outside\",\"back\"]),S(he.messageDelayResponse)}},battleMessageDelayLoop:()=>{const e=_;v(`${y}Currently changing battle message delay loop. You can type any integer from 0-9, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),S(he.battleMessageDelayResponse)},battleMessageDelayResponse:()=>{P(he.battleMessageDelayResponse);const e=x().toLowerCase(),a=_;switch(!0){case\"s\"==e||\"slow\"==e:{const e=a.slow;o.battleMessageDelay=e,v(`${y}Changed battle message delay to ${e} seconds.`),S(he.battleMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=a.medium;o.battleMessageDelay=e,v(`${y}Changed battle message delay to ${e} seconds.`),S(he.battleMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=a.fast;o.battleMessageDelay=e,v(`${y}Changed battle message delay to ${e} seconds.`),S(he.battleMessageDelayResponse);break}case\"NaN\"!=parseInt(e).toString():{const a=parseInt(e);a<10&&a>=0?(o.battleMessageDelay=a,v(`${y}Changed battle message delay to ${a} seconds.`)):v(\"<br>That number is out of range!\"),S(he.battleMessageDelayResponse);break}case\"b\"==e||\"back\"==e:v(`${y}Returning...`),he.messageDelayLoop();break;default:v(\"<br>Invalid input.\"),S(he.battleMessageDelayResponse)}},outsideMessageDelayLoop:()=>{const e=b;v(`${y}Currently changing outside message delay. You can type any integer from 0-9, including`+\" 0 (to make it instant) to change the battle message delay to that value. However, we would recomment you use one of\"+` the premade settings: 's'/'slow' (${e.slow}s}), 'm'/'medium' (${e.medium}s) or 'f'/'fast' (${e.fast}s).`),S(he.outsideMessageDelayResponse)},outsideMessageDelayResponse:()=>{P(he.outsideMessageDelayResponse);const e=x().toLowerCase(),a=b;switch(!0){case\"s\"==e||\"slow\"==e:{const e=a.slow;o.messageDelay=e,v(`${y}Changed message delay to ${e} seconds.`),S(he.outsideMessageDelayResponse);break}case\"m\"==e||\"medium\"==e:{const e=a.medium;o.messageDelay=e,v(`${y}Changed message delay to ${e} seconds.`),S(he.outsideMessageDelayResponse);break}case\"f\"==e||\"fast\"==e:{const e=a.fast;o.messageDelay=e,v(`${y}Changed message delay to ${e} seconds.`),S(he.outsideMessageDelayResponse);break}case\"NaN\"!=parseInt(e).toString():{const a=parseInt(e);a<10&&a>=0?(o.messageDelay=a,v(`${y}Changed message delay to ${a} seconds.`)):v(\"<br>That number is out of range!\"),S(he.outsideMessageDelayResponse);break}case\"b\"==e||\"back\"==e:v(`${y}Returning...`),he.messageDelayLoop();break;default:v(\"<br>Invalid input.\"),S(he.outsideMessageDelayResponse)}}},ue=(e,a)=>{localStorage.setItem(e+\"Player\",JSON.stringify(a))},pe=(e,a)=>{localStorage.setItem(e+\"Settings\",JSON.stringify(a))},ge=(e,a)=>{localStorage.setItem(e+\"Disciplines\",JSON.stringify(a))},ye=(e,a)=>{localStorage.setItem(e+\"Flags\",JSON.stringify(a))},_e=(e,a)=>{Object.keys(e).forEach(t=>{null!=a[t]&&(!Fe(e[t])||Array.isArray(e[t])?e[t]=a[t]:_e(e[t],a[t]))})},be=(e,a)=>{Object.keys(e).forEach(t=>{console.log(`key is ${t}`),null!=a[t]&&(\"unlocked\"==t||\"visible\"==t||\"complete\"==t?e[t]=a[t]:Fe(e[t])&&be(e[t],a[t]))})};setInterval(()=>{ue(\"save1\",n),pe(\"save1\",o),ye(\"save1\",f),ge(\"save1\",d),v('<span style=\"color: gold\">Data saved</span>')},3e4);const ke=e=>{Ee.returnFunction=e,n.first_time.equip&&(n.first_time.equip=!1,v(w.equipIntroduction)),Ee.menuLoop()},we={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"young_venomous_wolf\",100,{addLevels:5}]],finds:[[\"slime_ball\",65,1,3],[\"grey_wolf_pelt\",30,1,1],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[],interacts:[]},ve={explores:[[\"encounter\",60],[\"find\",40]],encounters:[[\"grey_wolf\",50,!0,!1,!1],[\"lesser_teravalum\",30,7,!0,!1,!1],[\"young_venomous_wolf\",15,!0,!1,!1],[\"wayward_traveler\",5,!0,!1,!1]],finds:[[\"slime_ball\",65,1,3],[\"grey_wolf_pelt\",30,1,1],[\"damaged_dagger\",1,1,1],[\"damaged_helm\",1,1,1],[\"damaged_pantaloons\",1,1,1],[\"damaged_armour\",1,1,1],[\"damaged_sword\",1,1,1]],ambushes:[],interacts:[]},xe={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"greater_slime\",40,!0,!1,!1],[\"lesser_water_klastera\",30,!0,!1,!1],[\"young_water_lizard\",30,!0,!1,!1]],finds:[[\"slime_ball\",40,2,5],[\"weak_membrane\",20,1,2],[\"tiny_lizard_tail\",20,1,1],[\"aquus_cluster\",17,1,2],[\"water_orb\",3,1,1]],ambushes:[],interacts:[]},Se={explores:[[\"encounter\",70],[\"find\",30]],encounters:[[\"red_slime\",35,!0,!1,!1],[\"venomous_wolf\",30,!0,!1,!1],[\"grey_wolf\",25,16,!1,!1],[\"dark_beast\",10,!0,!1,!1]],finds:[[\"red_slime_ball\",40,3,4],[\"grey_wolf_pelt\",30,2,4],[\"sharp_claw\",20,1,1],[\"shadow_pelt\",10,2,3]],ambushes:[],interacts:[]},Pe={explores:[[\"find\",100]],encounters:[],finds:[[\"trash\",100,1,1]],ambushes:[[]],interacts:[]},$e={1:\"floor1\"},Ie={currentZone:void 0,currentRoom:void 0,coordinates:void 0,justEnteredRoom:!0,ambushed:!1,roomLoop:()=>{const e=Ie.currentZone,a=Ie.coordinates,t=e.zone[a[0]][a[1]];console.log(`roomcode is ${t}`);const s=JSON.parse(JSON.stringify(e[t[0]]));if(t.length>1){const e=s.specialRooms[t.slice(1)];Object.keys(e).forEach(a=>{s[a]=e[a]})}delete s.specialRooms,Ie.currentRoom=s,console.log(\"logging current room\"),console.log(s);const o=Ie.currentRoom,r=n.player.maps[e.name];console.log(r),console.log(`tile the player is currently on is ${r[a[1]][a[0]]}`),\"discovered\"!=r[a[1]][a[0]]&&(r[a[1]][a[0]]=\"discovered\",\"discovered\"!=r[a[1]+1][a[0]]&&(r[a[1]+1][a[0]]=\"seen\"),\"discovered\"!=r[a[1]-1][a[0]]&&(r[a[1]-1][a[0]]=\"seen\"),\"discovered\"!=r[a[1]][a[0]+1]&&(r[a[1]][a[0]+1]=\"seen\"),\"discovered\"!=r[a[1]][a[0]-1]&&(r[a[1]][a[0]-1]=\"seen\")),Ce(n.player);var l=!1;if(0==Ie.ambushed){console.log(\"ammmmbushed\"),Ie.ambushed=!0;const e=o.ambushes,a=Math.floor(100*Math.random())+1;var i=0;for(i in e){var c=0==i?0:e[i-1][1];if(a>c&&a<=e[i][1]+c){l=!0,v(`${y}AMBUSH!!`);const a=j[e[i][0]],t=e[i][2];Ze.battleProcessing(n.player,a,Ie.roomLoop,t);break}c+=e[i][1]}}l||(Ie.roomLoop2(Ie.justEnteredRoom),S(Ie.roomResponse))},roomLoop2:(e=!1)=>{const a=Ie.coordinates,t=Ie.currentZone.zone,n=(t[a[0]][a[1]],Ie.currentRoom);e&&v(`${y}${n.entrance}`);const s=[a[1],t.length-a[0]];v(`<b>Coordinates: [${s}]</b>`),Ae.forEach(e=>{v(e)});var o=1;n.extraOptions.forEach(e=>{var a=!0;e.length>1&&(a=Ye(e[1])),a&&(v(` - ${o}: ${e[0]}`),o+=1)}),Ie.justEnteredRoom=!1,S(Ie.roomResponse)},roomResponse:()=>{P(Ie.roomResponse);const e=x().toLowerCase(),a=Ie.currentZone,t=Ie.coordinates,s=(Ie.currentZone.zone[t[0]][t[1]],Ie.currentRoom);switch(!0){case\"e\"==e:case\"explore\"==e:{const e=s.explores,a=Math.floor(100*Math.random())+1;console.log(`Random is ${a}`);var o=0;for(o in e){const t=0==o?0:e[o-1][1];if(console.log(`index is ${o}`),a>t&&a<=e[o][1]+t)if(\"encounter\"==e[o][0]){o=0;const e=s.encounters,a=Math.floor(100*Math.random())+1;var r=0;for(o in console.log(`Encounter random is ${a}`),e){if(console.log(`index is ${o}`),a>(r+=0==o?0:e[o-1][1])&&a<=e[o][1]+r){v(\"<br>You survey the area....\"),v(\"<br>An enemy approaches!\");const a=j[e[o][0]],t=e[o][2];Ze.battleProcessing(n.player,a,Ie.roomLoop,t);break}}}else if(\"find\"==e[o][0]){o=0;const e=s.finds,a=Math.floor(100*Math.random())+1;r=0;for(o in console.log(`Find random is ${a}`),e){if(a>(r+=0==o?0:e[o-1][1])&&a<=e[o][1]+r){v(\"<br>You survey the area....\"),v(\"<br>You find something while looking around!\"),null!=e[o][3]?E(e[o][0],e[o][2],e[o][3]):E(e[o][0]);break}}S(Ie.roomResponse)}}break}case\"i\"==e:case\"inventory\"==e:ke(Ie.roomLoop);break;case\"st\"==e:case\"stats\"==e:Q(Ie.roomLoop);break;case\"set\"==e:case\"settings\"==e:me(Ie.roomLoop);break;case\"c\"==e:case\"crafting\"==e:U(Ie.roomLoop);break;case null!=s.interacts[parseInt(e-1)]:for(var l=[],i=0;i<s.interacts.length;i++){var c=!0;s.interacts[i].length>1&&(c=Ye(s.interacts[i][1])),c&&l.push(s.interacts[i])}null!=l[parseInt(e-1)]?(f=l[parseInt(e-1)][0],m=Ie.roomLoop,X.initNpc(f,m)):(v(\"Invalid input\"),S(Ie.roomResponse));break;case\"leave\"==e:v(\"<br>Leaving area...\"),Ie.currentZone=void 0,Ie.coordinates=void 0,Ie.justEnteredRoom=!0,ta();break;case\"s\"==e:case\"south\"==e:{var d=void 0;const e=[t[0]+1,t[1]];null!=s.south?d=Ie.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(d=e),null!=d?$([[\"<br>You travel to the south...\",1]],\"outside\",()=>{Ie.coordinates=d,Ie.justEnteredRoom=!0,Ie.ambushed=!1,Ie.roomLoop()}):(v(\"<b>You can't travel in that direction!</b>\"),Ie.roomLoop());break}case\"n\"==e:case\"north\"==e:{d=void 0;const e=[t[0]-1,t[1]];null!=s.south?d=Ie.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(d=e),null!=d?$([[\"<br>You travel to the north...\",1]],\"outside\",()=>{Ie.coordinates=d,Ie.justEnteredRoom=!0,Ie.ambushed=!1,Ie.roomLoop()}):(v(\"<b>You can't travel in that direction!</b>\"),Ie.roomLoop());break}case\"l\"==e:case\"left\"==e:{d=void 0;const e=[t[0],t[1]-1];null!=s.south?d=Ie.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(d=e),null!=d?$([[\"<br>You travel to the left...\",1]],\"outside\",()=>{Ie.coordinates=d,Ie.justEnteredRoom=!0,Ie.ambushed=!1,Ie.roomLoop()}):(v(\"<b>You can't travel in that direction!</b>\"),Ie.roomLoop());break}case\"r\"==e:case\"right\"==e:{d=void 0;const e=[t[0],t[1]+1];null!=s.south?d=Ie.currentZone.zone.south:null!=e&&\"n\"!=a.zone[e[0]][e[1]]&&(d=e),null!=d?$([[\"<br>You travel to the right...\",1]],\"outside\",()=>{Ie.coordinates=d,Ie.justEnteredRoom=!0,Ie.ambushed=!1,Ie.roomLoop()}):(v(\"<b>You can't travel in that direction!</b>\"),Ie.roomLoop());break}case\"m\"==e:case\"map\"==e:{const e=a.zone,n=Me(e,a,t);v(n),Ie.roomLoop();break}case\"sm\"==e:case\"show minimap\"==e:Oe.mode=\"normal\",Ce(n.player),Ie.roomLoop();break;default:v(\"Invalid input\"),S(Ie.roomResponse)}var f,m;Ce(n.player)}},Te={floor1:{name:\"floor1\",zone:[[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"z\",\"z\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"r\",\"r\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"z\",\"z\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"r\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"r\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"f\",\"d\",\"d\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"d\",\"r\",\"r\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f31\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f7\",\"f\",\"f\",\"f40\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f11\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"f29\",\"f\",\"f\",\"f\",\"f\",\"n\",\"f\",\"n\",\"f10\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"f\",\"n\",\"n\",\"n\",\"f8\",\"n\",\"f9\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f12\",\"n\",\"d\",\"d\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"n\",\"f13\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"n\",\"f\",\"n\",\"f4\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"f39\",\"n\",\"n\",\"f\",\"n\",\"f27\",\"f\",\"f\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f14\",\"f\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f28\",\"f\",\"f\",\"f6\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f1\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"s\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f15\",\"n\",\"f\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"f5\",\"f\",\"f\",\"f26\",\"n\",\"f2\",\"n\",\"f\",\"f3\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"d\",\"d\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f26\",\"f\",\"f\",\"f\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"f16\",\"f\",\"f\",\"f\",\"f25\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"f30\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f35\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f25\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"f\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"f\",\"f\",\"n\",\"f38\",\"n\",\"n\",\"n\",\"n\",\"f23\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f17\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"f24\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"n\",\"n\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f\",\"f20\",\"n\",\"f\",\"n\",\"f18\",\"f\",\"f\",\"f\",\"f\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"f33\",\"f\",\"f\",\"n\",\"f22\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f\",\"n\",\"n\",\"f37\",\"f\",\"f32\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"f\",\"d\",\"n\",\"n\",\"n\",\"n\",\"f21\",\"n\",\"f\",\"f\",\"n\",\"n\",\"f19\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"f34\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"d\",\"d\",\"d\",\"n\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"d\",\"n\",\"q\",\"q\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"d\",\"n\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"q\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"n\",\"q\",\"n\",\"n\",\"q\",\"n\",\"n\",\"n\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"q\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"],[\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\",\"n\"]],s:{entrance:\"Green grass unfolds like a blanket in all directions. As far as can be seen, the view is fairly unchanging - vibrant leafage darkened by a lack of light caused by the sheltering of arborous towers above. Medum-sized bushes and thickets prevent a clear view in any particular direction, however to the north-east, some very faint echoes of water splashing can be heard.\",colour:\"#0b6d00\",extraOptions:[[\"Speak to random person\"]],explores:we.explores,encounters:we.encounters,finds:we.finds,ambushes:[],interacts:[[\"f1_owned_crafted_sword\"]]},f:{entrance:\"The forest remains unchanging for a large distance. It is easy to travel if one avoids the occasional bushy path.\",colour:\"#0b6d00\",extraOptions:[],explores:we.explores,encounters:we.encounters,finds:we.finds,ambushes:we.ambushes,interacts:we.interacts,specialRooms:{1:{extraOptions:[[\"Speak to little girl\",[\"flag: -f1_spoken_to_little_girl\"]]],interacts:[[\"f1_little_girl\",[\"flag: -f1_spoken_to_little_girl\"]]]}}},d:{entrance:\"The grass is clearly a shade or two darker than where you began. There is still a relaxing atmosphere, albeit more... dangerous.\",colour:\"#009b6f\",extraOptions:[],explores:ve.explores,encounters:ve.encounters,finds:ve.finds,ambushes:ve.ambushes,interacts:ve.interacts},r:{entrance:\"A thin river runs with numerous tributaries flowing out in all directions, such that no matter where you go, the river seems to follow. The grass is very short compared to the forest and it is much easier to see where you're going.\",colour:\"#0018a8\",extraOptions:[],explores:xe.explores,encounters:xe.encounters,finds:xe.finds,ambushes:xe.ambushes,interacts:xe.interacts},q:{entrance:\"The trees are taller and brimming with leaves, although their black-purple hue makes them seem as though they are dead and rotton. The grass beneath your feet is crusty and uncomfortable to walk on. There is a dead silence that makes even taking a step an uncomfortable endeavour as the leafage crinkles below your feet.\",colour:\"#b10000\",extraOptions:[],explores:Se.explores,encounters:Se.encounters,finds:Se.finds,ambushes:Se.ambushes,interacts:Se.interacts},z:{entrance:\"There is a somewhat idyllic atmosphere. The area is lined with small, basic houses. In front of one of the houses is a small stand, at which stands a blonde woman. From the sign on a banner atom the stand you infer that it is a small shop selling miscallaneous items.\",colour:\"#b2009c\",extraOptions:[[\"1 - Misc shop\",\"2 - Craftswoman\"]],explores:Pe.explores,encounters:Pe.encounters,finds:Pe.finds,ambushes:Pe.ambushes,interacts:[[\"f1_misc_shop\",\"f1_craftswoman\"]]}}},Ae=[`${y} - e/Explore`,\" - l/left\",\" - r/right\",\" - n/north\",\" - s/south\",\" - i/inventory\",\" - st/Stats\",\" - c/crafting\",\" - set/settings\",\" - m/map\",\" - sm/show minimap\",\" - Leave\"],Me=(e,a,t)=>{const s=n.player.maps[a.name];for(var o=\"\",r=0;r<e.length;r++){for(var l=0;l<e[r].length;l++)if(t[0]==r&&t[1]==l)o+=\" \\t▣\";else if(\"discovered\"==s[l][r]){o+=`<span style=\"color:${a[a.zone[r][l][0]].colour}\">  ▣</span>`}else\"seen\"==s[l][r]?\"n\"==e[r][l]?o+=\"  ▩\":o+=\"\\t▢\":o+=\"\\t▥\";o+=\"<br>\"}return o},Ee={currentItem:null,currentIndex:-1,returnFunction:null,menuLoop(){Ee.currentIndex=-1,Ce(n.player),v(`${y}Entering equip mode. Say the name of an item to view its details and equip it.`+\" Say the name of a slot to unequip the item in that slot. Say 'p'/'pouch' to enter the pouch menu, which will allow you to remove items from your pouch (to add items, first navigate to the item in your inventory)\"),S(Ee.inventoryMenu)},inventoryMenu(){P(Ee.inventoryMenu);const e=n.player,a=x().toLowerCase(),t=e.inventory.length>0?e.inventory.findIndex(e=>1==e[1].length?M[e].name.toLowerCase()==a.toLowerCase():M[e[0]].name.toLowerCase()==a.toLowerCase()):-1;if(e.stats.equips.hasOwnProperty(a))null!=e.stats.equips[a]&&Ee.unequipItem(a),S(Ee.inventoryMenu);else if(-1!=t){const a=e.inventory[t];M[a];Ee.currentItem=a,Ee.itemLoop()}else\"back\"==a||\"b\"==a?(v(\"<br>Returning...\"),Ee.currentIndex=-1,Ee.returnFunction()):\"p\"==a||\"pouch\"==a?(v(\"Entering the pouch menu...\"),Ee.pouchMenuLoop()):(v(\"<br>Invalid input\"),S(Ee.inventoryMenu));Ce(n.player)},pouchMenuLoop(){const e=n.player;0==e.stats.pouch.length?(v(\"Your pouch is empty!\"),Ee.menuLoop()):(v(\"Currently in the pouch menu. Options:\"),v(\"<br> - Type the name of an item to remove it from the pouch.\"),v(\" - b/back (to return)\"),v(\"<br>Items currently in pouch:<br>\"),e.stats.pouch.forEach(e=>{v(`${e[1]} ${M[e[0]].name}`)}),S(Ee.pouchMenuResponse))},pouchMenuResponse(){P(Ee.pouchMenuResponse);const e=x().toLowerCase(),a=n.player;if(-1!=a.stats.pouch.findIndex(a=>C(e)==a[0])){const t=a.stats.pouch.findIndex(a=>C(e)==a[0]),n=a.stats.pouch[t][0],s=a.stats.pouch[t][1],o=M[n].name;v(`Removed ${s} ${o}`),E(n,s,s),a.stats.pouch.splice(t,s),Ee.pouchMenuLoop()}else\"b\"==e||\"back\"==e?(v(\"Returning..\"),Ee.menuLoop()):(v(\"Invalid input\"),S(Ee.pouchMenuResponse))},itemLoop(){const e=n.player,a=Ee.currentItem,t=q(a)?M[a[0]]:M[a];Ee.currentIndex=e.inventory.findIndex(e=>q(e)?e[0]==Ee.currentItem[0]:e==Ee.currentItem);const s=JSON.parse(JSON.stringify(t));s.hasOwnProperty(\"elemental\")&&(JSON.parse(JSON.stringify(s.elemental)),delete s.elemental),v(`<br>${t.name} selected.`),L(t),v(\"<br>say 'e'/'equip' to equip this item, and 'u'/'use to consume it.  Otherwise, enter 'b' to return. The item's position in your inventory is marked in <b>bold</b>. Input 'z' to scroll up or 'x' to scroll down.\"),v(\"<br>Options:\"),v(\"<br> - e/equip (to equip it)\"),v(\"<br> - u/use (to consume it)\"),v(\"<br> - p/pouch (to add the item to your pouch - or remove it if it already added)\"),v(\"<br> - z to scroll up in inventory\"),v(\"<br> - x to scroll down in inventory\"),v(\"<br> - b/back to return\"),Ee.currentItem=a,Ce(n.player),S(Ee.itemMenu)},itemMenu(){P(Ee.itemMenu);const e=n.player,a=x().toLowerCase(),t=Ee.currentItem,s=q(t)?M[t[0]]:M[t];if(\"e\"==a||\"equip\"==a)if(\"reagent\"==s.type)v(\"<br>You cannot equip reagents.\"),S(Ee.itemMenu);else{const a=e.inventory.findIndex(e=>e==t.toLowerCase());\"misc\"!=s.type?null==e.stats.equips[s.type]?Ee.equipItem(a):(Ee.unequipItem(s.type),Ee.equipItem(a)):(null!=e.stats.equips.misc1&&null!=e.stats.equips.misc2&&Ee.unequipItem(\"misc1\"),Ee.equipItem(a)),Ee.menuLoop()}else if(\"u\"==a||\"use\"==a)if(1!=s.hasOwnProperty(\"use\"))v(\"This item cannot be used.\"),S(Ee.itemMenu);else if(\"all\"!=s.use.case&&\"outside\"!=s.use.case)v(\"This item cannot be used here!\"),S(Ee.itemMenu);else{const a=s.use.effect;var o=!0;a.forEach(a=>{switch(a[1]){case\"health\":\"flat\"==a[2]?t=a[3]:\"percentile\"==a[2]&&(t=Ze.getMaxHealth(e.stats)*(a[3]/100)),e.stats.current_health+t<0?(v(\"Your health is too low to use that item!\"),o=!1):(console.log(e),e.stats.current_health+=t,console.log(e),e.stats.current_health>Ze.getMaxHealth(e.stats)&&(e.stats.current_health=Ze.getMaxHealth(e.stats)),v(`Recovered ${t} HP!`));break;case\"mana\":var t;\"flat\"==a[2]?t=a[3]:\"percentile\"==a[2]&&(t=Ze.getPlayerAdd(e.stats).max_mana*(a[3]/100)),e.stats.current_mana+t<0?(v(\"Your mana is too low to use that item!\"),o=!1):(console.log(e),e.stats.current_mana+=t,console.log(e),e.stats.current_mana>Ze.getPlayerAdd(e.stats).max_mana&&(e.stats.current_mana=Ze.getPlayerAdd(e.stats).max_mana),v(`Recovered ${t} MP!`));break;case\"teleport\":{const e=Ie.currentZone;null==e?(v('<br>This item cannot be used right now!\"'),o=!1):e.name!=a[2]?(v(\"<br>You can't use this item right now! You're in the wrong zone!\"),o=!1):(e=>{if(null==Ie.currentZone)return!1;{const a=Ie.currentZone.zone;v(`Teleporting to ${[e[1],a.length-e[0]]}`),Ie.ambushed=!0,Ie.coordinates=e,Ie.ambushed=!0,Ie.justEnteredRoom=!0}})(a[3]);break}default:v(\"Error occurred: Effect invalid\"),o=!1,S(Ee.itemMenu)}o&&(console.log(`AAAAAAAAAAAAAAAAAAAAAAAAAAAA ${C(s.name)}`),B(C(s.name),1)),Ce(e),S(Ee.itemMenu)})}else if(\"p\"==a||\"pouch\"==a){const a=C(s.name);if(-1!=e.stats.pouch.findIndex(e=>e[0]==a)){const t=e.stats.pouch.findIndex(e=>e[0]==a),n=e.stats.pouch[t][1];E(a,n,n),e.stats.pouch.splice(t,n),v(`Removed ${n} ${s.name} from the pouch.`),Ee.itemLoop()}else s.hasOwnProperty(\"use\")&&s.use.hasOwnProperty(\"battleEffect\")?e.stats.pouch.length<c?(v(`How many ${s.name} would you like to add to your pouch? Input anything invalid to return.`),v(`Do note that you cannot add more than ${s.use.pouchMax} of this item.`),S(Ee.addPouchResponse)):(v(\"Your pouch is full!\"),Ee.itemLoop()):(v(\"This item cannot be added to your pouch!\"),Ee.itemLoop())}else if(\"z\"==a||\"x\"==a){Ee.currentItem;const t=Ee.currentIndex;var r;if(\"z\"==a)v(`${y}Scrolling up..`),(r=t-1)<0&&(r=e.inventory.length-1),q(e.inventory[r])?e.inventory[r][0]:e.inventory[r],Ee.currentItem=e.inventory[r],Ee.itemLoop();else v(`${y}Scrolling down..`),(r=t+1)==e.inventory.length&&(r=0),q(e.inventory[r])?e.inventory[r][0]:e.inventory[r],Ee.currentItem=e.inventory[r],Ee.itemLoop()}else\"b\"==a||\"back\"==a?(v(`${y}Returning...`),Ee.menuLoop()):(v(\"<br>Invalid input.\"),S(Ee.itemMenu))},addPouchResponse(){P(Ee.addPouchResponse);const e=n.player,a=x().toLowerCase(),t=Ee.currentItem,s=q(t)?M[t[0]]:M[t],o=C(s.name),r=e.inventory.findIndex(e=>e[0]==o);if(\"NaN\"!=parseInt(a).toString){const t=parseInt(a);t>0&&t<=s.use.pouchMax?t<=e.inventory[r][1]?(B(o,t),e.stats.pouch.push([o,t]),v(`Added ${t} ${s.name} to pouch.`),v(\"When you want to remove this item from your pouch, if you have none of it left in your inventory, you can remove it via the pouch menu accessible by inputting p/pouch instead of an item name at the inventory menu.\")):v(\"You don't have enough of this item!\"):v(\"That amount is either beyond the pouch limit or below out of range!\")}else v(\"Invald input\"),Ee.itemLoop();v(\"Returning...\"),Ee.itemLoop()},unequipItem(e){const a=n.player,t=a.stats.equips[e],s=M[t];a.stats.equips[e]=void 0,a.inventory.push(t),v(`${y}${s.name} unequipped.`)},equipItem(e){const a=n.player,t=a.inventory[e],s={...M[t]};if(\"misc\"==s.type&&(null==a.stats.equips.misc1?s.type=\"misc1\":null==a.stats.equips.misc2?s.type=\"misc2\":s.type=\"misc1\"),null==a.stats.equips[s.type]){const t=a.inventory[e];delete a.inventory[e],a.stats.equips[s.type]=t,v(`${y}${s.name} equipped.`)}else v(\"There is already an item equipped in that slot.\");for(var o=0;o<a.inventory.length;o++)null==a.inventory[o]&&a.inventory.splice(o,1);Ce(a)}},Be=e=>{console.log(\"update player stats called\"),m.minimap.style.visibility=\"hidden\",m.miscView.style.visibility=\"visible\";var a=\"\";const t=e.stats.equips;Object.keys(e.stats.equips).forEach(e=>{const n=t[e],s={...M[n]};var o=!1;if(a+=`${e.toUpperCase()}: `,null!=s.name){a+=`${s.name}<br>`,delete s.name;var r=\"\";s.hasOwnProperty(\"elemental\")&&(Object.keys(s.elemental.offence).forEach(e=>{r+=`${e} attack: ${s.elemental.offence[e]}<br>`}),Object.keys(s.elemental.defence).forEach(e=>{r+=`${e} defence: ${s.elemental.defence[e]}<br>`}),delete s.elemental,o=!0),Object.keys(s).forEach(e=>{\"desc\"!=e&&\"sell_value\"!=e&&\"description\"!=e&&(a+=`${e}: ${s[e]}<br>`)}),1==o&&(a+=r)}a+=\"<br>\"});const n=`\\n    Level: ${e.level}<br>\\n    EXP: ${e.exp}/${r[e.level]}<br>\\n    Gold: ${e.gold}<br>\\n    SP: ${e.sp}<br>\\n    AP: ${e.ap}<br><br>\\n    \\n    <b>Equipped items</b><br>\\n    ${a}\\n\\n\\n    `;var s;s=e.inventory.length>0?Object.keys(e.inventory).map((a,t)=>{const n=t==Ee.currentIndex?\"<b>\":\"\",s=t==Ee.currentIndex?\"</b>\":\"\";return e.inventory[a][1].length<2?`${n}${M[e.inventory[a]].name}${s}`:`${n}${e.inventory[a][1]} ${M[e.inventory[a][0]].name}${s}`}):[],console.log(`INV STRING IS ${s}`);const o=`\\n    <b>Inventory</b><br>\\n    ${s.join(\"<br>\")}`;m.playerStats.innerHTML=n,m.inventory.innerHTML=o},Le=(e,a,t=[999,999])=>{console.log(\"update mini map called\");const s=((e,a,t)=>{const s=n.player.maps[a.name];var o=\"\";console.log(\"plr map\"),console.log(s);for(var r=0;r<e.length;r++){console.log(\"running on column\");for(var l=0;l<e[r].length;l++){console.log(\"running on row\");const e=l+t[1]-8,n=r+t[0]-8;if(n<s.length)if(t[0]==n&&t[1]==e)o+=\" \\t▣\";else if(\"discovered\"==s[e][n]){o+=`<span style=\"color:${a[a.zone[n][e][0]].colour}\">  ▣</span>`}else\"seen\"==s[e][n]?\"n\"==a.zone[n][e]?o+=\"  ▩\":o+=\"\\t▢\":o+=\"\\t▥\";else o+=\"\\t▥\"}o+=\"<br>\"}return o})(e,a,t);m.miscView.style.visibility=\"hidden\",m.minimap.style.visibility=\"visible\",m.minimap.innerHTML=s};function qe(e,a,t){return e<=a?a:e>=t?t:e}function De(e){return e[0].toUpperCase()+e.slice(1)}const Oe={mode:\"normal\"},Ce=e=>{if(console.log(`mode of updatedisplaymode is ${Oe.mode}`),\"normal\"==Oe.mode)Be(e);else{const e={currentZone:Ie.currentZone,currentRoom:Ie.currentRoom,coordinates:Ie.coordinates,justEnteredRoom:Ie.justEnteredRoom,ambushed:Ie.ambushed},s=e.coordinates,o=[...Array(17)].map(e=>Array(17).fill(void 0)),r=n.player.maps[e.currentZone.name];for(var a=0;a<o.length;a++)for(var t=0;t<o[a].length;t++)null!=r[a+s[0]-8]&&a+s[0]-8>-1&&t+s[1]-8>-1?o[a][t]=r[a+s[0]-8][t+s[1]-8]:o[a][t]=void 0;console.log(\"LOGGING BASE MAP\"),console.log(o),Le(o,e.currentZone,e.coordinates)}const s=JSON.parse(JSON.stringify(e));s.stats=Ze.getPlayerAdd(s.stats),ea(s)},Re=(e,a)=>{if(\"reagent\"==M[e].type){const t=a.findIndex(a=>a[0]==e);return-1==t?0:a[t][1]}var t=0;return a.forEach(a=>{a==e&&t++}),t},je=(e,a)=>{var t;if(e.hasOwnProperty(a))return e[a];for(t in e){if(t==a)return e[t];if(\"object\"==typeof e[t]&&null==e[t].length)return je(e[t],a)}},Fe=e=>e===Object(e),He=e=>{if(!e)return e;let a,t=Array.isArray(e)?[]:{};for(const n in e)a=e[n],t[n]=\"object\"==typeof a?He(a):a;return t},Ye=e=>{var a=!0;return e.forEach(e=>{const t=e.split(\" \");switch(console.log(\"CHECKING THE FOLLOWING CONDITION\"),console.log(t),t[0]){case\"item:\":{const e=t[2],n=t[1];getQuantity(e,player.inventory)>=n||(a=!1);break}case\"level:\":{const e=t[1];player.level>=e||(a=!1);break}case\"flag:\":{console.log(`CHECKING FLAG conditionSplit ${t[1]}`);var n=t[1],s=\"t\";\"-\"==t[1][0]&&(s=\"f\",n=n.slice(1));const e=f[n];console.log(\"LOGGING FLAG IN DATA\"),console.log(e),\"f\"==s&&0==e.complete||\"t\"==s&&1==e.complete||(a=!1)}}}),a},Ne=e=>e.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var a=e.split(\"-\"),t=a[0],n=a[1];return d[t].skills[n].name}return e}),We={calcDamage(e,a,t,n,s,o,r,l,i,c={canEvade:!0,canCrit:!0}){\"weapon\"==s&&(s=We.getWeaponElement(e)),\"weapon\"==o&&(o=We.getWeaponElement(e));const d=Ze.calcElementBuffs(e),f=Ze.calcElementBuffs(a),m=e.elemental.offence[s]+d.offence[s],h=a.elemental.defence[o]+f.defence[o],u=e[t]*(1+Ze.calcMod(t,e)),p=a[n]*(1+Ze.calcMod(n,a));var g=Math.random()<e.crit_chance+e.crit_chance_mod?e.crit_damage+e.crit_damage_mod:1,y=Math.random()<a.evasion+Ze.calcMod(\"evasion\",a)?0:1,_=1-qe(Ze.calcMod(\"mitigation\",a),0,.8);0==(null==c.canEvade||c.canEvade)&&(y=1),0==(null==c.canCrit||c.canCrit)&&(g=1);var b=(Math.pow(u,2)*r+250)/(p*l+100)*(m/100)*(h/100)*g*y*_*i;return{damage:qe(b=Math.round(b*(.1*Math.random()+.9)),0,99999999),crit:1!==g,eva:0==y,element:s,offElement:m,defElement:h,mitigation:_,type:\"atk\"==t?\"physical\":\"magical\"}},prepareAttackMessage(e,a,t,n,s=\"unshift\",o=!1){const r=`${n.crit?\"<b>\":\"\"}<span style=\"color:${g[n.element]}\">`+`${n.damage} damage! (${Math.round(n.defElement*n.offElement*n.mitigation)/100}% ${n.type})</span>${n.crit?\"</b>\":\"\"}`,l=`${o?\"[]\":\"\"}${t}${n.crit?\"[]CRITICAL HIT!!\":\"\"}${n.eva?`[]${a} evaded the attack!`:\"\"}[]${r}`.split(\"[]\");We.pushMessagesToState(l,!0,s)},pushMessagesToState(e,a=!0,t=\"unshift\"){const n=a?\"preAtkMsg\":\"msg\";\"unshift\"==t?e.slice().reverse().forEach(e=>{We.skillStack.stack.unshift([n,()=>{v(e)},!0])}):e.slice().forEach(e=>{We.skillStack.stack.push([n,()=>{v(e)},!0])})},pushBeforeCombatMessage(e){We.skillStack.stack},pushEffect(e,a=!1){const t=We.skillStack.stack;t.push(e),0!=a&&(We.skillStack.finalAdded=!0,t.push(a),We.runSkillStack())},pushToState(e,a,t){Ze.state[Ze.state.length-1][t].push({skill:e,damage:a,user:t})},getSkill(e){var a=-1;return Object.keys(We).forEach(t=>{We[t].hasOwnProperty(\"name\")&&We[t].name.toLowerCase()==e&&(a=We[t])}),a},finish(e,a,t){We.pushToState(e,a,t)},getWeaponElement(e){var a=\"physical\";return e.hasOwnProperty(\"equips\")&&null!=e.equips.weapon&&(a=M[e.equips.weapon].element),a},gainActions(e,a,t=\"self\",n=!1,s=!1,o,r,l=!0){var i,c=\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy();l&&(i=a>0?()=>{v(`Gained ${a} actions! (${c.name})`)}:()=>{v(`Lost ${Math.abs(a)} actions! (${c.name})`)});var d=!1;if(0!=n||1==s)d=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const f=[\"effect\",()=>{c.actions+=a,i()},l];0!=d&&(d=[\"finish\",d,!0]),We.pushEffect(f,d)},gainHealth(e,a,t=\"self\",n=!1,s=!1,o,r,l=!0){var i=\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy(),c=()=>{};l&&(c=a>0?()=>{v(`Gained ${a} HP! (${i.name})`)}:()=>{v(`Lost ${Math.abs(a)} HP! (${i.name})`)});var d=!1;if(0!=n||1==s)d=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const f=[\"effect\",()=>{i.health+=a,i.health>i.max_health&&(i.health=i.max_health),c()},l];0!=d&&(d=[\"finish\",d,!0]),We.pushEffect(f,d)},dealDamage(e,a,t=\"self\",n=!1,s=!1,o,r){var l=\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy(),i=!1;if(0!=n||1==s)i=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const c=[\"effect\",()=>{l.health-=a,l.health>l.max_health&&(l.health=l.max_health)},!1];0!=i&&(i=[\"finish\",i,!0]),We.pushEffect(c,i)},gainMana(e,a,t=\"self\",n=!1,s=!1,o,r,l=!0){var i=\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy(),c=()=>{};l&&(c=a>0?()=>{v(`Gained ${a} MP! (${i.name})`)}:()=>{v(`Lost ${Math.abs(a)} MP! (${i.name})`)});var d=!1;if(0!=n||1==s)d=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const f=[\"effect\",()=>{i.mana+=a,i.mana>i.max_mana&&(i.mana=i.max_mana),c()},l];0!=d&&(d=[\"finish\",d,!0]),We.pushEffect(f,d)},gainSP(e,a,t=\"self\",n=!1,s=!1,o,r,l=!0){var i=\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy(),c=()=>{};l&&(c=a>0?()=>{v(`Gained ${a} SP! (${i.name})`)}:()=>{v(`Lost ${Math.abs(a)} SP! (${i.name})`)});var d=!1;if(0!=n||1==s)d=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const f=[\"effect\",()=>{i.sp+=a,i.sp>i.max_sp&&(i.sp=i.max_sp),c()},l];0!=d&&(d=[\"finish\",d,!0]),We.pushEffect(f,d)},gainStamina(e,a,t=\"self\",n=!1,s=!1,o,r,l=!0){var i=\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy(),c=()=>{};l&&(c=a>0?()=>{v(`Gained ${a} stamina! (${i.name})`)}:()=>{v(`Lost ${Math.abs(a)} stamina! (${i.name})`)});var d=!1;if(0!=n||1==s)d=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const f=[\"effect\",()=>{i.stamina+=a,i.stamina>i.max_stamina&&(i.stamina=i.max_stamina),c()},l];0!=d&&(d=[\"finish\",d,!0]),We.pushEffect(f,d)},pushCustomFunc(e,a,t=\"self\",n=!1,s=!1,o,r,l=!1){var i=a,c=!1;if(0!=n||1==s)c=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const d=[\"effect\",()=>{i()},l];0!=c&&(c=[\"finish\",c,!0]),We.pushEffect(d,c)},applyBuff(e,a,t=\"self\",n=!1,s=!1,o,r){\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy();var l=!1;if(0!=n||1==s)l=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const i=[\"effect\",a,!0];0!=l&&(l=[\"finish\",l,!0]),We.pushEffect(i,l)},stripBuff(e,a,t=\"self\",n=!1,s=!1,o,r){\"player\"==We.getTarget(e,t)?Ze.getPlayer():Ze.getEnemy();var l=!1;if(0!=n||1==s)l=()=>{0!=n&&We.finish(n[0],n[1],n[2]),1==s&&Ze.endTurn(e)};const i=[\"effect\",a,!0];0!=l&&(l=[\"finish\",l,!0]),We.pushEffect(i,l)},getTarget(e,a=\"self\"){var t=e;return\"self\"!=a&&(t=\"player\"==t?\"enemy\":\"player\"),t},skillStack:{stack:[],playing:!1,finalAdded:!1},runSkillStack(){const e=We.skillStack;e.playing=!0;Ze.getPlayer(),Ze.getEnemy();const a=()=>{if(console.log(\"loop called\"),!(e.stack.length>0&&1==e.playing))return e.playing=!1,e.finalAdded=!1,!0;{e.stack;const n=o.battleMessageDelay,s=He(e.stack[0]);if(e.stack.splice(0,1),e.stack.length>0){var t=1e3;0==e.stack[0][2]&&(t=0),setTimeout(a,n*t)}else e.playing=!1,e.finalAdded=!1;s[1](),aa(Ze.getPlayerAdd(Ze.getPlayer()))}};a()},pushBeforeFinish(e){const a=We.skillStack;1==a.finalAdded?a.stack.splice(-2,0,e):a.stack.push(e)},attack:{name:\"attack\",description:\"Strike the enemy, dealing moderate physical damage. Attack element is based on the element of the equipped weapon.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{const n=We.attack,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={damage:s,type:[\"attack\"],target:\"opponent\"};We.dealDamage(t,s.damage,\"opponent\",[n.name,l,t],!0,o,r)},cost:(e,a)=>!0},guard:{name:\"guard\",description:\"Take a defensive stance, applying <u>Guard</u> [50% migiation, unstrippable] to the user, along with granting them 10 SP. This  can only be used as the first action of a turn, and will consume up to two actions when used.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={name:\"guard\",mitigation:.5,duration:1,element:\"physical\",types:[\"buff\"],apply_text:\" is guarding..\",unstrippable:!0,max_stacks:1},s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[\"guard\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t];We.gainActions(t,-1,\"self\",!1,!1,s,o),We.gainSP(t,10,\"self\",!1,!1,s,o),We.applyBuff(t,()=>{Ze.applyBuff(n,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,a)=>!(e.actionsTaken>0)||\"Cannot be used this turn!\"},check:{name:\"check\",description:\"Has a 50% chance to apply <u>Analysed</u> to the enemy for 2 turns. When used on an enemy with <u>Analysed</u>, will display all of the stats of that enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a,o=[\"guard\",{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},t];if(Ze.checkStacks(a.debuffs,\"analysed\")>0)We.pushMessagesToState([\"Analysing...\"]),We.pushCustomFunc(t,()=>{Ze.displayStats(a)},a,o,!0,n,s);else{We.pushMessagesToState([`<br>${e.name} attempts to analyse the enemy...`]);const r={name:\"analysed\",duration:2,element:\"physical\",types:[\"debuff\"],apply_text:\" has been analysed!\",max_stacks:1,desc:\"Allows for analysis of an enemy.\"},l=()=>{Ze.applyBuff(r,50,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.applyBuff(t,l,a,o,!0,n,s)}},cost:(e,a)=>!0},boost:{name:\"boost\",description:\"<b>Cost: 10 SP</b> - The user focuses their energy into granting them an extra spurt of power. Grants two additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{We.boost;const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a;We.gainSP(t,-10,\"self\",!1,!1,n,s,!1),We.pushMessagesToState([`<br>${e.name} is boosting!`],!0,\"unshift\");const o=[\"boost\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t];We.gainActions(t,2,\"self\",o,!0,n,s,!0)},cost:(e,a)=>e.sp>=10||\"Insufficient SP!\"},channel_energy:{name:\"channel energy\",description:\"<b>Cost: 50 stamina</b> - The user channels their strength into special energy, gaining 25 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.stamina-=50;We.channel_energy;const n={crit:!1,eva:!1,damage:0,sp:-25},s=[[`<br>${e.name} channels their energy!`,1],[`gained ${-1*n.sp} SP!`,1]];$(s,\"battle\",()=>{e.sp-=n.sp,e.sp>e.max_sp&&(e.sp=e.ma_sp);const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(s,o),We.finish(\"channel_health\",n,t)})},cost:(e,a)=>e.stamina>=50||\"Insufficient stamina!\"},hex:{name:\"hex\",description:\"<b>Cost: 7 mana</b> - The user curses the enemy, applying <u>Hexed</u> [-30% Resistance, 3T duration] to them.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{e.mana-=7;We.hex;const n={crit:!1,eva:!1,damage:0},s=[[`<br>${e.name} attempts to curse the enemy!`,1]];$(s,\"battle\",()=>{Ze.applyBuff({name:\"hexed\",duration:3,resistance:-30,element:\"dark\",types:[\"debuff\"],apply_text:\" has been hexed!\",max_stacks:1,elemental:{offence:{},defence:{}}},100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\");const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(s,o),We.finish(\"hex\",n,t)})},cost:(e,a)=>e.mana>=7||\"insufficient mana!\"},fireball:{name:\"fireball\",description:\"<b>Cost: 10 MP</b> - The user fires a fireball at the enemy, dealing below average magical fire damage. Applies  <u>Fire Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a,o=We.fireball,r=We.calcDamage(e,a,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);We.gainMana(t,-10,\"self\",!1,!1,n,s,!1),We.prepareAttackMessage(e.name,a.name,`<br>${e.name} shot a fireball at the enemy!`,r);const l=Ze.checkStacks(n.buffs,\"earth charge\"),i=Ze.checkStacks(n.buffs,\"ice charge\"),c=Ze.checkStacks(n.buffs,\"water charge\");switch(1){case l:{We.pushMessagesToState([\"The earth charge and fire charge coalesced into a magma charge!\"]);const a={name:\"magma charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with magma energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"earth charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case i:{We.pushMessagesToState([\"The ice charge and fire charge coalesced into a water charge!\"]);const a={name:\"water charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with water energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"ice charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case c:{We.pushMessagesToState([\"The water charge and fire charge coalesced into a steam charge!\"]);const a={name:\"steam charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with steam energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"water charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}default:{const a={name:\"fire charge\",duration:5,element:\"fire\",types:[\"buff\"],apply_text:\" is imbued with fire energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s)}}const d={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};We.dealDamage(t,r.damage,\"opponent\",[o.name,d,t],!0,n,s)},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},icebolt:{name:\"icebolt\",description:\"<b>Cost: 10 MP</b> - The user fires a bolt of ice at the enemy, dealing below average magical water damage. Applies  <u>Ice Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a,o=We.icebolt,r=We.calcDamage(e,a,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} Fired a bolt of ice at the enemy!`,r),We.gainMana(t,-10,\"self\",!1,!1,n,s,!1);const l=Ze.checkStacks(n.buffs,\"fire charge\"),i=Ze.checkStacks(n.buffs,\"earth charge\"),c=Ze.checkStacks(n.buffs,\"magma charge\");switch(1){case l:{We.pushMessagesToState([\"The ice charge and fire charge coalesced into a water charge!\"]);const a={name:\"water charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with water energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"fire charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case i:{We.pushMessagesToState([\"The ice charge and earth charge coalesced into a frozen earth charge!\"]);const a={name:\"frozen earth charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with frozen earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"earth charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case c:{We.pushMessagesToState([\"The ice charge and magma charge coalesced into an obsidian charge!\"]);const a={name:\"obsidian charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with obsidian energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"magma charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}default:{const a={name:\"ice charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with ice energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s)}}const d={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};We.dealDamage(t,r.damage,\"opponent\",[o.name,d,t],!0,n,s)},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},lesser_quake:{name:\"lesser quake\",description:\"<b>Cost: 10 MP</b> - The user causes the earth at the enemy to quake, dealing below average magical earth damage. Applies  <u>Earth Charge</u> to the user, which may fuse with other charges upon casting to create different charges. Charges can be absorbed or used against the enemy.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a,o=We.lesser_quake,r=We.calcDamage(e,a,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} caused the earth to quake!`,r),We.gainMana(t,-10,\"self\",!1,!1,n,s,!1);const l=Ze.checkStacks(n.buffs,\"fire charge\"),i=Ze.checkStacks(n.buffs,\"ice charge\"),c=Ze.checkStacks(n.buffs,\"magma charge\"),d=Ze.checkStacks(n.buffs,\"water charge\");switch(1){case l:{We.pushMessagesToState([\"The earth charge and fire charge coalesced into a magma charge!\"]);const a={name:\"magma charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with magma energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"fire charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case i:{We.pushMessagesToState([\"The ice charge and earth charge coalesced into a frozen earth charge!\"]);const a={name:\"frozen earth charge\",duration:5,element:\"water\",types:[\"buff\"],apply_text:\" is imbued with frozen earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"ice charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case c:{We.pushMessagesToState([\"The earth charge and magma charge coalesced into a volcano charge!\"]);const a={name:\"volcano charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with volcano energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"magma charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}case d:{We.pushMessagesToState([\"The water charge and earth charge coalesced into a soil charge!\"]);const a={name:\"soil charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with soil energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s);const r=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"water charge\")};We.stripBuff(t,r,\"self\",!1,!1,n,s);break}default:{const a={name:\"earth charge\",duration:5,element:\"earth\",types:[\"buff\"],apply_text:\" is imbued with earth energy!\",desc:\"Can be absorbed or used against the enemy for special effects.\",max_stacks:1},o=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,o,\"self\",!1,!1,n,s)}}const f={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};We.dealDamage(t,r.damage,\"opponent\",[o.name,f,t],!0,n,s)},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},imbue_energy:{name:\"imbue energy\",description:\"<b>Cost: 20 stamina</b>. The user absorbs nearby energy into themselves fully. Consumes all elemental charges applied to the user and causes a positive effect (for the user) for each one. Also grants 5 SP for each charge absorbed. If at least one charge is absorbed, the user gains an extra action.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a;We.gainStamina(t,-20,\"self\",!1,!1,n,s,!1);We.imbue_energy;We.pushMessagesToState([`<br>${e.name} reabsorbed energy into themselves!`],!0,\"push\");var o=!1;const r=Ze.checkStacks(n.buffs,\"fire charge\"),l=Ze.checkStacks(n.buffs,\"ice charge\"),i=Ze.checkStacks(n.buffs,\"earth charge\"),c=Ze.checkStacks(n.buffs,\"volcano charge\"),d=Ze.checkStacks(n.buffs,\"soil charge\"),f=Ze.checkStacks(n.buffs,\"obsidian charge\"),m=Ze.checkStacks(n.buffs,\"magma charge\"),h=Ze.checkStacks(n.buffs,\"water charge\"),u=Ze.checkStacks(n.buffs,\"frozen earth charge\"),p=Ze.checkStacks(n.buffs,\"steam charge\");if(1==r){We.pushMessagesToState([\"Fire charge absorbed!\"],!1);const a={name:\"fire imbued\",atk:.2,matk:.2,elemental:{offence:{fire:20},defence:{}},duration:3,element:\"fire\",types:[\"buff\"],apply_text:\" has fire energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"fire charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==l){We.pushMessagesToState([\"Ice charge absorbed!\"],!1);const a={name:\"ice imbued\",def:.25,mdef:.52,duration:3,element:\"water\",types:[\"buff\"],apply_text:\" has ice energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"ice charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==i){We.pushMessagesToState([\"earth charge absorbed!\"],!1);const a={name:\"earth imbued\",mitigation:.5,duration:3,element:\"earth\",types:[\"buff\"],apply_text:\" has earth energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"earth charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainActions(t,-1,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==c){We.pushMessagesToState([\"Volcano charge absorbed!\"],!1);const a={name:\"volcano imbued\",atk:.35,matk:.35,duration:2,element:\"fire\",types:[\"buff\"],apply_text:\" has volcano energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"volcano charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainActions(t,1,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==d){We.pushMessagesToState([\"Soil charge absorbed!\"],!1);const a={name:\"soil imbued\",def:.15,def:.15,eva:.2,duration:3,element:\"earth\",types:[\"buff\"],apply_text:\" has soil energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"soil charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==f){We.pushMessagesToState([\"Obsidian charge absorbed!\"],!1);const a={name:\"obsidian imbued\",mitigation:.8,duration:1,element:\"earth\",types:[\"buff\"],apply_text:\" has obsidian energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"obsidian charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainSP(t,15,\"self\",!1,!1,n,s),We.gainActions(t,-999,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==m){We.pushMessagesToState([\"Magma charge absorbed!\"],!1);const a={name:\"magma imbued\",atk:.2,matk:.2,elemental:{offence:{fire:15,earth:15},defence:{}},duration:4,element:\"earth\",types:[\"buff\"],apply_text:\" has magma energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"magma charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==h){We.pushMessagesToState([\"Water charge absorbed!\"],!1);const a=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"water charge\")};We.stripBuff(t,a,\"self\",!1,!1,n,s);const r=We.calcDamage(e,e,\"mdef\",\"mdef\",\"none\",\"none\",.45,0,1.3,{canEvade:!1,canCrit:!1});We.gainHealth(t,r.damage,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==u){We.pushMessagesToState([\"Frozen earth charge absorbed!\"],!1);const a={name:\"frozen earth imbued\",mitigation:.2,def:.1,mdef:.1,duration:3,element:\"water\",types:[\"buff\"],apply_text:\" has frozen earth energy within!\",max_stacks:1},r=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"frozen earth charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s),We.applyBuff(t,r,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}if(1==p){We.pushMessagesToState([\"Steam charge absorbed!\"],!1);const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"steam charge\")};We.stripBuff(t,e,\"self\",!1,!1,n,s),We.gainActions(t,3,\"self\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),o=!0}o&&We.gainActions(t,1,\"self\",!1,!1,n,s);const g=[\"imbue energy\",{damage:0,additionalInfo:{type:[\"buff\",\"debuff\",\"attack\"],target:\"self\"}},t];We.pushCustomFunc(t,()=>{},\"self\",g,!0,n,s)},cost:(e,a)=>e.stamina>=20||\"Insufficient stamina\"},enforce_energy:{name:\"enforce energy\",description:\"<b>Cost: 20 stamina</b>. The user uses nearby elemental energy to strike the opponent. Consumes all elemental charges and applies a negative effect to and/or damages the enemy for each one. Also grants 5 SP for each charge consumed. If at least one charge is consumed, also grants an extra action to the user.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"earth\",def_element:\"earth\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a;We.gainStamina(t,-20,\"self\",!1,!1,n,s,!1);const o=We.enforce_energy;We.pushMessagesToState([`<br>${e.name} fired elemental energy at the enemy!`],!0,\"push\");var r=!1;const l=Ze.checkStacks(n.buffs,\"fire charge\"),i=Ze.checkStacks(n.buffs,\"ice charge\"),c=Ze.checkStacks(n.buffs,\"earth charge\"),d=Ze.checkStacks(n.buffs,\"volcano charge\"),f=Ze.checkStacks(n.buffs,\"soil charge\"),m=Ze.checkStacks(n.buffs,\"obsidian charge\"),h=Ze.checkStacks(n.buffs,\"magma charge\"),u=Ze.checkStacks(n.buffs,\"water charge\"),p=Ze.checkStacks(n.buffs,\"frozen earth charge\"),g=Ze.checkStacks(n.buffs,\"steam charge\");if(1==l){We.pushMessagesToState([\"Fire energy enforced!\"],!1,\"push\");const l={name:\"fire enforced\",elemental:{offence:{},defence:{fire:20}},duration:3,element:\"fire\",types:[\"debuff\"],apply_text:\" has had fire energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"fire charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.7,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==i){We.pushMessagesToState([\"Ice energy enforced!\"],!1,\"push\");const l={name:\"ice enforced\",speed:-.2,duration:3,element:\"water\",types:[\"debuff\"],apply_text:\" has had ice energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"ice charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"water\",\"water\",.95,1.05,.7,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==c){We.pushMessagesToState([\"Earth energy enforced!\"],!1,\"push\");const l={name:\"earth enforced\",atk:-.2,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had earth energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"earth charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.7,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==h){We.pushMessagesToState([\"Magma energy enforced!\"],!1,\"push\");const l={name:\"magma enforced\",elemental:{offence:{},defence:{fire:15,earth:15}},damage:[\"flat\",We.calcDamage(e,a,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.25,!0).damage],duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had magma energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"magma charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.5,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\");const f=We.calcDamage(e,a,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.5,!0);We.dealDamage(t,f.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",f,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==u){We.pushMessagesToState([\"Water energy enforced!\"],!1,\"push\");const l={name:\"water enforced\",elemental:{offence:{},defence:{water:20}},duration:3,element:\"water\",types:[\"debuff\"],apply_text:\" has had water energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"water charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"water\",\"water\",.95,1.05,.7,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\");const f=We.calcDamage(e,a,\"mdef\",\"mdef\",\"none\",\"none\",1,0,.5,{canCrit:!1,canEvade:!1});We.gainHealth(t,f.damage,\"self\",!1,!1,n,s),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==p){We.pushMessagesToState([\"Frozen earth energy enforced!\"],!1,\"push\");const l={name:\"frozen earth enforced\",speed:-.15,atk:-.15,def:-.15,resistance:-.1,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had frozen earth energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"frozen earth charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.6,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\");const f=We.calcDamage(e,a,o.off_stat,o.def_stat,\"water\",\"water\",.95,1.05,.6,!0);We.dealDamage(t,f.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",f,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==d){We.pushMessagesToState([\"Volcano energy enforced!\"],!1,\"push\");const l={name:\"volcano enforced\",def:-.25,mdef:-.25,damage:[\"flat\",We.calcDamage(e,a,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.9,!0).damage],duration:2,element:\"fire\",types:[\"debuff\"],apply_text:\" has had volcano energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"volcano charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.8,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\");const f=We.calcDamage(e,a,o.off_stat,o.def_stat,\"fire\",\"fire\",.95,1.05,.5,!0);We.dealDamage(t,f.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",f,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==f){We.pushMessagesToState([\"Soil energy enforced!\"],!1,\"push\");const l={name:\"soil enforced\",speed:-.4,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had soil energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"soil charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"physical\",\"physical\",.95,1.05,.7,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==m){We.pushMessagesToState([\"Obsidian energy enforced!\"],!1,\"push\");const l={name:\"obsidian enforced\",speed:-.3,atk:-.3,def:-.3,mitigation:.1,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" has had obsidian energy forced upon them!\",max_stacks:1},i=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},c=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"obsidian charge\")};We.stripBuff(t,c,\"self\",!1,!1,n,s);const d=We.calcDamage(e,a,o.off_stat,o.def_stat,\"earth\",\"earth\",.95,1.05,.7,!0);We.dealDamage(t,d.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",d,\"push\"),We.applyBuff(t,i,\"opponent\",!1,!1,n,s),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}if(1==g){We.pushMessagesToState([\"Steam energy enforced!\"],!1,\"push\");const l=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"steam charge\")};We.stripBuff(t,l,\"self\",!1,!1,n,s);const i=We.calcDamage(e,a,o.off_stat,o.def_stat,\"water\",\"water\",1.1,1.05,1.15,!0);We.dealDamage(t,i.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",i,\"push\");const c=We.calcDamage(e,a,o.off_stat,o.def_stat,\"fire\",\"fire\",1.1,1.05,1.15,!0);We.dealDamage(t,c.damage,\"opponent\",!1,!1,n,s),We.prepareAttackMessage(e,a,\"\",c,\"push\"),We.gainSP(t,5,\"self\",!1,!1,n,s),r=!0}r&&We.gainActions(t,1,\"self\",!1,!1,n,s);const y=[\"enforce energy\",{damage:0,additionalInfo:{type:[\"buff\",\"debuff\",\"attack\"],target:\"opponent\"}},t];We.pushCustomFunc(t,()=>{},\"self\",y,!0,n,s)},cost:(e,a)=>e.stamina>=20||\"Insufficient stamina\"},blood_pact:{name:\"blood pact\",description:\"<b>Cost: 20 SP, 15% max health</b> - The user uses converts special energy and their own blood into mana, gaining 20% of their mana in exchange for 20 SP and 15% of their max health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.blood_pact,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;We.pushMessagesToState([`${e.name} formed a blood pact!`]),We.gainSP(t,-20,\"self\",!1,!1,s,o,!1),We.gainHealth(t,-.15*e.max_health,\"self\",!1,!1,s,o,!0);We.gainMana(t,.2*e.max_mana,\"self\",[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t],!0,s,o,!0)},cost:(e,a)=>e.sp>=20?e.health>.15*e.max_health||\"Insufficient HP!\":\"Insufficient SP!\"},stalwart_strike:{name:\"stalwart strike\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy while bolstering their defences. Deals low physical weapon element damage and applies <u>Stalwart</u> [+20% DEF/MDEF, 3T duration]. Also removes one debuff at random from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.65,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a,o=We.stalwart_strike,r=We.calcDamage(e,a,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);We.gainStamina(t,-35,\"self\",!1,!1,n,s,!1),We.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy!`,r);const l=JSON.parse(JSON.stringify(e.debuffs));for(var i=!1;l.length>0&&0==i;){var c=Math.round(Math.random()*l.length-1);if(c<0&&(c=0),l[c].hasOwnProperty(\"unstrippable\"))l.splice(c,1);else{i=!0;const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().debuffs:Ze.getEnemy().debuffs,l[c].name)};We.stripBuff(t,e,\"self\",!1,!1,n,s)}}const d={name:\"stalwart\",duration:3,def:.2,mdef:.2,element:\"physical\",types:[\"buff\"],apply_text:\" is stalwart!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(d,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,n,s);const f={damage:r,additionalInfo:{type:[\"buff\",\"attack\"],target:\"opponent\"}};We.dealDamage(t,r.damage,\"opponent\",[o.name,f,t],!0,n,s)},cost:(e,a)=>e.stamina>=35||\"Insufficient stamina!\"},debilitate:{name:\"debilitate\",description:\"<b>Cost: 25 SP</b> - The user strikes the enemy in a way that removes a portion of their power, dealing low physical weapon element damage and removing one random buff from the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a,o=We.debilitate,r=We.calcDamage(e,a,o.off_stat,o.def_stat,o.off_element,o.def_element,o.off_mod,o.def_mod,o.dmg_mod);if(We.gainSP(t,-25,\"self\",!1,!1,n,s,!1),We.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy!`,r),0==r.eva){const e=JSON.parse(JSON.stringify(a.buffs));for(var l=!1;e.length>0&&0==l;){var i=Math.round(Math.random()*e.length-1);if(e[i].hasOwnProperty(\"unstrippable\"))e.splice(i,1);else{l=!0;const a=()=>{Ze.stripBuff(\"player\"==t?Ze.getEnemy().buffs:Ze.getPlayer().buffs,e[i].name)};We.stripBuff(t,a,\"self\",!1,!1,n,s)}}}const c={damage:r,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};We.dealDamage(t,r.damage,\"opponent\",[o.name,c,t],!0,n,s)},cost:(e,a)=>e.sp>=25||\"Insufficient SP!\"},enduring_fortress:{name:\"enduring fortress\",description:\"<b>Cost: 5 stamina</b> - The user grants a physical form to their endurance, applying the buff <u>Fortress</u> [+5% DEF/MDEF, 999T duration, stacks to 100], and granting the user an extra acition. This skill can only be used once per turn.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.enduring_fortress,s={name:\"fortress\",def:.05,mdef:.05,duration:999,element:\"physical\",types:[\"buff\"],apply_text:\"strengthens their resolve!\",max_stacks:100},o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-5,\"self\",!1,!1,o,r,!1);const l=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t];We.applyBuff(t,()=>{Ze.applyBuff(s,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r),We.gainActions(t,1,\"self\",l,!0,o,r,!0)},cost:(e,a)=>{const t=e.hasOwnProperty(\"pouch\")?\"player\":\"enemy\";return-1==Ze.state[Ze.turn-1][t].findIndex(e=>{if(\"enduring fortress\"==e.skill)return!0})?e.stamina>=5||\"Insufficient stamina!\":\"This skill has been used this turn!\"}},guard_conversion:{name:\"guard conversion\",description:\"<b>Cost: 10 stamina</b> - The user converts all defensive energy into pure energy. Removes all buffs that increase DEF or MDEF from the user. For each one removed, the user gains SP equal to the DEF/MDEF (higher one is taken) percentage increase. Then, grants an additional action if at least one buff was removed\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.guard_conversion,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;We.gainStamina(t,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t];var l=0,i=!1;const c=He(e.buffs);for(;c.length>0;){var d=Math.round(Math.random()*c.length-1);if(d<0&&(d=0),c[d].hasOwnProperty(\"unstrippable\"))c.splice(d,1);else if(c[d].hasOwnProperty(\"def\")||c[d].hasOwnProperty(\"mdef\")){if(c[d].def>0||c[d.mdef>0]){var f=null!=c[d].def?100*c[d].def:0,m=null!=c[d].mdef?100*c[d].def:0;m>f&&(f=m),l+=f;const e=c[d].name,a=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,e)};We.stripBuff(t,a,\"self\",!1,!1,s,o),c.splice(d,1),i=!0}}else c.splice(d,1)}i?(We.gainSP(t,l,\"self\",!1,!1,s,o,!0),We.gainActions(t,1,\"self\",r,!0,s,o,!0)):We.pushCustomFunc(t,()=>{},\"self\",r,!0,s,o)},cost:(e,a)=>e.stamina>=10||\"Insufficient stamina!\"},sacred_shield:{name:\"sacred shield\",description:\"<b>Cost: 10 SP</b> - The user condenses special energy such that it takes physical form and uses it as a shield. Consumes 999 actions (ending user turn) after applying <u>Sacred Shield</u> [+100% DEF/MDEF, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.sacred_shield,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;We.gainSP(t,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t],l={name:\"sacred shield\",def:1,mdef:1,duration:3,element:\"physical\",types:[\"buff\"],apply_text:\" is protected by sacred energy!\",max_stacks:1};We.gainActions(t,-999,\"self\",!1,!1,s,o,!0),We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,a)=>e.sp>=10||\"Insufficient SP!\"},sentinel_blow:{name:\"sentinel blow\",description:\"<b>Cost: 25 stamina</b> - The user strikes in a way that utilises their defensive prowess. Deals considerable weapon element physical damage. Damage is based on the user's DEF stat.\",off_stat:\"def\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1.4,use:(e,a,t)=>{const n=We.sentinel_blow,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-25,\"self\",!1,!1,o,r,!1),We.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy like a sentinel!`,s);const l={damage:s,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,l,t],!0,o,r)},cost:(e,a)=>e.stamina>=25||\"Insufficient stamina!\"},swift_strike:{name:\"swift strike\",description:\"<b>Cost: 25 stamina</b> - The user strikes the enemy quickly, dealing below average weapon element physical damage. Applies <u>Swift</u> [+20% SPD, 4T duration] to the user. Also, if <u>Feeble</u> is applied to the enemy, consumes it and grants the user mana (5% max mana), and 5 SP. If <u>Stealth</u> is applied to the user and they have at least 10 SP, consumes both <u>Stealth</u> and 10 SP in exchange for 2 extra actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1.01,def_mod:.99,dmg_mod:.78,use:(e,a,t)=>{const n=We.swift_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy quickly!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-25,\"self\",!1,!1,o,r,!1);const l=Ze.checkStacks(a.debuffs,\"feeble\"),i=Ze.checkStacks(e.buffs,\"stealth\");if(1==l){const a=()=>{Ze.stripBuff(\"player\"==t?Ze.getEnemy().debuffs:Ze.getPlayer().debuffs,\"feeble\")};We.stripBuff(t,a,\"opponent\",!1,!1,o,r),We.gainSP(t,5,\"self\",!1,!1,o,r,!0),We.gainMana(t,.05*e.max_mana,\"self\",!1,!1,o,r)}if(1==i&&e.sp>=10){const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"stealth\")};We.stripBuff(t,e,\"self\",!1,!1,o,r),We.gainSP(t,-10,\"self\",!1,!1,o,r,!0),We.gainActions(t,2,\"self\",!1,!1,o,r,!0)}const c={name:\"swift\",duration:4,speed:.2,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is swift!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(c,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r);const d={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"mana_gain\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,d,t],!0,o,r)},cost:(e,a)=>e.stamina>=25||\"Insufficient stamina!\"},shinobi_strike:{name:\"shinobi strike\",description:\"<b>Cost: 10 mana</b> - The user strikes the enemy before immediately blending into the shadows. Deals low weapon element physical damage and applies <u>Stealth</u> [+10% SPD, +10% crit rate, 4T duration] to the user. If <u>Weakened</u> is applied to the enemy, consumes it and grants the user stamina (5% max stamina), and 5 SP. If <u>Swift</u> is applied to the user and they have at least 10 SP, consumes both <u>Swift</u> and 10 SP to grant the player 2 additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.55,use:(e,a,t)=>{const n=We.swift_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} struck the enemy before blending into the shadows...`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainMana(t,-10,\"self\",!1,!1,o,r,!1);const l=Ze.checkStacks(a.debuffs,\"weakened\"),i=Ze.checkStacks(e.buffs,\"swift\");if(1==l){const a=()=>{Ze.stripBuff(\"player\"==t?Ze.getEnemy().debuffs:Ze.getPlayer().debuffs,\"weakened\")};We.stripBuff(t,a,\"opponent\",!1,!1,o,r),We.gainSP(t,5,\"self\",!1,!1,o,r,!0),We.gainStamina(t,.05*e.max_stamina,\"self\",!1,!1,o,r)}if(1==i&&e.sp>=10){const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"swift\")};We.stripBuff(t,e,\"self\",!1,!1,o,r),We.gainSP(t,-10,\"self\",!1,!1,o,r,!0),We.gainActions(t,2,\"self\",!1,!1,o,r,!0)}const c={name:\"stealth\",duration:4,speed:.1,crit_chance:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has blended into the shadows!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(c,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r);const d={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"stamina_gain\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,d,t],!0,o,r)},cost:(e,a)=>e.mana>=10||\"Insufficient mana!\"},crippling_blow:{name:\"crippling blow\",description:\"<b>Cost: 15 mana</b> - The user strikes the enemy with a special technique that cripples them somewhat. Deals moderate physical weapon element damage and applies <u>Weakened</u> [-20% DEF/MDEF, 4T duration] to the enemy. If <u>Stealth</u> is applied to the user, consumes it and applies <u>Footwork</u> [+10% evasion chance, 4T duration] to the user, and grant them 5 SP. If <u>Feeble</u> is applied to the enemy, consumes it and applies <u>Dull Soul</u> [-20 resistance, 4T duraton] to the enemy, and grants the user 5 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.95,use:(e,a,t)=>{const n=We.swift_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} strikes the enemy with a special technique!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainMana(t,-15,\"self\",!1,!1,o,r,!1);const l=Ze.checkStacks(a.debuffs,\"feeble\"),i=Ze.checkStacks(e.buffs,\"stealth\");if(1==l){const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getEnemy().debuffs:Ze.getPlayer().debuffs,\"feeble\")};We.stripBuff(t,e,\"opponent\",!1,!1,o,r);const a={name:\"dull soul\",duration:4,element:\"physical\",resistance:-.2,types:[\"buff\",\"ninja\"],apply_text:\"'s soul has been dulled!\",max_stacks:1},n=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():Ze.getEnemy(),\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.gainSP(t,5,\"self\",!1,!1,o,r,!0),We.applyBuff(t,n,\"opponent\",!1,!1,o,r)}if(1==i){const a=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"stealth\")};We.stripBuff(t,a,\"self\",!1,!1,o,r);const n={name:\"footwork\",duration:4,evasion:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has enhanced footwork!\",max_stacks:1},s=()=>{Ze.applyBuff(n,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.gainSP(t,5,\"self\",!1,!1,o,r,!0),We.applyBuff(t,s,\"self\",!1,!1,o,r)}const c={name:\"weakened\",def:-.2,mdef:-.2,duration:4,element:\"physical\",types:[\"debuff\",\"ninja\"],apply_text:\" is weakened!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(c,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},\"opponent\",!1,!1,o,r);const d={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"debuff\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,d,t],!0,o,r)},cost:(e,a)=>e.mana>=15||\"Insufficient mana!\"},enfeebling_blow:{name:\"enfeebling blow\",description:\"<b>Cost: 25 stamina</b> - The user strikes with a special technique that worsens the target's offensive capabilities. Deals moderate physical damage and applies <u>Feeble</u> [-20% ATK/MATK] to the enemy. If <u>Swift</u> is applied to the user, consumes it and applies <u>Sharp Mind</u> [+10% crit chance] to the user, and grants them 5 SP If <u>Weakened</u> is applied to the enemy, consumes it and applies <u>Dull Mind</u> [-10% crit chance] to the enemy, and grants the user 5 SP.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.95,use:(e,a,t)=>{const n=We.swift_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} strikes the enemy with a special technique!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-25,\"self\",!1,!1,o,r,!1);const l=Ze.checkStacks(a.debuffs,\"weakened\"),i=Ze.checkStacks(e.buffs,\"swift\");if(1==l){const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getEnemy().debuffs:Ze.getPlayer().debuffs,\"weakened\")};We.stripBuff(t,e,\"opponent\",!1,!1,o,r);const a={name:\"dull mind\",duration:4,element:\"physical\",crit_chance:-.1,types:[\"buff\",\"ninja\"],apply_text:\"'s mind has been dulled!\",max_stacks:1},n=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():Ze.getEnemy(),\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.gainSP(t,5,\"self\",!1,!1,o,r,!0),We.applyBuff(t,n,\"opponent\",!1,!1,o,r)}if(1==i){const a=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,\"swift\")};We.stripBuff(t,a,\"self\",!1,!1,o,r);const n={name:\"sharp mind\",duration:4,crit_chance:.1,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\"'s mind is sharp!\",max_stacks:1},s=()=>{Ze.applyBuff(n,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.gainSP(t,5,\"self\",!1,!1,o,r,!0),We.applyBuff(t,s,\"self\",!1,!1,o,r)}const c={name:\"feeble\",atk:-.2,matk:-.2,duration:4,element:\"physical\",types:[\"debuff\",\"ninja\"],apply_text:\" is feeble!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(c,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")},\"opponent\",!1,!1,o,r);const d={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"debuff\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,d,t],!0,o,r)},cost:(e,a)=>e.stamina>=25||\"Insufficient stamina!\"},imbue_infliction:{name:\"imbue infliction\",description:\"<b>Cost: 20 SP</b>- The user focuses all their strength into one point, fusing all buffs from the <b><u>NINJA</b></u> discipline into one buff (this will not interfere with the stacking limits of these buffs from their origin skills). Up to three of these fusion buffs can be applied at one time. If this occurs, also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{We.imbue_infliction;const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a;We.gainSP(t,-20,\"self\",!1,!1,n,s,!1),We.pushMessagesToState([`${e.name} is focusing their energy..`]);var o=!1;const r=JSON.parse(JSON.stringify(e.buffs));const l={name:0==Ze.checkStacks(r,\"imbued infliction I\")?\"imbued infliction I\":0==Ze.checkStacks(r,\"imbued infliction II\")?\"imbued infliction II\":\"imbued infliction III\",element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has focused their energy!\",max_stacks:1,duration:0},i=[\"atk\",\"matk\",\"def\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"resistance\",\"effectiveness\",\"evasion\"];for(var c=0;c<r.length;c++)if(-1!=r[c].types.indexOf(\"ninja\")){o=!0;const e=r[c];e.duration>l.duration&&(l.duration=e.duration),Object.keys(r[c]).forEach(a=>{-1!=i.indexOf(a)&&(l.hasOwnProperty(a)?l[a]+=e[a]:l[a]=e[a])})}const d=[\"imbue infliction\",{damage:0,additionalInfo:{type:[\"buff\"],target:\"self\"}},t];if(o){const a=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.gainActions(t,1,\"self\",!1,!1,n,s,!0),We.applyBuff(t,a,\"self\",d,!0,n,s)}else We.pushMessagesToState([\"No buffs to fuse!\"],!1,\"push\"),We.pushCustomFunc(t,()=>{},\"self\",d,!0,n,s)},cost:(e,a)=>e.sp>=20?0==Ze.checkStacks(e.buffs,\"imbued infliction I\")||0==Ze.checkStacks(e.buffs,\"imbued infliction II\")||0==Ze.checkStacks(e.buffs,\"imbued infliction III\")||\"Imbue limit reached!\":\"Insufficient SP!\"},enforce_infliction:{name:\"enforce infliction\",description:\"<b>Cost: 20 SP</b>- The user focuses all of the enemie's ailments into one point, fusing all debuffs from the <b><u>NINJA</b></u> discipline into one buff (this will not interfere with the stacking limits of these debuffs from their origin skills). Up to three of these fusion debuffs can be applied at one time. If this occurs, also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{We.enforce_infliction;const n=\"enemy\"==t?a:e,s=\"enemy\"==t?e:a;We.gainSP(t,-20,\"self\",!1,!1,n,s,!1),We.pushMessagesToState([`${e.name} is focusing inflictions applied to the enemy!`]);const o=JSON.parse(JSON.stringify(a.debuffs));const r={name:0==Ze.checkStacks(o,\"enforced infliction I\")?\"enforced infliction I\":0==Ze.checkStacks(o,\"enforced infliction II\")?\"enforced infliction II\":\"enforced infliction III\",element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" has been afflicted with 'Enforced infliction!'\",max_stacks:1,duration:0},l=[\"atk\",\"matk\",\"def\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"resistance\",\"effectiveness\",\"evasion\"];for(var i=0;i<o.length;i++)if(-1!=o[i].types.indexOf(\"ninja\")){imbued=!0;const e=o[i];e.duration>r.duration&&(r.duration=e.duration),Object.keys(o[i]).forEach(a=>{-1!=l.indexOf(a)&&(r.hasOwnProperty(a)?r[a]+=e[a]:r[a]=e[a])})}const c=[\"enforce infliction\",{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},t];We.pushMessagesToState([\"No debuffs to fuse!\"],!1,\"push\"),We.pushCustomFunc(t,()=>{},\"self\",c,!0,n,s)},cost:(e,a)=>e.sp>=20?0==Ze.checkStacks(a.debuffs,\"enforced infliction I\")||0==Ze.checkStacks(a.debuffs,\"enforced infliction II\")||0==Ze.checkStacks(a.debuffs,\"enforced infliction III\")||\"Enforce limit reached!\":\"Insufficient SP!\"},shadow_strike:{name:\"shadow strike\",description:\"<b>Cost: 50 stamina</b> - The user strikes the enemy from an indetectable angle, dealing high weapon element physical damage and causing the following effects:<br>If <u>Swift</u> is applied to the user, grants the user some mana (10% max mana), 10 SP and an additional action.<br>If <u>Stealth</u> is applied to the user, grants the user some stamina (10% max stamina), 10 SP and an additional action<br>If <u>Feeble</u> is applied to the enemy, applies <u>Emboldened</u> [+25% DEF/MDEF, 4T duration] to the user, then grants 10 SP and an additional action.<br>If <u>Weakened</u> is applied to the enemy, applies <u>Strengthened</u> [+25% ATK/MATK, 4T duration] to the user, then grants 10 SP and an additional action.<br>Otherwise, grants the user two additional actions.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1.1,def_mod:.9,dmg_mod:1.6,use:(e,a,t)=>{const n=We.shadow_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-50,\"self\",!1,!1,o,r,!1),We.prepareAttackMessage(e.name,a.name,`<br>${e.name} emerged from shadows and struck the enemy!`,s);var l=!1;const i=Ze.checkStacks(e.buffs,\"swift\"),c=Ze.checkStacks(e.buffs,\"stealth\"),d=Ze.checkStacks(a.debuffs,\"feeble\"),f=Ze.checkStacks(a.debuffs,\"weakened\");if(1==i&&(l=!0,We.gainMana(t,e.max_mana/10,\"self\",!1,!1,o,r,!0),We.gainSP(t,10,\"self\",!1,!1,o,r,!0),We.gainActions(t,1,\"self\",!1,!1,o,r,!0)),1==c&&(l=!0,We.gainStamina(t,e.max_stamina/10,\"self\",!1,!1,o,r,!0),We.gainSP(t,10,\"self\",!1,!1,o,r,!0),We.gainActions(t,1,\"self\",!1,!1,o,r,!0)),1==d){l=!0;const a={name:\"emboldened\",def:.25,mdef:.25,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is emboldened!\",max_stacks:1},n=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,n,\"self\",!1,!1,o,r),We.gainSP(t,10,\"self\",!1,!1,o,r,!0),We.gainActions(t,1,\"self\",!1,!1,o,r,!0)}if(1==f){l=!0;const a={name:\"strengthened\",atk:.25,matk:.25,duration:4,element:\"physical\",types:[\"buff\",\"ninja\"],apply_text:\" is strengthened!\",max_stacks:1},n=()=>{Ze.applyBuff(a,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")};We.applyBuff(t,n,\"self\",!1,!1,o,r),We.gainSP(t,10,\"self\",!1,!1,o,r,!0),We.gainActions(t,1,\"self\",!1,!1,o,r,!0)}l||We.gainActions(t,2,\"self\",!1,!1,o,r,!0);const m={damage:s,additionalInfo:{type:[\"attack\",\"buff\",\"stamina_gain\",\"mana_gain\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,m,t],!0,o,r)},cost:(e,a)=>e.stamina>=50||\"Insufficient mana!\"},splash:{name:\"splash\",description:\"The user splashes at the enemy with high-pressure liquid, dealing low physical water damage.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"water\",def_element:\"water\",off_mod:1,def_mod:1,dmg_mod:.8,use:(e,a,t)=>{const n=We.splash,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} splashed the enemy!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={damage:s,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,l,t],!0,o,r)},cost:(e,a)=>!0},monster_soul:{name:\"monster soul\",description:\"The user's monster soul allows them to constantly regenerate special energy. Applies <u>Monster Soul</u>, an unstrippable 5 SP regen buff that does not fade with time. Also grants the user an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.monster_soul,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},t],l={name:\"monster soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,a,t,n)=>{We.pushMessagesToState([\"<br>The afflicted's monster soul radiates energy!\"],!0,\"push\"),We.gainSP(e,5,\"self\",!1,!1,t,n,!0)},apply_text:\"'s monster soul radiates energy!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),We.gainActions(t,1,\"self\",r,!0,s,o,!0)},cost:(e,a)=>!0},wolven_soul:{name:\"wolven soul\",description:\"The user's monster soul allows them to constantly regenerate special energy. Applies <u>Wolven Soul</u>, an unstrippable 5 SP regen buff that does not fade with time, and grants actions to the afflicted depending on how low their health is. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.wolven_soul,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},t],l={name:\"wolven soul\",duration:999,element:\"none\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(e,a,t,n)=>{We.pushMessagesToState([\"<br>The afflicted's wolven soul radiates energy!\"],!0,\"push\"),We.gainSP(e,5,\"self\",!1,!1,t,n,!0),a.health/a.max_health>.75?We.gainActions(e,1,\"self\",!1,!1,t,n,!0):a.health/a.max_health>.3?We.gainActions(e,2,\"self\",!1,!1,t,n,!0):a.health/a.max_health>.1&&We.gainActions(e,3,\"self\",!1,!1,t,n,!0)},apply_text:\"'s wolven soul radiates energy!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),We.gainActions(t,1,\"self\",r,!0,s,o,!0)},cost:(e,a)=>!0},kindred_soul:{name:\"kindred soul\",description:\"The user's kindred soul allows them to constantly regenerate health. Applies <u>Kindred Soul</u>, an unstrippable 3% HP regen buff that does not fade with time. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.kindred_soul,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},t],l={name:\"kindred soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(a,t,n,s)=>{console.log(t),We.pushMessagesToState([\"<br>The afflicted's kindred soul radiates energy!\"],!0,\"push\"),We.gainHealth(a,Math.round(.03*e.max_health),\"self\",!1,!1,n,s,!0)},apply_text:\"'s kindred soul radiates energy!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),We.gainActions(t,1,\"self\",r,!0,s,o,!0)},cost:(e,a)=>!0},anima_soul:{name:\"anima soul\",description:\"The user's kindred soul allows them to constantly regenerate health and energy. Applies <u>Anima Soul</u>, an unstrippable 5% HP regen/5 SP regen buff that does not fade with time. Use of this skill grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.anima_soul,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[n.name,{damage:0,additionalInfo:{type:[\"buff\",\"soul\"],target:\"self\"}},t],l={name:\"anima soul\",duration:999,element:\"earth\",types:[\"buff\"],fade:!1,unstrippable:!0,onTick:(a,t,n,s)=>{console.log(t),We.pushMessagesToState([\"<br>The afflicted's anima soul radiates energy!\"],!0,\"push\"),We.gainHealth(a,Math.round(.05*e.max_health),\"self\",!1,!1,n,s,!0),We.gainSP(a,5,\"self\",!1,!1,n,s,!0)},apply_text:\"'s anima soul radiates energy!\",max_stacks:1};We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,s,o),We.gainActions(t,1,\"self\",r,!0,s,o,!0)},cost:(e,a)=>!0},rend:{name:\"rend\",description:\"<b>Cost: 20 stamina</b> -  The user slashes at the enemy viciously, dealing moderate physical damage and possibly (50%) applying <u>Bleed</u> [-10% ATK, 10% HP DOT, 3T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{const n=We.swift_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} claws at the enemy viciously!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-20,\"self\",!1,!1,o,r,!1);const l={name:\"bleed\",atk:-.1,duration:3,element:\"physical\",types:[\"debuff\"],apply_text:\" is bleeding!\",max_stacks:1,damage:[\"percentile\",10]};if(0==s.eva){const a=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"buffs\")};We.applyBuff(t,a,\"opponent\",!1,!1,o,r)}const i={damage:s,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,i,t],!0,o,r)},cost:(e,a)=>e.stamina>=20||\"Insufficient stamina!\"},brutal_swipe:{name:\"brutal swipe\",description:\"<b>Cost: 30 Stamina</b> - The user enhances their strength temporarily and attacks, dealing high weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:.9,dmg_mod:1.54,use:(e,a,t)=>{const n=We.brutal_swipe,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-30,\"self\",!1,!1,o,r,!1),We.prepareAttackMessage(e.name,a.name,`<br>${e.name} swiped at the enemy brutally!`,s);const l={damage:s,additionalInfo:{type:[\"attack\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,l,t],!0,o,r)},cost:(e,a)=>e.stamina>=30||\"Insufficient Stamina!\"},constrict:{name:\"contstrict\",description:\"<b>Cost: 40 stamina</b> - The user uses vines to constrict the opponent. Deals moderate physical earth damage and applies <u>Constricted</u> [-10% SPD/ATK/MATK, 4T duration, 5% HP DOT, stacks to 3] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"earth\",def_element:\"earth\",off_mod:1,def_mod:1,dmg_mod:1.12,use:(e,a,t)=>{const n=We.constrict,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} attempts to constrict the enemy with vines!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;We.gainStamina(t,-40,\"self\",!1,!1,o,r,!1);const l={name:\"constricted\",duration:4,matk:-.1,atk:-.1,speed:-.1,element:\"earth\",types:[\"debuff\"],damage:[\"percentile\",5],apply_text:\" is constricted!\",max_stacks:3};if(0==s.eva){const a=()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.applyBuff(t,a,\"opponent\",!1,!1,o,r)}const i={damage:s,additionalInfo:{type:[\"attack\",\"debuff\"],target:\"opponent\"}};We.dealDamage(t,s.damage,\"opponent\",[n.name,i,t],!0,o,r)},cost:(e,a)=>e.stamina>=40||\"Insufficient stamina!\"},nature_healing:{name:\"nature healing\",description:\"<b>Cost: 12 MP</b> - The user employs simple healing magic to recover from damage. Heals the user slightly based on their MDEF.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:.46,def_mod:0,dmg_mod:.95,use:(e,a,t)=>{const n=We.nature_healing,s=We.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canCrit:!1,canEvade:!1});We.pushMessagesToState([`${e.name} enveloped themselves in healing magic!`],!0,\"unshift\");const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l=[n.name,{damage:s,additionalInfo:{type:[\"heal\"],target:\"self\"}},t];We.gainHealth(t,s.damage,\"self\",l,!0,o,r,!0)},cost:(e,a)=>!0},lesser_anima_healing:{name:\"lesser anima healing\",description:\"<b>Cost: 15 MP</b> - The user employs fairly powerful healing magic to recover from damage. Heals the user slightly based on their MDEF, and applies <u>Lower Anima</u> [+20% ATK/DEF/MATK/MDEF, stacks to 3, 3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:.62,def_mod:0,dmg_mod:1,use:(e,a,t)=>{const n=We.lesser_anima_healing,s=We.calcDamage(e,e,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canCrit:!1,canEvade:!1});We.pushMessagesToState([`${e.name} enveloped themselves in healing magic!`],!0,\"unshift\");const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={name:\"lower anima\",duration:3,def:.2,mdef:.2,matk:.2,mdef:.2,element:\"earth\",types:[\"buff\"],apply_text:\" is blessed by healing magic!\",max_stacks:2};We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",!1,!1,o,r);const i=[n.name,{damage:s,additionalInfo:{type:[\"heal\"],target:\"self\"}},t];We.gainHealth(t,s.damage,\"self\",i,!0,o,r,!0)},cost:(e,a)=>!0},forest_curse:{name:\"forest curse\",description:\"<b>Cost: 40 Stamina</b> - The user turns the mystic energy of the forest against their enemy and uses it to strike them while afflicting them with several curses. Deals moderate magical dark damage and attemps to apply <u>Forest Curse</u> [-10% ATK/MATK/DEF/MDEF/SPD, stacks to 10, 5T duration] five times at a 25% chance each attempt. This skill cannot miss.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1.093,def_mod:1.02,dmg_mod:.98,use:(e,a,t)=>{const n=We.forest_curse,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,{canEvade:!1});We.prepareAttackMessage(e.name,a.name,`<br>${e.name} afflicts the enemy with the curse of the forest!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={name:\"forest curse\",duration:5,matk:-.1,atk:-.1,speed:-.1,def:-.1,mdef:-.1,element:\"dark\",types:[\"debuff\"],apply_text:\" has been cursed by the forest!\",max_stacks:10};if(0==s.eva)for(var i=0;i<5;i++){const a=()=>{Ze.applyBuff(l,25,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.applyBuff(t,a,\"opponent\",!1,!1,o,r)}const c={damage:s,type:[\"attack\",\"debuff\"],target:\"opponent\"};We.dealDamage(t,s.damage,\"opponent\",[n.name,c,t],!0,o,r)},cost:(e,a)=>!0},anima_bark:{name:\"anima bark\",description:\"The user enforces their body with mystical energy, applying <u>Anima Bark</u> [+30% DEF/MDEF, -10 all elemental defences, unstrippable and does not fade with time, 999T duraton] to themselves. Also grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.anima_bark,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[n.name,{damage:0,additionalInfo:{target:\"self\",type:[\"buff\"]}},t],l={name:\"anima bark\",def:.3,mdef:.3,duration:999,fade:!1,unstrippable:!0,element:\"earth\",elemental:{offence:{},defence:{fire:-10,earth:-10,water:-10,wind:-10,tunder:-10,light:-10,dark:-10,physical:-10}},types:[\"buff\"],apply_text:\"'s bark is reinforced mystically!'\",max_stacks:1};We.gainActions(t,1,\"self\",!1,!1,s,o,!0),We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,a)=>!0},greater_anima_bark:{name:\"greater anima bark\",description:\"The user enforces their body with mystical energy, applying <u>Greater Anima Bark</u> [+65% DEF/MDEF, -15 all elemental defences, unstrippable and does not fade with time, 999T duraton] to themselves. Also grants an additional action.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.greater_anima_bark,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a,r=[n.name,{damage:0,additionalInfo:{target:\"self\",type:[\"buff\"]}},t],l={name:\"greater anima bark\",def:.65,mdef:.65,duration:999,fade:!1,unstrippable:!0,element:\"earth\",elemental:{offence:{},defence:{fire:-15,earth:-15,water:-15,wind:-15,tunder:-15,light:-15,dark:-15,physical:-15}},types:[\"buff\"],apply_text:\"'s bark is reinforced mystically!'\",max_stacks:1};We.gainActions(t,1,\"self\",!1,!1,s,o,!0),We.applyBuff(t,()=>{Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\")},\"self\",r,!0,s,o)},cost:(e,a)=>!0},absolute_purge:{name:\"absolute purge\",description:\"<b>Cost: 10 mana</b> - The user attempts to purge all power from the enemy, removing all strippable buffs from them.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.absolute_purge,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;We.gainMana(t,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},t],l=JSON.parse(JSON.stringify(a.buffs));for(;l.length>0;){var i=Math.round(Math.random()*l.length)-1;if(i<0&&(i=0),l[i].hasOwnProperty(\"unstrippable\"))l.splice(i,1);else{const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getEnemy().buffs:Ze.getPlayer().buffs,l[i].name)};We.stripBuff(t,e,\"self\",!1,!1,s,o),l.splice(i,1)}}We.pushCustomFunc(t,()=>{},\"self\",r,!0,s,o)},cost:(e,a)=>e.mana>=10},absolute_cleanse:{name:\"absolute cleanse\",description:\"<b>Cost: 10 mana</b> - The user attempts to purge all weaknesses from themselves, removing from themselves all strippable debuffs.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n=We.absolute_cleanse,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;We.gainMana(t,-10,\"self\",!1,!1,s,o,!1);const r=[n.name,{damage:0,additionalInfo:{type:[\"debuff\"],target:\"opponent\"}},t],l=JSON.parse(JSON.stringify(e.debuffs));for(;l.length>0;){var i=Math.round(Math.random()*l.length)-1;if(i<0&&(i=0),l[i].hasOwnProperty(\"unstrippable\"))l.splice(i,1);else{const e=()=>{Ze.stripBuff(\"player\"==t?Ze.getPlayer().debuffs:Ze.getEnemy().debuffs,l[i].name)};We.stripBuff(t,e,\"self\",!1,!1,s,o),l.splice(i,1)}}We.pushCustomFunc(t,()=>{},\"self\",r,!0,s,o)},cost:(e,a)=>e.mana>=10},forest_rupture:{name:\"forest rupture\",description:\"The user calls upon the forest to destroy the enemy, dealing very high physical earth damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"earth\",def_element:\"earth\",off_mod:1.12,def_mod:.87,dmg_mod:1.9,use:(e,a,t)=>{const n=We.forest_rupture,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} called upon the forest to destroy their enemy!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={damage:s,type:[\"attack\"],target:\"opponent\"};We.dealDamage(t,s.damage,\"opponent\",[n.name,l,t],!0,o,r)},cost:(e,a)=>!0},poison_claws:{name:\"poison claws\",description:\"<b>Cost: 12 mana</b> - The user creates a wound with sharp poisonous claws. The poison seeps into the enemy, applying <u>Viridian Toxin</u> [-15% SPD, 10% HP DOT, 3T duration, stacks to 3]\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.1,use:(e,a,t)=>{const n=We.poison_claws,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} lashes out with poisonous claws!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={damage:s,type:[\"attack\"],target:\"opponent\"};We.dealDamage(t,s.damage,\"opponent\",!1,!1,!0,o,r);const i={name:\"viridian toxin\",speed:-.15,duration:3,element:\"earth\",types:[\"debuff\"],apply_text:\" is envenomed!\",max_stacks:3,damage:[\"percentile\",10]};if(0==s.eva){const a=()=>{Ze.applyBuff(i,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.applyBuff(t,a,\"opponent\",[n.name,l,t],!0,o,r)}},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},deep_envenom:{name:\"deep_envenom\",description:\"<b>Cost: 7 mana</b> - The user uses a special liquid to enhance the potency of venoms in the body of the target. Deals moderate physical damage and applies an additional stack of any DOT debuffs the enemy has applied (where possible) and extends their duration by 3 turns (buff copy application has base 999% apply chance).\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.7,use:(e,a,t)=>{const n=We.deep_envenom,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} attempts to deeply envenom their enemy!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={damage:s,type:[\"attack\",\"debuff\"],target:\"opponent\"};if(We.dealDamage(t,s.damage,\"opponent\",!1,!1,!0,o,r),0==s.eva){He(a.debuffs).forEach(a=>{if(a.hasOwnProperty(\"damage\")&&a.damage[1]>0){const n=()=>{a.duration+=3};We.pushMessagesToState([`Debuff ${a.name} extended by 3 turns!`]),We.pushCustomFunc(t,n,\"opponent\",!1,!1,o,r,!1);const s=He(a),l=()=>{Ze.applyBuff(s,999,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\")};We.applyBuff(t,l,\"opponent\",!1,!1,o,r)}})}We.pushCustomFunc(t,()=>{},\"self\",[n.name,l,t],!0,o,r,!1)},cost:(e,a)=>e.mana>=7||\"Insufficient mana!\"},killing_blow:{name:\"killing blow\",description:\"Having completed preparations, the user strikes to finish their target. Deals very high physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1.01,def_mod:.83,dmg_mod:2.56,use:(e,a,t)=>{const n=We.killing_blow,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e.name,a.name,`<br>${e.name} attempts to finish off their enemy!`,s);const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a,l={damage:s,type:[\"attack\"],target:\"opponent\"};We.dealDamage(t,s.damage,\"opponent\",[n.name,l,t],!0,o,r)},cost:(e,a)=>!0},guard_break:{name:\"guard break\",description:\"<b>Cost: 35 stamina</b> - The user strikes the enemy with a blunt edge, dealing low physical weapon element damage but possibly with a 75% chance to apply <u>Guard Broken</u> [-10% DEF, 5T duration, stacks to 3].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:1,use:(e,a,t)=>{e.stamina=e.stamina-35;const n=We.guard_break,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} struck the enemy with a blunt edge!`,s);$(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"guard broken\",def:-.1,duration:5,element:\"physical\",types:[\"debuff\"],apply_text:\"'s guard has been broken!\",max_stacks:3,elemental:{offence:{},defence:{}}};0==s.eva&&Ze.applyBuff(n,75,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\");const o=\"enemy\"==t?a:e,r=\"enemy\"==t?e:a;Ze.uploadChanges(o,r),We.finish(\"guard_break\",s,t)})},cost:(e,a)=>e.stamina>=35||\"Insufficient stamina!\"},rush_attack:{name:\"rush attack\",description:\"<b>Cost: 10 stamina</b> - The user strikes the enemy several times, dealing 3 hits of low physical weapon element damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"weapon\",def_element:\"weapon\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{const n=We.rush_attack,s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;We.gainStamina(t,-10,\"self\",!1,!1,s,o,!1),We.pushMessagesToState([`${e.name} lashed out at their enemy!<br>`],!0,\"unshift\");const r={damage:[],type:[\"attack\",\"multihit\"],target:\"opponent\"};for(var l=0;l<3;l++){const l=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod);We.prepareAttackMessage(e,a,\"\",l,\"push\",!1),We.dealDamage(t,l.damage,\"opponent\",!1,!1,s,o),r.damage.push(l)}We.pushCustomFunc(t,()=>{},\"self\",[n.name,r,t],!0,s,o)},cost:(e,a)=>e.stamina>=10||\"Insufficient stamina!\"},health_potion:{name:\"health potion\",description:\"Drink a health potion, recovering 20% of one's health.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=30;We.attack;const n={crit:!1,eva:!1,damage:-1*Math.round(e.health/4)},s=[[`${e.name} Drank a health potion!`,1],[`recovered ${n.damage} HP!`,1]];$(s,\"battle\",()=>{e.health-=n.damage,e.health>e.max_health&&(e.health=e.max_health);const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(s,o),We.finish(\"health_potion\",n,t)})},cost:(e,a)=>e.mana>=30||\"Insufficient mana!\"},camoflague:{name:\"camoflague\",description:\"<b>Cost: 12 mana</b> - The user envelops themselves in a camoflague that makes them hard to see and react to. Applies <u>Camoflague</u> [+30% evasion, +70% resistance, +30% SPD, 2T duration].\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.mana-=12;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} camoflagues themselves.`,1]];$(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(s,o);Ze.applyBuff({name:\"camoflague\",evasion:.3,resistance:70,speed:.3,duration:2,element:\"physical\",types:[\"buff\"],apply_text:\" is camoflagued!\",max_stacks:1},100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\"),We.finish(\"camoflague\",n,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},engulf:{name:\"engulf\",description:\"<b>Cost: 10 mana</b> - Absorb the enemy's power. Deals low physical damage and removes all buffs from the enemy. For each buff removed, applies <u>Empowered</u> [+10% ATK/DEF/MATK/MDEF/SPD, 2T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:.5,use:(e,a,t)=>{const n=We.engulf;e.mana-=10;const s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<br>${e.name} engulfs the enemy!`,s);$(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"empowered\",atk:.1,matk:.1,mdef:.1,def:.1,speed:.1,duration:2,element:\"dark\",types:[\"buff\"],apply_text:\" is empowered!\",max_stacks:99};if(0==s.eva){const s=JSON.parse(JSON.stringify(a.buffs));for(;s.length>0;){var o=Math.round(Math.random()*s.length)-1;o<0&&(o=0),s[o].hasOwnProperty(\"unstrippable\")?s.splice(o,1):(Ze.stripBuff(\"player\"==t?Ze.getEnemy().buffs:Ze.getPlayer().buffs,s[o].name),Ze.applyBuff(n,100,\"player\"==t?e:Ze.getPlayer(),\"player\"==t?Ze.getPlayer():Ze.getEnemy(),\"buffs\"),s.splice(o,1))}}const r=\"enemy\"==t?a:e,l=\"enemy\"==t?e:a;Ze.uploadChanges(r,l),We.finish(\"engulf\",s,t)})},cost:(e,a)=>e.mana>=10||\"Insufficient SP!\"},dark_pact:{name:\"dark pact\",description:\"<b>Cost: 18 mana</b> - The user calls upon their pact with the dark forest to strengthen them. At the cost of 5% HP, applies three stacks each of standard ATK/MATK/SPEED buff with increased duration [+10% ATK/MATK/SPEED, 5+3T duration] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={damage:e.max_health/20,crit:!1,eva:!1,note:\"self-inflicted damage\"},s=[[`<br>${e.name} forms a covenant with darkness..`,1],[`<br>${e.name} took damage! (${e.max_health/20})`]];$(s,\"battle\",()=>{e.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(s,o);const r={...ze.matkup};r.duration=6;const l={...ze.atkup};l.duration=6;const i={...ze.spdup};i.duration=6;for(var c=0;c<3;c++)Ze.applyBuff(r,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\"),Ze.applyBuff(l,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\"),Ze.applyBuff(i,100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\");We.finish(\"dark_pact\",n,t)})},cost:(e,a)=>e.health>e.max_health/20&&e.mana>=18||\"Insufficient health/mana!\"},dark_howl:{name:\"dark howl\",description:\"<b>Cost: 15 mana</b> - The user lets out a howl imbued with malevolent magic. Deals low magical dark damage and has a 40% chance each to apply <u>Fear</u> [-100% evasion, -20% SPD, -10% ATK/DEF/MATK/MDEF], <u>Dark Curse</u> [+70% dark defence], and <u>Elemental Weaken</u> [-10% all elemental offences]. Each debuff lasts 2 turns and stacks twice.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:.6,use:(e,a,t)=>{e.mana=e.mana-15;const n=We.dark_howl,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} lets out a dark howl!`,s);$(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"fear\",duration:2,def:-.1,mdef:-.1,matk:-.1,atk:-.1,speed:-.2,evasion:-1,element:\"dark\",types:[\"debuff\"],apply_text:\" is rapt with fear!\",max_stacks:2},o={name:\"dark curse\",element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by darkness!\",elemental:{defence:{dark:70},offence:{}},duration:2,max_stacks:2},r={name:\"elemental weaken\",element:\"dark\",types:[\"debuff\"],apply_text:\"'s elemental strength has decreased!'\",elemental:{defence:{},offence:{physical:-10,fire:-10,water:-10,earth:-10,wind:-10,thunder:-10,dark:-10,light:-10}},duration:2,max_stacks:2};0==s.eva&&(Ze.applyBuff(n,40,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\"),Ze.applyBuff(o,40,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\"),Ze.applyBuff(r,40,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\"));const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;Ze.uploadChanges(l,i),We.finish(\"dark_howl\",s,t)})},cost:(e,a)=>e.mana>=15||\"Insufficient mana!\"},nox_curse:{name:\"nox curse\",description:\"<b>Cost: 20 mana</b> - The user curses the opponent, dealing moderate dark magical damage and removing all debuffs. For each debuff previously applied, applies a stack of <u>Nox Curse</u> to the enemy [15% HP DOT, 2T duration, stacks to 99]. <u>Nox Curse</u> has a base 300% apply chance. This skill's effects will proc even if the skill misses.\",off_stat:\"matk\",def_stat:\"mdef\",off_element:\"dark\",def_element:\"dark\",off_mod:1,def_mod:1,dmg_mod:1.15,use:(e,a,t)=>{e.mana=e.mana-10;const n=We.nox_curse,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} curses the opponent!`,s);$(o,\"battle\",()=>{a.health-=s.damage;const n={name:\"nox curse\",duration:2,damage:[\"percentile\",15],element:\"dark\",types:[\"debuff\"],apply_text:\" is cursed by the shadows...\",max_stacks:99},o=JSON.parse(JSON.stringify(a.debuffs));for(;o.length>0;){var r=Math.round(Math.random()*o.length)-1;r<0&&(r=0),o[r].hasOwnProperty(\"unstrippable\")?o.splice(r,1):(Ze.stripBuff(\"player\"==t?Ze.getEnemy().debuffs:Ze.getPlayer().debuffs,o[r].name),Ze.applyBuff(n,100,\"player\"==t?Ze.getPlayer():Ze.getEnemy(),\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\"),o.splice(r,1))}const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;Ze.uploadChanges(l,i),We.finish(\"nox curse\",s,t)})},cost:(e,a)=>e.mana>=20||\"Insufficient mana!\"},boar_rush:{name:\"boar rush\",description:\"The user rushes at the enemy and strikes them powerfully. Deals notable physical damage and applies <u>Boar Rush</u> [+10% SPD, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.2,use:(e,a,t)=>{const n=We.boar_rush,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} rushed at the enemy!`,s);$(o,\"battle\",()=>{a.health-=s.damage;Ze.applyBuff({name:\"boar rush\",duration:4,speed:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased!\",max_stacks:3},100,\"player\"==t?e:Ze.getPlayer(),\"player\"==t?Ze.getPlayer():Ze.getEnemy(),\"buffs\"),\"player\"==t?(Ze.getPlayer().sp+=5,Ze.getPlayer().sp>Ze.getPlayer().max_sp&&(Ze.getPlayer().sp,Ze.getPlayer().max_sp),v(`${e.name} gained 5 SP!`)):(Ze.getEnemy().sp+=5,Ze.getEnemy().sp>Ze.getEnemy().max_sp&&(Ze.getEnemy().sp,Ze.getEnemy().max_sp),v(`${e.name} gained 5 SP!`));const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(n,o),We.finish(\"boar_rush\",s,t)})},cost:(e,a)=>!0},boar_strike:{name:\"boar strike\",description:\"The user strikes the enemy with their axe. Deals above average physical damage and applies <u>Boar Strike</u> [+10% ATK, 4T duration, stacks to 3] to the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"physical\",def_element:\"physical\",off_mod:1,def_mod:1,dmg_mod:1.4,use:(e,a,t)=>{const n=We.boar_strike,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} crashed their axe into the enemy!`,s);$(o,\"battle\",()=>{a.health-=s.damage;Ze.applyBuff({name:\"boar strike\",duration:4,atk:.1,element:\"physical\",types:[\"buff\"],apply_text:\"'s attack increased!\",max_stacks:3},100,\"player\"==t?e:Ze.getPlayer(),\"player\"==t?Ze.getPlayer():Ze.getEnemy(),\"buffs\"),\"player\"==t?(Ze.getPlayer().sp+=5,Ze.getPlayer().sp>Ze.getPlayer().max_sp&&(Ze.getPlayer().sp,Ze.getPlayer().max_sp),v(`${e.name} gained 5 SP!`)):(Ze.getEnemy().sp+=5,Ze.getEnemy().sp>Ze.getEnemy().max_sp&&(Ze.getEnemy().sp,Ze.getEnemy().max_sp),v(`${e.name} gained 5 SP!`));const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(n,o),We.finish(\"boar_strike\",s,t)})},cost:(e,a)=>!0},flare_impact:{name:\"flare impact\",description:\"<b>Cost: 20 SP</b> - The user ignites their axe and smashes the enemy, dealing high physical fire damage and applying <u>Burning</u> [3% HP DOT, 5T duration] to the enemy.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:2.1,use:(e,a,t)=>{e.sp=e.sp-20;const n=We.flare_impact,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} ignited their axe and smashed the enemy!`,s);$(o,\"battle\",()=>{a.health-=s.damage;Ze.applyBuff({name:\"burning\",duration:5,element:\"fire\",types:[\"debuff\"],apply_text:\" is burning!\",damage:[\"percentile\",3],max_stacks:1},100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getEnemy():Ze.getPlayer(),\"debuffs\");const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(n,o),We.finish(\"flare_impact\",s,t)})},cost:(e,a)=>e.sp>=20||\"Insufficient mana!\"},ignis_destroyer:{name:\"ignis destroyer\",description:\"The user strikes the enemy with a great fireball and a flaming axe simulatenously, dealing massive fire physical damage.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"fire\",def_element:\"fire\",off_mod:1,def_mod:1,dmg_mod:3.2,use:(e,a,t)=>{const n=We.ignis_destroyer,s=We.calcDamage(e,a,n.off_stat,n.def_stat,n.off_element,n.def_element,n.off_mod,n.def_mod,n.dmg_mod,!1),o=We.prepareAttackMessage(e.name,a.name,`<Br>${e.name} attempts to obliterate the enemy with flames!`,s);$(o,\"battle\",()=>{a.health-=s.damage;const n=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(n,o),We.finish(\"ignis_destroyer\",s,t)})},cost:(e,a)=>!0},boar_haste:{name:\"boar haste\",description:\"The user enchants their speed with powerful magic, applying <u>Boar Haste</u> [+50% SPD, unstrippable, 999T duration]  to themselves.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} enchants themselves with powerful magic!`,1]];$(s,\"battle\",()=>{a.health-=n.damage;const s=\"enemy\"==t?a:e,o=\"enemy\"==t?e:a;Ze.uploadChanges(s,o);Ze.applyBuff({name:\"boar haste\",speed:.5,element:\"physical\",types:[\"buff\"],apply_text:\"'s speed increased greatly!\",max_stacks:1,unstrippable:!0,duration:999},100,\"player\"==t?Ze.getPlayer():e,\"player\"==t?Ze.getPlayer():e,\"buffs\"),We.finish(\"camoflague\",n,t)})},cost:(e,a)=>e.mana>=12||\"Insufficient mana!\"},true_cleanse:{name:\"true cleanse\",description:\"<b>Cost: 10 SP</b> - The user cleanses their spirit completely. Removes all buffs and debuffs from the user.\",off_stat:\"atk\",def_stat:\"def\",off_element:\"none\",def_element:\"none\",off_mod:0,def_mod:0,dmg_mod:0,use:(e,a,t)=>{e.sp=e.sp-10;const n={damage:0,crit:!1,eva:!1},s=[[`<br>${e.name} cleanses themselves completely.`,1]];$(s,\"battle\",()=>{var s,o;a.health-=n.damage,\"player\"==t?(s=Ze.getPlayer().buffs,o=Ze.getEnemy().debuffs):(s=Ze.getEnemy().buffs,o=Ze.getEnemy().debuffs);for(var r=0;r<s.length;r++){const e=s[r];1==Ze.stripBuff(\"player\"==t?Ze.getPlayer().buffs:Ze.getEnemy().buffs,e.name)&&r--}for(r=0;r<o.length;r++){const e=o[r];1==Ze.stripBuff(\"player\"==t?Ze.getPlayer().debuffs:Ze.getEnemy().debuffs,e.name)&&r--}const l=\"enemy\"==t?a:e,i=\"enemy\"==t?e:a;Ze.uploadChanges(l,i),We.finish(\"true_cleanse\",n,t)})},cost:(e,a)=>e.sp>=10||\"Insufficient SP!\"}},ze={defdown:{name:\"DEF down\",def:-.1,duration:5,element:\"none\",types:[\"debuff\"],apply_text:\"'s defence was decreased!\",max_stacks:5},defup:{name:\"DEF up\",def:.1,duration:5,element:\"none\",types:[\"buff\"],apply_text:\"'s defence was increased!\",max_stacks:5},mdefdown:{name:\"MDEF down\",mdef:-.1,duration:5,types:[\"debuff\"],apply_text:\"'s magical defence was decreased!\",max_stacks:5},mdefup:{name:\"MDEF up\",mdef:.1,duration:5,apply_text:\"'s magical defence was increased!\",max_stacks:5},atkup:{name:\"ATK up\",atk:.1,duration:5,types:[\"buff\"],apply_text:\"'s attack was increased!\",max_stacks:5},matkup:{name:\"MATK up\",matk:.1,duration:5,types:[\"buff\"],apply_text:\"'s magical attack was increased!\",max_stacks:5},spdup:{name:\"SPEED up\",speed:.1,duration:5,element:\"none\",types:[\"buff\"],apply_text:\"'s speed was increased!\",max_stacks:5}},Ge=(e,a)=>{var t=0;return e.forEach(e=>{e.skill==a&&t++}),t},Ue=e=>{var a=[];return e.forEach(e=>{a.push(e.damage.damage)}),a},Je=e=>{for(var a=JSON.parse(JSON.stringify(e)),t=0,n=0;n<a.length&&(n<0&&(n=0),0!=a.length);n++){var s=a[n].name;t+=1;for(var o=0;o<a.length;o++)a[o].name==s&&(a.splice(o,1),o-=1,n-=1)}return t},Ke=e=>{var a=JSON.parse(JSON.stringify(e)),t=0;return a.forEach(e=>{var n=e.name;t+=1;for(var s=0;s<a.length;s++)if(a[s].name==n){a.splice(s,1),s-=1;break}}),t},Ve=(e,a)=>{for(var t=!1;0==t;){var n=Math.floor(Math.random()*a.length);1==We[a[n]].cost(e)&&(t=!0,We[a[n]].use(Ze.getEnemy(),Ze.getPlayer(),\"enemy\"))}},Ze={battleProcessing(e,a,t,s={changeLevel:!0,levelCap:!1,addLevels:!1}){v(\"<br>---------------------------------------\"),v(`<br>Battle between ${e.name} and ${a.stats.name} has begun!`);const o=JSON.parse(JSON.stringify(e));this.playerFighter=this.addCombatStats(o.stats,o.name,\"player\",s);const r=JSON.parse(JSON.stringify(a));this.enemy=this.addCombatStats(r.stats,r.stats.name,\"enemy\",s),this.turn=0,this.state=[],this.endFunction=t,aa(Ze.getPlayerAdd(Ze.playerFighter)),n.first_time.combat&&(n.first_time.combat=!1,v(w.combatIntroduction)),aa(Ze.getPlayerAdd(Ze.playerFighter)),this.combatLoop()},addCombatStats(e,a,t,s={changeLevel:!0,levelCap:!1,addLevels:!1}){if(e.name=a,e.health_mod=0,e.atk_mod=0,e.def_mod=0,e.matk_mod=0,e.mdef_mod=0,e.crit_chance_mod=0,e.crit_damage_mod=0,e.effectiveness_mod=0,e.resistance_mod=0,e.evasion_mod=0,e.speed_mod=0,e.actions=0,e.buffs=[],e.debuffs=[],e.mitigation=0,\"player\"==t)e.mana=e.current_mana,e.sp=0,e.stamina=e.max_stamina,e.max_health=this.getMaxHealth(e),e.health=e.current_health,e.actionsTaken=0,e.skillsList=e.skills.map(e=>{if(\"guard\"!=e&&\"attack\"!=e){var a=e.split(\"-\"),t=a[0],n=a[1];return d[t].skills[n].name}return e}),e.type=\"player\",console.log(e.skillsList);else{e.modeBattle=\"normal\",e.mana=e.max_mana,e.stamina=e.max_stamina,e.health=e.max_health,e.sp=0,e.level=e.base_level,e.actionsTaken=0,e.type=\"enemy\";const a=e.base_level,t=n.player.level;var o;const r=null==s.changeLevel||s.changeLevel,l=null!=s.levelCap&&s.levelCap,i=null!=s.addLevels&&s.addLevels;if(o=0==r?a:1==r?t:r,0!=i&&o<t+i&&(o=t+i),0!=l&&o>l&&(o=l),o>a){const t=o-a;e.level=e.level+t,e.health=e.health+10*t,e.max_health=e.health,e.atk=e.atk+3*t,e.def=e.def+3*t,e.matk=e.matk+3*t,e.mdef=e.mdef+3*t,e.speed=e.speed+3*t,e.exp=e.exp+10*t}delete e.base_level}return e},getEquips(e){const a={atk:0,def:0,matk:0,mdef:0,crit_chance:0,crit_damage:0,effectiveness:0,resistance:0,evasion:0,speed:0,mitigation:0,max_mana:0,max_sp:0,max_stamina:0};return Object.keys(e.equips).forEach(t=>{null!=e.equips[t]&&Object.keys(M[e.equips[t]]).forEach(n=>{a.hasOwnProperty(n)&&(a[n]+=M[e.equips[t]][n])})}),a},getEquipStat(e,a){var t=0;return Object.keys(e.equips).forEach(n=>{null!=e.equips[n]&&Object.keys(M[e.equips[n]]).forEach(s=>{s==a&&(t+=M[e.equips[n]][a])})}),t},getMaxHealth(e){const a={health:0};return a.health+=this.getEquipStat(n.player.stats,\"health\"),a.health+=20*n.player.sp_investment.health,e.health+a.health},getEquipsElements(e){const a={offence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}},t=e.equips;return Object.keys(t).forEach(e=>{if(null!=t[e]){const n=M[t[e]];Object.keys(n.elemental.offence).forEach(e=>{a.offence[e]+=n.elemental.offence[e],a.offence[e]=qe(a.offence[e],l,i)}),Object.keys(n.elemental.defence).forEach(e=>{a.defence[e]+=n.elemental.defence[e],a.defence[e]=qe(a.defence[e],l,i)})}}),a},healthCheck:()=>Ze.playerFighter.health<=0?(aa(Ze.getPlayerAdd(Ze.playerFighter)),\"enemy\"):Ze.enemy.health<=0&&(aa(Ze.getPlayerAdd(Ze.playerFighter)),\"player\"),uploadChanges(e,a){console.log({...Ze.playerFighter}),Ze.playerFighter.health=e.health,Ze.enemy.health=a.health,Ze.playerFighter.mana=e.mana,Ze.playerFighter.sp=e.sp,Ze.playerFighter.stamina=e.stamina,console.log({...Ze.playerFighter})},calcBuffs(e,a){var t=0;const n=a.buffs;return n.length>0&&Object.keys(n).forEach(a=>{n[a].hasOwnProperty(e)&&(t+=n[a][e])}),t},calcDebuffs(e,a){var t=0;const n=a.debuffs;return Object.keys(n).forEach(a=>{n[a].hasOwnProperty(e)&&(t+=n[a][e])}),t},calcMod(e,a){var t=0;return t+=Ze.calcBuffs(e,a),t=qe(t+=Ze.calcDebuffs(e,a),-.9,5)},calcElementBuffs(e){const a={offence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0},defence:{none:0,physical:0,fire:0,water:0,earth:0,wind:0,thunder:0,dark:0,light:0}};return e.buffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(t=>{a.offence[t]+=e.elemental.offence[t],a.offence[t]=qe(a.offence[t],l,i)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(t=>{a.defence[t]+=e.elemental.defence[t],a.defence[t]=qe(a.defence[t],l,i)}))}),e.debuffs.forEach(e=>{e.hasOwnProperty(\"elemental\")&&(e.elemental.hasOwnProperty(\"offence\")&&Object.keys(e.elemental.offence).forEach(t=>{a.offence[t]+=e.elemental.offence[t],a.offence[t]=qe(a.offence[t],l,i)}),e.elemental.hasOwnProperty(\"defence\")&&Object.keys(e.elemental.defence).forEach(t=>{a.defence[t]+=e.elemental.defence[t],a.defence[t]=qe(a.defence[t],l,i)}))}),a},applyBuff(e,a,t,n,s){var o,r;n==t||\"buffs\"==s?(o=0,r=0):(o=qe(t.effectiveness+Ze.calcBuffs(\"effectiveness\",t)+Ze.calcDebuffs(\"effectiveness\",t),0,999),r=qe(n.resistance+Ze.calcBuffs(\"resistance\",n)+Ze.calcDebuffs(\"resistance\",n),0,999)),a=qe(a+o,0,100);const l=Math.round(100*Math.random());l<=a-r?Ze.checkStacks(n[s],e.name)<e.max_stacks&&(v(`${n.name} ${e.apply_text}`),\"buffs\"==s?n.buffs.push({...e}):n.debuffs.push({...e}),aa(Ze.getPlayerAdd(Ze.playerFighter))):v(l<=a?'<span style=\"color:#9500D6\">Effect resisted!</span>':\"Effect not applied.\")},stripBuff(e,a){for(var t=!1,n=0;n<e.length;n++){const s=e[n];if(s.name==a){if(s.hasOwnProperty(\"unstrippable\"))return!1;e.splice(n,1),t=!0,v(`${s.name} removed.`),n--}}return t},buffCheck(e,a){const t=e.buffs.concat(e.debuffs);console.log(\"buffcheck called\");for(var n=t.length-1;n>=0;n--){const a=t[n];if(a.hasOwnProperty(\"damage\")){const t=a.damage;var s;\"percentile\"==t[0]&&(s=Math.round(e.max_health*(t[1]/100))),\"flat\"==t[0]&&(s=t[1]);const n=`<br>(${a.name}) ${e.name} ${s>0?\"lost\":\"gained \"} health! <span style=\"color:${g[t[2]]}\">[${Math.abs(s)}, ${t[0]}]</span>`;We.pushMessagesToState([n],!0,\"push\"),We.dealDamage(e.type,s,\"self\",!1,!1,Ze.getPlayer(),Ze.getEnemy())}a.hasOwnProperty(\"heal\"),a.hasOwnProperty(\"onTick\")&&a.onTick(e.type,e,Ze.getPlayer(),Ze.getEnemy())}for(n=e.buffs.length-1;n>=0;n--){const a=e.buffs[n];0!=a.fade&&(a.duration-=1),a.duration<=0&&(v(`${a.name} faded. (${e.name})`),e.buffs.splice(n,1))}for(n=e.debuffs.length-1;n>=0;n--){const a=e.debuffs[n];0!=a.fade&&(a.duration-=1),a.duration<=0&&(v(`${a.name} faded. (${e.name})`),e.debuffs.splice(n,1))}We.skillStack.stack.push([\"continue\",a,!0]),We.runSkillStack()},turnReset(e){e.actions-=1,e==Ze.playerFighter&&aa(Ze.getPlayerAdd(Ze.playerFighter))},combatLoop(){var e=this.healthCheck();Ze.turn+=1,Ze.state.push({player:[],enemy:[]}),v(`<br>TURN ${Ze.turn}`),0==e?(Ze.playerFighter.actions=Ze.calcActions(Ze.getPlayerAdd(Ze.playerFighter),Ze.getEnemy()),aa(Ze.getPlayerAdd(Ze.playerFighter)),Ze.initShortcuts(),$(Ze.combatMessage(),\"battle\",()=>\"\"),S(this.selectAttack)):this.endBattle(this.healthCheck())},combatMessage:()=>[[`<br>Health: ${Ze.playerFighter.health}/${Ze.playerFighter.max_health}`,0],[`${Ze.getEnemy().name} (LV${Ze.getEnemy().level}) Health: ${Ze.enemy.health}/${Ze.enemy.max_health}`,0],[`Actions: ${Ze.playerFighter.actions}`,0],[\"Please select an action\",0]],endTurn(e){const a=\"player\"==e?Ze.playerFighter:Ze.enemy;\"player\"==e?Ze.enemy:Ze.playerFighter;if(0==this.healthCheck())if(aa(Ze.getPlayerAdd(Ze.playerFighter)),a.actions>1)a.actions-=1,\"player\"==e?(a.actionsTaken+=1,$(Ze.combatMessage(),\"battle\",()=>\"\"),Ze.initShortcuts(),S(this.selectAttack)):(a.actionsTaken+=1,H[Ze.enemy.mode].call(void 0,Ze.state,Ze.getPlayerAdd(Ze.playerFighter),Ze.enemy,()=>{F[Ze.enemy.ai].call()}));else if(\"player\"==e){a.actionsTaken=0;var t=Math.round(Ze.getPlayerAdd(Ze.playerFighter).max_stamina/10);Ze.playerFighter.stamina+=t,Ze.playerFighter.stamina=qe(Ze.playerFighter.stamina,0,Ze.playerFighter.max_stamina),v(`<br>Regenned ${t} stamina!`),v(\"<br>Player turn end\"),Ze.turnReset(Ze.playerFighter),v(\"<br>---------------------------------------\"),Ze.enemy.actions=Ze.calcActions(Ze.getEnemy(),Ze.getPlayerAdd(Ze.playerFighter)),Ze.buffCheck(Ze.enemy,()=>{H[Ze.enemy.mode].call(void 0,Ze.state,Ze.getPlayerAdd(Ze.playerFighter),Ze.enemy,()=>{F[Ze.enemy.ai].call()})})}else{v(\"<br>Enemy turn end\"),a.actionsTaken=0;t=Math.round(Ze.enemy.max_stamina/10);Ze.enemy.stamina+=t,Ze.enemy.stamina=qe(Ze.enemy.stamina,0,Ze.enemy.max_stamina),v(`<br>${Ze.enemy.name} regenned ${t} stamina!`),Ze.turnReset(Ze.enemy),v(\"<br>---------------------------------------\"),Ze.buffCheck(Ze.playerFighter,()=>{this.combatLoop()})}else this.endBattle(this.healthCheck())},displayStatus(e){const a=(e,a)=>e.name>a.name?1:e.name<a.name?-1:0;e.buffs.sort(a),e.debuffs.sort(a),v(`${y}Displaying status...`),v(`HP: ${e.health}/${e.max_health}`),v(`Mana: ${e.mana}/${e.max_mana}`),v(`Stamina: ${e.stamina}/${e.max_stamina}`),v(`SP: ${e.sp}/${e.max_sp}`),v(\"<br><b>BUFFS</b>\");const t=[];0==e.buffs.length&&v(\"<br>None\"),e.buffs.forEach(a=>{var n={...a},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${g[n.element]}\">${n.element}</span>`;delete n.element;const l=Ze.checkStacks(e.buffs,n.name),i=`<br>${l} stack${l>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;var c;delete n.max_stacks,n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\";var d=\"\";if(n.hasOwnProperty(\"damage\")&&(\"percentile\"==n.damage[0]?d=`<br> ➢ ${Math.abs(n.damage[1])}% ${n.damage[1]>0?\"DoT\":\"HoT\"}`:\"flat\"==n.damage[0]&&(d=`<br> ➢ ${Math.abs(n.damage[1])}DMG ${n.damage[1]>0?\"DoT\":\"HoT\"}`)),n.hasOwnProperty(\"elemental\"))var f=Object.keys(n.elemental.offence).map(e=>{const a=n.elemental.offence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} attack`}),m=Object.keys(n.elemental.defence).map(e=>{const a=n.elemental.defence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} defence`});else f=[],m=[];delete n.elemental;var h,u=Object.keys(n).map(e=>{const a=n[e];if(\"name\"!=e&&\"damage\"!=e)return[\"resistance\",\"effectiveness\"].includes(e)?`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e}`:`<br> ➢ ${a>0?\"+\":\"\"}${100*a}% ${e}`});h=t.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${i}${o}${u.join(\", \")}\\n                `+`${f.join(\", \")}${m.join(\", \")}${c}${d}`,v(h),t.push(n.name)}),v(\"<br><b>DEBUFFS</b>\"),0==e.debuffs.length&&v(\"<br>None\"),e.debuffs.forEach(a=>{var n={...a},s=n.name;delete n.types,delete n.apply_text;const o=`<br> ➢ ${n.duration} turns remaining`;delete n.duration;const r=`<br><span style=\"color:${g[n.element]}\">${n.element}</span>`;delete n.element;const l=Ze.checkStacks(e.debuffs,n.name),i=`<br>${l} stack${l>1?\"s\":\"\"}<b>/</b>${n.max_stacks} max`;delete n.max_stacks;var c,d=\"\";if(n.hasOwnProperty(\"damage\")&&(\"percentile\"==n.damage[0]?d=`<br> ➢ ${Math.abs(n.damage[1])}% ${n.damage[1]>0?\"DoT\":\"HoT\"}`:\"flat\"==n.damage[0]&&(d=`<br> ➢ ${Math.abs(n.damage[1])}DMG ${n.damage[1]>0?\"DoT\":\"HoT\"}`)),n.hasOwnProperty(\"desc\")?(c=`<br> - ${n.desc}`,delete n.desc):c=\"\",n.hasOwnProperty(\"elemental\"))var f=Object.keys(n.elemental.offence).map(e=>{const a=n.elemental.offence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} attack`}),m=Object.keys(n.elemental.defence).map(e=>{const a=n.elemental.defence[e];return`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e} defence`});else f=[],m=[];delete n.elemental;var h,u=Object.keys(n).map(e=>{const a=n[e];if(\"name\"!=e&&\"damage\"!=e)return[\"resistance\",\"effectiveness\"].includes(e)?`<br> ➢ ${a>0?\"+\":\"\"}${a} ${e}`:`<br> ➢ ${a>0?\"+\":\"\"}${100*a}% ${e}`});h=t.includes(n.name)?`FURTHER STACK: ${o}`:`<br>${s.toUpperCase()}${r}${i}${o}${u.join(\", \")}\\n                `+`${f.join(\", \")}${m.join(\", \")}${c}${d}`,v(h),t.push(n.name)}),v(`${y}Please select an action`)},displayStats(e){const a={atk:\"attack\",def:\"defence\",matk:\"magic attack\",mdef:\"magic defence\",speed:\"speed\",crit_chance:\"critical chance\",crit_damage:\"critical damage\",effectiveness:\"effectiveness\",resistance:\"resistance\"};var t=\"\";[\"atk\",\"matk\",\"def\",\"matk\",\"mdef\",\"speed\",\"crit_chance\",\"crit_damage\",\"effectiveness\",\"resistance\"].forEach(n=>{var s=e[n];\"crit_chance\"!=n&&\"crit_damage\"!=n||(s=(100*s).toString()+\"%\"),t+=`<br> - ${a[n]}: ${s}`}),Object.keys(e.elemental.offence).forEach(a=>{t+=`<br> - ${e.elemental.offence[a]} ${a} attack`}),Object.keys(e.elemental.defence).forEach(a=>{t+=`<br> - ${e.elemental.defence[a]} ${a} defence`}),t+=`<br><br>${e.desc}`,v(t)},initShortcuts(){n.player;const e=Ze.getPlayer().skillsList,a=[\"skills\",\"status\",\"enemy\"];e.forEach(e=>{a.push(We[e].name)}),a.push([\"flee\"]),A(a)},selectAttack(){const e=Ze.playerFighter,a=Ze.enemy;P(Ze.selectAttack);const t=x();if(Ze.getEquips(e),\"skills\"==t)v(`<br> ${Ze.getPlayer().skillsList.map(e=>`${We[e].name}: ${We[e].description}`).join(\"<br><br>\")}`),Ze.initShortcuts(),S(Ze.selectAttack);else if(\"status\"==t)Ze.displayStatus(e),Ze.initShortcuts(),S(Ze.selectAttack);else if(\"enemy\"==t)Ze.displayStatus(a),Ze.initShortcuts(),S(Ze.selectAttack);else if(\"flee\"==t)Ze.getPlayer().health=0,Ze.endBattle(Ze.healthCheck());else if(-1!==e.skillsList.findIndex(e=>e.replace(/_/g,\" \")==t))1==We.getSkill(t).cost(e,a)?We.getSkill(t).use(Ze.getPlayerAdd(e),a,\"player\"):(v(`<br> ${We.getSkill(t).cost(e,a)}`),Ze.initShortcuts(),S(Ze.selectAttack));else if(\"p\"==t||\"pouch\"==t){0==n.player.stats.pouch.length?(v(\"Your pouch is empty!\"),S(Ze.selectAttack)):Ze.pouchMenuLoop()}else Ze.initShortcuts(),$([[\"\",0],[\"Invalid Input\",0]],\"battle\",S(Ze.selectAttack))},pouchMenuLoop(){const e=n.player;v(\"Currently in the pouch menu. Options:\"),v(\"<br> - Type the name of an item to use it.\"),v(\" - b/back (to return)\"),v(\"<br>Items currently in pouch:<br>\"),e.stats.pouch.forEach(e=>{v(`${e[1]} ${M[e[0]].name} - ${M[e[0]].desc}`)}),S(Ze.pouchMenuResponse)},pouchMenuResponse(){P(Ze.pouchMenuResponse);const e=x().toLowerCase(),a=n.player;if(-1!=a.stats.pouch.findIndex(a=>C(e)==a[0])){const t=a.stats.pouch.findIndex(a=>C(e)==a[0]),n=a.stats.pouch[t][0],s=(M[n].name,M[n].use.battleEffect);a.stats.pouch[t][1]-=1,0==a.stats.pouch[t][1]&&a.stats.pouch.splice(t,1),s()}else\"b\"==e||\"back\"==e?(v(\"Returning..\"),$(Ze.combatMessage(),\"battle\",()=>\"\"),S(Ze.selectAttack())):(v(\"Invalid input\"),S(Ze.pouchMenuResponse))},getEnemy:()=>Ze.enemy,getPlayerAdd(e){const a=Ze.getEquips(n.player.stats),t=Ze.getEquipsElements(n.player.stats),s=t.offence,o=t.defence,r=JSON.parse(JSON.stringify(e));return Object.keys(n.player.sp_investment).forEach(e=>{\"health\"!=e&&\"mana\"!=e&&(a[e]+=2*n.player.sp_investment[e]),\"mana\"==e&&(a.max_mana+=15*n.player.sp_investment[e])}),Object.keys(r).forEach(e=>{a.hasOwnProperty(e)&&(r[e]+=a[e])}),Object.keys(s).forEach(e=>{r.elemental.offence[e]+=s[e]}),Object.keys(o).forEach(e=>{r.elemental.defence[e]+=o[e]}),r},getPlayer:()=>Ze.playerFighter,checkStacks(e,a){var t,n=0;for(t in e)e[t].name==a&&n++;return n},calcActions:(e,a)=>e.speed*(1+Ze.calcMod(\"speed\",e))>a.speed*(2+Ze.calcMod(\"speed\",a))?(v(\"<br>The superior speed of the caster grants them an extra action!\"),2):(e.speed,Ze.calcMod(\"speed\",e),a.speed,Ze.calcMod(\"speed\",a),1),endBattle(e){if(\"enemy\"==e){v(`${Ze.playerFighter.name} has been defeated!`);const e=[[\"The defeat in battle leaves you disoriented...<br>\",1],[\"Fortuately, you awake in familiar surroundings...\",1]];n.player.stats.current_health=n.player.max_health,n.player.stats.current_mana=n.player.stats.max_mana,$(e,\"battle\",ta)}else{v(`${Ze.playerFighter.name} emerged victorious!<br>`),n.player.stats.current_health=Ze.getPlayer().health,n.player.stats.current_mana=Ze.getPlayer().mana,n.player.gold+=this.enemy.gold,n.player.exp+=this.enemy.exp,v(`Gained ${this.enemy.gold} gold!<br>`),v(`Gained ${this.enemy.exp} exp!<br>`);const e=this.enemy.drops;var a=0;for(a in e){const t=Math.round(1e3*Math.random()),n=e[a];n[1]>=t&&(null!=n[3]?E(n[0],n[2],n[3]):E(n[0]))}this.endFunction.call(),Xe()}Ce(n.player)},heal(e){e.current_health=Ze.getMaxHealth(e),e.current_mana=Ze.getPlayerAdd(e).max_mana}},Xe=()=>{if(n.player.level<25&&n.player.exp>=r[n.player.level]){const e=\"<br>You can feel yourself becoming stronger...<br>\"+`Levelled up to level ${n.player.level+1}`+\"<br>+2 SP!<br>+2 AP!<br>+20 health!<br>+2 all stats!<br>\";v(e),Qe()}},Qe=()=>{const e=n.player,a=e.stats;e.exp-=r[e.level],e.level+=1,e.sp+=2,e.ap+=2,a.health+=20,a.current_health+=20,a.max_mana+=5,a.current_mana+=5,a.atk+=2,a.def+=2,a.matk+=2,a.mdef+=2,a.speed+=2,Ce(e),Xe()},ea=e=>{const a=e.stats,t=e.stats.elemental.offence,n=e.stats.elemental.defence,s=`\\n    ${e.name}'s stats <br>\\n    health: ${a.current_health}/${Ze.getMaxHealth(e.stats)} <br>\\n    attack: ${a.atk}<br>\\n    defence: ${a.def} <br>\\n    magic attack: ${a.matk}<br>\\n    magic defense: ${a.mdef}<br>\\n    speed: ${a.speed}<br>\\n    critical chance: ${a.crit_chance}<br>\\n    critical damage: ${a.crit_damage}<br>\\n    effectiveness: ${a.effectiveness}<br>\\n    resistance: ${a.resistance}<br>\\n    evasion: ${a.evasion}<br>\\n    mana: ${a.current_mana}/${a.max_mana}<br>\\n    max stamina: ${a.max_stamina}<br>\\n    max sp: ${a.max_sp}\\n    `,o=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${t.physical}<br>\\n    fire: ${t.fire}<br>\\n    water: ${t.water}<br>\\n    wind: ${t.wind}<br>\\n    earth: ${t.earth}<br>\\n    thunder: ${t.thunder}<br>\\n    light: ${t.light} <br>\\n    dark: ${t.dark}<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${n.physical}<br>\\n    fire: ${n.fire}<br>\\n    water: ${n.water}<br>\\n    wind: ${n.wind}<br>\\n    earth: ${n.earth}<br>\\n    thunder: ${n.thunder}<br>\\n    light: ${n.light}<br>\\n    dark: ${n.dark}<br>\\n    `;m.mainStats.innerHTML=s,m.elementalStats.innerHTML=o},aa=e=>{const a=e.elemental.offence,t=e.elemental.defence,n=Ze.calcElementBuffs(e),s=n.offence,o=n.defence,r=Ze.calcMod(\"atk\",e),l=Ze.calcMod(\"def\",e),i=Ze.calcMod(\"matk\",e),c=Ze.calcMod(\"mdef\",e),d=Ze.calcMod(\"speed\",e),f=Ze.calcMod(\"crit_chance\",e),h=Ze.calcMod(\"crit_damage\",e),u=Ze.calcMod(\"effectiveness\",e),p=Ze.calcMod(\"resistance\",e),g=Ze.calcMod(\"evasion\",e),y=` \\n    ${e.name}'s stats <br>\\n    health: ${e.health} (${Math.round(e.health/e.max_health*100)}%)<br>\\n    attack: ${Math.round(e.atk*(r+1))} (${Math.round(100+100*r)}%)<br>\\n    defence: ${Math.round(e.def*(l+1))} (${Math.round(100+100*l)}%)<br>\\n    magic attack: ${Math.round(e.matk*(i+1))} (${Math.round(100+100*i)}%)<br>\\n    magic defense: ${Math.round(e.mdef*(c+1))} (${Math.round(100+100*c)}%)<br>\\n    speed: ${Math.round(e.speed*(d+1))} (${Math.round(100+100*d)}%)<br>\\n    critical chance: ${e.crit_chance+f} (${Math.round(100+100*f)}%)<br>\\n    critical damage: ${e.crit_damage+h} (${Math.round(100+100*h)}%)<br>\\n    effectiveness: ${e.effectiveness+u} (${Math.round(100+100*u)}%)<br>\\n    resistance: ${e.resistance+p} (${Math.round(100+100*p)}%)<br>\\n    evasion: ${e.evasion+g} (${Math.round(100+100*g)}%)<br>\\n    mitigation: ${Math.round(100*Ze.calcMod(\"mitigation\",e))}%<br>\\n    mana: ${e.mana}/${e.max_mana}<br>\\n    stamina: ${e.stamina}/${e.max_stamina}<br>\\n    sp: ${e.sp}/${e.max_sp}\\n    \\n    `,_=`\\n    ELEMENTAL OFFENCE: <br>\\n    physical: ${a.physical+s.physical} (${s.physical<0?\"\":\"+\"}${s.physical})<br>\\n    fire: ${a.fire+s.fire} (${s.fire<0?\"\":\"+\"}${s.fire})<br>\\n    water: ${a.water+s.water} (${s.water<0?\"\":\"+\"}${s.water})<br>\\n    wind: ${a.wind+s.wind} (${s.wind<0?\"\":\"+\"}${s.wind})<br>\\n    earth: ${a.earth+s.earth} (${s.earth<0?\"\":\"+\"}${s.earth})<br>\\n    thunder: ${a.thunder+s.thunder} (${s.thunder<0?\"\":\"+\"}${s.thunder})<br>\\n    light: ${a.light+s.light} (${s.light<0?\"\":\"+\"}${s.light})<br>\\n    dark: ${a.dark+s.dark} (${s.dark<0?\"\":\"+\"}${s.dark})<br><br>\\n    ELEMENTAL DEFENCE:<br>\\n    physical: ${t.physical+o.physical} (${o.physical<0?\"\":\"+\"}${o.physical})<br>\\n    fire: ${t.fire+o.fire} (${o.fire<0?\"\":\"+\"}${o.fire})<br>\\n    water: ${t.water+o.water} (${o.water<0?\"\":\"+\"}${o.water})<br>\\n    wind: ${t.wind+o.wind} (${o.wind<0?\"\":\"+\"}${o.wind})<br>\\n    earth: ${t.earth+o.earth} (${o.earth<0?\"\":\"+\"}${o.earth})<br>\\n    thunder: ${t.thunder+o.thunder} (${o.thunder<0?\"\":\"+\"}${o.thunder})<br>\\n    light: ${t.light+o.light} (${o.light<0?\"\":\"+\"}${o.light})<br>\\n    dark: ${t.dark+o.dark} (${o.dark<0?\"\":\"+\"}${o.dark})<br>\\n    `;m.mainStats.innerHTML=y,m.elementalStats.innerHTML=_};t.d(a,\"mainLoop\",(function(){return ta}));const ta=()=>{Ze.heal(n.player.stats),v(`${y}You are currently on floor ${n.current_floor}`);const e={...n.player};e.stats=Ze.getPlayerAdd(e.stats),ea(e),Be(n.player),A([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),S(oa)},na=()=>{P(na),name=x(),n.player.name=name,K([\"wooden_sword\",\"vine_wrapped_wooden_sword\",\"wooden_stave\",\"vine_wrapped_wooden_stave\",\"vine_armour\",\"stong_vine_chestplate\",\"vine_pantaloons\",\"feathervine_sword\",\"wolf_hermit_staff\",\"wooden_armour\",\"wooden_trousers\",\"vine_membrane_bracers\",\"water_orb_necklace\",\"blue_vine_charm\"]),sa()},sa=()=>{v(`${name}? That's a nice name. Nice to meet you!`),$([[\"Starting game...\",0],[w.gameIntroduction,0]],\"outisde\",ta)},oa=()=>{P(oa);const e=x().toLowerCase();if(\"ascend\"==e.toLowerCase()){const e=j[s[n.current_floor].boss];console.log(e.name),Ze.battleProcessing(n.player,e,ra)}else if(\"equip\"==e||\"eq\"==e)ke(ta);else if(\"stats\"==e||\"st\"==e)Q(ta);else if(\"explore\"==e||\"ex\"==e){((e,a=\"start\")=>{Ie.currentZone=Te[e];const t=Te[e].zone;if(\"start\"==a){console.log(\"(zonesetup) room equals start\");for(var s=0;s<t.length;s++)for(var o=0;o<t[s].length;o++)if(\"s\"==t[s][o]){console.log(t[s][o]),Ie.coordinates=[s,o];break}}n.first_time.explore&&(n.first_time.explore=!1,v(w.exploreIntroduction)),Ie.roomLoop()})($e[n.current_floor])}else if(\"shop\"==e||\"sh\"==e){const e=N[n.current_floor];Y(e,ta)}else\"crafting\"==e||\"c\"==e?U(ta):\"settings\"==e||\"se\"==e?me(ta):\"gold\"==e?(A([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),S(oa),n.player.gold+=700,Ce(n.player)):\"lv\"==e?(n.player.exp=r[n.player.level],Xe(),A([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),S(oa)):\"battle\"==e?Ze.battleProcessing(n.player,j.dark_beast,ta):(v(\"<br>Invalid input\"),A([\"explore\",\"shop\",\"equip\",\"stats\",\"crafting\",\"settings\",\"ascend\"]),S(oa))},ra=()=>{const e=n;e.current_floor==e.max_floor&&(v(`<h2><b><span style=\"color:green\">FLOOR ${e.current_floor} COMPLETED!!</span></b></h2>`),e.max_floor+=1,e.current_floor>s.max&&v(\"You have now completed the highest possible floor. You will be able to access the next floor once it is released!\")),ta()};v(\"<br>Welcome to Tower RPG!\"),null==localStorage.getItem(\"save1Player\")?(v(\"Please enter your name\"),S(na)):((e=>{const a=n,t=JSON.parse(localStorage.getItem(e+\"Player\"));console.log(t),_e(a,t)})(\"save1\"),(e=>{const a=o,t=JSON.parse(localStorage.getItem(e+\"Settings\"));_e(a,t)})(\"save1\"),(e=>{const a=f,t=JSON.parse(localStorage.getItem(e+\"Flags\"));_e(a,t)})(\"save1\"),(e=>{const a=d,t=JSON.parse(localStorage.getItem(e+\"Disciplines\"));be(a,t)})(\"save1\"),R(),ta())}]);","extractedComments":[]}